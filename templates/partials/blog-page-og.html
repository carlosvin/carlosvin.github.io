{# Enhanced metadata and OpenGraph for blog pages #}

{# Set title variable: prefer page over section over config #}

{# Title and og:title #}
<meta property="og:title" content="{{ title }}">
<meta property="og:description" content="{{ description }}">


{# Canonical URL and og:url #}
{% set canonical_url = page.permalink | default(value=current_url) | default(value=config.base_url) %}
<link rel="canonical" href="{{ canonical_url }}">
<meta property="og:url" content="{{ canonical_url }}">

{# og:type: article for blog posts #}
<meta property="og:type" content="article">

{# og:site_name #}
<meta property="og:site_name" content="{{ config.title }}">

{# og:locale #}
<meta property="og:locale" content="{{ config.extra.og_locale | default(value='en_US') }}">

{# Article published/modified time #}
{% if page.date %}
<meta property="article:published_time" content="{{ page.date | date(format='%Y-%m-%dT%H:%M:%SZ') }}">
{% endif %}
{% if page.updated %}
<meta property="article:modified_time" content="{{ page.updated | date(format='%Y-%m-%dT%H:%M:%SZ') }}">
{% endif %}

{% if page.taxonomies.tags %}
{% for tag in page.taxonomies.tags %}
<meta property="article:tag" content="{{ tag }}">
{% endfor %}
{% endif %}

{# og:image: use page.preview_image or fallback #}
{% set og_image = page.preview_image | default(value=config.extra.preview_image) %}
{% if og_image %}
<meta property="og:image" content="{{ og_image }}">
{% endif %}

{# Twitter Card #}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ title }}">
<meta name="twitter:description" content="{{ description }}">
{% if og_image %}
<meta name="twitter:image" content="{{ og_image }}">
{% endif %}
{% if config.extra.twitter_site %}
<meta name="twitter:site" content="{{ config.extra.twitter_site }}">
{% endif %}