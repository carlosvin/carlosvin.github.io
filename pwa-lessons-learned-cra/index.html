<!DOCTYPE html>
<html lang="en">

<head>
  
  
  
  <title>Create a PWA with Create React App: Lessons Learned</title>

  
  
  
  <meta name="description" content="Lessons learned while developing a PWA with CRA: Budget Tracker">
  
  <meta name="keywords" content="react,typescript,pwa,firebase,frontend,web-development,cra,create react app,firestore,svelte,sapper">
  
  <meta name="robots" content="index, follow">


  <!-- Meta tags and OpenGraph metadata for SEO, social sharing, and browser configuration -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Carlos Martin Sanchez">
  
  <link rel="alternate" type="application/rss+xml" title="RSS"
    href="https://carlosvin.github.io/rss.xml">
  

  




<meta property="og:title" content="Create a PWA with Create React App: Lessons Learned">
<meta property="og:description" content="Lessons learned while developing a PWA with CRA: Budget Tracker">




<link rel="canonical" href="https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;">
<meta property="og:url" content="https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;">


<meta property="og:type" content="article">


<meta property="og:site_name" content="My software engineering journey">


<meta property="og:locale" content="en_US">



<meta property="article:published_time" content="2019-11-04T00:00:00Z">


<meta property="article:modified_time" content="2020-06-10T00:00:00Z">




<meta property="article:tag" content="react">

<meta property="article:tag" content="typescript">

<meta property="article:tag" content="pwa">

<meta property="article:tag" content="firebase">

<meta property="article:tag" content="frontend">

<meta property="article:tag" content="web-development">

<meta property="article:tag" content="cra">

<meta property="article:tag" content="create react app">

<meta property="article:tag" content="firestore">

<meta property="article:tag" content="svelte">

<meta property="article:tag" content="sapper">






<meta property="og:image" content="&#x2F;img&#x2F;android-chrome-192x192.png">



<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Create a PWA with Create React App: Lessons Learned">
<meta name="twitter:description" content="Lessons learned while developing a PWA with CRA: Budget Tracker">

<meta name="twitter:image" content="&#x2F;img&#x2F;android-chrome-192x192.png">


  






<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https:&#x2F;&#x2F;carlosvin.github.io/#website",
      "url": "https:&#x2F;&#x2F;carlosvin.github.io",
      "name": "My software engineering journey",
      "description": "Documenting a personal journey through software engineering, AI, and programming. This blog features deep dives, practical guides, and recent learnings for both seasoned and aspiring developers.",
      "publisher": {
        "@id": "https:&#x2F;&#x2F;carlosvin.github.io/#person"
      },
      "potentialAction": [
        {
          "@type": "SearchAction",
          "target": {
            "@type": "EntryPoint",
            "urlTemplate": "https:&#x2F;&#x2F;carlosvin.github.io/search?q={search_term_string}"
          },
          "query-input": "required name=search_term_string"
        }
      ]
    },
    {
      "@type": "Person",
      "@id": "https:&#x2F;&#x2F;carlosvin.github.io/#person",
      "name": "Carlos Martin Sanchez",
      "url": "https:&#x2F;&#x2F;carlosvin.github.io",
      "sameAs": [
        
      ]
    },
    
    {
      "@type": "BlogPosting",
      "@id": "https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;/#article",
      "isPartOf": {
        "@id": "https:&#x2F;&#x2F;carlosvin.github.io/#website"
      },
      "author": {
        "@id": "https:&#x2F;&#x2F;carlosvin.github.io/#person"
      },
      "headline": "Create a PWA with Create React App: Lessons Learned",
      "description": "Lessons learned while developing a PWA with CRA: Budget Tracker",
      "datePublished": "2019-11-04T00:00:00Z",
      "dateModified": "2020-06-10T00:00:00Z",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;"
      },
      "url": "https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;",
      "image": "&#x2F;img&#x2F;android-chrome-192x192.png",
      "publisher": {
        "@id": "https:&#x2F;&#x2F;carlosvin.github.io/#person"
      },
      "articleSection": "Blog",
      "keywords": [
        "react",
        "typescript",
        "pwa",
        "firebase",
        "frontend",
        "web-development",
        "cra",
        "create react app",
        "firestore",
        "svelte",
        "sapper"
        
      ],
      "inLanguage": "en",
      "wordCount": 2469,
      "copyrightYear": 2019,
      "copyrightHolder": {
        "@id": "https:&#x2F;&#x2F;carlosvin.github.io/#person"
      }
    },
    {
      "@type": "WebPage",
      "@id": "https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;",
      "url": "https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;",
      "name": "Create a PWA with Create React App: Lessons Learned",
      "isPartOf": {
        "@id": "https:&#x2F;&#x2F;carlosvin.github.io/#website"
      },
      "about": {
        "@id": "https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;/#article"
      },
      "description": "Lessons learned while developing a PWA with CRA: Budget Tracker",
      "breadcrumb": {
        "@id": "https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;/#breadcrumb"
      },
      "inLanguage": "en",
      "potentialAction": [
        {
          "@type": "ReadAction",
          "target": ["https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;"]
        }
      ]
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;/#breadcrumb",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https:&#x2F;&#x2F;carlosvin.github.io"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Create a PWA with Create React App: Lessons Learned",
          "item": "https:&#x2F;&#x2F;carlosvin.github.io&#x2F;pwa-lessons-learned-cra&#x2F;"
        }
        ]
    }
    
  ]
}
</script>

  <!-- Links to files -->
  <link rel="stylesheet" href="https://carlosvin.github.io/css/base.css" rel=preconnect>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.lime.min.css" rel=preconnect>

  <!-- Favicons -->
  <link rel="icon" href="https://carlosvin.github.io/img/favicon.ico" sizes="any">
  <link rel="icon" href="https://carlosvin.github.io/img/favicon-32x32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="https://carlosvin.github.io/img/android-chrome-192x192.png" sizes="192x192" type="image/png">
  <link rel="apple-touch-icon" href="https://carlosvin.github.io/img/apple-touch-icon.png">

  <link rel="manifest" href="https://carlosvin.github.io/manifest.json"> <!-- Scripts -->
  <script type="speculationrules">
    {
    "prerender": [
        {
        "where": {
            "selector_matches": "a"
        }
        }
    ]
    }
  </script>
  <script type="text/javascript">
    (function (c, l, a, r, i, t, y) {
      c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
      t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
      y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
    })(window, document, "clarity", "script", "58k0hy1db4");
  </script>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="b33a381d-0843-4a11-b306-74c285c39206"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"
    integrity="sha512-0QarUp4p9r5IqUgSRyP89BHga45OpEd7VR8lbRkJkf48p/EhcU742fWUpKpoDyu9N6XYAEq/vz6m6z1OolnsDw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" defer async></script>
  <script src="https://cdn.jsdelivr.net/npm/theme-change@2.5.0/index.js"></script>
</head>

<body class="container">
  <header>
    <nav>
  <ul>
    <li>
      <details class="dropdown">
        <summary role="button" class="outline"><img src="https://carlosvin.github.io/img/android-chrome-192x192.png"
            alt="Menu" style="height:2rem;vertical-align:middle;border-radius:8px;"></summary>
        <ul>
          
          <li><a href="https://carlosvin.github.io/about">About</a></li>
          
          <li><a href="https://carlosvin.github.io/tags">Tags</a></li>
          <li>
            <label>
              Dark
              <input type="checkbox" data-toggle-theme="dark,light" role="switch">
            </label>
          </li>
        </ul>
      </details>
    </li>
    <li>
      <a href="https://carlosvin.github.io">My software engineering journey</a>
    </li>
  </ul>
  <ul>
    <li>
      <input id="search" type="search" placeholder="Search the posts" aria-label="Search">
    </li>
  </ul>

</nav>
    <div class="search-container">
      <div class="search-results">
        <div class="search-results__items"></div>
      </div>
    </div>
  </header>

  <main>
    
<article class="post">
  <header>
    <hgroup>
      <h1>Create a PWA with Create React App: Lessons Learned</h1>
      <p>
        

<time datetime="2020-06-10">
    June 10, 2020
</time>
â€¢ <time datetime="PT13M">13 min read</time> â€¢ <data
    value="2469">2469 words</data>
      </p>
      


<span class="tags">
    
    
    <small>
        <a href='https://carlosvin.github.io/tags/react/' title="All the posts in react"
            role="button" class="secondary outline">
            react
            
        </a>
    </small>
    
    
    <small>
        <a href='https://carlosvin.github.io/tags/typescript/' title="All the posts in typescript"
            role="button" class="secondary outline">
            typescript
            
        </a>
    </small>
    
    
    <small>
        <a href='https://carlosvin.github.io/tags/pwa/' title="All the posts in pwa"
            role="button" class="secondary outline">
            pwa
            
        </a>
    </small>
    
    
    <small>
        <a href='https://carlosvin.github.io/tags/firebase/' title="All the posts in firebase"
            role="button" class="secondary outline">
            firebase
            
        </a>
    </small>
    
    
    <small>
        <a href='https://carlosvin.github.io/tags/frontend/' title="All the posts in frontend"
            role="button" class="secondary outline">
            frontend
            
        </a>
    </small>
    
    
    <small>
        <a href='https://carlosvin.github.io/tags/web-development/' title="All the posts in web-development"
            role="button" class="secondary outline">
            web-development
            
        </a>
    </small>
    
    
    <small>
        <a href='https://carlosvin.github.io/tags/cra/' title="All the posts in cra"
            role="button" class="secondary outline">
            cra
            
        </a>
    </small>
    
    
    <small>
        <a href='https://carlosvin.github.io/tags/create-react-app/' title="All the posts in create react app"
            role="button" class="secondary outline">
            create react app
            
        </a>
    </small>
    
    
    <small>
        <a href='https://carlosvin.github.io/tags/firestore/' title="All the posts in firestore"
            role="button" class="secondary outline">
            firestore
            
        </a>
    </small>
    
    
    <small>
        <a href='https://carlosvin.github.io/tags/svelte/' title="All the posts in svelte"
            role="button" class="secondary outline">
            svelte
            
        </a>
    </small>
    
    
    <small>
        <a href='https://carlosvin.github.io/tags/sapper/' title="All the posts in sapper"
            role="button" class="secondary outline">
            sapper
            
        </a>
    </small>
    
</span>

    </hgroup>
  </header>

  
<aside class="sidebar">
  <details class="dropdown">
    <summary role="button" class="secondary">ðŸ“‘ Contents</summary>
    <ul>
      
      <li>
        <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#chosen-technology-stack-for-budget-tracker">Chosen Technology Stack for Budget Tracker</a>
        
      </li>
      
      <li>
        <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#create-react-application-cra">Create React Application: CRA</a>
        
        <ul>
          
          <li>
            <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#service-worker">Service worker</a>
          </li>
          
          <li>
            <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#web-worker">Web worker</a>
          </li>
          
          <li>
            <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#webpack">Webpack</a>
          </li>
          
        </ul>
        
      </li>
      
      <li>
        <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#firebase">Firebase</a>
        
        <ul>
          
          <li>
            <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#drawbacks">Drawbacks</a>
          </li>
          
          <li>
            <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#firebase-alternatives">Firebase alternatives</a>
          </li>
          
        </ul>
        
      </li>
      
      <li>
        <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#ui-components-library-material-ui">UI Components Library: Material UI</a>
        
      </li>
      
      <li>
        <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#charts-library">Charts library</a>
        
      </li>
      
      <li>
        <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#conclusion">Conclusion</a>
        
        <ul>
          
          <li>
            <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#do-not-go-for-cra-if">Do not go for CRA if</a>
          </li>
          
          <li>
            <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#do-not-go-for-firestore-if">Do not go for Firestore if</a>
          </li>
          
          <li>
            <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#do-not-go-blindly-for-the-best-charting-library">Do not go blindly for the best charting library</a>
          </li>
          
        </ul>
        
      </li>
      
      <li>
        <a href="https://carlosvin.github.io/pwa-lessons-learned-cra/#what-next">What next?</a>
        
      </li>
      
    </ul>
  </details>
</aside>


  <section class="post-content">
    <p>I started working with <a href="https://reactjs.org">React</a> few year ago, always the project creation was from scratch, not using any template/scaffolding. Regarding bundlers normally I used either <a href="https://webpack.js.org">Webpack</a> at work or <a href="https://parceljs.org">Parcel</a> for personal projects.</p>
<p>Few months ago, I wanted to start a personal project to keep track of my travel expenses. I was in a kind of rush because at that time, I was almost in the middle of my gap year, I wanted to focus on implementing main functionality and get an <a href="https://en.wikipedia.org/wiki/Minimum_viable_product">MVP</a> (minimum viable product) the sooner the better, so I thought it was the right time to try out <a href="https://create-react-app.dev">Create React App</a> or <a href="https://create-react-app.dev">CRA</a>.</p>
<blockquote>
<p><strong>Note</strong>: <a href="https://create-react-app.dev">CRA</a> allows you to have a production ready <a href="https://developers.google.com/web/progressive-web-apps/">PWA</a> in <a href="https://reactjs.org">React</a> quickly, which is awesome. They take care of configuration and package dependencies, you only have to take care of dependencies you need for your project and of course, implement your project, <a href="https://create-react-app.dev">CRA</a> is good, but is not magic.</p>
</blockquote>
<p>As I said, I wanted to be implementing business logic ASAP, so together with using <a href="https://create-react-app.dev">CRA</a>, I also took other decisions/shortcuts driven by the need of speeding up the development pace, I will talk about those choices in following sections describing some drawbacks and benefits.</p>
<h2 id="chosen-technology-stack-for-budget-tracker">Chosen Technology Stack for <a href="https://btapp.netlify.com">Budget Tracker</a></h2>
<ul>
<li><a href="https://create-react-app.dev">CRA</a></li>
<li><a href="https://reactjs.org">React</a></li>
<li><a href="https://www.typescriptlang.org">Typescript</a></li>
<li><a href="https://material-ui.com">Material UI</a></li>
<li><del><a href="https://formidable.com/open-source/victory">Victory</a></del> <a href="https://frappe.io/charts">Frappe charts</a></li>
<li><a href="https://firebase.google.com/docs/firestore">Firestore</a></li>
<li><a href="https://firebase.google.com/docs/auth">Firebase Authentication</a></li>
</ul>
<p>So far I am quite happy with the outcome, but with the lessons learned while developing this app, <strong>in the future, with enough time, most likely I will not choose same technology stack again</strong>. You can try the application <a href="https://btapp.netlify.com">Budget Tracker</a> and judge for yourself.</p>
<p>Along this post I will describe what are, in my experience, the benefits and drawbacks of taking these shortcuts and technical decisions.</p>
<h2 id="create-react-application-cra">Create React Application: <a href="https://create-react-app.dev">CRA</a></h2>
<p><a href="https://create-react-app.dev">Create React App</a> doesnâ€™t support <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers">Web Workers</a> neither allows to customize <a href="https://developers.google.com/web/fundamentals/primers/service-workers">Service Worker</a> implementation without <a href="https://stackoverflow.com/questions/49737652/what-does-eject-do-in-create-react-app">ejecting</a>.</p>
<h3 id="service-worker">Service worker</h3>
<p>You might want to customize your <a href="https://developers.google.com/web/fundamentals/primers/service-workers">Service Worker</a> to send/receive <a href="https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage">post messages</a>, to perform <a href="https://wicg.github.io/BackgroundSync/spec/">background sync</a> or <a href="https://developer.mozilla.org/en/docs/Web/API/notification">show web notifications</a>. In that case, you will have to <a href="https://stackoverflow.com/questions/49737652/what-does-eject-do-in-create-react-app">eject your project</a> and maintain the configuration by yourself, which might imply a little bit of headache.</p>
<p>There are <a href="https://www.freecodecamp.org/news/how-to-customize-service-workers-with-create-react-app-4424dda6210c/">other options to customize service worker and avoid ejecting CRA</a>, but they are not straightforward enough for my taste.</p>
<h3 id="web-worker">Web worker</h3>
<p>If you need to perform any heavy processing without blocking the main thread, you can just use a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers">Web Workers</a>, but this feature is not supported by <a href="https://create-react-app.dev">CRA</a>. The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers">Web Workers</a> can communicate with main thread using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage">post messages</a> and it can also show <a href="https://medium.com/young-coder/a-simple-introduction-to-web-workers-in-javascript-b3504f9d9d1c">web push notifications</a>.</p>
<p>There are also <a href="https://medium.com/@danilog1905/how-to-use-web-workers-with-react-create-app-and-not-ejecting-in-the-attempt-3718d2a1166b">other options to use Web Workers in CRA and not eject</a>, but they imply quite some extra work.</p>
<h3 id="webpack">Webpack</h3>
<p><a href="https://webpack.js.org">Webpack</a> is the bundler used by <a href="https://create-react-app.dev">CRA</a>. You donâ€™t need to know much about it, unless you <a href="https://stackoverflow.com/questions/49737652/what-does-eject-do-in-create-react-app">eject your project</a>, then you will have to deal with <a href="https://webpack.js.org/configuration/">Webpack configuration file</a>, this is just a warning, just in case you are not comfortable with it.</p>
<h2 id="firebase">Firebase</h2>
<p><a href="https://btapp.netlify.com">Budget Tracker</a> supports data synchronization between different devices, so it requires a <a href="https://en.wikipedia.org/wiki/Front_and_back_ends">backend</a> side to deal with authentication and to save/read data remotely. I considered two options: <a href="https://firebase.google.com/">Firebase</a> or implement <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> API.</p>
<p>For this <a href="https://en.wikipedia.org/wiki/Front_and_back_ends">backend</a>, I chose <a href="https://firebase.google.com/">Firebase</a> because it is super easy to implement, because there is nothing to implement. You only have to configure <a href="https://support.google.com/firebase/answer/6400716?hl=en">authentication methods</a> and <a href="https://firebase.google.com/docs/firestore/security/get-started">security rules</a> for <a href="https://firebase.google.com/docs/firestore">Firestore</a>.</p>
<p>But <a href="https://firebase.google.com/">Firebase</a> brings some drawbacks you must know before choosing it.</p>
<h3 id="drawbacks">Drawbacks</h3>
<h4 id="bundle-size">Bundle size</h4>
<p>I got really shocked first time I analyzed <a href="https://btapp.netlify.com">Budget Tracker</a> bundle size after integrating it with <a href="https://firebase.google.com/">Firebase</a>, <strong>it grew around a 39%!</strong></p>
<ul>
<li>27% from <a href="https://firebase.google.com/docs/firestore">Firestore</a> library.</li>
<li>12% from <a href="https://firebase.google.com/docs/auth">Firebase Authentication</a> library.</li>
</ul>
<p>Happily <a href="https://btapp.netlify.com">Budget Tracker</a> implementation is following <a href="https://reactjs.org/docs/code-splitting.html">code-splitting</a> principle, so user experience was not really affected with this integration. But userâ€™s device will eventually have to download this extra 39% (<strong>539KB</strong>).</p>
<h4 id="offline-first-not-really">Offline first, not really</h4>
<blockquote>
<p><strong>Important</strong>: This section is not relevant if your use case doesnâ€™t imply saving data linked to the user.</p>
</blockquote>
<p><a href="https://firebase.google.com/docs/firestore">Firestore</a> requires user to be authenticated, but <a href="https://firebase.google.com/docs/auth/web/anonymous-auth">user can be anonymous</a>, this is really cool feature if you donâ€™t want to force the user to identify to use the app.</p>
<p>Another very useful and cool <a href="https://firebase.google.com/docs/firestore">Firestore</a> feature is that <a href="https://firebase.google.com/docs/firestore/manage-data/enable-offline">it supports offline mode</a>, so data can be saved and read even there is no Internet connection.</p>
<p>Anonymous user + offline mode features will allow an application to work as offline first.</p>
<p>Soâ€¦ what is this <em>Offline first, not really</em> issue about? Let me explain a tricky scenario. First time the application is opened, <a href="https://firebase.google.com/">Firebase</a> needs to authenticate the user, to do so, userâ€™s device has to be connected to Internet, so <strong>you have to consider following scenario</strong> and either be OK with it or deal with it:</p>
<ol>
<li><a href="https://developers.google.com/web/progressive-web-apps/">PWA</a> is installed in your device.</li>
<li>User is not authenticated.</li>
<li>Userâ€™s device is offline.</li>
<li>User opens the <a href="https://developers.google.com/web/progressive-web-apps/">PWA</a> and tries to save some data.</li>
<li><strong>That data wonâ€™t be saved correctly</strong>, because there is no user to link the data with, not even an anonymous user, because application needs to call <a href="https://firebase.google.com/">Firebase</a> API to create an anonymous user.</li>
</ol>
<p>This is not big deal, because it will seldom occur. If you want to deal with it anyway, check next section explaining how and why I did deal with this scenario.</p>
<h5 id="how-did-i-deal-with-this-issue-with-budget-tracker">How did I deal with this issue with Budget Tracker?</h5>
<p>First of all, this <strong>might not be an issue for your use case</strong>, because it will happen only first time application is loaded. I just wanted <a href="https://btapp.netlify.com">Budget Tracker</a> to be fully offline first, because it brings other benefits.</p>
<h6 id="implementation-details">Implementation details</h6>
<ul>
<li>Implement 2 persistence layers: Local (<a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API">IndexedDB</a>) and Remote (<a href="https://firebase.google.com/docs/firestore">Firestore</a>).</li>
<li>Save always data locally, regardless user authentication status.</li>
<li>If there is any authenticated user, after saving to local layer, propagate same action to remote layer (<a href="https://firebase.google.com/docs/firestore">Firestore</a>) asynchronously.</li>
</ul>
<h6 id="benefits">Benefits</h6>
<ul>
<li>If user is not authenticated, <a href="https://btapp.netlify.com">Budget Tracker</a> wonâ€™t load <a href="https://firebase.google.com/docs/firestore">Firestore</a> client bundle. As I explained before, it is 27% of application size.</li>
<li>Application reads and writes are faster, because latest valid data is always saved locally.
<ul>
<li><strong>Clarification</strong>: Save data in <a href="https://firebase.google.com/docs/firestore">Firestore</a> is also fast, because data is also cached locally, but it does a little bit more than just saving to <a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API">IndexedDB</a> and you need an authenticated user.</li>
</ul>
</li>
</ul>
<p>You can find a <a href="https://github.com/carlosvin/budget-tracker/blob/master/doc/preformance.md#desktop-slow-clear-storage-0-budgets-1">more detailed performance report</a>, where I analyze 3 different implementations:</p>
<ol>
<li>Only <a href="https://firebase.google.com/docs/firestore">Firestore</a> client.</li>
<li>Local (<a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API">IndexedDB</a>) and remote (<a href="https://firebase.google.com/docs/firestore">Firestore</a>) persistence layers.</li>
<li>Same as previous one, but remote layer implemented in service worker.</li>
</ol>
<p>The performance results were in general better for option 2.</p>
<h4 id="data-model">Data model</h4>
<p>Firestore API is easy and intuitive, I really like it, but donâ€™t assume it will have same features as other document DBs or SQL DBs.</p>
<p>Check if <a href="https://googleapis.github.io/google-cloud-dotnet/docs/Google.Cloud.Firestore/datamodel.html">Firestore limitations</a> fit into your data model, or if it is not too late, define your data model following <a href="https://cloud.google.com/firestore/docs/best-practices">Firestore best practices</a> and having those limitations in mind.</p>
<h3 id="firebase-alternatives">Firebase alternatives</h3>
<p>Besides implementing a <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> API, there are other services similar to <a href="https://firebase.google.com/">Firebase</a> with smaller client bundle size and other features which might fit better to your requirements.</p>
<p>Consider other alternatives:</p>
<ul>
<li>Based on <a href="http://couchdb.apache.org/">Apache CouchDB</a>: <a href="https://pouchdb.com">PouchDB</a>, <a href="https://en.wikipedia.org/wiki/Cloudant">Cloudant</a>.</li>
<li>Based on <a href="https://parseplatform.org/">Parse server</a>: <a href="https://www.back4app.com">back4apps</a>.</li>
</ul>
<h2 id="ui-components-library-material-ui">UI Components Library: <a href="https://material-ui.com">Material UI</a></h2>
<p>I chose <a href="https://material-ui.com">Material UI</a>.</p>
<blockquote>
<p><a href="https://material-ui.com">Material UI</a>, from their web</p>
<p>React components for faster and easier web development. Build your own design system, or start with Material Design.</p>
</blockquote>
<p>There were two reasons which drove me to use <a href="https://material-ui.com">Material UI</a>:</p>
<ul>
<li>To create simple UI components which are accessible, <a href="https://material-ui.com/guides/responsive-ui/#responsive-ui">responsive</a> and with a consistent design is tricky and time consuming.</li>
<li>It has SVG set of <a href="https://material-ui.com/components/material-icons/">Material Icons</a>. <a href="https://btapp.netlify.com">Budget Tracker</a> allows to create categories defined by a name and a selectable icon, so this icon set was really convenient.</li>
</ul>
<p>There are some <strong>drawbacks</strong>, not very important in my opinion, maybe the most annoying for me is the first one:</p>
<ul>
<li><a href="https://jestjs.io/docs/en/snapshot-testing">Jest Snapshots</a> + <a href="https://material-ui.com">Material UI</a>: The snapshots are generated with <a href="https://material-ui.com">Material UI</a> CSS class names, but CSS classes order might not be deterministic, so a test might pass in your local host but not in <a href="https://en.wikipedia.org/wiki/Continuous_integration">CI</a> host. They are working on solve <a href="https://github.com/mui-org/material-ui/issues/14357">this issue, more info at github</a>.</li>
<li>Performance: There are some performance <a href="https://github.com/mui-org/material-ui/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+is%3Aopen+performance">issues in Github</a>. During last months, whilst Iâ€™ve been using this library, I can say they are working hard on fix them and bring new features.</li>
<li>UI components libraries are complex and do quite a lot work, so most of them are quite heavy. <a href="https://bundlephobia.com/result?p=@material-ui/core@4.5.2">Material UI bundle size weights: 304.2kB minified</a>. You can find some <a href="https://material-ui.com/guides/minimizing-bundle-size">recommendations to reduce bundle size at Material UI website</a>.</li>
</ul>
<h2 id="charts-library">Charts library</h2>
<p>Many of the chart libraries Iâ€™ve found are really powerful and complete, but they are also heavy because they depend on other third party libraries like <a href="https://d3js.org/">D3</a>.</p>
<p>Initially I chose <a href="https://formidable.com/open-source/victory">Victory</a>, but I realized that I only needed charts to show percentages and time series and <a href="https://formidable.com/open-source/victory">Victory</a>â€™s <a href="https://bundlephobia.com/result?p=victory@33.1.2">bundle size is 468KB minified</a>.</p>
<p>After quick search in the Internet I discovered other lighter alternatives:</p>
<ul>
<li><a href="https://frappe.io/charts">Frappe charts</a> <a href="https://bundlephobia.com/result?p=frappe-charts@1.3.0">63KB minified</a>.</li>
<li><a href="https://gionkunz.github.io/chartist-js">Chartist</a> <a href="https://bundlephobia.com/result?p=chartist@0.11.4">39KB minified</a>.</li>
</ul>
<p>I tried them and I liked both. I chose <a href="https://frappe.io/charts">Frappe charts</a> because I thought its default color scheme fits better with <a href="https://btapp.netlify.com">Budget Tracker</a> theme.</p>
<p>Both libraries come with more chart types than just bars and XY axis, take a quick look at their websites if you are interested about their supported chart set and to check how they look like.</p>
<h2 id="conclusion">Conclusion</h2>
<p>I will try to come up with a conclusion better than: <em>"It depends"</em>, <em>"Your use case will tell you"</em> and so on.</p>
<p>That said. It depends on your needs :p.</p>
<p>Seriously, letâ€™s play <em>"do not go for â€¦ if â€¦"</em>:</p>
<h3 id="do-not-go-for-cra-if">Do not go for CRA if</h3>
<ul>
<li>You want to customize <a href="https://developers.google.com/web/fundamentals/primers/service-workers">Service Worker</a> for <a href="https://developers.google.com/web/updates/2015/12/background-sync">Background sync</a> or <a href="https://developer.mozilla.org/en/docs/Web/API/notification">showing push notifications</a>.</li>
<li>You want to use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers">Web Workers</a>.</li>
</ul>
<h3 id="do-not-go-for-firestore-if">Do not go for Firestore if</h3>
<ul>
<li>You are aiming for your app to be hit by many users and you donâ€™t know the estimated amount of reads/writes, otherwise you might get surprised with the bill. <a href="https://firebase.google.com/docs/firestore">Firestore</a> scales like charm, maybe your budget doesnâ€™t.</li>
<li>Bundle size is critical for your web application. Remember that bundle size is not that critical if you are implementing a <a href="https://developers.google.com/web/progressive-web-apps/">PWA</a>, because your app files are cached.</li>
</ul>
<h3 id="do-not-go-blindly-for-the-best-charting-library">Do not go blindly for the best charting library</h3>
<p>First of all, check what kind of charts you need. In many applications you are OK with XY axis chart, time series, bars or pie charts. You can easily get an smaller bundle size by just using a simple charting library like <a href="https://frappe.io/charts">Frappe charts</a> or <a href="https://gionkunz.github.io/chartist-js">Chartist</a></p>
<blockquote>
<p><strong>Tip</strong>: Just check what are your requirements, if you are not sure about them, [Chosen Technology Stack for <a href="https://btapp.netlify.com">Budget Tracker</a>](#chosen-technology-stack-for-budget-tracker) consists of awesome products which most likely will fit your use case.</p>
</blockquote>
<h2 id="what-next">What next?</h2>
<p>My next technology stack bet goes for <a href="https://svelte.dev">Svelte</a>/<a href="https://sapper.svelte.dev">Sapper</a>, it is promising project, the results for small projects are really impressive, mainly in regards to bundle size, it is ridiculously small and development experience is quick and intuitive.</p>
<p>Iâ€™ve created a tiny <a href="https://developers.google.com/web/progressive-web-apps/">PWA</a> to estimate <a href="https://currency-loss.netlify.com">currency exchange loss</a> when you go to a money changer shop: <a href="https://currency-loss.netlify.com">currency-loss.netlify.com</a>. Note, I got that app up and running in few hours, thanks to <a href="https://svelte.dev">Svelte</a>.</p>

  </section>

  <footer>
    <script src="https://utteranc.es/client.js" repo="carlosvin/carlosvin.github.io" issue-term="title"
      theme="github-light" crossorigin="anonymous" async defer>
      </script>
  </footer>
</article>

  </main>

  <footer>
    <nav>
      <small>&copy; 2026 Carlos Martin Sanchez | Powered by <a
          href="https://www.getzola.org/">Zola</a>
      </small>
      <span style="display: flex; gap: 1rem; align-items: flex-end;">
  <a href="https://github.com/carlosvin" target="_blank" rel="noopener">
    <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/github.svg" alt="GitHub" width="32"
      height="32" />
  </a>
  <a href="https://linkedin.com/in/carlosvin" target="_blank" rel="noopener">
    <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/linkedin.svg" alt="LinkedIn" width="32"
      height="32" />
  </a>
  <a href="https://carlosvin.github.io/atom.xml">
    <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/rss.svg" alt="RSS" width="32" height="32">
  </a>
</span>
    </nav>
  </footer>

  <script src="https://carlosvin.github.io/js/search.js"></script>
</body>

</html>