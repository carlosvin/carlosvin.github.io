<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="What is going on in my mind and its surroundings">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Carlos says "bla bla"</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (es)" href="es/rss.xml">
<link rel="canonical" href="https://carlosvin.github.io/">
<link rel="next" href="index-2.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><meta name="google-site-verification" content="XzkYCjSblA4sHLJDa1Higd_O6P8hudmo6YJRDp5dDDc">
<link rel="prefetch" href="posts/choosing-modern-cpp-stack/" type="text/html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://carlosvin.github.io/">

                <span id="blog-title">Carlos says "bla bla"</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archives</a>
                </li>
<li>
<a href="categories/index.html">Tags</a>
                </li>
<li>
<a href="rss.xml">RSS</a>

                
            </li>
</ul>
<form method="get" action="http://www.google.com/search" class="navbar-form navbar-right" role="search">
<div class="form-group">
<input type="text" name="q" class="form-control" placeholder="Search">
</div>
<button type="submit" class="btn btn-primary">
	<span class="glyphicon glyphicon-search"></span>
</button>
<input type="hidden" name="sitesearch" value="https://carlosvin.github.io/">
</form>


            <ul class="nav navbar-nav navbar-right">
<li>
            </li>
<li><a href="https://carlosvin.github.io/es/" rel="alternate" hreflang="es">Español</a></li>

                
                    
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/choosing-modern-cpp-stack/" class="u-url">Choosing a Modern C++ stack</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/choosing-modern-cpp-stack/" rel="bookmark"><time class="published dt-published" datetime="2017-09-15T20:50:00+02:00" title="2017-09-15">2017-09-15</time></a></p>
                <p class="commentline">
        
    <a href="posts/choosing-modern-cpp-stack/#disqus_thread" data-disqus-identifier="cache/posts/choosing-modern-cpp-stack.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>I'm starting a new project in C++, but I've run into a pair of questions before start:</p>
<ol class="arabic simple">
<li>Which build system should I use?</li>
<li>Which unit testing framework?</li>
</ol>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li>
<a class="reference internal" href="posts/choosing-modern-cpp-stack/#choosing-build-system-meson" id="id2">Choosing Build System (Meson)</a><ul>
<li><a class="reference internal" href="posts/choosing-modern-cpp-stack/#cmake-vs-meson" id="id3">CMake vs Meson</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/choosing-modern-cpp-stack/#unit-testing-framework" id="id4">Unit Testing Framework</a><ul>
<li><a class="reference internal" href="posts/choosing-modern-cpp-stack/#doctest-a-catch-alternative" id="id5">doctest: A Catch alternative</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/choosing-modern-cpp-stack/#example" id="id6">Example</a><ul>
<li><a class="reference internal" href="posts/choosing-modern-cpp-stack/#project-output-artifacts" id="id7">Project output artifacts</a></li>
<li><a class="reference internal" href="posts/choosing-modern-cpp-stack/#project-structure-fork-project" id="id8">Project structure (Fork project)</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="choosing-build-system-meson">
<h2>Choosing Build System (<a class="reference external" href="http://mesonbuild.com/">Meson</a>)</h2>
<p>I have used before <a class="reference external" href="https://www.gnu.org/software/make/manual/make.html">Make</a>, <a class="reference external" href="https://maven.apache.org/">Maven</a>, <a class="reference external" href="http://scons.org/">Scons</a>, <a class="reference external" href="https://gradle.org/">Gradle</a> and <a class="reference external" href="http://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html">Autotools</a>, but I have some reasons to try find something else:</p>
<dl class="docutils">
<dt><a class="reference external" href="http://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html">Autotools</a></dt>
<dd>It is not easy to configure and maintain. There are several configuration files and several configuration steps.</dd>
<dt><a class="reference external" href="https://gradle.org/">Gradle</a></dt>
<dd>C++ feature is still incubating. Not very fast. You can check a similar example project at <a class="reference external" href="posts/gradle-cpp/">Build C++ project with Gradle</a>.</dd>
<dt><a class="reference external" href="https://www.gnu.org/software/make/manual/make.html">Make</a></dt>
<dd>I don't love the syntax.
Files tends to get messy as project grows.</dd>
<dt><a class="reference external" href="http://scons.org/">Scons</a></dt>
<dd>It is just slower and not as easy to understand than <a class="reference external" href="http://mesonbuild.com/">Meson</a>.</dd>
<dt><a class="reference external" href="https://maven.apache.org/">Maven</a></dt>
<dd>It is slow and you might end up "<em>Javatizing</em>" your C++ project structure.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">I've listed just things I don't like, those projects have other great features.</p>
</div>
<p>After discarding previous ones, I'm considering <a class="reference external" href="http://mesonbuild.com/">Meson</a> or <a class="reference external" href="https://cmake.org/">CMake</a>.</p>
<div class="section" id="cmake-vs-meson">
<h3>
<a class="reference external" href="https://cmake.org/">CMake</a> vs <a class="reference external" href="http://mesonbuild.com/">Meson</a>
</h3>
<dl class="docutils">
<dt><a class="reference external" href="https://cmake.org/">CMake</a></dt>
<dd>It has a big advantage over <a class="reference external" href="http://mesonbuild.com/">Meson</a>, it is mature and widely used in many projects, which means there are many examples and it will fulfill your C++ project building needs.</dd>
<dt><a class="reference external" href="http://mesonbuild.com/">Meson</a></dt>
<dd>It is a young project compared with <a class="reference external" href="https://cmake.org/">CMake</a>, but it is growing quite fast and it has been adopted in other big projects like <a class="reference external" href="https://www.gnome.org/">Gnome</a>, they have an initiative to <a class="reference external" href="https://wiki.gnome.org/Initiatives/GnomeGoals/MesonPorting">port from Autotools to Meson</a>.</dd>
</dl>
<p><strong>Finally I've chosen</strong> <a class="reference external" href="http://mesonbuild.com/">Meson</a> because:</p>
<ul class="simple">
<li>Syntax is really clear to me, when I read <cite>meson.build</cite> file I can quickly understand what is happening during build process.</li>
<li>It is fast. Altought it is written in <a class="reference external" href="https://python.org/">Python</a>, it generates a <a class="reference external" href="https://ninja-build.org/">Ninja</a> build project. First time you configure the project you has to run <a class="reference external" href="http://mesonbuild.com/">Meson</a>, but for building or testing you are actually running <a class="reference external" href="https://ninja-build.org/">Ninja</a>.</li>
</ul>
<pre class="code bash"><a name="rest_code_7c23617c136e4ff481e6e7eade317d93-1"></a>$ meson build . <span class="c1"># first time you configure the project</span>
<a name="rest_code_7c23617c136e4ff481e6e7eade317d93-2"></a>$ <span class="nb">cd</span> build
<a name="rest_code_7c23617c136e4ff481e6e7eade317d93-3"></a>$ ninja build   <span class="c1"># each time you build it</span>
<a name="rest_code_7c23617c136e4ff481e6e7eade317d93-4"></a>$ ninja <span class="nb">test</span>    <span class="c1"># each time you run tests</span>
</pre>
<p>I've found two interesting comparisons about available C++ build systems, they might be a little be biased because those comparisons come from <a class="reference external" href="http://mesonbuild.com/">Meson</a> and <a class="reference external" href="http://scons.org/">Scons</a>.</p>
<ul class="simple">
<li>
<a class="reference external" href="https://bitbucket.org/scons/scons/wiki/SconsVsOtherBuildTools">C++ build systems comparison from Scons</a>.</li>
<li>
<a class="reference external" href="http://mesonbuild.com/Simple-comparison.html">C++ build systems comparison from Meson</a>.</li>
</ul>
</div>
</div>
<div class="section" id="unit-testing-framework">
<h2><a class="toc-backref" href="posts/choosing-modern-cpp-stack/#id4">Unit Testing Framework</a></h2>
<p>I have used some <a class="reference external" href="https://en.wikipedia.org/wiki/XUnit">xUnit</a> based libraries like <a class="reference external" href="https://github.com/unittest-cpp/unittest-cpp">UnitTest++</a>, <a class="reference external" href="http://cpputest.github.io/">CppUTest</a> or <a class="reference external" href="https://github.com/google/googletest">Google Test</a> which match perfectly with <a class="reference external" href="https://github.com/google/googletest/tree/master/googlemock">Google Mock</a>.
If you want a safe bet that fulfills almost of your testing needs I highly recommend <a class="reference external" href="https://github.com/google/googletest">Google Test</a>.</p>
<p>But time ago I found a testing framework with some interesting features, <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a>:</p>
<ul class="simple">
<li>It is just a header file with no external dependencies, so very easy to start (wget + include downloaded file).</li>
<li>You can use normal unit test style or <a class="reference external" href="https://en.wikipedia.org/wiki/Behavior-driven_development">BDD</a>-style</li>
</ul>
<p>If you want to know more about <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a>, I recommend you to give it a try, it is a matter of 2 minutes to have a <a class="reference external" href="https://github.com/philsquared/Catch/blob/master/docs/tutorial.md#writing-tests">simple example up and running</a>. You can also read some interesting articles like <a class="reference external" href="https://github.com/philsquared/Catch/blob/master/docs/why-catch.md">Why do we need yet another C++ test framework?</a> or <a class="reference external" href="http://blog.coldflake.com/posts/Testing-C++-with-a-new-Catch/">Testing C++ With A New Catch</a>.</p>
<div class="section" id="doctest-a-catch-alternative">
<h3>
<a class="reference external" href="https://github.com/onqtam/doctest">doctest</a>: A <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a> alternative</h3>
<p>There is another testing framework named <a class="reference external" href="https://github.com/onqtam/doctest">doctest</a>, with same benefits as <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a>, but it promises to be faster and lighter (<a class="reference external" href="https://github.com/onqtam/doctest/blob/master/doc/markdown/benchmarks.md">benchmark results</a>) than <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a>.</p>
<p><a class="reference external" href="https://github.com/onqtam/doctest">doctest</a> is modeled after <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a> and some parts of the code have been taken directly, but there are <a class="reference external" href="https://github.com/onqtam/doctest/blob/master/doc/markdown/faq.md#how-is-doctest-different-from-catch">differences</a>.</p>
<p>It hasn't been easy to decide, both are really similar, you can <a class="reference external" href="https://github.com/carlosvin/uuid-cpp/pull/1/files#diff-d22d1e18ecbe7ba34523db56b011bcfe">check here differences</a> between project using <a class="reference external" href="https://github.com/onqtam/doctest">doctest</a> and project using <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a>.</p>
<p>I've finally chosen <a class="reference external" href="https://github.com/onqtam/doctest">doctest</a> because it promises to be faster: <a class="reference external" href="https://github.com/onqtam/doctest/blob/master/doc/markdown/benchmarks.md">benchmark results</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">I've created project using both frameworks you can find them in corresponding branches: <a class="reference external" href="https://github.com/carlosvin/uuid-cpp/tree/doctest">doctest branch</a> or <a class="reference external" href="https://github.com/carlosvin/uuid-cpp/tree/catch">catch branch</a>.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">You can see diferencies between projects at: <a class="reference external" href="https://github.com/carlosvin/uuid-cpp/pull/1">https://github.com/carlosvin/uuid-cpp/pull/1</a></p>
</div>
</div>
</div>
<div class="section" id="example">
<h2><a class="toc-backref" href="posts/choosing-modern-cpp-stack/#id6">Example</a></h2>
<p>I've created an example to illustrate this article: <a class="reference external" href="https://github.com/carlosvin/uuid-cpp">https://github.com/carlosvin/uuid-cpp</a>.</p>
<p>It is a basic implementation of UUID pseudo-random generator based on <a class="reference external" href="http://www.cplusplus.com/reference/random/mt19937/">mt19937</a> which is not cryptographically secure.</p>
<div class="section" id="project-output-artifacts">
<h3><a class="toc-backref" href="posts/choosing-modern-cpp-stack/#id7">Project output artifacts</a></h3>
<p>When we install the project using <a class="reference external" href="http://mesonbuild.com/">Meson</a> (<a class="reference external" href="https://ninja-build.org/">Ninja</a>), we will get some artifacts generated and copied in our system.</p>
<ul class="simple">
<li>Shared library: <code>libuuid</code>.</li>
<li>Header library for developers who want to use the shared library: <code>include/Uuid.h</code>.</li>
<li>Executable <code>uuidgen</code> (<a class="reference external" href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUID</a> generator).</li>
<li>Test executable (not installed). It tests shared library.</li>
</ul>
<p>For example, if you execute <code>ninja install</code> on Linux, you will get something like:</p>
<pre class="code bash"><a name="rest_code_335d81714fb04b9f8a137dfe84818909-1"></a>/usr/local/lib/libuuid.so
<a name="rest_code_335d81714fb04b9f8a137dfe84818909-2"></a>/usr/local/include/Uuid.h
<a name="rest_code_335d81714fb04b9f8a137dfe84818909-3"></a>/usr/local/bin/uuidgen
</pre>
</div>
<div class="section" id="project-structure-fork-project">
<h3>Project structure (<a class="reference external" href="https://github.com/carlosvin/uuid-cpp">Fork project</a>)</h3>
<ul>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/meson.build">meson.build</a></dt>
<dd>
<p class="first">Root project file configuration. It defines project properties and subdirectories.</p>
<div class="last"><pre class="code python"><a name="rest_code_8b8a40ff52074118b85b16d1056715d6-1"></a><span class="n">project</span><span class="p">(</span>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-2"></a>    <span class="s1">'cpp-meson-example'</span><span class="p">,</span> <span class="c1"># project name</span>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-3"></a>    <span class="s1">'cpp'</span><span class="p">,</span> <span class="c1"># C++ project, e.g: for C project</span>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-4"></a>    <span class="n">version</span> <span class="p">:</span> <span class="s1">'1.0.0'</span><span class="p">,</span>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-5"></a>    <span class="n">license</span> <span class="p">:</span> <span class="s1">'MIT'</span><span class="p">,</span>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-6"></a>    <span class="n">default_options</span> <span class="p">:</span> <span class="p">[</span><span class="s1">'cpp_std=c++11'</span><span class="p">])</span> <span class="c1"># compile for C++</span>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-7"></a>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-8"></a><span class="c1"># it will be referred from subdir projects</span>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-9"></a><span class="n">inc</span> <span class="o">=</span> <span class="n">include_directories</span><span class="p">(</span><span class="s1">'include'</span><span class="p">)</span>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-10"></a>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-11"></a><span class="c1"># meson will try to find a meson.build file inside following directories</span>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-12"></a><span class="n">subdir</span><span class="p">(</span><span class="s1">'include'</span><span class="p">)</span>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-13"></a><span class="n">subdir</span><span class="p">(</span><span class="s1">'src'</span><span class="p">)</span>
<a name="rest_code_8b8a40ff52074118b85b16d1056715d6-14"></a><span class="n">subdir</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span>
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/include/">include</a></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>meson.build</dt>
<dd>
<p class="first">Build configuration file for include directory.</p>
<div class="last"><pre class="code python"><a name="rest_code_4f95ce66074f4330a5c016d3506ebe97-1"></a><span class="c1"># Select header files to be installed</span>
<a name="rest_code_4f95ce66074f4330a5c016d3506ebe97-2"></a><span class="n">install_headers</span><span class="p">(</span><span class="s1">'Uuid.h'</span><span class="p">)</span>
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/include/Uuid.h">Uuid.h</a></dt>
<dd>
<p class="first">Header file, it is the library interface definition which will be included from projects using that library</p>
<div class="last"><pre class="code cpp"><a name="rest_code_dedf26612df84f77b2146097b5c8d53f-1"></a><span class="k">namespace</span> <span class="n">ids</span> <span class="p">{</span>
<a name="rest_code_dedf26612df84f77b2146097b5c8d53f-2"></a>
<a name="rest_code_dedf26612df84f77b2146097b5c8d53f-3"></a><span class="k">class</span> <span class="nc">Uuid</span> <span class="p">{</span>
<a name="rest_code_dedf26612df84f77b2146097b5c8d53f-4"></a>    <span class="k">private</span><span class="o">:</span>
<a name="rest_code_dedf26612df84f77b2146097b5c8d53f-5"></a>    <span class="c1">// ...</span>
</pre></div>
</dd>
</dl></li>
</ul></dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/src">src</a></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/src/meson.build">meson.build (src)</a></dt>
<dd>
<p class="first">It declares 2 output artifacts, library <code>libuuid</code> and executable <code>uuidgen</code>. Executable depends on the libary, it will use the libary to generate <a class="reference external" href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUID</a>.</p>
<div class="last"><pre class="code python"><a name="rest_code_b65a67347b054307b38dacf59702272a-1"></a><span class="n">libuuid</span> <span class="o">=</span> <span class="n">shared_library</span><span class="p">(</span>
<a name="rest_code_b65a67347b054307b38dacf59702272a-2"></a>    <span class="s1">'uuid'</span><span class="p">,</span> <span class="c1"># library name</span>
<a name="rest_code_b65a67347b054307b38dacf59702272a-3"></a>    <span class="s1">'Uuid.cpp'</span><span class="p">,</span> <span class="c1"># source files to be compile</span>
<a name="rest_code_b65a67347b054307b38dacf59702272a-4"></a>    <span class="n">include_directories</span> <span class="p">:</span> <span class="n">inc</span><span class="p">,</span> <span class="c1"># previously declared include directories in root :code:`meson.build`</span>
<a name="rest_code_b65a67347b054307b38dacf59702272a-5"></a>    <span class="n">install</span> <span class="p">:</span> <span class="n">true</span><span class="p">)</span> <span class="c1"># :code:`libuuid` will be part of project installation</span>
<a name="rest_code_b65a67347b054307b38dacf59702272a-6"></a>
<a name="rest_code_b65a67347b054307b38dacf59702272a-7"></a><span class="n">uuidgen</span> <span class="o">=</span> <span class="n">executable</span><span class="p">(</span>
<a name="rest_code_b65a67347b054307b38dacf59702272a-8"></a>    <span class="s1">'uuidgen'</span><span class="p">,</span> <span class="c1"># executable name</span>
<a name="rest_code_b65a67347b054307b38dacf59702272a-9"></a>    <span class="s1">'main.cpp'</span><span class="p">,</span> <span class="c1"># source files to compile</span>
<a name="rest_code_b65a67347b054307b38dacf59702272a-10"></a>    <span class="n">include_directories</span> <span class="p">:</span> <span class="n">inc</span><span class="p">,</span> <span class="c1"># previously declared include directories in root :code:`meson.build`</span>
<a name="rest_code_b65a67347b054307b38dacf59702272a-11"></a>    <span class="n">link_with</span> <span class="p">:</span> <span class="n">libuuid</span><span class="p">,</span> <span class="c1"># linking executable with shared previously declared shared library :code:`libuuid`</span>
<a name="rest_code_b65a67347b054307b38dacf59702272a-12"></a>    <span class="n">install</span> <span class="p">:</span> <span class="n">true</span><span class="p">)</span> <span class="c1"># :code:`uuidgen` executable be part of project installation</span>
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/src/main.cpp">main.cpp</a></dt>
<dd>
<p class="first">Entry point for main executable <code>uuidgen</code></p>
<div class="last"><pre class="code cpp"><a name="rest_code_834f9b045a5840d88e8e4dda506025e6-1"></a><span class="cp">#include</span> <span class="cpf">"Uuid.h"</span><span class="cp"></span>
<a name="rest_code_834f9b045a5840d88e8e4dda506025e6-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_834f9b045a5840d88e8e4dda506025e6-3"></a>
<a name="rest_code_834f9b045a5840d88e8e4dda506025e6-4"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_834f9b045a5840d88e8e4dda506025e6-5"></a><span class="p">{</span>
<a name="rest_code_834f9b045a5840d88e8e4dda506025e6-6"></a>    <span class="n">ids</span><span class="o">::</span><span class="n">Uuid</span> <span class="n">uuid</span><span class="p">;</span>
<a name="rest_code_834f9b045a5840d88e8e4dda506025e6-7"></a>    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">uuid</span><span class="p">.</span><span class="n">to_str</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a name="rest_code_834f9b045a5840d88e8e4dda506025e6-8"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_834f9b045a5840d88e8e4dda506025e6-9"></a><span class="p">}</span>
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/src/Uuid.cpp">Uuid.cpp</a></dt>
<dd>
<p class="first">Implementation of declared class in header file.</p>
<div class="last"><pre class="code cpp"><a name="rest_code_21de2e42311b49adbe7371bd21a3f04f-1"></a><span class="cp">#include</span> <span class="cpf">"Uuid.h"</span><span class="cp"></span>
<a name="rest_code_21de2e42311b49adbe7371bd21a3f04f-2"></a>
<a name="rest_code_21de2e42311b49adbe7371bd21a3f04f-3"></a><span class="n">Uuid</span><span class="o">::</span><span class="n">Uuid</span><span class="p">()</span>
<a name="rest_code_21de2e42311b49adbe7371bd21a3f04f-4"></a><span class="p">{</span> <span class="c1">// ...</span>
</pre></div>
</dd>
</dl></li>
</ul></dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/test/">test</a></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/test/meson.build">meson.build (test)</a></dt>
<dd>
<p class="first">File to configure tests build process.</p>
<div class="last"><pre class="code python"><a name="rest_code_c8ea0f0eba3b4a668f8069d2a475f12b-1"></a><span class="n">testexe</span> <span class="o">=</span> <span class="n">executable</span><span class="p">(</span>
<a name="rest_code_c8ea0f0eba3b4a668f8069d2a475f12b-2"></a>    <span class="s1">'testexe'</span><span class="p">,</span> <span class="c1"># test executable name</span>
<a name="rest_code_c8ea0f0eba3b4a668f8069d2a475f12b-3"></a>    <span class="s1">'uuid_test.cpp'</span><span class="p">,</span> <span class="c1"># tests source files to be compiled</span>
<a name="rest_code_c8ea0f0eba3b4a668f8069d2a475f12b-4"></a>    <span class="n">include_directories</span> <span class="p">:</span> <span class="n">inc</span><span class="p">,</span>  <span class="c1"># declared include directories in root :code:`meson.build`</span>
<a name="rest_code_c8ea0f0eba3b4a668f8069d2a475f12b-5"></a>    <span class="n">link_with</span> <span class="p">:</span> <span class="n">libuuid</span><span class="p">)</span> <span class="c1"># link test executable with previously declared shared library :code:`libuuid`</span>
<a name="rest_code_c8ea0f0eba3b4a668f8069d2a475f12b-6"></a>
<a name="rest_code_c8ea0f0eba3b4a668f8069d2a475f12b-7"></a><span class="c1"># test execution</span>
<a name="rest_code_c8ea0f0eba3b4a668f8069d2a475f12b-8"></a><span class="n">test</span><span class="p">(</span><span class="s1">'Uuid test'</span><span class="p">,</span> <span class="n">testexe</span><span class="p">)</span>
<a name="rest_code_c8ea0f0eba3b4a668f8069d2a475f12b-9"></a>
<a name="rest_code_c8ea0f0eba3b4a668f8069d2a475f12b-10"></a><span class="c1"># we can specify other test execution passing arguments or environment variables</span>
<a name="rest_code_c8ea0f0eba3b4a668f8069d2a475f12b-11"></a><span class="n">test</span><span class="p">(</span><span class="s1">'Uuid test with args and env'</span><span class="p">,</span> <span class="n">testexe</span><span class="p">,</span> <span class="n">args</span> <span class="p">:</span> <span class="p">[</span><span class="s1">'arg1'</span><span class="p">,</span> <span class="s1">'arg2'</span><span class="p">],</span> <span class="n">env</span> <span class="p">:</span> <span class="p">[</span><span class="s1">'FOO=bar'</span><span class="p">])</span>
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt>doctest.h</dt>
<dd>
<p class="first"><a class="reference external" href="https://github.com/onqtam/doctest">doctest</a> library in a single header file. You can try to automate library installation as part of your build process, but I haven't figure out yet a way to do it with <a class="reference external" href="http://mesonbuild.com/">Meson</a>. For now I've installed it manually:</p>
<div class="last"><pre class="code bash"><a name="rest_code_421050b0bcef4867bd143214992e364d-1"></a><span class="nb">cd</span> <span class="nb">test</span>
<a name="rest_code_421050b0bcef4867bd143214992e364d-2"></a>wget https://raw.githubusercontent.com/onqtam/doctest/master/doctest/doctest.h
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/test/uuid_test.cpp">uuid_test.cpp</a></dt>
<dd>
<p class="first">Tests implementation.</p>
<div class="last"><pre class="code cpp"><a name="rest_code_1dc186b6bb314651b2938e1e148336f1-1"></a> <span class="c1">// This tells doctest to provide a main() - only do this in one cpp file</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-2"></a><span class="cp">#define DOCTEST_CONFIG_IMPLEMENT_WITH_MAIN</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-3"></a>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-4"></a><span class="cp">#include</span> <span class="cpf">"doctest.h"</span><span class="cp"></span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-5"></a><span class="cp">#include</span> <span class="cpf">"Uuid.h"</span><span class="cp"></span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-6"></a><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-7"></a>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-8"></a><span class="k">constexpr</span> <span class="kt">int</span> <span class="n">MAX_ITERS</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-9"></a>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-10"></a><span class="n">TEST_CASE</span><span class="p">(</span> <span class="s">"Uuid"</span> <span class="p">)</span> <span class="p">{</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-11"></a>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">MAX_ITERS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-12"></a>        <span class="n">ids</span><span class="o">::</span><span class="n">Uuid</span> <span class="n">uuid</span><span class="p">;</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-13"></a>        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">uuid_str</span> <span class="p">{</span><span class="n">uuid</span><span class="p">.</span><span class="n">to_str</span><span class="p">()};</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-14"></a>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-15"></a>        <span class="n">MESSAGE</span><span class="p">(</span><span class="n">uuid_str</span><span class="p">);</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-16"></a>        <span class="n">CHECK</span><span class="p">(</span><span class="n">uuid</span><span class="p">.</span><span class="n">most</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-17"></a>        <span class="n">CHECK</span><span class="p">(</span><span class="n">uuid</span><span class="p">.</span><span class="n">least</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-18"></a>        <span class="n">CHECK</span><span class="p">(</span><span class="n">uuid_str</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">36</span><span class="p">);</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-19"></a>    <span class="p">}</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-20"></a><span class="p">}</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-21"></a>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-22"></a><span class="c1">// BDD style</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-23"></a>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-24"></a><span class="n">SCENARIO</span><span class="p">(</span> <span class="s">"UUID creation"</span> <span class="p">)</span> <span class="p">{</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-25"></a>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-26"></a>    <span class="n">GIVEN</span><span class="p">(</span> <span class="s">"A random UUID "</span> <span class="p">)</span> <span class="p">{</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-27"></a>        <span class="n">ids</span><span class="o">::</span><span class="n">Uuid</span> <span class="n">uuid</span><span class="p">;</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-28"></a>        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">uuid_str</span> <span class="p">{</span><span class="n">uuid</span><span class="p">.</span><span class="n">to_str</span><span class="p">()};</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-29"></a>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-30"></a>        <span class="n">CHECK</span><span class="p">(</span><span class="n">uuid_str</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">36</span><span class="p">);</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-31"></a>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-32"></a>        <span class="n">WHEN</span><span class="p">(</span> <span class="s">"get the most and least"</span> <span class="p">)</span> <span class="p">{</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-33"></a>            <span class="n">THEN</span><span class="p">(</span> <span class="s">"should be more than 0"</span> <span class="p">)</span> <span class="p">{</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-34"></a>                <span class="n">CHECK</span><span class="p">(</span> <span class="n">uuid</span><span class="p">.</span><span class="n">most</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-35"></a>                <span class="n">CHECK</span><span class="p">(</span> <span class="n">uuid</span><span class="p">.</span><span class="n">least</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-36"></a>            <span class="p">}</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-37"></a>        <span class="p">}</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-38"></a>    <span class="p">}</span>
<a name="rest_code_1dc186b6bb314651b2938e1e148336f1-39"></a><span class="p">}</span>
</pre></div>
</dd>
</dl></li>
</ul></dd>
</dl></li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">You can find how to build and test the example project at: <a class="reference external" href="https://github.com/carlosvin/uuid-cpp#how-to-build-the-example">https://github.com/carlosvin/uuid-cpp#how-to-build-the-example</a></p>
</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/recursive-directory-iterator/" class="u-url">Filesystem in C++17</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/recursive-directory-iterator/" rel="bookmark"><time class="published dt-published" datetime="2017-05-28T09:00:00+02:00" title="2017-05-28">2017-05-28</time></a></p>
                <p class="commentline">
        
    <a href="posts/recursive-directory-iterator/#disqus_thread" data-disqus-identifier="cache/posts/recursive-directory-iterator-cpp.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="posts/recursive-directory-iterator/#id4">Introduction</a></h2>
<p>Since C++17 new filesystem abstractions will be added to C++ environment. So far they are available as
<a class="reference external" href="http://en.cppreference.com/w/cpp/experimental">Experimental C++ Features</a>. If you want to dig more about this new library, here it is the <a class="reference external" href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4100.pdf">final draft of File System Technical Specification</a>.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="posts/recursive-directory-iterator/#introduction" id="id4">Introduction</a></li>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#gettting-started-with-experimental-filesystem-features-c-17-g" id="id5">Gettting started with Experimental Filesystem Features C++17 (g++)</a></li>
<li>
<a class="reference internal" href="posts/recursive-directory-iterator/#c-17-filesystem-features" id="id6">C++17 Filesystem Features</a><ul>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#std-filesystem-path" id="id7">std::filesystem::path</a></li>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#directory-separator" id="id8">Directory separator</a></li>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#directory-separator-operator" id="id9">Directory Separator Operator</a></li>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#create-remove-directories" id="id10">Create/Remove Directories</a></li>
</ul>
</li>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#full-example-recursive-directory-iterator" id="id11">Full example: Recursive Directory Iterator</a></li>
</ul>
</div>
</div>
<div class="section" id="gettting-started-with-experimental-filesystem-features-c-17-g">
<h2><a class="toc-backref" href="posts/recursive-directory-iterator/#id5">Gettting started with Experimental Filesystem Features C++17 (g++)</a></h2>
<p>We just have to "tell" compiler that we write C++17 code (<strong>-c++1z</strong>) and it has to add <em>standard library with filesystem library</em> (<strong>-lstdc++fs</strong>).</p>
<pre class="code bash"><a name="rest_code_15107144d0814f85adf7320fc17d68e8-1"></a>g++ -std<span class="o">=</span>c++1z main.cpp -lstdc++fs <span class="o">&amp;&amp;</span> ./a.out
</pre>
<p>Let's see a simple example with <tt class="docutils literal"><span class="pre">std::filesystem::path</span></tt> class.</p>
<pre class="code cpp"><a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-1"></a><span class="cp">#include</span> <span class="cpf">&lt;experimental/filesystem&gt;</span><span class="cp"></span>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-3"></a>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-4"></a><span class="k">namespace</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">filesystem</span><span class="p">;</span>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-5"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-6"></a>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-7"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-8"></a><span class="p">{</span>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-9"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">path</span> <span class="n">aPath</span> <span class="p">{</span><span class="s">"./path/to/file.txt"</span><span class="p">};</span>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-10"></a>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-11"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Parent path: "</span> <span class="o">&lt;&lt;</span> <span class="n">aPath</span><span class="p">.</span><span class="n">parent_path</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-12"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Filename: "</span> <span class="o">&lt;&lt;</span> <span class="n">aPath</span><span class="p">.</span><span class="n">filename</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-13"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Extension: "</span> <span class="o">&lt;&lt;</span> <span class="n">aPath</span><span class="p">.</span><span class="n">extension</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-14"></a>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-15"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_fe1a8a38008746189c99edc6a6dca3e9-16"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/9f8bebb8b7f0fbe7">Compile and run: Basic C++17 example</a></p>
<p>Run output is:</p>
<pre class="code bash"><a name="rest_code_fdf9934d35c3429a9dc3f6eb9606212d-1"></a>$ g++ -std<span class="o">=</span>c++1z main.cpp -lstdc++fs <span class="o">&amp;&amp;</span> ./a.out
<a name="rest_code_fdf9934d35c3429a9dc3f6eb9606212d-2"></a>$ ./a.out
<a name="rest_code_fdf9934d35c3429a9dc3f6eb9606212d-3"></a>
<a name="rest_code_fdf9934d35c3429a9dc3f6eb9606212d-4"></a>Parent path: <span class="s2">"./path/to"</span>
<a name="rest_code_fdf9934d35c3429a9dc3f6eb9606212d-5"></a>Filename: <span class="s2">"file.txt"</span>
<a name="rest_code_fdf9934d35c3429a9dc3f6eb9606212d-6"></a>Extension: <span class="s2">".txt"</span>
</pre>
</div>
<div class="section" id="c-17-filesystem-features">
<h2><a class="toc-backref" href="posts/recursive-directory-iterator/#id6">C++17 Filesystem Features</a></h2>
<p>In this section, we are going to explain some <a class="reference external" href="http://en.cppreference.com/w/cpp/filesystem">std::filesystem</a> features with examples, which will help us to highlight differences between C++11 and C++17 so we can get a better idea about what this new library will supply and how it might make developer's work easier.</p>
<div class="section" id="std-filesystem-path">
<h3><a class="toc-backref" href="posts/recursive-directory-iterator/#id7">std::filesystem::path</a></h3>
<p>Upper we have seen a tiny <a class="reference external" href="http://coliru.stacked-crooked.com/a/9f8bebb8b7f0fbe7">use case for std::filesystem::path</a>. That is a quite powerful and convenient feature that supplies an multi-platform abstraction for paths to files using the correct directory path separator depending on the platform we are building our application for (<tt class="docutils literal">\</tt> for Windows based systems and <tt class="docutils literal">/</tt> Unix based systems).</p>
</div>
<div class="section" id="directory-separator">
<h3><a class="toc-backref" href="posts/recursive-directory-iterator/#id8">Directory separator</a></h3>
<p>When we want our application to use the correct directory separator in C++11, we could use conditional macro declaration:</p>
<pre class="code cpp"><a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-1"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-2"></a>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-3"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-4"></a>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-5"></a><span class="cp">#ifdef _WIN32</span>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-6"></a><span class="k">const</span> <span class="n">string</span> <span class="n">SEP</span> <span class="o">=</span> <span class="s">"</span><span class="se">\\</span><span class="s">"</span><span class="p">;</span>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-7"></a><span class="cp">#else</span>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-8"></a><span class="k">const</span> <span class="n">string</span> <span class="n">SEP</span> <span class="o">=</span> <span class="s">"/"</span><span class="p">;</span>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-9"></a><span class="cp">#endif</span>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-10"></a>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-11"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-12"></a><span class="p">{</span>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-13"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Separator in my system "</span> <span class="o">&lt;&lt;</span> <span class="n">SEP</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-14"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_31fbcb5a6732444c8710e0c1064f8f58-15"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/5023ee989105fc54">Compile and run: C++11 separator example</a></p>
<p>With C++17 it is just simpler:</p>
<pre class="code cpp"><a name="rest_code_7b544d430c3e4f2d8caadbb105ed5332-1"></a><span class="cp">#include</span> <span class="cpf">&lt;experimental/filesystem&gt;</span><span class="cp"></span>
<a name="rest_code_7b544d430c3e4f2d8caadbb105ed5332-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_7b544d430c3e4f2d8caadbb105ed5332-3"></a>
<a name="rest_code_7b544d430c3e4f2d8caadbb105ed5332-4"></a><span class="k">namespace</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">filesystem</span><span class="p">;</span>
<a name="rest_code_7b544d430c3e4f2d8caadbb105ed5332-5"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_7b544d430c3e4f2d8caadbb105ed5332-6"></a>
<a name="rest_code_7b544d430c3e4f2d8caadbb105ed5332-7"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_7b544d430c3e4f2d8caadbb105ed5332-8"></a><span class="p">{</span>
<a name="rest_code_7b544d430c3e4f2d8caadbb105ed5332-9"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Separator in my system "</span> <span class="o">&lt;&lt;</span> <span class="n">fs</span><span class="o">::</span><span class="n">path</span><span class="o">::</span><span class="n">preferred_separator</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_7b544d430c3e4f2d8caadbb105ed5332-10"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_7b544d430c3e4f2d8caadbb105ed5332-11"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/1f2f63b3f5597d05">Compile and run: C++17 separator example</a></p>
</div>
<div class="section" id="directory-separator-operator">
<h3><a class="toc-backref" href="posts/recursive-directory-iterator/#id9">Directory Separator Operator</a></h3>
<p><a class="reference external" href="http://en.cppreference.com/w/cpp/filesystem/path">std::filesystem::path</a> implements <strong>/</strong> operator which allows to easily concatenate paths to files and directories.</p>
<p>When we want to concatenate paths in C++11, we have to add extra logic to avoid adding duplicate separators and to select the correct separator for target platform:</p>
<pre class="code cpp"><a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-1"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-2"></a>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-3"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-4"></a>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-5"></a><span class="cp">#ifdef _WIN32</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-6"></a><span class="k">const</span> <span class="n">string</span> <span class="n">SEP</span> <span class="o">=</span> <span class="s">"</span><span class="se">\\</span><span class="s">"</span><span class="p">;</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-7"></a><span class="cp">#else</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-8"></a><span class="k">const</span> <span class="n">string</span> <span class="n">SEP</span> <span class="o">=</span> <span class="s">"/"</span><span class="p">;</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-9"></a><span class="cp">#endif</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-10"></a>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-11"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-12"></a><span class="p">{</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-13"></a>    <span class="n">string</span> <span class="n">root</span> <span class="p">{</span><span class="s">"/"</span><span class="p">};</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-14"></a>    <span class="n">string</span> <span class="n">dir</span> <span class="p">{</span><span class="s">"var/www/"</span><span class="p">};</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-15"></a>    <span class="n">string</span> <span class="n">index</span> <span class="p">{</span><span class="s">"index.html"</span><span class="p">};</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-16"></a>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-17"></a>    <span class="n">string</span> <span class="n">pathToIndex</span><span class="p">{};</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-18"></a>    <span class="n">pathToIndex</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">root</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">SEP</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">dir</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">SEP</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-19"></a>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-20"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">pathToIndex</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-21"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_09fbe5d90d614a28913949b34d2bc24f-22"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/290b278ec1de9573">Compile and run: Concatenate paths in C++11</a>.</p>
<p>Checking program output we notice it is not fully correct, we should have checked whether path parts already contains a separator so we don't append another separator again.
That logic is already implemented in <a class="reference external" href="http://en.cppreference.com/w/cpp/filesystem/path">std::filesystem::path</a>, so C++17 can be like:</p>
<pre class="code cpp"><a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-1"></a><span class="cp">#include</span> <span class="cpf">&lt;experimental/filesystem&gt;</span><span class="cp"></span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-3"></a>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-4"></a><span class="k">namespace</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">filesystem</span><span class="p">;</span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-5"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-6"></a>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-7"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-8"></a><span class="p">{</span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-9"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">path</span> <span class="n">root</span> <span class="p">{</span><span class="s">"/"</span><span class="p">};</span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-10"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">path</span> <span class="n">dir</span> <span class="p">{</span><span class="s">"var/www/"</span><span class="p">};</span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-11"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">path</span> <span class="n">index</span> <span class="p">{</span><span class="s">"index.html"</span><span class="p">};</span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-12"></a>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-13"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">path</span> <span class="n">pathToIndex</span> <span class="o">=</span> <span class="n">root</span> <span class="o">/</span> <span class="n">dir</span> <span class="o">/</span> <span class="n">index</span><span class="p">;</span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-14"></a>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-15"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">pathToIndex</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-16"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_39c611191abe4b8ba5a351c10740d6b5-17"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/a24d50875b4daad1">Compile and run: Concatenate paths in C++17</a>.
Code is cleaner and just correct, there are no duplicated separators.</p>
</div>
<div class="section" id="create-remove-directories">
<h3><a class="toc-backref" href="posts/recursive-directory-iterator/#id10">Create/Remove Directories</a></h3>
<p><a class="reference external" href="http://en.cppreference.com/w/cpp/filesystem">std::filesystem</a> comes with some utilities to create and remove files and directories, but firstly let's check out a way to do so in C++11.</p>
<pre class="code cpp"><a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-1"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-2"></a><span class="cp">#include</span> <span class="cpf">&lt;cstdio&gt;</span><span class="cp"></span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-3"></a><span class="cp">#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp"></span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-4"></a>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-5"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-6"></a>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-7"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-8"></a><span class="p">{</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-9"></a>    <span class="k">auto</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">S_IRWXU</span> <span class="o">|</span> <span class="n">S_IRWXG</span> <span class="o">|</span> <span class="n">S_IROTH</span> <span class="o">|</span> <span class="n">S_IXOTH</span><span class="p">;</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-10"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox"</span><span class="p">,</span> <span class="n">opts</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-11"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/a"</span><span class="p">,</span> <span class="n">opts</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-12"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/a/b"</span><span class="p">,</span> <span class="n">opts</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-13"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/c"</span><span class="p">,</span> <span class="n">opts</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-14"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/c/d"</span><span class="p">,</span> <span class="n">opts</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-15"></a>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-16"></a>    <span class="n">system</span><span class="p">(</span><span class="s">"ls -la sandbox/*"</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-17"></a>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-18"></a>    <span class="n">remove</span><span class="p">(</span><span class="s">"sandbox/c/d"</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-19"></a>    <span class="n">remove</span><span class="p">(</span><span class="s">"sandbox/a/b"</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-20"></a>    <span class="n">remove</span><span class="p">(</span><span class="s">"sandbox/c"</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-21"></a>    <span class="n">remove</span><span class="p">(</span><span class="s">"sandbox/a"</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-22"></a>    <span class="n">remove</span><span class="p">(</span><span class="s">"sandbox"</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-23"></a>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-24"></a>    <span class="n">system</span><span class="p">(</span><span class="s">"ls -la"</span><span class="p">);</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-25"></a>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-26"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_09eb383fdd4c4c3dacf0027da87dd939-27"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/26f4763ec5b42adb">Compile and run: Create and remove directories C++11</a>.
We have to create/remove one by one. We could rewrite this code snippet with less lines (using a loop), but we still have to pay attention to creation/deletion order, we cannot remove parent directory before we have removed all children.</p>
<p>Since C++17 we can create and remove nested directories with just one call.</p>
<pre class="code cpp"><a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-1"></a><span class="cp">#include</span> <span class="cpf">&lt;experimental/filesystem&gt;</span><span class="cp"></span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-3"></a>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-4"></a><span class="k">namespace</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">filesystem</span><span class="p">;</span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-5"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-6"></a>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-7"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-8"></a><span class="p">{</span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-9"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">create_directories</span><span class="p">(</span><span class="s">"sandbox/a/b"</span><span class="p">);</span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-10"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">create_directories</span><span class="p">(</span><span class="s">"sandbox/c/d"</span><span class="p">);</span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-11"></a>    <span class="n">system</span><span class="p">(</span><span class="s">"ls -la sandbox/*"</span><span class="p">);</span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-12"></a>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-13"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Were directories removed? "</span> <span class="o">&lt;&lt;</span> <span class="n">fs</span><span class="o">::</span><span class="n">remove_all</span><span class="p">(</span><span class="s">"sandbox"</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-14"></a>    <span class="n">system</span><span class="p">(</span><span class="s">"ls -la"</span><span class="p">);</span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-15"></a>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-16"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_6985e0192a7f4a06bad2a3cbe42d9838-17"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/62c2d22fa0e7144c">Compile and run: Create and remove directories C++17</a>.</p>
</div>
</div>
<div class="section" id="full-example-recursive-directory-iterator">
<h2><a class="toc-backref" href="posts/recursive-directory-iterator/#id11">Full example: Recursive Directory Iterator</a></h2>
<p>This example consists of iterate recursively through dicrectories fintering files by extension.</p>
<p>To keep C++11 example simple, I haven't added filtering logic, but it is in C++17 example:</p>
<p><a class="reference external" href="listings/recursive-directory/filesystem.11.cpp.html">recursive-directory/filesystem.11.cpp</a>  <a class="reference external" href="listings/recursive-directory/filesystem.11.cpp">(Source)</a></p>
<pre class="code cpp"><a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-1"></a><span class="cp">#include</span> <span class="cpf">&lt;dirent.h&gt;</span><span class="cp"></span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-2"></a><span class="cp">#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp"></span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-3"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-4"></a><span class="cp">#include</span> <span class="cpf">&lt;fstream&gt; // std::ofstream</span><span class="cp"></span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-5"></a><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-6"></a><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"></span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-7"></a><span class="cp">#include</span> <span class="cpf">&lt;system_error&gt;</span><span class="cp"></span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-8"></a><span class="cp">#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp"></span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-9"></a>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-10"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-11"></a>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-12"></a><span class="k">const</span> <span class="n">string</span> <span class="n">UP_DIR</span> <span class="o">=</span> <span class="s">".."</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-13"></a><span class="k">const</span> <span class="n">string</span> <span class="n">CURRENT_DIR</span> <span class="o">=</span> <span class="s">"."</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-14"></a><span class="k">const</span> <span class="n">string</span> <span class="n">SEP</span> <span class="o">=</span> <span class="s">"/"</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-15"></a>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-16"></a>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-17"></a><span class="n">string</span> <span class="nf">path</span><span class="p">(</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">parts</span><span class="p">)</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-18"></a><span class="p">{</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-19"></a>    <span class="n">string</span> <span class="n">pathTmp</span> <span class="p">{};</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-20"></a>    <span class="n">string</span> <span class="n">separator</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-21"></a>    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="nl">part</span><span class="p">:</span> <span class="n">parts</span><span class="p">)</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-22"></a>    <span class="p">{</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-23"></a>        <span class="n">pathTmp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">separator</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">part</span><span class="p">);</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-24"></a>        <span class="n">separator</span> <span class="o">=</span> <span class="n">SEP</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-25"></a>    <span class="p">}</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-26"></a>    <span class="k">return</span> <span class="n">pathTmp</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-27"></a><span class="p">}</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-28"></a>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-29"></a><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">getDirectoryFiles</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">dir</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">extensions</span><span class="p">)</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-30"></a><span class="p">{</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-31"></a>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">files</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-32"></a>    <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="kt">DIR</span><span class="o">&gt;</span> <span class="n">directory_ptr</span><span class="p">(</span><span class="n">opendir</span><span class="p">(</span><span class="n">dir</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="p">[](</span><span class="kt">DIR</span><span class="o">*</span> <span class="n">dir</span><span class="p">){</span> <span class="n">dir</span> <span class="o">&amp;&amp;</span> <span class="n">closedir</span><span class="p">(</span><span class="n">dir</span><span class="p">);</span> <span class="p">});</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-33"></a>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">directory_ptr</span><span class="p">)</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-34"></a>    <span class="p">{</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-35"></a>        <span class="k">throw</span> <span class="n">system_error</span><span class="p">(</span><span class="n">error_code</span><span class="p">(</span><span class="n">errno</span><span class="p">,</span> <span class="n">system_category</span><span class="p">()),</span> <span class="s">"Error opening : "</span> <span class="o">+</span> <span class="n">dir</span><span class="p">);</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-36"></a>    <span class="p">}</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-37"></a>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-38"></a>    <span class="k">struct</span> <span class="n">dirent</span> <span class="o">*</span><span class="n">dirent_ptr</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-39"></a>    <span class="k">while</span> <span class="p">((</span><span class="n">dirent_ptr</span> <span class="o">=</span> <span class="n">readdir</span><span class="p">(</span><span class="n">directory_ptr</span><span class="p">.</span><span class="n">get</span><span class="p">()))</span> <span class="o">!=</span> <span class="k">nullptr</span><span class="p">)</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-40"></a>    <span class="p">{</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-41"></a>        <span class="k">const</span> <span class="n">string</span> <span class="n">fileName</span> <span class="p">{</span><span class="n">dirent_ptr</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">};</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-42"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">dirent_ptr</span><span class="o">-&gt;</span><span class="n">d_type</span> <span class="o">==</span> <span class="n">DT_DIR</span><span class="p">)</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-43"></a>        <span class="p">{</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-44"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">CURRENT_DIR</span> <span class="o">!=</span> <span class="n">fileName</span> <span class="o">&amp;&amp;</span> <span class="n">UP_DIR</span> <span class="o">!=</span> <span class="n">fileName</span><span class="p">)</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-45"></a>            <span class="p">{</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-46"></a>                <span class="k">auto</span> <span class="n">subFiles</span> <span class="o">=</span> <span class="n">getDirectoryFiles</span><span class="p">(</span><span class="n">path</span><span class="p">({</span><span class="n">dir</span><span class="p">,</span> <span class="n">fileName</span><span class="p">}),</span> <span class="n">extensions</span><span class="p">);</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-47"></a>                <span class="n">files</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">end</span><span class="p">(</span><span class="n">files</span><span class="p">),</span> <span class="n">begin</span><span class="p">(</span><span class="n">subFiles</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">subFiles</span><span class="p">));</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-48"></a>            <span class="p">}</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-49"></a>        <span class="p">}</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-50"></a>        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dirent_ptr</span><span class="o">-&gt;</span><span class="n">d_type</span> <span class="o">==</span> <span class="n">DT_REG</span><span class="p">)</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-51"></a>        <span class="p">{</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-52"></a>            <span class="c1">// here we should check also if filename has an extension in extensions vector</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-53"></a>            <span class="n">files</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">({</span><span class="n">dir</span><span class="p">,</span> <span class="n">fileName</span><span class="p">}));</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-54"></a>        <span class="p">}</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-55"></a>    <span class="p">}</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-56"></a>    <span class="k">return</span> <span class="n">files</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-57"></a><span class="p">}</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-58"></a>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-59"></a><span class="kt">int</span> <span class="n">main</span> <span class="p">()</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-60"></a><span class="p">{</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-61"></a>    <span class="k">auto</span> <span class="n">opt</span> <span class="o">=</span> <span class="n">S_IRWXU</span> <span class="o">|</span> <span class="n">S_IRWXG</span> <span class="o">|</span> <span class="n">S_IROTH</span> <span class="o">|</span> <span class="n">S_IXOTH</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-62"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox"</span><span class="p">,</span> <span class="n">opt</span><span class="p">);</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-63"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/a"</span><span class="p">,</span> <span class="n">opt</span><span class="p">);</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-64"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/a/b"</span><span class="p">,</span> <span class="n">opt</span><span class="p">);</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-65"></a>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-66"></a>        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">e_files</span> <span class="o">=</span> <span class="p">{</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-67"></a>            <span class="s">"./sandbox/a/b/file1.rst"</span><span class="p">,</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-68"></a>            <span class="s">"./sandbox/a/b/file1.txt"</span><span class="p">,</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-69"></a>            <span class="s">"./sandbox/a/file2.RST"</span><span class="p">,</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-70"></a>            <span class="s">"./sandbox/file3.md"</span><span class="p">,</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-71"></a>            <span class="s">"./sandbox/will_be.ignored"</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-72"></a>        <span class="p">};</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-73"></a>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-74"></a>        <span class="c1">// create files</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-75"></a>        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="nl">f</span><span class="p">:</span> <span class="n">e_files</span><span class="p">)</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-76"></a>        <span class="p">{</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-77"></a>                <span class="n">ofstream</span> <span class="n">of</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ofstream</span><span class="o">::</span><span class="n">out</span><span class="p">);</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-78"></a>                <span class="n">of</span> <span class="o">&lt;&lt;</span> <span class="s">"test"</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-79"></a>        <span class="p">}</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-80"></a>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-81"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"filtered files: "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-82"></a>        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="nl">f</span><span class="p">:</span> <span class="n">getDirectoryFiles</span><span class="p">(</span><span class="s">"."</span><span class="p">,</span> <span class="p">{</span><span class="s">".rst"</span><span class="p">,</span> <span class="s">".RST"</span><span class="p">,</span> <span class="s">".md"</span><span class="p">})){</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-83"></a>            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\t</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">f</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-84"></a>        <span class="p">}</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-85"></a>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-86"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_5a886243ae874c78aaf6b77a62d5f6af-87"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/af4228e039a281b3">Compile and run C++11 example</a>.</p>
<p>Following example also filters files by extension.</p>
<p><a class="reference external" href="listings/recursive-directory/filesystem.17.cpp.html">recursive-directory/filesystem.17.cpp</a>  <a class="reference external" href="listings/recursive-directory/filesystem.17.cpp">(Source)</a></p>
<pre class="code cpp"><a name="rest_code_a027fdd3f72840038f001c6254d39310-1"></a><span class="cp">#include</span> <span class="cpf">&lt;experimental/filesystem&gt;</span><span class="cp"></span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-3"></a><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-4"></a><span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp"></span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-5"></a><span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;    // std::find</span><span class="cp"></span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-6"></a>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-7"></a><span class="k">namespace</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">filesystem</span><span class="p">;</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-8"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-9"></a>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-10"></a><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">getDirectoryFiles</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span> <span class="n">dir</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">extensions</span><span class="p">)</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-11"></a><span class="p">{</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-12"></a>        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">files</span><span class="p">;</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-13"></a>    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="nl">p</span><span class="p">:</span> <span class="n">fs</span><span class="o">::</span><span class="n">recursive_directory_iterator</span><span class="p">(</span><span class="n">dir</span><span class="p">))</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-14"></a>    <span class="p">{</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-15"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">fs</span><span class="o">::</span><span class="n">is_regular_file</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-16"></a>        <span class="p">{</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-17"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">extensions</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">||</span> <span class="n">find</span><span class="p">(</span><span class="n">extensions</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">extensions</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">p</span><span class="p">.</span><span class="n">path</span><span class="p">().</span><span class="n">extension</span><span class="p">().</span><span class="n">string</span><span class="p">())</span> <span class="o">!=</span> <span class="n">extensions</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-18"></a>            <span class="p">{</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-19"></a>                <span class="n">files</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">path</span><span class="p">().</span><span class="n">string</span><span class="p">());</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-20"></a>            <span class="p">}</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-21"></a>        <span class="p">}</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-22"></a>    <span class="p">}</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-23"></a>    <span class="k">return</span> <span class="n">files</span><span class="p">;</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-24"></a><span class="p">}</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-25"></a>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-26"></a><span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-27"></a><span class="p">{</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-28"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">create_directories</span><span class="p">(</span><span class="s">"sandbox/a/b"</span><span class="p">);</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-29"></a>        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">e_files</span> <span class="o">=</span> <span class="p">{</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-30"></a>            <span class="s">"./sandbox/a/b/file1.rst"</span><span class="p">,</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-31"></a>            <span class="s">"./sandbox/a/b/file1.txt"</span><span class="p">,</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-32"></a>            <span class="s">"./sandbox/a/file2.RST"</span><span class="p">,</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-33"></a>            <span class="s">"./sandbox/file3.md"</span><span class="p">,</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-34"></a>            <span class="s">"./sandbox/will_be.ignored"</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-35"></a>        <span class="p">};</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-36"></a>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-37"></a>        <span class="c1">// create files</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-38"></a>        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="nl">f</span><span class="p">:</span> <span class="n">e_files</span><span class="p">)</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-39"></a>        <span class="p">{</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-40"></a>                <span class="n">ofstream</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">"test"</span><span class="p">;</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-41"></a>        <span class="p">}</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-42"></a>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-43"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"filtered files: "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-44"></a>        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="nl">f</span><span class="p">:</span> <span class="n">getDirectoryFiles</span><span class="p">(</span><span class="s">"."</span><span class="p">,</span> <span class="p">{</span><span class="s">".rst"</span><span class="p">,</span> <span class="s">".RST"</span><span class="p">,</span> <span class="s">".md"</span><span class="p">})){</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-45"></a>            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\t</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">f</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-46"></a>        <span class="p">}</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-47"></a>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-48"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_a027fdd3f72840038f001c6254d39310-49"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/af4228e039a281b3">Compile and run C++17 example</a>.</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/reverse-proxy-multidomain-docker/" class="u-url">Multi-Domain Docker Containers</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/reverse-proxy-multidomain-docker/" rel="bookmark"><time class="published dt-published" datetime="2016-11-24T21:00:00+01:00" title="2016-11-24">2016-11-24</time></a></p>
                <p class="commentline">
        
    <a href="posts/reverse-proxy-multidomain-docker/#disqus_thread" data-disqus-identifier="cache/posts/reverse-proxy-multidomain-docker.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#use-case" id="id1">Use case</a></li>
<li>
<a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#how-to-configure-multi-domain-reverse-proxy" id="id2">How to Configure Multi-Domain Reverse Proxy</a><ul>
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#example-project-structure" id="id3">Example Project Structure</a></li>
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#architecture-configuration-docker-compose" id="id4">Architecture Configuration (docker-compose)</a></li>
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#application-image-configuration" id="id5">Application Image Configuration</a></li>
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#adding-domain-names-to-your-development-environment-configuration" id="id6">Adding domain names to your development environment configuration</a></li>
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#everything-ready" id="id7">Everything ready!</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="use-case">
<h2><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id1">Use case</a></h2>
<p>We have several server applications in the same development environment, each application is bundled in a Docker container, e.g: "Container A" and "Container B".</p>
<p>With Docker those applications have the same IP address. One way to differentiate and access to an specific application is exposing different ports.</p>
<div class="figure">
<a class="reference external image-reference" href="galleries/docker-multidomain/ip.png"><img alt="/galleries/docker-multidomain/ip.thumbnail.png" src="galleries/docker-multidomain/ip.thumbnail.png"></a>
<p class="caption">Containers exposing the same IP address and different ports</p>
</div>
<ul class="simple">
<li>If we want to call to "Application A" we will do: GET <a class="reference external" href="http://10.20.30.40:8080/colors/red">http://10.20.30.40:8080/colors/red</a>
</li>
<li>If we want to call to "Application B" we will do: GET <a class="reference external" href="http://10.20.30.40:8081/fruits/tomato">http://10.20.30.40:8081/fruits/tomato</a>
</li>
</ul>
<p>But that solution is a little bit confusing, does 8080 mean we are accessing to "application A"?</p>
<p>It would be simpler and easier to remind something like:</p>
<ul class="simple">
<li>Calling "Application A": GET <a class="reference external" href="http://a.domain.com/colors/red">http://a.domain.com/colors/red</a>
</li>
<li>Calling "Application B": GET <a class="reference external" href="http://b.domain.com/fruits/tomato">http://b.domain.com/fruits/tomato</a>
</li>
</ul>
<div class="figure">
<a class="reference external image-reference" href="galleries/docker-multidomain/domain.png"><img alt="/galleries/docker-multidomain/domain.thumbnail.png" src="galleries/docker-multidomain/domain.thumbnail.png"></a>
<p class="caption">Accessing applications by domain name</p>
</div>
<p>Get that extra semantic value is much simpler than I thought at the beginning and you will see below.</p>
</div>
<div class="section" id="how-to-configure-multi-domain-reverse-proxy">
<h2><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id2">How to Configure Multi-Domain Reverse Proxy</a></h2>
<p>I said it is easy, because we almost have to do nothing, another container will do it for us, especifically we are going to use <a class="reference external" href="https://github.com/jwilder/nginx-proxy">nginx-proxy</a>, it will automatically generate the required <a class="reference external" href="https://www.nginx.com">NGINX</a> configurations.</p>
<p>So, we will have 2 applications + 1 proxy, that is 3 containers.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can download the full example at  <a class="reference external" href="https://github.com/carlosvin/docker-reverse-proxy-multi-domain">https://github.com/carlosvin/docker-reverse-proxy-multi-domain</a></p>
</div>
<div class="figure">
<a class="reference external image-reference" href="galleries/docker-multidomain/proxy.png"><img alt="/galleries/docker-multidomain/proxy.thumbnail.png" src="galleries/docker-multidomain/proxy.thumbnail.png"></a>
<p class="caption">3 containers, 2 applications + 1 proxy</p>
</div>
<div class="section" id="example-project-structure">
<h3><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id3">Example Project Structure</a></h3>
<ul class="simple">
<li>docker-compose.yaml (Main configuration file describing architecture in previous picture)</li>
<li>a (Application A directory)<ul>
<li>Dockerfile (Container A configuration file)</li>
</ul>
</li>
<li>b (Application B directory)<ul>
<li>Dockerfile (Container B configuration file)</li>
</ul>
</li>
</ul>
<p><a class="reference external" href="listings/docker-reverse-proxy-multi-domain">Ver proyecto</a>.</p>
</div>
<div class="section" id="architecture-configuration-docker-compose">
<h3><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id4">Architecture Configuration (docker-compose)</a></h3>
<p>The relationships between containers is the most interesting part in this example.</p>
<p><a class="reference external" href="listings/docker-reverse-proxy-multi-domain/docker-compose.yaml.html">docker-reverse-proxy-multi-domain/docker-compose.yaml</a>  <a class="reference external" href="listings/docker-reverse-proxy-multi-domain/docker-compose.yaml">(Source)</a></p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-1"> 1</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-2"> 2</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-3"> 3</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-4"> 4</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-5"> 5</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-6"> 6</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-7"> 7</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-8"> 8</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-9"> 9</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-10">10</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-11">11</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-12">12</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-13">13</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-14">14</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-15">15</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-16">16</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-17">17</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-18">18</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-19">19</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-20">20</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-21">21</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_83249b33cc944385a5fd464b4a73703c-22">22</a></pre></div></td>
<td class="code"><pre class="code yaml"><a name="rest_code_83249b33cc944385a5fd464b4a73703c-1"></a><span class="l l-Scalar l-Scalar-Plain">a</span><span class="p p-Indicator">:</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-2"></a>  <span class="l l-Scalar l-Scalar-Plain">build</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">a</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-3"></a>  <span class="l l-Scalar l-Scalar-Plain">environment</span><span class="p p-Indicator">:</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-4"></a>    <span class="l l-Scalar l-Scalar-Plain">VIRTUAL_HOST</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">a.domain.com</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-5"></a>  <span class="l l-Scalar l-Scalar-Plain">restart</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-6"></a>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-7"></a><span class="l l-Scalar l-Scalar-Plain">b</span><span class="p p-Indicator">:</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-8"></a>  <span class="l l-Scalar l-Scalar-Plain">build</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">b</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-9"></a>  <span class="l l-Scalar l-Scalar-Plain">environment</span><span class="p p-Indicator">:</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-10"></a>    <span class="l l-Scalar l-Scalar-Plain">VIRTUAL_HOST</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">b.domain.com</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-11"></a>  <span class="l l-Scalar l-Scalar-Plain">restart</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-12"></a>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-13"></a><span class="l l-Scalar l-Scalar-Plain">nginx-proxy</span><span class="p p-Indicator">:</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-14"></a>  <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">jwilder/nginx-proxy</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-15"></a>  <span class="l l-Scalar l-Scalar-Plain">ports</span><span class="p p-Indicator">:</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-16"></a>    <span class="p p-Indicator">-</span> <span class="s">"80:80"</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-17"></a>    <span class="p p-Indicator">-</span> <span class="s">"443:443"</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-18"></a>  <span class="l l-Scalar l-Scalar-Plain">volumes</span><span class="p p-Indicator">:</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-19"></a>    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">/var/run/docker.sock:/tmp/docker.sock:ro</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-20"></a>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-21"></a>  <span class="l l-Scalar l-Scalar-Plain">restart</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
<a name="rest_code_83249b33cc944385a5fd464b4a73703c-22"></a>  <span class="l l-Scalar l-Scalar-Plain">privileged</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></td>
</tr></table>
<ul class="simple">
<li>Lines 4 and 10: we configure the domain name for each application.</li>
<li>From line 13 there is proxy configuration (copy/paste part).</li>
<li>In lines 2 and 8 we tell docker-compose has to build Docker images within specified directory. For example, in line 2, we are saying that docker-compose has to build a Docker image using ./a/Dockerfile file.</li>
</ul>
</div>
<div class="section" id="application-image-configuration">
<h3><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id5">Application Image Configuration</a></h3>
<p><a class="reference external" href="listings/docker-reverse-proxy-multi-domain/a/Dockerfile.html">docker-reverse-proxy-multi-domain/a/Dockerfile</a>  <a class="reference external" href="listings/docker-reverse-proxy-multi-domain/a/Dockerfile">(Source)</a></p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/reverse-proxy-multidomain-docker/#rest_code_442d973bf9154077bd5879a6b7152f23-1">1</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_442d973bf9154077bd5879a6b7152f23-2">2</a></pre></div></td>
<td class="code"><pre class="code docker"><a name="rest_code_442d973bf9154077bd5879a6b7152f23-1"></a><span class="k">FROM</span><span class="s"> httpd:2.4</span>
<a name="rest_code_442d973bf9154077bd5879a6b7152f23-2"></a><span class="k">RUN</span> <span class="nb">echo</span> <span class="s2">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;A&lt;/h1&gt;App A works!&lt;/body&gt;&lt;/html&gt;"</span> &gt; /usr/local/apache2/htdocs/index.html
</pre></td>
</tr></table>
<p>Line 1: We import an image with an apache server.</p>
<p>Line 2: It serves a file that prints "Host A" as default page.</p>
<p>The configuration for application B is pretty much the same:</p>
<p><a class="reference external" href="listings/docker-reverse-proxy-multi-domain/b/Dockerfile.html">docker-reverse-proxy-multi-domain/b/Dockerfile</a>  <a class="reference external" href="listings/docker-reverse-proxy-multi-domain/b/Dockerfile">(Source)</a></p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/reverse-proxy-multidomain-docker/#rest_code_e382ad1e713f432da67e625d0d93848c-1">1</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_e382ad1e713f432da67e625d0d93848c-2">2</a></pre></div></td>
<td class="code"><pre class="code docker"><a name="rest_code_e382ad1e713f432da67e625d0d93848c-1"></a><span class="k">FROM</span><span class="s"> httpd:2.4</span>
<a name="rest_code_e382ad1e713f432da67e625d0d93848c-2"></a><span class="k">RUN</span> <span class="nb">echo</span> <span class="s2">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;B&lt;/h1&gt;App B works!&lt;/body&gt;&lt;/html&gt;"</span> &gt; /usr/local/apache2/htdocs/index.html
</pre></td>
</tr></table>
</div>
<div class="section" id="adding-domain-names-to-your-development-environment-configuration">
<h3><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id6">Adding domain names to your development environment configuration</a></h3>
<p>In Linux we just have to map the local address to domain names you have chosen, in the example  a.domain.com and b.domain.com.</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/reverse-proxy-multidomain-docker/#rest_code_56584cf8b94444e1b8384d04d3a9dd80-1">1</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_56584cf8b94444e1b8384d04d3a9dd80-2">2</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_56584cf8b94444e1b8384d04d3a9dd80-3">3</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_56584cf8b94444e1b8384d04d3a9dd80-4">4</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_56584cf8b94444e1b8384d04d3a9dd80-5">5</a></pre></div></td>
<td class="code"><pre class="code bash"><a name="rest_code_56584cf8b94444e1b8384d04d3a9dd80-1"></a><span class="c1">#/etc/hosts</span>
<a name="rest_code_56584cf8b94444e1b8384d04d3a9dd80-2"></a><span class="m">127</span>.0.0.1             localhost.localdomain localhost
<a name="rest_code_56584cf8b94444e1b8384d04d3a9dd80-3"></a>::1                 localhost6.localdomain6 localhost6
<a name="rest_code_56584cf8b94444e1b8384d04d3a9dd80-4"></a><span class="m">127</span>.0.0.1   a.domain.com
<a name="rest_code_56584cf8b94444e1b8384d04d3a9dd80-5"></a><span class="m">127</span>.0.0.1   b.domain.com
</pre></td>
</tr></table>
<p>I just added 4 and 5 lines.</p>
</div>
<div class="section" id="everything-ready">
<h3><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id7">Everything ready!</a></h3>
<p>Now we just have to test the example:</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/reverse-proxy-multidomain-docker/#rest_code_6b228b3fb88d483fab9a47b7cadf4311-1">1</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_6b228b3fb88d483fab9a47b7cadf4311-2">2</a></pre></div></td>
<td class="code"><pre class="code bash"><a name="rest_code_6b228b3fb88d483fab9a47b7cadf4311-1"></a>docker-compose build
<a name="rest_code_6b228b3fb88d483fab9a47b7cadf4311-2"></a>docker-compose up
</pre></td>
</tr></table>
<p>The 3 containers are running now.</p>
<p>So we can open our favourite web browser and go to a.domain.com. It will show <em>App A works!</em>. If we go to b.domain.com then we will see <em>App B works!</em>.</p>
<div class="figure">
<a class="reference external image-reference" href="galleries/docker-multidomain/a.screenshot.png"><img alt="/galleries/docker-multidomain/a.screenshot.thumbnail.png" src="galleries/docker-multidomain/a.screenshot.thumbnail.png"></a>
<p class="caption">a.domain.com</p>
</div>
<div class="figure">
<a class="reference external image-reference" href="galleries/docker-multidomain/b.screenshot.png"><img alt="/galleries/docker-multidomain/b.screenshot.thumbnail.png" src="galleries/docker-multidomain/b.screenshot.thumbnail.png"></a>
<p class="caption">b.domain.com</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In most of Linux distros you will need privileges to run Docker commands (sudo).</p>
</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-micro"><header><h1 class="p-name entry-title"><a href="posts/rust-rest-framework-comparison/" class="u-url">Rust web frameworks comparison</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/rust-rest-framework-comparison/" rel="bookmark"><time class="published dt-published" datetime="2016-04-14T20:40:00+02:00" title="2016-04-14">2016-04-14</time></a></p>
                <p class="commentline">
        
    <a href="posts/rust-rest-framework-comparison/#disqus_thread" data-disqus-identifier="cache/posts/rust-rest-framework-comparison.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>I'm doing some experiments with <a class="reference external" href="https://www.rust-lang.org/">Rust</a> because it is a language that promises to be as fast as <a class="reference external" href="https://en.wikipedia.org/wiki/C%2B%2B">C/C++</a>, but safer in regards to memory management. Essentially, it doesn't allow the developer to do "bad things" with the memory like:  forgetting  release the memory that is not going to be used anymore or release memory if the developer is not the owner. In such scenarios, <a class="reference external" href="https://www.rust-lang.org/">Rust</a> won't compile.</p>
<p>Just for learning I've started a small project that offers a <a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a>, so I've started looking for frameworks to ease/speed up the development. I've found a <a class="reference external" href="https://github.com/flosse/rust-web-framework-comparison">Rust web frameworks comparison</a>:
<a class="reference external" href="https://github.com/flosse/rust-web-framework-comparison">https://github.com/flosse/rust-web-framework-comparison</a></p>
</div>
    </div>
    </article><article class="h-entry post-micro"><header><h1 class="p-name entry-title"><a href="posts/recursive-dos-unix/" class="u-url">Convert files formats: Windows to Unix</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/recursive-dos-unix/" rel="bookmark"><time class="published dt-published" datetime="2016-02-12T10:34:00+01:00" title="2016-02-12">2016-02-12</time></a></p>
                <p class="commentline">
        
    <a href="posts/recursive-dos-unix/#disqus_thread" data-disqus-identifier="cache/posts/recursive-dos-unix.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>If you are developing from a Windows environment to a Unix target environment, most likely you have had this issue:
You install source files in Windows format in your Unix environment.</p>
<p>There is a way quite simple to convert all your files from Windows to Unix format:</p>
<pre class="code bash"><a name="rest_code_2c98d5c3b44e40c099ed4a253adc3fd3-1"></a>find . -type f -print0 <span class="p">|</span> xargs -0 dos2unix
</pre>
<p>I got it, of course, form <a class="reference external" href="http://stackoverflow.com/questions/11929461/how-can-i-run-dos2unix-on-an-entire-directory">http://stackoverflow.com/questions/11929461/how-can-i-run-dos2unix-on-an-entire-directory</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/rest-urls/" class="u-url">REST URLs</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/rest-urls/" rel="bookmark"><time class="published dt-published" datetime="2015-08-16T14:00:00+02:00" title="2015-08-16">2015-08-16</time></a></p>
                <p class="commentline">
        
    <a href="posts/rest-urls/#disqus_thread" data-disqus-identifier="cache/posts/rest-urls.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>First time I designed a <a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> I made several mistakes, of course. Following I'm going to explain common mistakes and what I've learned about <a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Uniform_resource_locator">URL</a> with examples.</p>
<div class="contents topic" id="index">
<p class="topic-title first">Index</p>
<ul class="simple">
<li>
<a class="reference internal" href="posts/rest-urls/#rest-basics" id="id3">REST Basics</a><ul>
<li><a class="reference internal" href="posts/rest-urls/#rest-verbs" id="id4">REST Verbs</a></li>
<li><a class="reference internal" href="posts/rest-urls/#accessing-to-resources" id="id5">Accessing to Resources</a></li>
<li><a class="reference internal" href="posts/rest-urls/#update-resources" id="id6">Update resources</a></li>
<li><a class="reference internal" href="posts/rest-urls/#delete-resources" id="id7">Delete Resources</a></li>
<li><a class="reference internal" href="posts/rest-urls/#create-resources" id="id8">Create Resources</a></li>
<li>
<a class="reference internal" href="posts/rest-urls/#collections" id="id9">Collections</a><ul>
<li><a class="reference internal" href="posts/rest-urls/#add-an-element-to-collection" id="id10">Add an element to collection</a></li>
<li><a class="reference internal" href="posts/rest-urls/#update-a-collection-item" id="id11">Update a collection item</a></li>
<li><a class="reference internal" href="posts/rest-urls/#delete-a-collection-item" id="id12">Delete a collection item</a></li>
<li><a class="reference internal" href="posts/rest-urls/#read-a-collection-item" id="id13">Read a collection item</a></li>
<li><a class="reference internal" href="posts/rest-urls/#list-collection-items" id="id14">List collection items</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="posts/rest-urls/#common-mistake" id="id15">Common mistake</a></li>
<li><a class="reference internal" href="posts/rest-urls/#video-tutorials" id="id16">Video Tutorials</a></li>
</ul>
</div>
<div class="section" id="rest-basics">
<h2>
<a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> Basics</h2>
<ul class="simple">
<li>Using <a class="reference external" href="https://en.wikipedia.org/wiki/Uniform_resource_locator">URLs</a> for get resources.</li>
<li>Using <em>verbs</em> for modify resources.</li>
<li>The <em>verbs</em> are provided by the <a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> protocol.</li>
<li>The <em>verbs</em> have a direct equivalency with <a class="reference external" href="https://en.wikipedia.org/wiki/CRUD">CRUD</a> <a class="footnote-reference" href="posts/rest-urls/#id2" id="id1">[1]</a>.</li>
<li>To access to an existent resource we need an identifier.</li>
</ul>
<div class="section" id="rest-verbs">
<h3>
<a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> Verbs</h3>
<dl class="docutils">
<dt>POST</dt>
<dd>
<strong>Create</strong> new resources.</dd>
<dt>GET</dt>
<dd>
<strong>Read</strong> already existing resources.</dd>
<dt>PUT</dt>
<dd>
<strong>Update</strong> already existing resources.</dd>
<dt>DELETE</dt>
<dd>
<strong>Delete</strong> already existing resources.</dd>
</dl>
<p>It is clearer in the following table</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%">
<col width="29%">
<col width="45%">
</colgroup>
<tbody valign="top">
<tr>
<td>
<a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> Verb</td>
<td>
<a class="reference external" href="https://en.wikipedia.org/wiki/CRUD">CRUD</a> Action</td>
<td>Resource must exist</td>
</tr>
<tr>
<td>POST</td>
<td>Create</td>
<td>No</td>
</tr>
<tr>
<td>GET</td>
<td>Read</td>
<td>Yes</td>
</tr>
<tr>
<td>PUT</td>
<td>Update</td>
<td>Yes</td>
</tr>
<tr>
<td>DELETE</td>
<td>Delete</td>
<td>Yes</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="accessing-to-resources">
<h3><a class="toc-backref" href="posts/rest-urls/#id5">Accessing to Resources</a></h3>
<p>A resource is <em>what we want to get</em>. For example, a car.</p>
<p>To be able to get a car, that information is not enough, you can't go to your car dealer and ask for whatever car, you have to specify which one you want:</p>
<p><em>Good morning. I'd like to have a Fiat Bravo 1.9 Emotion 120CV</em>.</p>
<p>In this manner the sheller knows which one is.</p>
<p>"Fiat Bravo 1.9 Emotion 120CV" is the <strong>identifier</strong>.</p>
<p>Transferring the example to <a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">APIs</a>:</p>
<pre class="literal-block">
GET   http://cardealer.com/api/cars/fiat-bravo-19-emotion-120cv
</pre>
<p>Now our <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> can supply the car info.</p>
<p>This is a very simple example, but actually when we access to a specific resource, we have to use something to identify it, a common and recommendable practice is use <a class="reference external" href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUID</a>.</p>
<pre class="literal-block">
GET  http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f
</pre>
<p>But our <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a>, like a shop, it hasn't to be so strict. We can ask for cars with several features:</p>
<p><em>Good morning, I want a Fiat Bravo</em>.</p>
<p>Then, the dealer kindly will show you all Fiat Bravo he has available. Let's see how <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> says that.</p>
<pre class="literal-block">
GET  http://cardealer.com/api/cars/?brand=fiat&amp;model=bravo
</pre>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> will return all cars with Fiat brand and Bravo model.</p>
<p>Brand and model are so called <strong>query parameters</strong>.</p>
<p>As you might already notice, to get resource information, we have always used <strong>GET</strong> <em>verb</em></p>
</div>
<div class="section" id="update-resources">
<h3><a class="toc-backref" href="posts/rest-urls/#id6">Update resources</a></h3>
<p>The <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> should also support updating resources. Like reading resources, to update a resource we have to specify which resource we want to update, so we again need an <em>identifier</em>.</p>
<p>Before, we wanted to get information (read) and we used <strong>GET</strong> <em>verb</em>. Now the only difference is the verb.</p>
<p>We want to <strong>update</strong> so we use the equivalency <a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> verb: <strong>PUT</strong>.</p>
<pre class="literal-block">
PUT   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f
</pre>
<p>Actually something else is missing, we have to say what thing of the car we want to change, for example, let's imagine we want to change the engine power and set it to 100CV.</p>
<p>We have to send the new engine power to following <a class="reference external" href="https://en.wikipedia.org/wiki/Uniform_resource_locator">URL</a>  <a class="reference external" href="http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f">http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f</a> through <a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> using <strong>PUT</strong> verb.</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> protocol allows sending data within PUT message, we have to choose a sending format.</p>
<p>We can use <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON</a> or <a class="reference external" href="https://en.wikipedia.org/wiki/XML">XML</a> or whatever, we only have to ensure that sent format is expected in server side.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Designing a <a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> requires select a sending data format.</p>
</div>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON</a> example:</p>
<pre class="literal-block">
{ enginePower: 100 }
</pre>
</div>
<div class="section" id="delete-resources">
<h3><a class="toc-backref" href="posts/rest-urls/#id7">Delete Resources</a></h3>
<p>Let's imagine that now we are the car dealer and we don't want to shell the Fiat Bravo Emotion 1.9CV anymore (the cce05bee-386b-11e5-a151-feff819cdc9f).
We'll keep the <a class="reference external" href="https://en.wikipedia.org/wiki/Uniform_resource_locator">URL</a> that identifies the resource, but we change the verb: we don't want to read (GET), we don't want to update (PUT), we want to <strong>to delete (DELETE)</strong>.</p>
<pre class="literal-block">
DELETE   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f
</pre>
<p>We don't have to supply any additional info, only de verb (DELETE) and the resource identifier.</p>
</div>
<div class="section" id="create-resources">
<h3><a class="toc-backref" href="posts/rest-urls/#id8">Create Resources</a></h3>
<p>And the last verb is <strong>to create (POST)</strong>. In this case we don't have to identify the resource, because it still doesn't exist.</p>
<pre class="literal-block">
POST   http://cardealer.com/api/cars/
</pre>
<p>But we have to send the data to create the resource.</p>
<p>Following with the example, let's create a new car, so we include the necessary data within POST <a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> message, it is something similar what we did at section <a class="reference internal" href="posts/rest-urls/#update-resources">Update resources</a>, but we are going to send <strong>all required data</strong>, not only the engine power.</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON</a> example:</p>
<pre class="literal-block">
{
"brand": "Fiat",
"model": "Bravo"
"year": 2010
"doors": 5,
"enginePower": 120,
"version": "Emotion",
"clima": true,
"ac": false,
"fuel": "Diesel"
}
</pre>
<p>We can delegate on the system to assign a new <strong>identifier</strong>, or simply send it within the message:</p>
<pre class="literal-block">
{
"identifier": "cce05bee-386b-11e5-a151-feff819cdc9f"
"brand": "Fiat",
"model": "Bravo"
"year": 2010
"doors": 5,
"enginePower": 120,
"version": "Emotion",
"clima": true,
"ac": false,
"fuel": "Diesel"
}
</pre>
</div>
<div class="section" id="collections">
<h3><a class="toc-backref" href="posts/rest-urls/#id9">Collections</a></h3>
<p>All actions we have already explained were actually applied over a cars collection.</p>
<p>But, what happen if a resource has a nested collection?</p>
<p>Continuing with cars example, a car can use a set of engine oils. So the <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> must allow update, delete or create elements in the set.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the example we will assume that <em>the oil identifier</em> is the attribute <em>type</em>.</p>
</div>
<div class="section" id="add-an-element-to-collection">
<h4><a class="toc-backref" href="posts/rest-urls/#id10">Add an element to collection</a></h4>
<p>When we add a car to cars collection, what we do is create a new car, so it is the case of <a class="reference internal" href="posts/rest-urls/#create-resources">Create Resources</a>.</p>
<p>To add a new engine oil to the car cce05bee-386b-11e5-a151-feff819cdc9f, that already exists:</p>
<pre class="literal-block">
POST   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f/oils/

{
"type": "5W30",
"otherInfo": "This is the best oil for this car"
}
</pre>
<p>If we want to add another one:</p>
<pre class="literal-block">
POST   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f/oils/

{
"type": "10W30",
"otherInfo": "This is very good for cold weather"
}
</pre>
</div>
<div class="section" id="update-a-collection-item">
<h4><a class="toc-backref" href="posts/rest-urls/#id11">Update a collection item</a></h4>
<p>If we want to update the info of oil <em>5W30</em> of car <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p>
<pre class="literal-block">
PUT   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f/oils/5W30/

{
"type": "5W30",
"otherInfo": "This is no longer the best oil for this car"
}
</pre>
</div>
<div class="section" id="delete-a-collection-item">
<h4><a class="toc-backref" href="posts/rest-urls/#id12">Delete a collection item</a></h4>
<p>To delete an oil <em>10W30</em> from car <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p>
<pre class="literal-block">
DELETE   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f/oils/10W30
</pre>
</div>
<div class="section" id="read-a-collection-item">
<h4><a class="toc-backref" href="posts/rest-urls/#id13">Read a collection item</a></h4>
<p>To get the oil info <em>10W30</em> of the car <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p>
<pre class="literal-block">
GET   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f/oils/10W30
</pre>
</div>
<div class="section" id="list-collection-items">
<h4><a class="toc-backref" href="posts/rest-urls/#id14">List collection items</a></h4>
<p>As we have seen at <a class="reference internal" href="posts/rest-urls/#read-a-collection-item">Read a collection item</a>, we can get the info of every collection element, but we also can get multiple collection elements, sorted, paged and apply typical collection actions.</p>
<p>We can get all supported oils for a car <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>, it is as simple as:</p>
<pre class="literal-block">
GET   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f/oils/
</pre>
<p>We can also get sorted items:</p>
<pre class="literal-block">
GET   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f/oils/?sort_by=type&amp;order=asc
</pre>
<p>We can ask <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> to return the first 10 oils for car <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p>
<pre class="literal-block">
GET   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f/oils/?number_of_elements=10
</pre>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> can support also pagination:</p>
<pre class="literal-block">
GET   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f/oils/?page=3&amp;number_of_elements=2
</pre>
<p>Above request is telling <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> that returns the page 3 of all oils of car <em>cce05bee-386b-11e5-a151-feff819cdc9f</em> and it has to shown 2 oils per page. If we want to go to next page:</p>
<pre class="literal-block">
GET   http://cardealer.com/api/cars/cce05bee-386b-11e5-a151-feff819cdc9f/oils/?page=4&amp;number_of_elements=2
</pre>
<p>All those features are supported by <strong>query parameters</strong>.</p>
</div>
</div>
</div>
<div class="section" id="common-mistake">
<h2><a class="toc-backref" href="posts/rest-urls/#id15">Common mistake</a></h2>
<p>First time I tried to design a <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> I designed an <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a>, but <a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a>.</p>
<p>My main mistake was the <a class="reference external" href="https://en.wikipedia.org/wiki/Uniform_resource_locator">URLs</a> design, I added my own <em>verbs</em> skipping <a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> <em>verbs</em>.</p>
<p>For example:</p>
<pre class="literal-block">
POST    http://example.com/api/cars/ford-focus/delete-oil/5W30
</pre>
<p>The right:</p>
<pre class="literal-block">
DELETE  http://example.com/api/cars/ford-focus/oils/5W30
</pre>
</div>
<div class="section" id="video-tutorials">
<h2><a class="toc-backref" href="posts/rest-urls/#id16">Video Tutorials</a></h2>
<p>These 2 videos help me to understand <a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Uniform_resource_locator">URLs</a>, I encourage you to watch them full:</p>
<div class="youtube-video">
<iframe width="425" height="344" src="https://www.youtube.com/embed/NjpKwiRORI4?rel=0&amp;hd=1&amp;wmode=transparent"></iframe>
</div>
<div class="youtube-video">
<iframe width="425" height="344" src="https://www.youtube.com/embed/gYKJqUZXuBw?rel=0&amp;hd=1&amp;wmode=transparent"></iframe>
</div>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup>
<col class="label">
<col>
</colgroup>
<tbody valign="top"><tr>
<td class="label"><a class="fn-backref" href="posts/rest-urls/#id1">[1]</a></td>
<td>Create, Read, Update, Delete</td>
</tr></tbody>
</table>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/first-biicode-poco/" class="u-url">C++ Dependency Management: Biicode</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/first-biicode-poco/" rel="bookmark"><time class="published dt-published" datetime="2015-05-14T20:00:00+02:00" title="2015-05-14">2015-05-14</time></a></p>
                <p class="commentline">
        
    <a href="posts/first-biicode-poco/#disqus_thread" data-disqus-identifier="cache/posts/first-biicode-poco.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>I'm interested in building, dependency management, packagin and deployment in regards to software projects. For <a class="reference external" href="http://java.com/en/download/whatis_java.jsp">Java</a>, <a class="reference external" href="http://www.scala-lang.org/">Scala</a>, <a class="reference external" href="http://www.python.org/">Python</a>, and so on is quite easy since there are tools like <a class="reference external" href="http://maven.apache.org/">Maven</a>, <a class="reference external" href="http://www.gradle.org/">Gradle</a>, <a class="reference external" href="https://pypi.python.org/pypi/pip">pip</a>, <a class="reference external" href="http://www.scala-sbt.org/">Sbt</a>, etc. But regarding C++_, the best options I've found are <a class="reference external" href="http://maven.apache.org/">Maven</a> with <a class="reference external" href="http://maven-nar.github.io/">Nar</a> plugin or <a class="reference external" href="http://www.gradle.org/">Gradle</a> with <a class="reference external" href="https://gradle.org/docs/current/userguide/nativeBinaries.html">cpp plugin</a> (incubation).</p>
<p>I knew about <a class="reference external" href="https://www.biicode.org/">Biicode</a> almost 2 years ago, but I've never found time to test it, until today.</p>
<p>How does <a class="reference external" href="https://www.biicode.org/">Biicode</a> work?</p>
<p>Firstly we have to <a class="reference external" href="http://docs.biicode.com/c++/installation.html">install Biicode</a>.</p>
<p>I've made tiny example project using logging system from <a class="reference external" href="http://pocoproject.org/">Poco</a> library.</p>
<p>I've executed this command to create the project, called bii_log.</p>
<pre class="code bash"><a name="rest_code_50575a3379fd4bfa826d4fef37bbee26-1"></a>bii new carlovin/bii_log --hello<span class="o">=</span>cpp
</pre>
<p>I've created the project under my <a class="reference external" href="https://www.biicode.org/">Biicode</a> username, just in case I'd like to publish later.</p>
<p>Previous command generates the structure of files and directories, although we are going to focus only on:</p>
<pre class="code bash"><a name="rest_code_a543cd3e8e2a44ae801ccda3bdd68134-1"></a>blocks/carlosvin/bii_log/main.cpp
<a name="rest_code_a543cd3e8e2a44ae801ccda3bdd68134-2"></a>blocks/carlosvin/bii_log/biicode.conf
</pre>
<p>In biicode.conf we are going to configure our dependencies, in this example <a class="reference external" href="http://pocoproject.org/">Poco</a> library.</p>
<pre class="code yaml"><a name="rest_code_61c050e2bb7846af929b05e6af58aa56-1"></a><span class="c1"># Biicode configuration file</span>
<a name="rest_code_61c050e2bb7846af929b05e6af58aa56-2"></a>
<a name="rest_code_61c050e2bb7846af929b05e6af58aa56-3"></a><span class="p p-Indicator">[</span><span class="nv">requirements</span><span class="p p-Indicator">]</span>
<a name="rest_code_61c050e2bb7846af929b05e6af58aa56-4"></a>    <span class="l l-Scalar l-Scalar-Plain">fenix/poco(develop)</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
<a name="rest_code_61c050e2bb7846af929b05e6af58aa56-5"></a>
<a name="rest_code_61c050e2bb7846af929b05e6af58aa56-6"></a><span class="p p-Indicator">[</span><span class="nv">parent</span><span class="p p-Indicator">]</span>
<a name="rest_code_61c050e2bb7846af929b05e6af58aa56-7"></a>        <span class="l l-Scalar l-Scalar-Plain">carlosvin/bii_log</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
<a name="rest_code_61c050e2bb7846af929b05e6af58aa56-8"></a>
<a name="rest_code_61c050e2bb7846af929b05e6af58aa56-9"></a><span class="p p-Indicator">[</span><span class="nv">includes</span><span class="p p-Indicator">]</span>
<a name="rest_code_61c050e2bb7846af929b05e6af58aa56-10"></a>    <span class="l l-Scalar l-Scalar-Plain">Poco/*.h</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">fenix/poco/Foundation/include</span>
</pre>
<p>In [includes] section, we are overriding the path to file headers. If we don't override it we'd had to do something like this:</p>
<pre class="code cpp"><a name="rest_code_c7b10f4c642b423e940053fbbb863c42-1"></a><span class="cp">#include</span> <span class="cpf">"fenix/poco/Foundation/include/Logger.h"</span><span class="cp"></span>
</pre>
<p>Thanks to this line, include declarations are going to be clearer, as follows:</p>
<pre class="code cpp"><a name="rest_code_7f0a43e078a04b7db46396250520934f-1"></a><span class="cp">#include</span> <span class="cpf">"Poco/Logger.h"</span><span class="cp"></span>
</pre>
<p>Easy, now we can start using <a class="reference external" href="http://pocoproject.org/">Poco</a> in our project, e.g:</p>
<pre class="code cpp"><a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-1"></a><span class="cp">#include</span> <span class="cpf">"Poco/FileChannel.h"</span><span class="cp"></span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-2"></a><span class="cp">#include</span> <span class="cpf">"Poco/FormattingChannel.h"</span><span class="cp"></span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-3"></a><span class="cp">#include</span> <span class="cpf">"Poco/PatternFormatter.h"</span><span class="cp"></span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-4"></a><span class="cp">#include</span> <span class="cpf">"Poco/Logger.h"</span><span class="cp"></span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-5"></a><span class="cp">#include</span> <span class="cpf">"Poco/AutoPtr.h"</span><span class="cp"></span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-6"></a>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-7"></a><span class="k">using</span> <span class="n">Poco</span><span class="o">::</span><span class="n">FileChannel</span><span class="p">;</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-8"></a><span class="k">using</span> <span class="n">Poco</span><span class="o">::</span><span class="n">FormattingChannel</span><span class="p">;</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-9"></a><span class="k">using</span> <span class="n">Poco</span><span class="o">::</span><span class="n">PatternFormatter</span><span class="p">;</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-10"></a><span class="k">using</span> <span class="n">Poco</span><span class="o">::</span><span class="n">Logger</span><span class="p">;</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-11"></a><span class="k">using</span> <span class="n">Poco</span><span class="o">::</span><span class="n">AutoPtr</span><span class="p">;</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-12"></a>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-13"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-14"></a>        <span class="n">AutoPtr</span><span class="o">&lt;</span><span class="n">FileChannel</span><span class="o">&gt;</span> <span class="n">pChannel</span><span class="p">(</span><span class="k">new</span> <span class="n">FileChannel</span><span class="p">);</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-15"></a>        <span class="n">pChannel</span><span class="o">-&gt;</span><span class="n">setProperty</span><span class="p">(</span><span class="s">"path"</span><span class="p">,</span> <span class="s">"log/sample.log"</span><span class="p">);</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-16"></a>        <span class="n">pChannel</span><span class="o">-&gt;</span><span class="n">setProperty</span><span class="p">(</span><span class="s">"rotation"</span><span class="p">,</span> <span class="s">"100 K"</span><span class="p">);</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-17"></a>        <span class="n">pChannel</span><span class="o">-&gt;</span><span class="n">setProperty</span><span class="p">(</span><span class="s">"archive"</span><span class="p">,</span> <span class="s">"timestamp"</span><span class="p">);</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-18"></a>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-19"></a>        <span class="c1">//AutoPtr&lt;ConsoleChannel&gt; pCons(new ConsoleChannel);</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-20"></a>        <span class="n">AutoPtr</span><span class="o">&lt;</span><span class="n">PatternFormatter</span><span class="o">&gt;</span> <span class="n">pPF</span><span class="p">(</span><span class="k">new</span> <span class="n">PatternFormatter</span><span class="p">);</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-21"></a>        <span class="n">pPF</span><span class="o">-&gt;</span><span class="n">setProperty</span><span class="p">(</span><span class="s">"pattern"</span><span class="p">,</span> <span class="s">"%Y-%m-%d %H:%M:%S %s: %t"</span><span class="p">);</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-22"></a>        <span class="n">AutoPtr</span><span class="o">&lt;</span><span class="n">FormattingChannel</span><span class="o">&gt;</span> <span class="n">pFC</span><span class="p">(</span><span class="k">new</span> <span class="n">FormattingChannel</span><span class="p">(</span><span class="n">pPF</span><span class="p">,</span> <span class="n">pChannel</span><span class="p">));</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-23"></a>        <span class="n">Logger</span><span class="o">::</span><span class="n">root</span><span class="p">().</span><span class="n">setChannel</span><span class="p">(</span><span class="n">pFC</span><span class="p">);</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-24"></a>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-25"></a>        <span class="n">Logger</span> <span class="o">&amp;</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">::</span><span class="n">get</span><span class="p">(</span><span class="s">"TestChannel"</span><span class="p">);</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-26"></a>        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10000</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-27"></a>                <span class="n">poco_information</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="s">"This is a info"</span><span class="p">);</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-28"></a>                <span class="n">poco_warning</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="s">"This is a warning"</span><span class="p">);</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-29"></a>        <span class="p">}</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-30"></a>        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_c75b976a2e55408fab3cee9d8d2c9453-31"></a><span class="p">}</span>
</pre>
<p>To compile the project we only have to execute following command:</p>
<pre class="code bash"><a name="rest_code_0e128b2052a349fea15b34ae0b6d94ed-1"></a>bii cpp:build
</pre>
<p>To publish the project and to allow everyone use it as we have used <a class="reference external" href="http://pocoproject.org/">Poco</a>:</p>
<pre class="code bash"><a name="rest_code_dc81fe0f956e44a2baf14096c5bd4583-1"></a>bii publish
</pre>
<p>Besides the ease to use, I like so much the integration with <a class="reference external" href="https://eclipse.org">Eclipse</a> with <a class="reference external" href="https://eclipse.org/cdt/">CDT</a>. After "bii cpp:build" execution all files were properly indexed.</p>
<p>I've read also an article about the good integration with <a class="reference external" href="https://www.jetbrains.com/clion/">CLion</a>: <a class="reference external" href="http://blog.jetbrains.com/clion/2015/03/when-clion-met-biicode/">When CLion met biicode</a>.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/software-maintenance/" class="u-url">Software Maintenance</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/software-maintenance/" rel="bookmark"><time class="published dt-published" datetime="2014-10-11T21:00:00+02:00" title="2014-10-11">2014-10-11</time></a></p>
                <p class="commentline">
        
    <a href="posts/software-maintenance/#disqus_thread" data-disqus-identifier="cache/posts/software-maintenance.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Few days ago at work, I had to fulfill a document where I had to select a type of software maintenance that I was going to apply.</p>
<p>The fact was I had only two choices, it seemed me very weird because during my degree I studied 3 or 4 kinds of software maintenance.</p>
<p>Today I have found my Software Engineering class notes, then the types of Software Maintenance sorted descending by percentage of time spent:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field">
<th class="field-name">Perfective:</th>
<td class="field-body">Activities to improve or add new functionalities required by the user.</td>
</tr>
<tr class="field">
<th class="field-name">Adaptative:</th>
<td class="field-body">Activities to adapt the system to technological environment changes  (hardware or software).</td>
</tr>
<tr class="field">
<th class="field-name">Corrective:</th>
<td class="field-body">Fix defects in hardware or software detected by user running the production system.</td>
</tr>
<tr class="field">
<th class="field-name">Preventive:</th>
<td class="field-body">Activities to ease the future system maintenance.</td>
</tr>
</tbody>
</table>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/gradle-cpp/" class="u-url">Build C++ project with Gradle</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/gradle-cpp/" rel="bookmark"><time class="published dt-published" datetime="2014-09-27T12:00:00+02:00" title="2014-09-27">2014-09-27</time></a></p>
                <p class="commentline">
        
    <a href="posts/gradle-cpp/#disqus_thread" data-disqus-identifier="cache/posts/gradle-cpp.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div class="section" id="introduction">
<h2><a class="toc-backref" href="posts/gradle-cpp/#id7">Introduction</a></h2>
<p>I am more and more worried about building, dependency management and distribution of my projects. I'd like to find a tool unifies those processes with  independence of the language. I know several tools those almost fit to what I'm looking for, like I know several tools those almost fit to what I'm looking for, like <a class="reference external" href="http://www.scons.org">SCons</a>, <a class="reference external" href="http://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html#Autotools-Introduction">Autotools</a>, <a class="reference external" href="http://ant.apache.org">Ant</a>, <a class="reference external" href="http://maven.apache.org">Maven</a> and lately <a class="reference external" href="http://www.gradle.org">Gradle</a>.</p>
<p>I've made several projects with Gradle, but always I was focused in <a class="reference external" href="http://www.java.com">Java</a> and <a class="reference external" href="http://developer.android.com/sdk/installing/studio-build.html">Android</a> projects.
In <a class="reference external" href="http://www.java.com">Java</a> projects I've found a <a class="reference external" href="http://maven.apache.org">Maven</a> replacement, because it is faster, easier and less verbose.
About <a class="reference external" href="http://developer.android.com/sdk/installing/studio-build.html">Android</a> projects I suffered the early adoption of <a class="reference external" href="http://developer.android.com/sdk/installing/studio-build.html">Android Studio + Gradle</a>, although currently I think the are more mature and they work fine.</p>
<p>First of all, I have to say: building C/C++/Objective-C projects with <a class="reference external" href="http://www.gradle.org">Gradle</a> is in <a class="reference external" href="http://www.gradle.org/docs/current/userguide/feature_lifecycle.html#incubating">incubation</a> phase, although now we can perform advanced tasks like:</p>
<ul class="simple">
<li>Generation several artifacts within same project (libraries and executables).</li>
<li>Dependency management between artifacts (no versions).</li>
<li>Different "flavors" of the same software, e.g: we can generate a “Community” release and other one with more enabled features called “Enterprise”.</li>
<li>It allows multi-platform binary generation.</li>
</ul>
<p>As I said, this plugin is still having limitations although they are working on it: <a class="reference external" href="http://www.gradleware.com/resources/cpp/">Gradle C++ roadmap</a>. If they achieve it I'll leave <a class="reference external" href="http://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html#Autotools-Introduction">Autotools</a> (I'm going to regret saying that).</p>
<div class="contents topic" id="index">
<p class="topic-title first">Index</p>
<ul class="simple">
<li><a class="reference internal" href="posts/gradle-cpp/#introduction" id="id7">Introduction</a></li>
<li>
<a class="reference internal" href="posts/gradle-cpp/#case-study" id="id8">Case study</a><ul>
<li><a class="reference internal" href="posts/gradle-cpp/#project-structure" id="id9">Project Structure</a></li>
<li><a class="reference internal" href="posts/gradle-cpp/#c-application" id="id10">C++ Application</a></li>
<li>
<a class="reference internal" href="posts/gradle-cpp/#building-with-gradle" id="id11">Building with Gradle</a><ul>
<li><a class="reference internal" href="posts/gradle-cpp/#base-case" id="id12">Base case</a></li>
<li>
<a class="reference internal" href="posts/gradle-cpp/#different-flavors" id="id13">Different "Flavors"</a><ul>
<li><a class="reference internal" href="posts/gradle-cpp/#community" id="id14">Community</a></li>
<li><a class="reference internal" href="posts/gradle-cpp/#enterprise" id="id15">Enterprise</a></li>
</ul>
</li>
<li><a class="reference internal" href="posts/gradle-cpp/#release-or-debug" id="id16">Release or Debug</a></li>
<li><a class="reference internal" href="posts/gradle-cpp/#multi-platform" id="id17">Multi-platform</a></li>
</ul>
</li>
<li><a class="reference internal" href="posts/gradle-cpp/#try-it-yourself" id="id18">Try it yourself</a></li>
</ul>
</li>
<li><a class="reference internal" href="posts/gradle-cpp/#conclusions" id="id19">Conclusions</a></li>
</ul>
</div>
<p class="more"><a href="posts/gradle-cpp/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/sorting-algorithm-dancing/" class="u-url">How sorting algorithms work (Dancing)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/sorting-algorithm-dancing/" rel="bookmark"><time class="published dt-published" datetime="2014-06-16T20:45:00+02:00" title="2014-06-16">2014-06-16</time></a></p>
                <p class="commentline">
        
    <a href="posts/sorting-algorithm-dancing/#disqus_thread" data-disqus-identifier="cache/posts/sorting-algorithm-dancing.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>I've found out a artistic-technological group named <a class="reference external" href="https://www.youtube.com/user/AlgoRythmics/videos">AlgoRythmics</a>, they teach how the most popular sorting algorithms work.</p>
<p>You can read <a class="reference external" href="http://en.wikipedia.org/wiki/Sorting_algorithm#Popular_sorting_algorithms">the wikipedia topic Popular sorting algorithms</a>, although I think it isn't as funny to learn as the <a class="reference external" href="https://www.youtube.com/user/AlgoRythmics/videos">AlgoRythmics</a> way. Following the <a class="reference external" href="http://en.wikipedia.org/wiki/Quicksort">Quicksort</a>, judge for yourself.</p>
<div class="youtube-video">
<iframe width="425" height="344" src="https://www.youtube.com/embed/ywWBy6J5gz8?rel=0&amp;hd=1&amp;wmode=transparent"></iframe>
</div>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-2.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="carlosvin";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer"><div style="display=flex-inline; vertical-align=middle">
        <a href="https://www.linkedin.com/in/carlosvin" style="margin-right: 3%;">Carlos Martín Sánchez</a>
        <a href="https://twitter.com/carlosvin" class="twitter-follow-button" style="float: right;" data-show-count="false">Follow @carlosvin</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
    <br>
    Contents © 2017 - 
    
   <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/ar/">
   <img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="http://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png"></a> - 
    Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a>
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1328360-9', 'carlosvin.github.io');
  ga('send', 'pageview');

</script><!-- Start of StatCounter Code for Default Guide --><script type="text/javascript">
var sc_project=9708205;
var sc_invisible=1;
var sc_security="4998d447";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script><noscript><div class="statcounter"><a title="web analytics" href="http://statcounter.com/" target="_blank"><img class="statcounter" src="http://c.statcounter.com/9708205/0/4998d447/1/" alt="web analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->


</body>
</html>
