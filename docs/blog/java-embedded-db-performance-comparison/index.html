<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Embedded Java Databases - Performance Comparison</title>

  <meta name="author" content="Carlos Martin Sanchez" />
  <link rel="stylesheet" href="https://carlosvin.github.io/css/base.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
  <link rel="icon" href="https://carlosvin.github.io/img/favicon.png" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"
    integrity="sha512-0QarUp4p9r5IqUgSRyP89BHga45OpEd7VR8lbRkJkf48p/EhcU742fWUpKpoDyu9N6XYAEq/vz6m6z1OolnsDw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="speculationrules">
    {
    "prerender": [
        {
        "where": {
            "selector_matches": "a"
        }
        }
    ]
    }
  </script>

  
  <meta name="description" content="Performance comparison in Java between three embedded databases like Derby&#x2F;JavaDB, Sqlite, and ObjectDB" />
  
</head>

<body class="container">
  <header>
    <nav>
      <ul>
        <li><strong><a href="https://carlosvin.github.io">Carlos says bla, bla</a></strong></li>
      </ul>
      <ul>
        
        <li>
          <a href="https://carlosvin.github.io/blog">Blog</a>
        </li>
        
        <li>
          <a href="https://carlosvin.github.io/about">About</a>
        </li>
        
        <li>
          <input id="search" type="search" placeholder="Search the posts" aria-label="Search">
        </li>
      </ul>
    </nav>
    <div class="search-container">
      <div class="search-results">
        <div class="search-results__items"></div>
      </div>
    </div>

  </header>

  <main>
    
<article class="post">
  <header>
    <h1 class="post-title">Embedded Java Databases - Performance Comparison</h1>
    <div class="post-meta">
      
      <time datetime=" 2014-06-07">
        June 07, 2014
      </time>
      
      
      
    </div>
  </header>

  
<ul>
  
  <li>
    <a href="https://carlosvin.github.io/blog/java-embedded-db-performance-comparison/#embedded-databases">Embedded Databases</a>
    
    <ul>
      
      <li>
        <a href="https://carlosvin.github.io/blog/java-embedded-db-performance-comparison/#sqlitedb">SqliteDB</a>
      </li>
      
      <li>
        <a href="https://carlosvin.github.io/blog/java-embedded-db-performance-comparison/#derbydb-or-javadb">DerbyDB or JavaDB</a>
      </li>
      
      <li>
        <a href="https://carlosvin.github.io/blog/java-embedded-db-performance-comparison/#objectdb">ObjectDB</a>
      </li>
      
    </ul>
    
  </li>
  
  <li>
    <a href="https://carlosvin.github.io/blog/java-embedded-db-performance-comparison/#the-tests">The Tests</a>
    
    <ul>
      
      <li>
        <a href="https://carlosvin.github.io/blog/java-embedded-db-performance-comparison/#jdbc-databases">JDBC Databases</a>
      </li>
      
      <li>
        <a href="https://carlosvin.github.io/blog/java-embedded-db-performance-comparison/#source-code">Source Code</a>
      </li>
      
      <li>
        <a href="https://carlosvin.github.io/blog/java-embedded-db-performance-comparison/#test-results">Test Results</a>
      </li>
      
    </ul>
    
  </li>
  
</ul>


  <section class="post-content">
    <h2 id="embedded-databases">Embedded Databases</h2>
<p>These are databases that do not require a server, are embedded within the application itself, and are usually stored in local files. This, combined with the fact that they often have a mode where data is kept in memory, can result in very high performance.</p>
<p>However, this high degree of coupling to the application means they perform worse when shared between multiple applications due to access collisions.</p>
<p>Another advantage is that you don't have to maintain and manage a database server.</p>
<p>I'm going to do a performance comparison between 3 transactional embedded databases (ACID). NoSQL databases are not included in this comparison as they are in a different performance league.</p>
<p>Contents</p>
<h3 id="sqlitedb">SqliteDB</h3>
<p>This is a library written in <a href="https://es.wikipedia.org/wiki/ANSI_C">ANSI C</a>, less than 500KB, multi-platform, with no external dependencies, and stores all database content in a single file.</p>
<p>It gives the best performance in the test results below.</p>
<p>It can be used from C and C++, but also <a href="https://es.wikipedia.org/wiki/Sqlite#Lenguajes_de_programaci.C3.B3n">from other programming languages</a> (PHP, Python, Java, .NET ...).</p>
<p>In the case of Java, we can manage this database through JDBC. The library can be obtained from <a href="https://bitbucket.org/xerial/sqlite-jdbc">here</a>.</p>
<p>Here is an example of inserting a series of objects of the class <a href="../java_embedded_databases/blob/master/src/main/java/domain/Price.java">Price.java</a>:</p>
<pre data-lang="java" style="background-color:#2b303b;color:#c0c5ce;" class="language-java "><code class="language-java" data-lang="java"><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">JdbcDb </span><span style="color:#b48ead;">implements </span><span style="color:#a3be8c;">DB </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">enum </span><span style="color:#ebcb8b;">Column </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">        </span><span style="color:#d08770;">INSTRUMENT</span><span style="color:#eff1f5;">,
</span><span style="color:#eff1f5;">        </span><span style="color:#d08770;">MARKET</span><span style="color:#eff1f5;">,
</span><span style="color:#eff1f5;">        </span><span style="color:#d08770;">PRICE</span><span style="color:#eff1f5;">,
</span><span style="color:#eff1f5;">        </span><span style="color:#d08770;">DATE</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">    }
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public static final </span><span style="color:#ebcb8b;">String </span><span style="color:#eff1f5;">TABLE_NAME </span><span>= &quot;</span><span style="color:#a3be8c;">PRICES</span><span>&quot;</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public static final </span><span style="color:#ebcb8b;">String </span><span style="color:#eff1f5;">SQL_INSERT </span><span>= &quot;</span><span style="color:#a3be8c;">INSERT INTO </span><span>&quot; + </span><span style="color:#d08770;">TABLE_NAME
</span><span style="color:#eff1f5;">            </span><span>+ &quot;</span><span style="color:#a3be8c;"> (INSTRUMENT, MARKET, PRICE, DATE) VALUES (?,?,?,?)</span><span>&quot;</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">// ...
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">private void </span><span style="color:#8fa1b3;">insert</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">Price </span><span style="color:#bf616a;">p</span><span style="color:#eff1f5;">, </span><span style="color:#ebcb8b;">PreparedStatement </span><span style="color:#bf616a;">preparedStatement</span><span style="color:#eff1f5;">) </span><span style="color:#b48ead;">throws </span><span style="color:#ebcb8b;">SQLException </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">        preparedStatement.</span><span style="color:#bf616a;">setString</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">1</span><span style="color:#eff1f5;">, p.</span><span style="color:#bf616a;">getInstrument</span><span style="color:#eff1f5;">());
</span><span style="color:#eff1f5;">        preparedStatement.</span><span style="color:#bf616a;">setString</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">2</span><span style="color:#eff1f5;">, p.</span><span style="color:#bf616a;">getMarket</span><span style="color:#eff1f5;">());
</span><span style="color:#eff1f5;">        preparedStatement.</span><span style="color:#bf616a;">setDouble</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">3</span><span style="color:#eff1f5;">, p.</span><span style="color:#bf616a;">getPrice</span><span style="color:#eff1f5;">());
</span><span style="color:#eff1f5;">        preparedStatement.</span><span style="color:#bf616a;">setTimestamp</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">4</span><span style="color:#eff1f5;">, </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">Timestamp</span><span style="color:#eff1f5;">(p.</span><span style="color:#bf616a;">getDate</span><span style="color:#eff1f5;">().</span><span style="color:#bf616a;">getTime</span><span style="color:#eff1f5;">()));
</span><span style="color:#eff1f5;">        preparedStatement.</span><span style="color:#bf616a;">addBatch</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">    }
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    @</span><span style="color:#bf616a;">Override
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">insert</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">Price</span><span>... </span><span style="color:#bf616a;">prices</span><span style="color:#eff1f5;">) </span><span style="color:#b48ead;">throws </span><span style="color:#ebcb8b;">SQLException </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">        </span><span style="color:#ebcb8b;">PreparedStatement</span><span style="color:#eff1f5;"> preparedStatement </span><span>=</span><span style="color:#eff1f5;"> conn.</span><span style="color:#bf616a;">prepareStatement</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">SQL_INSERT</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">for </span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">Price</span><span style="color:#eff1f5;"> p </span><span>:</span><span style="color:#eff1f5;"> prices) {
</span><span style="color:#eff1f5;">            </span><span style="color:#bf616a;">insert</span><span style="color:#eff1f5;">(p, preparedStatement);
</span><span style="color:#eff1f5;">        }
</span><span style="color:#eff1f5;">        preparedStatement.</span><span style="color:#bf616a;">executeBatch</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">        preparedStatement.</span><span style="color:#bf616a;">close</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">        conn.</span><span style="color:#bf616a;">commit</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">    }
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">// ...
</span><span style="color:#eff1f5;">}
</span></code></pre>
<h3 id="derbydb-or-javadb">DerbyDB or JavaDB</h3>
<p>JavaDB is an Oracle distribution of the open-source DerbyDB database. It supports the <a href="https://es.wikipedia.org/wiki/SQL">ANSI/ISO SQL</a> standard via JDBC and <a href="https://es.wikipedia.org/wiki/Java_EE">Java EE</a>. These libraries are included in the JDK.</p>
<p>It stores the database in multiple files, which can be useful for scaling storage.</p>
<p>It can only be used in Java, not from other languages.</p>
<p>As we will see later, it was the slowest in the test results.</p>
<p>The example implementation for inserting a series of objects of the class <a href="../java_embedded_databases/blob/master/src/main/java/domain/Price.java">Price.java</a> is exactly the same as above for SqliteDB. This is one of the benefits of JDBC, which allows us to obtain a connection for a specific database, but from there we can almost always forget about the specific database as long as it supports our SQL queries.</p>
<h3 id="objectdb">ObjectDB</h3>
<p>This is an <a href="https://es.wikipedia.org/wiki/Base_de_datos_orientada_a_objetos">object-oriented database</a> that allows access via <a href="https://es.wikipedia.org/wiki/Java_Persistence_API">JPA</a>, a Java standard that aims to retain the advantages of object orientation, which are often lost when dealing with persistence layers.</p>
<p>It is really easy to perform typical database actions, abstracting away from SQL. For example, here is how you would insert an array of Price objects with ObjectDB:</p>
<pre data-lang="java" style="background-color:#2b303b;color:#c0c5ce;" class="language-java "><code class="language-java" data-lang="java"><span style="color:#b48ead;">public</span><span> void </span><span style="color:#bf616a;">insert</span><span>(</span><span style="color:#ebcb8b;">Price</span><span>... prices) throws </span><span style="color:#ebcb8b;">SQLException </span><span>{
</span><span>    em.</span><span style="color:#bf616a;">getTransaction</span><span>().</span><span style="color:#bf616a;">begin</span><span>();
</span><span>    </span><span style="color:#b48ead;">for </span><span>(</span><span style="color:#ebcb8b;">Price</span><span> p : prices) {
</span><span>        em.</span><span style="color:#bf616a;">persist</span><span>(p);
</span><span>    }
</span><span>    em.</span><span style="color:#bf616a;">getTransaction</span><span>().</span><span style="color:#bf616a;">commit</span><span>();
</span><span>}
</span></code></pre>
<p>If you add this ease of use to the fact that its performance in the test results was very good (close to SqliteDB), I can say that I have discovered an embedded database to consider for future Java projects. However, as with JavaDB, it is only useful if you are programming in Java.</p>
<h2 id="the-tests">The Tests</h2>
<p>The tests simply consist of repeatedly performing a series of <a href="https://es.wikipedia.org/wiki/CRUD">CRUD</a> operations. For each database, the test performs a series of inserts, selects, updates, and deletions of objects of the Price class.</p>
<p>I used 100,000 instances of the <a href="../java_embedded_databases/blob/master/src/main/java/domain/Price.java">Price.java</a> class, the same for each type of database.</p>
<p>For this, I created a <a href="../java_embedded_databases/blob/master/src/main/java/db/DB.java">DB.java</a> interface that each implementation for each database shares.</p>
<pre data-lang="java" style="background-color:#2b303b;color:#c0c5ce;" class="language-java "><code class="language-java" data-lang="java"><span style="color:#b48ead;">public interface </span><span style="color:#ebcb8b;">DB </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">insert</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">Price</span><span>... </span><span style="color:#bf616a;">prices</span><span style="color:#eff1f5;">) </span><span style="color:#b48ead;">throws </span><span style="color:#ebcb8b;">SQLException</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">createTable</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">deleteAll</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public void </span><span style="color:#8fa1b3;">update</span><span style="color:#eff1f5;">(</span><span style="color:#ebcb8b;">Price</span><span>... </span><span style="color:#bf616a;">prices</span><span style="color:#eff1f5;">) </span><span style="color:#b48ead;">throws </span><span style="color:#ebcb8b;">SQLException</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">public </span><span style="color:#ebcb8b;">Set</span><span style="color:#eff1f5;">&lt;</span><span style="color:#ebcb8b;">Price</span><span style="color:#eff1f5;">&gt; </span><span style="color:#8fa1b3;">selectAll</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">}
</span></code></pre>
<h3 id="jdbc-databases">JDBC Databases</h3>
<p>Only the data needed to obtain the driver and the database connection changes, so all the logic is in the <a href="../java_embedded_databases/blob/master/src/main/java/db/JdbcDb.java">JdbcDb.java</a> class, from which SqliteDB and DerbyDB inherit.</p>
<h3 id="source-code">Source Code</h3>
<p>You can download the source code from <a href="https://github.com/carlosvin/java_embedded_databases">here</a>.</p>
<p>It is a Gradle project, so to run the tests you just have to execute: <code>gradle test</code>.</p>
<p>Gradle will automatically download the necessary libraries, compile, and run the tests.</p>
<p>You can also see the execution directly at <a href="https://travis-ci.org/carlosvin/java_embedded_databases">Travis CI</a>.</p>
<p><img src="https://travis-ci.org/carlosvin/java_embedded_databases.svg" alt="Build Status" /></p>
<h3 id="test-results">Test Results</h3>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">db.DbTest </span><span>&gt; testSqliteDB STANDARD_OUT
</span><span>    </span><span style="color:#bf616a;">Testing</span><span> with 100000 elements
</span><span>    </span><span style="color:#bf616a;">100000</span><span> Prices SqliteDB, total time 3455 ms &lt;</span><span style="color:#d08770;">1</span><span>&gt;
</span><span>     </span><span style="color:#bf616a;">Insert:</span><span>  1508 ms
</span><span>     </span><span style="color:#bf616a;">Select:</span><span>  605 ms
</span><span>     </span><span style="color:#bf616a;">Update:</span><span>  1319 ms
</span><span>     </span><span style="color:#bf616a;">Delete:</span><span>  23 ms
</span><span>    </span><span style="color:#bf616a;">----------------------------------------------
</span><span style="color:#bf616a;">db.DbTest </span><span>&gt; testObjectDB STANDARD_OUT
</span><span>    </span><span style="color:#bf616a;">Testing</span><span> with 100000 elements
</span><span>    </span><span style="color:#bf616a;">100000</span><span> Prices ObjectDB, total time 6467 ms &lt;</span><span style="color:#d08770;">2</span><span>&gt;
</span><span>     </span><span style="color:#bf616a;">Insert:</span><span>  2579 ms
</span><span>     </span><span style="color:#bf616a;">Select:</span><span>  1126 ms
</span><span>     </span><span style="color:#bf616a;">Update:</span><span>  1698 ms
</span><span>     </span><span style="color:#bf616a;">Delete:</span><span>  1064 ms
</span><span>    </span><span style="color:#bf616a;">----------------------------------------------
</span><span style="color:#bf616a;">db.DbTest </span><span>&gt; testDerbyDB STANDARD_OUT
</span><span>    </span><span style="color:#bf616a;">Testing</span><span> with 100000 elements
</span><span>    </span><span style="color:#bf616a;">100000</span><span> Prices DerbyDB, total time 24808 ms &lt;</span><span style="color:#d08770;">3</span><span>&gt;
</span><span>     </span><span style="color:#bf616a;">Insert:</span><span>  11467 ms
</span><span>     </span><span style="color:#bf616a;">Select:</span><span>  695 ms
</span><span>     </span><span style="color:#bf616a;">Update:</span><span>  6983 ms
</span><span>     </span><span style="color:#bf616a;">Delete:</span><span>  5663 ms
</span></code></pre>
<p>&lt;1&gt; SqliteDB is the fastest.
&lt;2&gt; ObjectDB is twice as slow as SqliteDB.
&lt;3&gt; JavaDB or DerbyDB is the slowest, about 8 times slower than SqliteDB.</p>

  </section>

  <footer>
    <script src="https://utteranc.es/client.js" repo="carlosvin/carlosvin.github.io" issue-term="title"
      theme="github-light" crossorigin="anonymous" async defer>
      </script>
  </footer>
</article>

    <script src="/js/search.js"></script>

  </main>

  <footer>
    <nav>
      <small>&copy; 2025 Carlos Martin Sanchez | Powered by <a
          href="https://www.getzola.org/">Zola</a>
      </small>
      <span style="display: flex; gap: 1rem; align-items: flex-end;">
  <a href="https://github.com/carlosvin" target="_blank" rel="noopener">
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg" alt="GitHub" width="32"
      height="32" />
  </a>
  <a href="https://linkedin.com/in/carlosvin" target="_blank" rel="noopener">
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/linkedin/linkedin-original.svg" alt="LinkedIn"
      width="32" height="32" />
  </a>
</span>
    </nav>
  </footer>

  <script src="https://carlosvin.github.io/js/search.js"></script>
</body>

</html>