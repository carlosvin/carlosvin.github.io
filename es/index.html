<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="es">
<head>
<meta charset="utf-8">
<meta name="description" content="Qué está pasando por mi cabeza y alrededores">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Carlos says "bla bla"</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (es)" href="rss.xml">
<link rel="canonical" href="https://carlosvin.github.io/es/">
<link rel="next" href="index-2.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="google-site-verification" content="XzkYCjSblA4sHLJDa1Higd_O6P8hudmo6YJRDp5dDDc">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Mostrar navegación</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://carlosvin.github.io/es/">

                <span id="blog-title">Carlos says "bla bla"</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archivos</a>
                </li>
<li>
<a href="categories/index.html">Categorías</a>
                </li>
<li>
<a href="rss.xml">RSS</a>

                
            </li>
</ul>
<form method="get" action="http://www.google.com/search" class="navbar-form navbar-right" role="search">
<div class="form-group">
<input type="text" name="q" class="form-control" placeholder="Search">
</div>
<button type="submit" class="btn btn-primary">
	<span class="glyphicon glyphicon-search"></span>
</button>
<input type="hidden" name="sitesearch" value="https://carlosvin.github.io/">
</form>


            <ul class="nav navbar-nav navbar-right">
<li>
            </li>
<li><a href="https://carlosvin.github.io/" rel="alternate" hreflang="en">English</a></li>

                
                    
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/choosing-modern-cpp-stack/" class="u-url">Elegir tecnologías para mi nuevo proyeco C++</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/choosing-modern-cpp-stack/" rel="bookmark"><time class="published dt-published" datetime="2017-09-15T20:50:00+02:00" title="2017-09-15">2017-09-15</time></a></p>
                <p class="commentline">
        
    <a href="posts/choosing-modern-cpp-stack/#disqus_thread" data-disqus-identifier="cache/posts/choosing-modern-cpp-stack.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Estoy empezando un pequeño proyecto en C++ y antes de nada me han surgido un par de preguntas:</p>
<ol class="arabic simple">
<li>¿Cómo voy a construirlo?</li>
<li>¿Qué framework para pruebas unitarias utilizar?</li>
</ol>
<div class="contents topic" id="contenido">
<p class="topic-title first">Contenido</p>
<ul class="simple">
<li>
<a class="reference internal" href="posts/choosing-modern-cpp-stack/#elegir-un-sistema-de-construccion-meson" id="id1">Elegir un Sistema de Construcción (Meson)</a><ul>
<li><a class="reference internal" href="posts/choosing-modern-cpp-stack/#cmake-vs-meson" id="id2">CMake vs Meson</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/choosing-modern-cpp-stack/#framework-the-pruebas-unitarias" id="id3">Framework the Pruebas Unitarias</a><ul>
<li><a class="reference internal" href="posts/choosing-modern-cpp-stack/#doctest-una-alternativa-a-catch" id="id4">doctest: Una alternativa a Catch</a></li>
</ul>
</li>
<li>
<a class="reference internal" href="posts/choosing-modern-cpp-stack/#ejemplo" id="id5">Ejemplo</a><ul>
<li><a class="reference internal" href="posts/choosing-modern-cpp-stack/#artefactos-del-proyecto" id="id6">Artefactos del Proyecto</a></li>
<li><a class="reference internal" href="posts/choosing-modern-cpp-stack/#estructura-del-proyecto-fork-project" id="id7">Estructura del Proyecto (Fork project)</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="elegir-un-sistema-de-construccion-meson">
<h2>Elegir un Sistema de Construcción (<a class="reference external" href="http://mesonbuild.com/">Meson</a>)</h2>
<p>Ya he utilizado antes <a class="reference external" href="https://www.gnu.org/software/make/manual/make.html">Make</a>, <a class="reference external" href="https://maven.apache.org/">Maven</a>, <a class="reference external" href="http://scons.org/">Scons</a>, <a class="reference external" href="https://gradle.org/">Gradle</a> y <a class="reference external" href="http://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html">Autotools</a>, pero tengo algunas razones para probar algo diferente, hay algunas cosas que no me gustan:</p>
<dl class="docutils">
<dt><a class="reference external" href="http://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html">Autotools</a></dt>
<dd>No es fácil de configurar y mantener: hay distintos ficheros de configuración y distintos pasos de configuración.</dd>
<dt><a class="reference external" href="https://gradle.org/">Gradle</a></dt>
<dd>La construcción de proyectos C++ está todavía en desarrollo, los modelos y APIs están cambiando. No es muy rápido. Puedes ver un ejemplo en este artículo  <a class="reference external" href="../posts/gradle-cpp/">Construir un proyecto C++ con Gradle</a>.</dd>
<dt><a class="reference external" href="https://www.gnu.org/software/make/manual/make.html">Make</a></dt>
<dd>A medida que el proyecto crece los archivos de configuración se van complicando y volviendo poco manejables.
La sintáxis no me parece clara (esto es una custión de gustos).</dd>
<dt><a class="reference external" href="http://scons.org/">Scons</a></dt>
<dd>Es más lento y un poco más difícil de comprender que <a class="reference external" href="http://mesonbuild.com/">Meson</a>.</dd>
<dt><a class="reference external" href="https://maven.apache.org/">Maven</a></dt>
<dd>Es lento y puedes terminar "<em>Javatizando</em>" la estructura del proyecto.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">He nombrado solo las cosas que no gustan, pero estos sistemas de construcción tienen otras grandes virtudes, personalmente me encantan <a class="reference external" href="https://gradle.org/">Gradle</a>, <a class="reference external" href="http://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html">Autotools</a> y <a class="reference external" href="http://scons.org/">Scons</a>.</p>
</div>
<div class="section" id="cmake-vs-meson">
<h3>
<a class="reference external" href="https://cmake.org/">CMake</a> vs <a class="reference external" href="http://mesonbuild.com/">Meson</a>
</h3>
<p>Después de descartar los anteriores, estoy considerando <a class="reference external" href="http://mesonbuild.com/">Meson</a> y <a class="reference external" href="https://cmake.org/">CMake</a>.</p>
<dl class="docutils">
<dt><a class="reference external" href="https://cmake.org/">CMake</a></dt>
<dd>Tiene una gran ventaja sobre <a class="reference external" href="http://mesonbuild.com/">Meson</a>, es mucho más maduro y es mucho más usado, lo que significa que podrás encontrar muy fácilmente ejemplos, documentación y ayuda en Internet. No importa el tipo de proyecto que estés empezando, lo más seguro es que <a class="reference external" href="https://cmake.org/">CMake</a> sea una buena elección.</dd>
<dt><a class="reference external" href="http://mesonbuild.com/">Meson</a></dt>
<dd>Es un proyecto jóven comparado con <a class="reference external" href="https://cmake.org/">CMake</a>, pero está creciendo rápido y ya ha sido adoptado por algunos proyectos importantes como <a class="reference external" href="https://www.gnome.org/">Gnome</a>, donde han comenzado una iniciativa para <a class="reference external" href="https://wiki.gnome.org/Initiatives/GnomeGoals/MesonPorting">migrar desde Autotools a Meson</a>.</dd>
</dl>
<p><strong>Finalmente he elegido</strong> <a class="reference external" href="http://mesonbuild.com/">Meson</a> porque:</p>
<ul class="simple">
<li>La sintáxis es muy clara para mí, cuando leo un archivo <cite>meson.build</cite> entiendo rápidamente lo ue está pasando durante el proceso de construcción.</li>
<li>Es rápido, aunque está escrito en <a class="reference external" href="https://python.org/">Python</a> utiliza <a class="reference external" href="https://ninja-build.org/">Ninja</a> para construir el proyecto. La primera vez tienes que utilizar <a class="reference external" href="http://mesonbuild.com/">Meson</a> para configurar el proyecto, pero para construir y probar el proyecto relmente estamos ejecutando <a class="reference external" href="https://ninja-build.org/">Ninja</a>.</li>
</ul>
<pre class="code bash"><a name="rest_code_f3b2e014321f43faa3e9f6872c631d5f-1"></a>$ meson build . <span class="c1"># Primera vez, configuración del proyecto</span>
<a name="rest_code_f3b2e014321f43faa3e9f6872c631d5f-2"></a>$ <span class="nb">cd</span> build
<a name="rest_code_f3b2e014321f43faa3e9f6872c631d5f-3"></a>$ ninja build   <span class="c1"># cada vez que construyes el projecto</span>
<a name="rest_code_f3b2e014321f43faa3e9f6872c631d5f-4"></a>$ ninja <span class="nb">test</span>    <span class="c1"># cada vez que ejecutas tests</span>
</pre>
<p>He encontrado un para de comparaciones interesantes entre algunos de los sistemas de construcción en C++, aunque puede que no sean del todo imparciales porque han sido realizadas por <a class="reference external" href="http://mesonbuild.com/">Meson</a> y <a class="reference external" href="http://scons.org/">Scons</a>.</p>
<ul class="simple">
<li>
<a class="reference external" href="https://bitbucket.org/scons/scons/wiki/SconsVsOtherBuildTools">C++ build systems comparison from Scons</a>.</li>
<li>
<a class="reference external" href="http://mesonbuild.com/Simple-comparison.html">C++ build systems comparison from Meson</a>.</li>
</ul>
</div>
</div>
<div class="section" id="framework-the-pruebas-unitarias">
<h2><a class="toc-backref" href="posts/choosing-modern-cpp-stack/#id3">Framework the Pruebas Unitarias</a></h2>
<p>Anteriorment he utilizado algunas librerías del tipo <a class="reference external" href="https://en.wikipedia.org/wiki/XUnit">xUnit</a> como <a class="reference external" href="https://github.com/unittest-cpp/unittest-cpp">UnitTest++</a>, <a class="reference external" href="http://cpputest.github.io/">CppUTest</a> o <a class="reference external" href="https://github.com/google/googletest">Google Test</a> que encaja perfectamente con <a class="reference external" href="https://github.com/google/googletest/tree/master/googlemock">Google Mock</a>.</p>
<p>Si quires una apuesta segura que cumpla tus expectativas, te recomiendo <a class="reference external" href="https://github.com/google/googletest">Google Test</a>.</p>
<p>Pero hace algún tiempo encontré un framework de pruebas con algunas características no tan comunes en librerías de pruebas C++ y que resultaba realmente fácil de utilizar, estoy hablando de <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a>:</p>
<ul class="simple">
<li>Es simplemente un fichero de cabeceras C++ sin dependencias adicionales, por lo que resulta realmente rápido comenzar (wget y utilizar el fichero descargado desde tus pruebas).</li>
<li>Puedes utilizar el estilo normal de pruebas unitarias o el estilo <a class="reference external" href="https://en.wikipedia.org/wiki/Behavior-driven_development">BDD</a>.</li>
</ul>
<p>Si quieres saber más sobre <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a>, te recomiendo que directamente lo pruebes, el siguiente ejemplo, es cuestión de dos minutos <a class="reference external" href="https://github.com/philsquared/Catch/blob/master/docs/tutorial.md#writing-tests">simple example up and running</a>. Puedes también leer algunos artículos como <a class="reference external" href="https://github.com/philsquared/Catch/blob/master/docs/why-catch.md">Why do we need yet another C++ test framework?</a> o <a class="reference external" href="http://blog.coldflake.com/posts/Testing-C++-with-a-new-Catch/">Testing C++ With A New Catch</a>.</p>
<div class="section" id="doctest-una-alternativa-a-catch">
<h3>
<a class="reference external" href="https://github.com/onqtam/doctest">doctest</a>: Una alternativa a <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a>
</h3>
<p>Hay otro framework de pruebas llamado <a class="reference external" href="https://github.com/onqtam/doctest">doctest</a>, con los mismos principios que <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a>, pero promete ser más rápido y ligero (<a class="reference external" href="https://github.com/onqtam/doctest/blob/master/doc/markdown/benchmarks.md">resultados de las comparaciones de rendimiento</a>) que <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a>.</p>
<p><a class="reference external" href="https://github.com/onqtam/doctest">doctest</a> fue diseñado basándose en los puntos fuertes de <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a>, pero hay algunas <a class="reference external" href="https://github.com/onqtam/doctest/blob/master/doc/markdown/faq.md#how-is-doctest-different-from-catch">diferencias</a>.</p>
<p>No es fácil decidirse por uno, los dos son muy parecidos, puedes <a class="reference external" href="https://github.com/carlosvin/uuid-cpp/pull/1/files#diff-d22d1e18ecbe7ba34523db56b011bcfe">comprobar las diferencias entre un test escrito con Catch y otro con doctest</a>.</p>
<p>Finalmente he elegido <a class="reference external" href="https://github.com/onqtam/doctest">doctest</a> simplemente porque es más rápido: <a class="reference external" href="https://github.com/onqtam/doctest/blob/master/doc/markdown/benchmarks.md">resultados de las comparaciones de rendimiento</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">He creado el proyecto de ejemplo utilizando ambos frameworks, puedes encontrarlos en diferentes ramas del repositorio: <a class="reference external" href="https://github.com/carlosvin/uuid-cpp/tree/doctest">rama doctest</a> or <a class="reference external" href="https://github.com/carlosvin/uuid-cpp/tree/catch">rama catch</a>.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Sugerencia</p>
<p class="last">Puedes ver las mínimas diferencias entre un proyecto usando <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a> o <a class="reference external" href="https://github.com/onqtam/doctest">doctest</a> en: <a class="reference external" href="https://github.com/carlosvin/uuid-cpp/pull/1">https://github.com/carlosvin/uuid-cpp/pull/1</a></p>
</div>
</div>
</div>
<div class="section" id="ejemplo">
<h2><a class="toc-backref" href="posts/choosing-modern-cpp-stack/#id5">Ejemplo</a></h2>
<p>He creado un ejemplo para ilustrar este artículo: <a class="reference external" href="https://github.com/carlosvin/uuid-cpp">https://github.com/carlosvin/uuid-cpp</a>.</p>
<p>Consiste en una implementación básica de un generador pseudo-aleatorio de <a class="reference external" href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUID</a>, está basado en <a class="reference external" href="http://www.cplusplus.com/reference/random/mt19937/">mt19937</a> que no es criptográficamente seguro.</p>
<div class="section" id="artefactos-del-proyecto">
<h3><a class="toc-backref" href="posts/choosing-modern-cpp-stack/#id6">Artefactos del Proyecto</a></h3>
<p>Cuando instalemos el proyecto, <a class="reference external" href="http://mesonbuild.com/">Meson</a> (<a class="reference external" href="https://ninja-build.org/">Ninja</a> realmente) generará una serie de artefactos en nuestro sistema.</p>
<ul class="simple">
<li>Librería compartida: <code>libuuid</code>.</li>
<li>Fichero de cabeceras para que los desarrolladores puedan usar la librería: <code>include/Uuid.h</code>.</li>
<li>Fichero ejecutable <code>uuidgen</code> (Generador de <a class="reference external" href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUID</a>).</li>
<li>Ejecutable de las pruebas unitarias (no será instalado).</li>
</ul>
<p>Si ejecutamos <code>ninja install</code> en Linux obtendremos los siguientes ficheros:</p>
<pre class="code bash"><a name="rest_code_f77d31bde53d445f8de6bf8f8591e884-1"></a>/usr/local/lib/libuuid.so
<a name="rest_code_f77d31bde53d445f8de6bf8f8591e884-2"></a>/usr/local/include/Uuid.h
<a name="rest_code_f77d31bde53d445f8de6bf8f8591e884-3"></a>/usr/local/bin/uuidgen
</pre>
</div>
<div class="section" id="estructura-del-proyecto-fork-project">
<h3>Estructura del Proyecto (<a class="reference external" href="https://github.com/carlosvin/uuid-cpp">Fork project</a>)</h3>
<ul>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/meson.build">meson.build</a></dt>
<dd>
<p class="first">Fichero principal de configuración para construir el proyecto. Lo utilizamos para especificar las propiedades y subdirectorios del proyecto.</p>
<div class="last"><pre class="code python"><a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-1"></a><span class="n">project</span><span class="p">(</span>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-2"></a>    <span class="s1">'cpp-meson-example'</span><span class="p">,</span> <span class="c1"># project name</span>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-3"></a>    <span class="s1">'cpp'</span><span class="p">,</span> <span class="c1"># C++ project, e.g: for C project</span>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-4"></a>    <span class="n">version</span> <span class="p">:</span> <span class="s1">'1.0.0'</span><span class="p">,</span>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-5"></a>    <span class="n">license</span> <span class="p">:</span> <span class="s1">'MIT'</span><span class="p">,</span>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-6"></a>    <span class="n">default_options</span> <span class="p">:</span> <span class="p">[</span><span class="s1">'cpp_std=c++11'</span><span class="p">])</span> <span class="c1"># compile for C++</span>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-7"></a>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-8"></a><span class="c1"># it will be referred from subdir projects</span>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-9"></a><span class="n">inc</span> <span class="o">=</span> <span class="n">include_directories</span><span class="p">(</span><span class="s1">'include'</span><span class="p">)</span>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-10"></a>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-11"></a><span class="c1"># meson will try to find a meson.build file inside following directories</span>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-12"></a><span class="n">subdir</span><span class="p">(</span><span class="s1">'include'</span><span class="p">)</span>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-13"></a><span class="n">subdir</span><span class="p">(</span><span class="s1">'src'</span><span class="p">)</span>
<a name="rest_code_ed0bf90d3dc84ce682f1757b27248494-14"></a><span class="n">subdir</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span>
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/include/">include</a></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>meson.build</dt>
<dd>
<p class="first">Archivo de configuración para construir este directorio, no hay mucho que hacer aquí, simplemente indicamos qué ficheros de cabeceras han de ser instalados</p>
<div class="last"><pre class="code python"><a name="rest_code_dd46453b5e5b43458a8b887fc7d203c9-1"></a><span class="c1"># Select header files to be installed</span>
<a name="rest_code_dd46453b5e5b43458a8b887fc7d203c9-2"></a><span class="n">install_headers</span><span class="p">(</span><span class="s1">'Uuid.h'</span><span class="p">)</span>
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/include/Uuid.h">Uuid.h</a></dt>
<dd>
<p class="first">Archivos de cabeceras, es el interfaz que expone la librería y que será incluido por los usuarios de la misma.</p>
<div class="last"><pre class="code cpp"><a name="rest_code_d2ed01335b04415eb2593af9701dc47b-1"></a><span class="k">namespace</span> <span class="n">ids</span> <span class="p">{</span>
<a name="rest_code_d2ed01335b04415eb2593af9701dc47b-2"></a>
<a name="rest_code_d2ed01335b04415eb2593af9701dc47b-3"></a><span class="k">class</span> <span class="nc">Uuid</span> <span class="p">{</span>
<a name="rest_code_d2ed01335b04415eb2593af9701dc47b-4"></a>    <span class="k">private</span><span class="o">:</span>
<a name="rest_code_d2ed01335b04415eb2593af9701dc47b-5"></a>    <span class="c1">// ...</span>
</pre></div>
</dd>
</dl></li>
</ul></dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/src">src</a></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/src/meson.build">meson.build (src)</a></dt>
<dd>
<p class="first">Declara 2 artefactos de salida: La librería <code>libuuid</code> y el ejecutable <code>uuidgen</code>.</p>
<div class="last"><pre class="code python"><a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-1"></a><span class="n">libuuid</span> <span class="o">=</span> <span class="n">shared_library</span><span class="p">(</span>
<a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-2"></a>    <span class="s1">'uuid'</span><span class="p">,</span> <span class="c1"># library name</span>
<a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-3"></a>    <span class="s1">'Uuid.cpp'</span><span class="p">,</span> <span class="c1"># source files to be compile</span>
<a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-4"></a>    <span class="n">include_directories</span> <span class="p">:</span> <span class="n">inc</span><span class="p">,</span> <span class="c1"># previously declared include directories in root :code:`meson.build`</span>
<a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-5"></a>    <span class="n">install</span> <span class="p">:</span> <span class="n">true</span><span class="p">)</span> <span class="c1"># :code:`libuuid` will be part of project installation</span>
<a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-6"></a>
<a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-7"></a><span class="n">uuidgen</span> <span class="o">=</span> <span class="n">executable</span><span class="p">(</span>
<a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-8"></a>    <span class="s1">'uuidgen'</span><span class="p">,</span> <span class="c1"># executable name</span>
<a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-9"></a>    <span class="s1">'main.cpp'</span><span class="p">,</span> <span class="c1"># source files to compile</span>
<a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-10"></a>    <span class="n">include_directories</span> <span class="p">:</span> <span class="n">inc</span><span class="p">,</span> <span class="c1"># previously declared include directories in root :code:`meson.build`</span>
<a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-11"></a>    <span class="n">link_with</span> <span class="p">:</span> <span class="n">libuuid</span><span class="p">,</span> <span class="c1"># linking executable with shared previously declared shared library :code:`libuuid`</span>
<a name="rest_code_6c020ee4d3b442b6bbe7f430422d4727-12"></a>    <span class="n">install</span> <span class="p">:</span> <span class="n">true</span><span class="p">)</span> <span class="c1"># :code:`uuidgen` executable be part of project installation</span>
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/src/main.cpp">main.cpp</a></dt>
<dd>
<p class="first">Código fuente del ejecutable de la aplicación: <code>uuidgen</code></p>
<div class="last"><pre class="code cpp"><a name="rest_code_f1d1b0ac944c48068529801a0a4d0b6d-1"></a><span class="cp">#include</span> <span class="cpf">"Uuid.h"</span><span class="cp"></span>
<a name="rest_code_f1d1b0ac944c48068529801a0a4d0b6d-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_f1d1b0ac944c48068529801a0a4d0b6d-3"></a>
<a name="rest_code_f1d1b0ac944c48068529801a0a4d0b6d-4"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_f1d1b0ac944c48068529801a0a4d0b6d-5"></a><span class="p">{</span>
<a name="rest_code_f1d1b0ac944c48068529801a0a4d0b6d-6"></a>    <span class="n">ids</span><span class="o">::</span><span class="n">Uuid</span> <span class="n">uuid</span><span class="p">;</span>
<a name="rest_code_f1d1b0ac944c48068529801a0a4d0b6d-7"></a>    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">uuid</span><span class="p">.</span><span class="n">to_str</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a name="rest_code_f1d1b0ac944c48068529801a0a4d0b6d-8"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_f1d1b0ac944c48068529801a0a4d0b6d-9"></a><span class="p">}</span>
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/src/Uuid.cpp">Uuid.cpp</a></dt>
<dd>
<p class="first">Implementación de la clase declarada en el fichero de cabeceras <code>Uuid.h</code>.</p>
<div class="last"><pre class="code cpp"><a name="rest_code_3f4c63a3f33e4313803f6ad719f5ca65-1"></a><span class="cp">#include</span> <span class="cpf">"Uuid.h"</span><span class="cp"></span>
<a name="rest_code_3f4c63a3f33e4313803f6ad719f5ca65-2"></a>
<a name="rest_code_3f4c63a3f33e4313803f6ad719f5ca65-3"></a><span class="n">Uuid</span><span class="o">::</span><span class="n">Uuid</span><span class="p">()</span>
<a name="rest_code_3f4c63a3f33e4313803f6ad719f5ca65-4"></a><span class="p">{</span> <span class="c1">// ...</span>
</pre></div>
</dd>
</dl></li>
</ul></dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/test/">test</a></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/test/meson.build">meson.build (test)</a></dt>
<dd>
<p class="first">Archivo de configuración para construir y ejecutar las pruebas unitarias.</p>
<div class="last"><pre class="code python"><a name="rest_code_b298a8a49432473ea0d19848c955c7a9-1"></a><span class="n">testexe</span> <span class="o">=</span> <span class="n">executable</span><span class="p">(</span>
<a name="rest_code_b298a8a49432473ea0d19848c955c7a9-2"></a>    <span class="s1">'testexe'</span><span class="p">,</span> <span class="c1"># test executable name</span>
<a name="rest_code_b298a8a49432473ea0d19848c955c7a9-3"></a>    <span class="s1">'uuid_test.cpp'</span><span class="p">,</span> <span class="c1"># tests source files to be compiled</span>
<a name="rest_code_b298a8a49432473ea0d19848c955c7a9-4"></a>    <span class="n">include_directories</span> <span class="p">:</span> <span class="n">inc</span><span class="p">,</span>  <span class="c1"># declared include directories in root :code:`meson.build`</span>
<a name="rest_code_b298a8a49432473ea0d19848c955c7a9-5"></a>    <span class="n">link_with</span> <span class="p">:</span> <span class="n">libuuid</span><span class="p">)</span> <span class="c1"># link test executable with previously declared shared library :code:`libuuid`</span>
<a name="rest_code_b298a8a49432473ea0d19848c955c7a9-6"></a>
<a name="rest_code_b298a8a49432473ea0d19848c955c7a9-7"></a><span class="c1"># test execution</span>
<a name="rest_code_b298a8a49432473ea0d19848c955c7a9-8"></a><span class="n">test</span><span class="p">(</span><span class="s1">'Uuid test'</span><span class="p">,</span> <span class="n">testexe</span><span class="p">)</span>
<a name="rest_code_b298a8a49432473ea0d19848c955c7a9-9"></a>
<a name="rest_code_b298a8a49432473ea0d19848c955c7a9-10"></a><span class="c1"># we can specify other test execution passing arguments or environment variables</span>
<a name="rest_code_b298a8a49432473ea0d19848c955c7a9-11"></a><span class="n">test</span><span class="p">(</span><span class="s1">'Uuid test with args and env'</span><span class="p">,</span> <span class="n">testexe</span><span class="p">,</span> <span class="n">args</span> <span class="p">:</span> <span class="p">[</span><span class="s1">'arg1'</span><span class="p">,</span> <span class="s1">'arg2'</span><span class="p">],</span> <span class="n">env</span> <span class="p">:</span> <span class="p">[</span><span class="s1">'FOO=bar'</span><span class="p">])</span>
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt>doctest.h</dt>
<dd>
<p class="first">Librería <a class="reference external" href="https://github.com/onqtam/doctest">doctest</a> en un único fichero de cabeceras. Puedes tratar de automatizar el proceso de instalación de la librería, yo por el momento la he instalado manualmente, ya que es un proceso muy sencillo:</p>
<div class="last"><pre class="code bash"><a name="rest_code_c2b38b0432314c23a283c5adb1d1b033-1"></a><span class="nb">cd</span> <span class="nb">test</span>
<a name="rest_code_c2b38b0432314c23a283c5adb1d1b033-2"></a>wget https://raw.githubusercontent.com/onqtam/doctest/master/doctest/doctest.h
</pre></div>
</dd>
</dl></li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/carlosvin/uuid-cpp/blob/master/test/uuid_test.cpp">uuid_test.cpp</a></dt>
<dd>
<p class="first">Implementación de las pruebas unitarias.</p>
<div class="last"><pre class="code cpp"><a name="rest_code_b465331b2a2c448a8a37690380ab66c7-1"></a> <span class="c1">// This tells doctest to provide a main() - only do this in one cpp file</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-2"></a><span class="cp">#define DOCTEST_CONFIG_IMPLEMENT_WITH_MAIN</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-3"></a>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-4"></a><span class="cp">#include</span> <span class="cpf">"doctest.h"</span><span class="cp"></span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-5"></a><span class="cp">#include</span> <span class="cpf">"Uuid.h"</span><span class="cp"></span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-6"></a><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-7"></a>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-8"></a><span class="k">constexpr</span> <span class="kt">int</span> <span class="n">MAX_ITERS</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-9"></a>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-10"></a><span class="n">TEST_CASE</span><span class="p">(</span> <span class="s">"Uuid"</span> <span class="p">)</span> <span class="p">{</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-11"></a>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">MAX_ITERS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-12"></a>        <span class="n">ids</span><span class="o">::</span><span class="n">Uuid</span> <span class="n">uuid</span><span class="p">;</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-13"></a>        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">uuid_str</span> <span class="p">{</span><span class="n">uuid</span><span class="p">.</span><span class="n">to_str</span><span class="p">()};</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-14"></a>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-15"></a>        <span class="n">MESSAGE</span><span class="p">(</span><span class="n">uuid_str</span><span class="p">);</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-16"></a>        <span class="n">CHECK</span><span class="p">(</span><span class="n">uuid</span><span class="p">.</span><span class="n">most</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-17"></a>        <span class="n">CHECK</span><span class="p">(</span><span class="n">uuid</span><span class="p">.</span><span class="n">least</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-18"></a>        <span class="n">CHECK</span><span class="p">(</span><span class="n">uuid_str</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">36</span><span class="p">);</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-19"></a>    <span class="p">}</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-20"></a><span class="p">}</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-21"></a>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-22"></a><span class="c1">// BDD style</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-23"></a>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-24"></a><span class="n">SCENARIO</span><span class="p">(</span> <span class="s">"UUID creation"</span> <span class="p">)</span> <span class="p">{</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-25"></a>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-26"></a>    <span class="n">GIVEN</span><span class="p">(</span> <span class="s">"A random UUID "</span> <span class="p">)</span> <span class="p">{</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-27"></a>        <span class="n">ids</span><span class="o">::</span><span class="n">Uuid</span> <span class="n">uuid</span><span class="p">;</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-28"></a>        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">uuid_str</span> <span class="p">{</span><span class="n">uuid</span><span class="p">.</span><span class="n">to_str</span><span class="p">()};</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-29"></a>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-30"></a>        <span class="n">CHECK</span><span class="p">(</span><span class="n">uuid_str</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">36</span><span class="p">);</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-31"></a>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-32"></a>        <span class="n">WHEN</span><span class="p">(</span> <span class="s">"get the most and least"</span> <span class="p">)</span> <span class="p">{</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-33"></a>            <span class="n">THEN</span><span class="p">(</span> <span class="s">"should be more than 0"</span> <span class="p">)</span> <span class="p">{</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-34"></a>                <span class="n">CHECK</span><span class="p">(</span> <span class="n">uuid</span><span class="p">.</span><span class="n">most</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-35"></a>                <span class="n">CHECK</span><span class="p">(</span> <span class="n">uuid</span><span class="p">.</span><span class="n">least</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-36"></a>            <span class="p">}</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-37"></a>        <span class="p">}</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-38"></a>    <span class="p">}</span>
<a name="rest_code_b465331b2a2c448a8a37690380ab66c7-39"></a><span class="p">}</span>
</pre></div>
</dd>
</dl></li>
</ul></dd>
</dl></li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Sugerencia</p>
<p class="last">Puedes encontrar las instrucciones para construir y ejecutar el proyecto de ejemplo en: <a class="reference external" href="https://github.com/carlosvin/uuid-cpp#how-to-build-the-example">https://github.com/carlosvin/uuid-cpp#how-to-build-the-example</a></p>
</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/recursive-directory-iterator/" class="u-url">Sistema de Ficheros en C++17</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/recursive-directory-iterator/" rel="bookmark"><time class="published dt-published" datetime="2017-05-28T09:00:00+02:00" title="2017-05-28">2017-05-28</time></a></p>
                <p class="commentline">
        
    <a href="posts/recursive-directory-iterator/#disqus_thread" data-disqus-identifier="cache/posts/recursive-directory-iterator-cpp.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<div class="section" id="introduccion">
<h2><a class="toc-backref" href="posts/recursive-directory-iterator/#id4">Introducción</a></h2>
<p>A partir de C++17 se añadirán nuevas abstracciones sobre el sistema de ficheros. De momento están disponibles como parte de las
<a class="reference external" href="http://en.cppreference.com/w/cpp/experimental">Características Experimentales de C++</a>. Si queréis profundizar aquí está el <a class="reference external" href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4100.pdf">borrador final de la Especificación Técnica del Sistema de Ficheros</a>.</p>
<div class="contents topic" id="contenido">
<p class="topic-title first">Contenido</p>
<ul class="simple">
<li><a class="reference internal" href="posts/recursive-directory-iterator/#introduccion" id="id4">Introducción</a></li>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#comenzar-a-utilizar-caracteristica-experimental-filesystem-c-17-g" id="id5">Comenzar a utilizar característica experimental filesystem C++17 (g++)</a></li>
<li>
<a class="reference internal" href="posts/recursive-directory-iterator/#caracteristicas-de-filesystem-c-17" id="id6">Características de filesystem C++17</a><ul>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#std-filesystem-path" id="id7">std::filesystem::path</a></li>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#separador-de-directorios" id="id8">Separador de directorios</a></li>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#operador-separador-de-directorios" id="id9">Operador separador de directorios</a></li>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#crear-y-borrar-directorios" id="id10">Crear y borrar directorios</a></li>
</ul>
</li>
<li><a class="reference internal" href="posts/recursive-directory-iterator/#ejemplo-completo-iterar-recursivamente-por-directorios" id="id11">Ejemplo completo: Iterar Recursivamente por Directorios</a></li>
</ul>
</div>
</div>
<div class="section" id="comenzar-a-utilizar-caracteristica-experimental-filesystem-c-17-g">
<h2><a class="toc-backref" href="posts/recursive-directory-iterator/#id5">Comenzar a utilizar característica experimental filesystem C++17 (g++)</a></h2>
<p>Simplemente debemos "decir" al compilador que estamos escribiendo código C++17 (<strong>-c++1z</strong>) y que añada la librería estándar con la librería filesystem (<strong>-lstdc++fs</strong>).</p>
<pre class="code bash"><a name="rest_code_2b123b5b09e24f5792f57fd0831af315-1"></a>g++ -std<span class="o">=</span>c++1z main.cpp -lstdc++fs <span class="o">&amp;&amp;</span> ./a.out
</pre>
<p>Veamos un ejemplo muy simple utilizando la clase <tt class="docutils literal"><span class="pre">std::filesystem::path</span></tt>.</p>
<pre class="code cpp"><a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-1"></a><span class="cp">#include</span> <span class="cpf">&lt;experimental/filesystem&gt;</span><span class="cp"></span>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-3"></a>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-4"></a><span class="k">namespace</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">filesystem</span><span class="p">;</span>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-5"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-6"></a>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-7"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-8"></a><span class="p">{</span>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-9"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">path</span> <span class="n">aPath</span> <span class="p">{</span><span class="s">"./path/to/file.txt"</span><span class="p">};</span>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-10"></a>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-11"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Parent path: "</span> <span class="o">&lt;&lt;</span> <span class="n">aPath</span><span class="p">.</span><span class="n">parent_path</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-12"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Filename: "</span> <span class="o">&lt;&lt;</span> <span class="n">aPath</span><span class="p">.</span><span class="n">filename</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-13"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Extension: "</span> <span class="o">&lt;&lt;</span> <span class="n">aPath</span><span class="p">.</span><span class="n">extension</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-14"></a>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-15"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_2b62a1522d69453a8d310da5ba2796d3-16"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/9f8bebb8b7f0fbe7">Compilar y ejecutar: ejemplo básico C++17</a></p>
<p>Como vemos el resultado de la ejecución es:</p>
<pre class="code bash"><a name="rest_code_21fa07a84066475eb8569d7085c9026c-1"></a>$ g++ -std<span class="o">=</span>c++1z main.cpp -lstdc++fs <span class="o">&amp;&amp;</span> ./a.out
<a name="rest_code_21fa07a84066475eb8569d7085c9026c-2"></a>$ ./a.out
<a name="rest_code_21fa07a84066475eb8569d7085c9026c-3"></a>
<a name="rest_code_21fa07a84066475eb8569d7085c9026c-4"></a>Parent path: <span class="s2">"./path/to"</span>
<a name="rest_code_21fa07a84066475eb8569d7085c9026c-5"></a>Filename: <span class="s2">"file.txt"</span>
<a name="rest_code_21fa07a84066475eb8569d7085c9026c-6"></a>Extension: <span class="s2">".txt"</span>
</pre>
</div>
<div class="section" id="caracteristicas-de-filesystem-c-17">
<h2><a class="toc-backref" href="posts/recursive-directory-iterator/#id6">Características de filesystem C++17</a></h2>
<p>A continuación vamos a analizar algunas características que nos proporciona <a class="reference external" href="http://en.cppreference.com/w/cpp/filesystem">std::filesystem</a> con ejemplos en C++11 y C++17, de esta forma podremos hacernos una idea de las utilidades que esta nueva librería nos trae y cómo efectivamente ayuda al desarrollador a escribir código más claro y seguro.</p>
<div class="section" id="std-filesystem-path">
<h3><a class="toc-backref" href="posts/recursive-directory-iterator/#id7">std::filesystem::path</a></h3>
<p>Más arriba ya hemos visto un pequeño <a class="reference external" href="http://coliru.stacked-crooked.com/a/9f8bebb8b7f0fbe7">ejemplo de uso de clase std::filesystem::path</a>. Ésta abstracción nos proporciona una ruta a ficheros y directorios multi-plataforma, utilizando el separador de directorios correspondiente a la plataforma en la que trabajamos <tt class="docutils literal">\</tt> en sistemas basados en Windows y <tt class="docutils literal">/</tt> en sistemas basados en Unix.</p>
</div>
<div class="section" id="separador-de-directorios">
<h3><a class="toc-backref" href="posts/recursive-directory-iterator/#id8">Separador de directorios</a></h3>
<p>Si quisiéramos que nuestro software utilizase el separador de directorios correcto para una plataforma, en C++11 podríamos utilizar una macro de compilación condicional:</p>
<pre class="code cpp"><a name="rest_code_f8c52f78e6c342139371739ceca069c3-1"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-2"></a>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-3"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-4"></a>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-5"></a><span class="cp">#ifdef _WIN32</span>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-6"></a><span class="k">const</span> <span class="n">string</span> <span class="n">SEP</span> <span class="o">=</span> <span class="s">"</span><span class="se">\\</span><span class="s">"</span><span class="p">;</span>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-7"></a><span class="cp">#else</span>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-8"></a><span class="k">const</span> <span class="n">string</span> <span class="n">SEP</span> <span class="o">=</span> <span class="s">"/"</span><span class="p">;</span>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-9"></a><span class="cp">#endif</span>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-10"></a>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-11"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-12"></a><span class="p">{</span>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-13"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Separator in my system "</span> <span class="o">&lt;&lt;</span> <span class="n">SEP</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-14"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_f8c52f78e6c342139371739ceca069c3-15"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/5023ee989105fc54">Compilar y ejecutar: ejemplo separador C++11</a></p>
<p>En C++17 sería algo más sencillo:</p>
<pre class="code cpp"><a name="rest_code_3a8188a0b28e443aa5e864f596305213-1"></a><span class="cp">#include</span> <span class="cpf">&lt;experimental/filesystem&gt;</span><span class="cp"></span>
<a name="rest_code_3a8188a0b28e443aa5e864f596305213-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_3a8188a0b28e443aa5e864f596305213-3"></a>
<a name="rest_code_3a8188a0b28e443aa5e864f596305213-4"></a><span class="k">namespace</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">filesystem</span><span class="p">;</span>
<a name="rest_code_3a8188a0b28e443aa5e864f596305213-5"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_3a8188a0b28e443aa5e864f596305213-6"></a>
<a name="rest_code_3a8188a0b28e443aa5e864f596305213-7"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_3a8188a0b28e443aa5e864f596305213-8"></a><span class="p">{</span>
<a name="rest_code_3a8188a0b28e443aa5e864f596305213-9"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Separator in my system "</span> <span class="o">&lt;&lt;</span> <span class="n">fs</span><span class="o">::</span><span class="n">path</span><span class="o">::</span><span class="n">preferred_separator</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_3a8188a0b28e443aa5e864f596305213-10"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_3a8188a0b28e443aa5e864f596305213-11"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/1f2f63b3f5597d05">Compilar y ejecutar: ejemplo separador C++17</a></p>
</div>
<div class="section" id="operador-separador-de-directorios">
<h3><a class="toc-backref" href="posts/recursive-directory-iterator/#id9">Operador separador de directorios</a></h3>
<p><a class="reference external" href="http://en.cppreference.com/w/cpp/filesystem/path">std::filesystem::path</a> implementa el operador <strong>/</strong>, el cual nos permite concatenar fácilmente rutas a ficheros o directorios.</p>
<p>Si quisiéramos construir rutas a directorios en C++11, tendríamos que implementar cierta lógica extra para detectar que no añadimos separadores extra y para utilizar el separador correcto:</p>
<pre class="code cpp"><a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-1"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-2"></a>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-3"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-4"></a>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-5"></a><span class="cp">#ifdef _WIN32</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-6"></a><span class="k">const</span> <span class="n">string</span> <span class="n">SEP</span> <span class="o">=</span> <span class="s">"</span><span class="se">\\</span><span class="s">"</span><span class="p">;</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-7"></a><span class="cp">#else</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-8"></a><span class="k">const</span> <span class="n">string</span> <span class="n">SEP</span> <span class="o">=</span> <span class="s">"/"</span><span class="p">;</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-9"></a><span class="cp">#endif</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-10"></a>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-11"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-12"></a><span class="p">{</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-13"></a>    <span class="n">string</span> <span class="n">root</span> <span class="p">{</span><span class="s">"/"</span><span class="p">};</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-14"></a>    <span class="n">string</span> <span class="n">dir</span> <span class="p">{</span><span class="s">"var/www/"</span><span class="p">};</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-15"></a>    <span class="n">string</span> <span class="n">index</span> <span class="p">{</span><span class="s">"index.html"</span><span class="p">};</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-16"></a>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-17"></a>    <span class="n">string</span> <span class="n">pathToIndex</span><span class="p">{};</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-18"></a>    <span class="n">pathToIndex</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">root</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">SEP</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">dir</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">SEP</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-19"></a>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-20"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">pathToIndex</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-21"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_ceeb7dacebc3474893c8b9ec4bc3f1bd-22"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/290b278ec1de9573">Compilar y ejecutar: ejemplo concatenar rutas C++11</a>. Como vemos el resultado no es del todo correcto, deberíamos comprobar si las partes de la ruta ya contienen separador, para no añadirlo.</p>
<p>Toda esta lógica está ya implementada en <a class="reference external" href="http://en.cppreference.com/w/cpp/filesystem/path">std::filesystem::path</a>, así que el código en C++17 sería algo así:</p>
<pre class="code cpp"><a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-1"></a><span class="cp">#include</span> <span class="cpf">&lt;experimental/filesystem&gt;</span><span class="cp"></span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-3"></a>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-4"></a><span class="k">namespace</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">filesystem</span><span class="p">;</span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-5"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-6"></a>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-7"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-8"></a><span class="p">{</span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-9"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">path</span> <span class="n">root</span> <span class="p">{</span><span class="s">"/"</span><span class="p">};</span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-10"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">path</span> <span class="n">dir</span> <span class="p">{</span><span class="s">"var/www/"</span><span class="p">};</span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-11"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">path</span> <span class="n">index</span> <span class="p">{</span><span class="s">"index.html"</span><span class="p">};</span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-12"></a>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-13"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">path</span> <span class="n">pathToIndex</span> <span class="o">=</span> <span class="n">root</span> <span class="o">/</span> <span class="n">dir</span> <span class="o">/</span> <span class="n">index</span><span class="p">;</span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-14"></a>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-15"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">pathToIndex</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-16"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_aa3ad8944b9942d59f2ffbf63099024b-17"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/a24d50875b4daad1">Compilar y ejecutar: ejemplo concatenar rutas C++17</a>. Aquí el código es más limpio y el resultado es simplemente correcto, no hay separadores duplicados.</p>
</div>
<div class="section" id="crear-y-borrar-directorios">
<h3><a class="toc-backref" href="posts/recursive-directory-iterator/#id10">Crear y borrar directorios</a></h3>
<p><a class="reference external" href="http://en.cppreference.com/w/cpp/filesystem">std::filesystem</a> introduce algunas facilidades para crear y borrar directorios y ficheros, primero vamos a ver una de las formas de hacerlo en C++11.</p>
<pre class="code cpp"><a name="rest_code_45b606b4455e40c1b9d090f1977eba86-1"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-2"></a><span class="cp">#include</span> <span class="cpf">&lt;cstdio&gt;</span><span class="cp"></span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-3"></a><span class="cp">#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp"></span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-4"></a>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-5"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-6"></a>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-7"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-8"></a><span class="p">{</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-9"></a>    <span class="k">auto</span> <span class="n">opts</span> <span class="o">=</span> <span class="n">S_IRWXU</span> <span class="o">|</span> <span class="n">S_IRWXG</span> <span class="o">|</span> <span class="n">S_IROTH</span> <span class="o">|</span> <span class="n">S_IXOTH</span><span class="p">;</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-10"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox"</span><span class="p">,</span> <span class="n">opts</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-11"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/a"</span><span class="p">,</span> <span class="n">opts</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-12"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/a/b"</span><span class="p">,</span> <span class="n">opts</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-13"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/c"</span><span class="p">,</span> <span class="n">opts</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-14"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/c/d"</span><span class="p">,</span> <span class="n">opts</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-15"></a>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-16"></a>    <span class="n">system</span><span class="p">(</span><span class="s">"ls -la sandbox/*"</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-17"></a>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-18"></a>    <span class="n">remove</span><span class="p">(</span><span class="s">"sandbox/c/d"</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-19"></a>    <span class="n">remove</span><span class="p">(</span><span class="s">"sandbox/a/b"</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-20"></a>    <span class="n">remove</span><span class="p">(</span><span class="s">"sandbox/c"</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-21"></a>    <span class="n">remove</span><span class="p">(</span><span class="s">"sandbox/a"</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-22"></a>    <span class="n">remove</span><span class="p">(</span><span class="s">"sandbox"</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-23"></a>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-24"></a>    <span class="n">system</span><span class="p">(</span><span class="s">"ls -la"</span><span class="p">);</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-25"></a>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-26"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_45b606b4455e40c1b9d090f1977eba86-27"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/26f4763ec5b42adb">Compilar y ejecutar: crear y borrar directorios C++11</a>. Para crear y borrar directorios anidados, debemos hacerlo uno por uno. Podemos escribir este fragmento de código con menos líneas, pero aún así tendremos que tener cuidado del orden en el que creamos/borramos los directorios.</p>
<p>En C++17 podemos borrar y crear directorios anidados con una sola llamada.</p>
<pre class="code cpp"><a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-1"></a><span class="cp">#include</span> <span class="cpf">&lt;experimental/filesystem&gt;</span><span class="cp"></span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-3"></a>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-4"></a><span class="k">namespace</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">filesystem</span><span class="p">;</span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-5"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-6"></a>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-7"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-8"></a><span class="p">{</span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-9"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">create_directories</span><span class="p">(</span><span class="s">"sandbox/a/b"</span><span class="p">);</span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-10"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">create_directories</span><span class="p">(</span><span class="s">"sandbox/c/d"</span><span class="p">);</span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-11"></a>    <span class="n">system</span><span class="p">(</span><span class="s">"ls -la sandbox/*"</span><span class="p">);</span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-12"></a>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-13"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Were directories removed? "</span> <span class="o">&lt;&lt;</span> <span class="n">fs</span><span class="o">::</span><span class="n">remove_all</span><span class="p">(</span><span class="s">"sandbox"</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-14"></a>    <span class="n">system</span><span class="p">(</span><span class="s">"ls -la"</span><span class="p">);</span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-15"></a>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-16"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_035ec5f48b6541d78e2cea467e9f4975-17"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/62c2d22fa0e7144c">Compilar y ejecutar: crear y borrar directorios C++17</a>.</p>
</div>
</div>
<div class="section" id="ejemplo-completo-iterar-recursivamente-por-directorios">
<h2><a class="toc-backref" href="posts/recursive-directory-iterator/#id11">Ejemplo completo: Iterar Recursivamente por Directorios</a></h2>
<p>Vamos a ver un ejemplo algo más completo, consiste en iterar recursivamente a través de directorios, filtrando los ficheros por extension.</p>
<p>Este es el ejemplo en C++11, sin filtrar por extension, para evitar complicarlo:</p>
<p><a class="reference external" href="../listings/recursive-directory/filesystem.11.cpp.html">recursive-directory/filesystem.11.cpp</a>  <a class="reference external" href="../listings/recursive-directory/filesystem.11.cpp">(Código fuente)</a></p>
<pre class="code cpp"><a name="rest_code_24035f455d134b1db3b06e6aa310ae54-1"></a><span class="cp">#include</span> <span class="cpf">&lt;dirent.h&gt;</span><span class="cp"></span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-2"></a><span class="cp">#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp"></span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-3"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-4"></a><span class="cp">#include</span> <span class="cpf">&lt;fstream&gt; // std::ofstream</span><span class="cp"></span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-5"></a><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-6"></a><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp"></span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-7"></a><span class="cp">#include</span> <span class="cpf">&lt;system_error&gt;</span><span class="cp"></span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-8"></a><span class="cp">#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp"></span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-9"></a>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-10"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-11"></a>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-12"></a><span class="k">const</span> <span class="n">string</span> <span class="n">UP_DIR</span> <span class="o">=</span> <span class="s">".."</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-13"></a><span class="k">const</span> <span class="n">string</span> <span class="n">CURRENT_DIR</span> <span class="o">=</span> <span class="s">"."</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-14"></a><span class="k">const</span> <span class="n">string</span> <span class="n">SEP</span> <span class="o">=</span> <span class="s">"/"</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-15"></a>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-16"></a>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-17"></a><span class="n">string</span> <span class="nf">path</span><span class="p">(</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">parts</span><span class="p">)</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-18"></a><span class="p">{</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-19"></a>    <span class="n">string</span> <span class="n">pathTmp</span> <span class="p">{};</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-20"></a>    <span class="n">string</span> <span class="n">separator</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-21"></a>    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="nl">part</span><span class="p">:</span> <span class="n">parts</span><span class="p">)</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-22"></a>    <span class="p">{</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-23"></a>        <span class="n">pathTmp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">separator</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">part</span><span class="p">);</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-24"></a>        <span class="n">separator</span> <span class="o">=</span> <span class="n">SEP</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-25"></a>    <span class="p">}</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-26"></a>    <span class="k">return</span> <span class="n">pathTmp</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-27"></a><span class="p">}</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-28"></a>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-29"></a><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">getDirectoryFiles</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">dir</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">extensions</span><span class="p">)</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-30"></a><span class="p">{</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-31"></a>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">files</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-32"></a>    <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="kt">DIR</span><span class="o">&gt;</span> <span class="n">directory_ptr</span><span class="p">(</span><span class="n">opendir</span><span class="p">(</span><span class="n">dir</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="p">[](</span><span class="kt">DIR</span><span class="o">*</span> <span class="n">dir</span><span class="p">){</span> <span class="n">dir</span> <span class="o">&amp;&amp;</span> <span class="n">closedir</span><span class="p">(</span><span class="n">dir</span><span class="p">);</span> <span class="p">});</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-33"></a>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">directory_ptr</span><span class="p">)</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-34"></a>    <span class="p">{</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-35"></a>        <span class="k">throw</span> <span class="n">system_error</span><span class="p">(</span><span class="n">error_code</span><span class="p">(</span><span class="n">errno</span><span class="p">,</span> <span class="n">system_category</span><span class="p">()),</span> <span class="s">"Error opening : "</span> <span class="o">+</span> <span class="n">dir</span><span class="p">);</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-36"></a>    <span class="p">}</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-37"></a>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-38"></a>    <span class="k">struct</span> <span class="n">dirent</span> <span class="o">*</span><span class="n">dirent_ptr</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-39"></a>    <span class="k">while</span> <span class="p">((</span><span class="n">dirent_ptr</span> <span class="o">=</span> <span class="n">readdir</span><span class="p">(</span><span class="n">directory_ptr</span><span class="p">.</span><span class="n">get</span><span class="p">()))</span> <span class="o">!=</span> <span class="k">nullptr</span><span class="p">)</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-40"></a>    <span class="p">{</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-41"></a>        <span class="k">const</span> <span class="n">string</span> <span class="n">fileName</span> <span class="p">{</span><span class="n">dirent_ptr</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">};</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-42"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">dirent_ptr</span><span class="o">-&gt;</span><span class="n">d_type</span> <span class="o">==</span> <span class="n">DT_DIR</span><span class="p">)</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-43"></a>        <span class="p">{</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-44"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">CURRENT_DIR</span> <span class="o">!=</span> <span class="n">fileName</span> <span class="o">&amp;&amp;</span> <span class="n">UP_DIR</span> <span class="o">!=</span> <span class="n">fileName</span><span class="p">)</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-45"></a>            <span class="p">{</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-46"></a>                <span class="k">auto</span> <span class="n">subFiles</span> <span class="o">=</span> <span class="n">getDirectoryFiles</span><span class="p">(</span><span class="n">path</span><span class="p">({</span><span class="n">dir</span><span class="p">,</span> <span class="n">fileName</span><span class="p">}),</span> <span class="n">extensions</span><span class="p">);</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-47"></a>                <span class="n">files</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">end</span><span class="p">(</span><span class="n">files</span><span class="p">),</span> <span class="n">begin</span><span class="p">(</span><span class="n">subFiles</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">subFiles</span><span class="p">));</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-48"></a>            <span class="p">}</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-49"></a>        <span class="p">}</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-50"></a>        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dirent_ptr</span><span class="o">-&gt;</span><span class="n">d_type</span> <span class="o">==</span> <span class="n">DT_REG</span><span class="p">)</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-51"></a>        <span class="p">{</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-52"></a>            <span class="c1">// here we should check also if filename has an extension in extensions vector</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-53"></a>            <span class="n">files</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">({</span><span class="n">dir</span><span class="p">,</span> <span class="n">fileName</span><span class="p">}));</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-54"></a>        <span class="p">}</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-55"></a>    <span class="p">}</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-56"></a>    <span class="k">return</span> <span class="n">files</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-57"></a><span class="p">}</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-58"></a>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-59"></a><span class="kt">int</span> <span class="n">main</span> <span class="p">()</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-60"></a><span class="p">{</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-61"></a>    <span class="k">auto</span> <span class="n">opt</span> <span class="o">=</span> <span class="n">S_IRWXU</span> <span class="o">|</span> <span class="n">S_IRWXG</span> <span class="o">|</span> <span class="n">S_IROTH</span> <span class="o">|</span> <span class="n">S_IXOTH</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-62"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox"</span><span class="p">,</span> <span class="n">opt</span><span class="p">);</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-63"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/a"</span><span class="p">,</span> <span class="n">opt</span><span class="p">);</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-64"></a>    <span class="n">mkdir</span><span class="p">(</span><span class="s">"sandbox/a/b"</span><span class="p">,</span> <span class="n">opt</span><span class="p">);</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-65"></a>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-66"></a>        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">e_files</span> <span class="o">=</span> <span class="p">{</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-67"></a>            <span class="s">"./sandbox/a/b/file1.rst"</span><span class="p">,</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-68"></a>            <span class="s">"./sandbox/a/b/file1.txt"</span><span class="p">,</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-69"></a>            <span class="s">"./sandbox/a/file2.RST"</span><span class="p">,</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-70"></a>            <span class="s">"./sandbox/file3.md"</span><span class="p">,</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-71"></a>            <span class="s">"./sandbox/will_be.ignored"</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-72"></a>        <span class="p">};</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-73"></a>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-74"></a>        <span class="c1">// create files</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-75"></a>        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="nl">f</span><span class="p">:</span> <span class="n">e_files</span><span class="p">)</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-76"></a>        <span class="p">{</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-77"></a>                <span class="n">ofstream</span> <span class="n">of</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ofstream</span><span class="o">::</span><span class="n">out</span><span class="p">);</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-78"></a>                <span class="n">of</span> <span class="o">&lt;&lt;</span> <span class="s">"test"</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-79"></a>        <span class="p">}</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-80"></a>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-81"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"filtered files: "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-82"></a>        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="nl">f</span><span class="p">:</span> <span class="n">getDirectoryFiles</span><span class="p">(</span><span class="s">"."</span><span class="p">,</span> <span class="p">{</span><span class="s">".rst"</span><span class="p">,</span> <span class="s">".RST"</span><span class="p">,</span> <span class="s">".md"</span><span class="p">})){</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-83"></a>            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\t</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">f</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-84"></a>        <span class="p">}</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-85"></a>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-86"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_24035f455d134b1db3b06e6aa310ae54-87"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/af4228e039a281b3">Compilar y ejecutar el ejemplo C++11</a>.</p>
<p>El siguiente ejemplo filtra los ficheros por extension.</p>
<p><a class="reference external" href="../listings/recursive-directory/filesystem.17.cpp.html">recursive-directory/filesystem.17.cpp</a>  <a class="reference external" href="../listings/recursive-directory/filesystem.17.cpp">(Código fuente)</a></p>
<pre class="code cpp"><a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-1"></a><span class="cp">#include</span> <span class="cpf">&lt;experimental/filesystem&gt;</span><span class="cp"></span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-2"></a><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-3"></a><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-4"></a><span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp"></span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-5"></a><span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;    // std::find</span><span class="cp"></span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-6"></a>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-7"></a><span class="k">namespace</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">filesystem</span><span class="p">;</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-8"></a><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-9"></a>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-10"></a><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">getDirectoryFiles</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span> <span class="n">dir</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">extensions</span><span class="p">)</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-11"></a><span class="p">{</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-12"></a>        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">files</span><span class="p">;</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-13"></a>    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="nl">p</span><span class="p">:</span> <span class="n">fs</span><span class="o">::</span><span class="n">recursive_directory_iterator</span><span class="p">(</span><span class="n">dir</span><span class="p">))</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-14"></a>    <span class="p">{</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-15"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">fs</span><span class="o">::</span><span class="n">is_regular_file</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-16"></a>        <span class="p">{</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-17"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">extensions</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">||</span> <span class="n">find</span><span class="p">(</span><span class="n">extensions</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">extensions</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">p</span><span class="p">.</span><span class="n">path</span><span class="p">().</span><span class="n">extension</span><span class="p">().</span><span class="n">string</span><span class="p">())</span> <span class="o">!=</span> <span class="n">extensions</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-18"></a>            <span class="p">{</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-19"></a>                <span class="n">files</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">path</span><span class="p">().</span><span class="n">string</span><span class="p">());</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-20"></a>            <span class="p">}</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-21"></a>        <span class="p">}</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-22"></a>    <span class="p">}</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-23"></a>    <span class="k">return</span> <span class="n">files</span><span class="p">;</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-24"></a><span class="p">}</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-25"></a>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-26"></a><span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-27"></a><span class="p">{</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-28"></a>    <span class="n">fs</span><span class="o">::</span><span class="n">create_directories</span><span class="p">(</span><span class="s">"sandbox/a/b"</span><span class="p">);</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-29"></a>        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">e_files</span> <span class="o">=</span> <span class="p">{</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-30"></a>            <span class="s">"./sandbox/a/b/file1.rst"</span><span class="p">,</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-31"></a>            <span class="s">"./sandbox/a/b/file1.txt"</span><span class="p">,</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-32"></a>            <span class="s">"./sandbox/a/file2.RST"</span><span class="p">,</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-33"></a>            <span class="s">"./sandbox/file3.md"</span><span class="p">,</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-34"></a>            <span class="s">"./sandbox/will_be.ignored"</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-35"></a>        <span class="p">};</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-36"></a>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-37"></a>        <span class="c1">// create files</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-38"></a>        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="nl">f</span><span class="p">:</span> <span class="n">e_files</span><span class="p">)</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-39"></a>        <span class="p">{</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-40"></a>                <span class="n">ofstream</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">"test"</span><span class="p">;</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-41"></a>        <span class="p">}</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-42"></a>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-43"></a>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"filtered files: "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-44"></a>        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="nl">f</span><span class="p">:</span> <span class="n">getDirectoryFiles</span><span class="p">(</span><span class="s">"."</span><span class="p">,</span> <span class="p">{</span><span class="s">".rst"</span><span class="p">,</span> <span class="s">".RST"</span><span class="p">,</span> <span class="s">".md"</span><span class="p">})){</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-45"></a>            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\t</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">f</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-46"></a>        <span class="p">}</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-47"></a>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-48"></a>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_fd049097c1d64efe8d6e9e21729b236c-49"></a><span class="p">}</span>
</pre>
<p><a class="reference external" href="http://coliru.stacked-crooked.com/a/af4228e039a281b3">Compilar y ejecutar el ejemplo C++17</a>.</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/reverse-proxy-multidomain-docker/" class="u-url">Contenedores Docker multi-dominio</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/reverse-proxy-multidomain-docker/" rel="bookmark"><time class="published dt-published" datetime="2016-11-24T21:00:00+01:00" title="2016-11-24">2016-11-24</time></a></p>
                <p class="commentline">
        
    <a href="posts/reverse-proxy-multidomain-docker/#disqus_thread" data-disqus-identifier="cache/posts/reverse-proxy-multidomain-docker.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<div class="contents topic" id="contenido">
<p class="topic-title first">Contenido</p>
<ul class="simple">
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#caso-de-uso" id="id1">Caso de Uso</a></li>
<li>
<a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#como-configurar-un-proxy-inverso-multi-dominio" id="id2">Cómo configurar un Proxy Inverso Multi-Dominio</a><ul>
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#estructura-del-proyecto-de-ejemplo" id="id3">Estructura del proyecto de ejemplo</a></li>
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#configuracion-de-la-arquitectura-docker-compose" id="id4">Configuración de la arquitectura (docker-compose)</a></li>
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#configuracion-de-la-imagen-de-la-aplicacion" id="id5">Configuración de la imágen de la aplicación</a></li>
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#anadiendo-los-nombres-de-dominio-a-tu-configuracion" id="id6">Añadiendo los nombres de dominio a tu configuración</a></li>
<li><a class="reference internal" href="posts/reverse-proxy-multidomain-docker/#todo-listo" id="id7">¡Todo listo!</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="caso-de-uso">
<h2><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id1">Caso de Uso</a></h2>
<p>Tenemos varias aplicaciones servidoras a la vez en un mismo entorno de desarrollo, cada una encapsulada en un contenedor, llamémosles de ahora en adelante "Contenedor A" y "Contenedor B".</p>
<p>Utilizando docker estas aplicaciones tienen la misma dirección IP en nuestra máquina, una forma de distinguirlas es cambiando el puerto que exponen.</p>
<div class="figure">
<a class="reference external image-reference" href="../galleries/docker-multidomain/ip.png"><img alt="/galleries/docker-multidomain/ip.thumbnail.png" src="../galleries/docker-multidomain/ip.thumbnail.png"></a>
<p class="caption">Aplicaciones exponiendo la misma dirección IP utilizando diferentes puertos para diferenciar las aplicaciones</p>
</div>
<ul class="simple">
<li>Si queremos llamar a la "aplicación A" haremos algo así: GET <a class="reference external" href="http://10.20.30.40:8080/colors/red">http://10.20.30.40:8080/colors/red</a>
</li>
<li>Si queremos llamar a la "aplicación B" haremos algo así: GET <a class="reference external" href="http://10.20.30.40:8081/fruits/tomato">http://10.20.30.40:8081/fruits/tomato</a>
</li>
</ul>
<p>Pero esto es un poco confuso, ¿8080 sigfica que accedemos a las "aplicación A" y 8081 significa "aplicación B"?</p>
<p>Sería mucho más sencillo de recordar algo así:</p>
<ul class="simple">
<li>Si queremos llamar a la "aplicación A" haremos algo así: GET <a class="reference external" href="http://a.domain.com/colors/red">http://a.domain.com/colors/red</a>
</li>
<li>Si queremos llamar a la "aplicación B" haremos algo así: GET <a class="reference external" href="http://b.domain.com/fruits/tomato">http://b.domain.com/fruits/tomato</a>
</li>
</ul>
<div class="figure">
<a class="reference external image-reference" href="../galleries/docker-multidomain/domain.png"><img alt="/galleries/docker-multidomain/domain.thumbnail.png" src="../galleries/docker-multidomain/domain.thumbnail.png"></a>
<p class="caption">Diferenciando aplicaciones por nombre de dominio</p>
</div>
<p>Obtener este valor semántico extra es más sencillo de lo que parece.</p>
</div>
<div class="section" id="como-configurar-un-proxy-inverso-multi-dominio">
<h2><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id2">Cómo configurar un Proxy Inverso Multi-Dominio</a></h2>
<p>Dije que era fácil porque no vamos a tener que hacer casi nada, ya que otro contenedor hará casi todo el trabajo por nosotros. Vamos a utilizar <a class="reference external" href="https://github.com/jwilder/nginx-proxy">nginx-proxy</a>, que generará automáticamente las configuraciones necesarias para <a class="reference external" href="https://www.nginx.com">NGINX</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Puedes descargar el ejemplo completo desde: <a class="reference external" href="https://github.com/carlosvin/docker-reverse-proxy-multi-domain">https://github.com/carlosvin/docker-reverse-proxy-multi-domain</a></p>
</div>
<p>Así que al final no tendremos 2 contenedores, sino también tendremos un tercero que hará las veces de proxy.</p>
<div class="figure">
<a class="reference external image-reference" href="../galleries/docker-multidomain/proxy.png"><img alt="/galleries/docker-multidomain/proxy.thumbnail.png" src="../galleries/docker-multidomain/proxy.thumbnail.png"></a>
<p class="caption">Los 2 contenedores y el proxy</p>
</div>
<div class="section" id="estructura-del-proyecto-de-ejemplo">
<h3><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id3">Estructura del proyecto de ejemplo</a></h3>
<ul class="simple">
<li>docker-compose.yaml (Archivo con la configuración descrita en la imágen previa)</li>
<li>a (Directorio para la aplicación A)<ul>
<li>Dockerfile (Archivo con la configuración del contenedor A)</li>
</ul>
</li>
<li>b (Directorio para la aplicación B)<ul>
<li>Dockerfile (Archivo con la configuración del contenedor B)</li>
</ul>
</li>
</ul>
<p><a class="reference external" href="../listings/docker-reverse-proxy-multi-domain">Ver proyecto</a>.</p>
</div>
<div class="section" id="configuracion-de-la-arquitectura-docker-compose">
<h3><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id4">Configuración de la arquitectura (docker-compose)</a></h3>
<p>La parte más importante es la configuración de las relaciones entre los contenedores.</p>
<p><a class="reference external" href="../listings/docker-reverse-proxy-multi-domain/docker-compose.yaml.html">docker-reverse-proxy-multi-domain/docker-compose.yaml</a>  <a class="reference external" href="../listings/docker-reverse-proxy-multi-domain/docker-compose.yaml">(Código fuente)</a></p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-1"> 1</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-2"> 2</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-3"> 3</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-4"> 4</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-5"> 5</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-6"> 6</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-7"> 7</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-8"> 8</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-9"> 9</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-10">10</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-11">11</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-12">12</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-13">13</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-14">14</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-15">15</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-16">16</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-17">17</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-18">18</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-19">19</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-20">20</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-21">21</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_d2ac6a5d74a1432399d38127334a9a71-22">22</a></pre></div></td>
<td class="code"><pre class="code yaml"><a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-1"></a><span class="l l-Scalar l-Scalar-Plain">a</span><span class="p p-Indicator">:</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-2"></a>  <span class="l l-Scalar l-Scalar-Plain">build</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">a</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-3"></a>  <span class="l l-Scalar l-Scalar-Plain">environment</span><span class="p p-Indicator">:</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-4"></a>    <span class="l l-Scalar l-Scalar-Plain">VIRTUAL_HOST</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">a.domain.com</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-5"></a>  <span class="l l-Scalar l-Scalar-Plain">restart</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-6"></a>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-7"></a><span class="l l-Scalar l-Scalar-Plain">b</span><span class="p p-Indicator">:</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-8"></a>  <span class="l l-Scalar l-Scalar-Plain">build</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">b</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-9"></a>  <span class="l l-Scalar l-Scalar-Plain">environment</span><span class="p p-Indicator">:</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-10"></a>    <span class="l l-Scalar l-Scalar-Plain">VIRTUAL_HOST</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">b.domain.com</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-11"></a>  <span class="l l-Scalar l-Scalar-Plain">restart</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-12"></a>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-13"></a><span class="l l-Scalar l-Scalar-Plain">nginx-proxy</span><span class="p p-Indicator">:</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-14"></a>  <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">jwilder/nginx-proxy</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-15"></a>  <span class="l l-Scalar l-Scalar-Plain">ports</span><span class="p p-Indicator">:</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-16"></a>    <span class="p p-Indicator">-</span> <span class="s">"80:80"</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-17"></a>    <span class="p p-Indicator">-</span> <span class="s">"443:443"</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-18"></a>  <span class="l l-Scalar l-Scalar-Plain">volumes</span><span class="p p-Indicator">:</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-19"></a>    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">/var/run/docker.sock:/tmp/docker.sock:ro</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-20"></a>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-21"></a>  <span class="l l-Scalar l-Scalar-Plain">restart</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
<a name="rest_code_d2ac6a5d74a1432399d38127334a9a71-22"></a>  <span class="l l-Scalar l-Scalar-Plain">privileged</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></td>
</tr></table>
<ul class="simple">
<li>En la línea 4 y 10 es donde configuramos el nombre de dominio que queremos utilizar para cada aplicación.</li>
<li>A partir de la línea 13 configuramos el proxy (esta es la parte de copiar y pegar).</li>
<li>En la línea 2 y 8 estamos indicando a docker-compose que tiene que construir las imágenes dentro del directorio indicado. Por ejemplo, en la línea 2, estamos indicando que docker-compose tiene que construir la imágen docker utilizando ./a/Dockerfile.</li>
</ul>
</div>
<div class="section" id="configuracion-de-la-imagen-de-la-aplicacion">
<h3><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id5">Configuración de la imágen de la aplicación</a></h3>
<p>A continuación vamos a comentar la configuración de la imágen del contenedor para la aplicación A.</p>
<p><a class="reference external" href="../listings/docker-reverse-proxy-multi-domain/a/Dockerfile.html">docker-reverse-proxy-multi-domain/a/Dockerfile</a>  <a class="reference external" href="../listings/docker-reverse-proxy-multi-domain/a/Dockerfile">(Código fuente)</a></p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/reverse-proxy-multidomain-docker/#rest_code_6a638129bc0445fd816539abd4470261-1">1</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_6a638129bc0445fd816539abd4470261-2">2</a></pre></div></td>
<td class="code"><pre class="code docker"><a name="rest_code_6a638129bc0445fd816539abd4470261-1"></a><span class="k">FROM</span><span class="s"> httpd:2.4</span>
<a name="rest_code_6a638129bc0445fd816539abd4470261-2"></a><span class="k">RUN</span> <span class="nb">echo</span> <span class="s2">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;A&lt;/h1&gt;App A works!&lt;/body&gt;&lt;/html&gt;"</span> &gt; /usr/local/apache2/htdocs/index.html
</pre></td>
</tr></table>
<p>Línea 1: Importamos una imágen con un servidor apache.</p>
<p>Línea 2: Servimos un archivo que muestra "Host A" como página por defecto.</p>
<p>La configuración para la aplicación B, es prácticamente la misma:</p>
<p><a class="reference external" href="../listings/docker-reverse-proxy-multi-domain/b/Dockerfile.html">docker-reverse-proxy-multi-domain/b/Dockerfile</a>  <a class="reference external" href="../listings/docker-reverse-proxy-multi-domain/b/Dockerfile">(Código fuente)</a></p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/reverse-proxy-multidomain-docker/#rest_code_b3eaf060f90340b8a87ec382d77585fe-1">1</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_b3eaf060f90340b8a87ec382d77585fe-2">2</a></pre></div></td>
<td class="code"><pre class="code docker"><a name="rest_code_b3eaf060f90340b8a87ec382d77585fe-1"></a><span class="k">FROM</span><span class="s"> httpd:2.4</span>
<a name="rest_code_b3eaf060f90340b8a87ec382d77585fe-2"></a><span class="k">RUN</span> <span class="nb">echo</span> <span class="s2">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;B&lt;/h1&gt;App B works!&lt;/body&gt;&lt;/html&gt;"</span> &gt; /usr/local/apache2/htdocs/index.html
</pre></td>
</tr></table>
</div>
<div class="section" id="anadiendo-los-nombres-de-dominio-a-tu-configuracion">
<h3><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id6">Añadiendo los nombres de dominio a tu configuración</a></h3>
<p>En Linux simplemente tenemos mapear la dirección local a los nombres de dominio que hayas elegido, en nuestro ejemplo es a.domain.com y b.domain.com.</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/reverse-proxy-multidomain-docker/#rest_code_34c4f52a36aa426eb8a993d2873927d4-1">1</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_34c4f52a36aa426eb8a993d2873927d4-2">2</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_34c4f52a36aa426eb8a993d2873927d4-3">3</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_34c4f52a36aa426eb8a993d2873927d4-4">4</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_34c4f52a36aa426eb8a993d2873927d4-5">5</a></pre></div></td>
<td class="code"><pre class="code bash"><a name="rest_code_34c4f52a36aa426eb8a993d2873927d4-1"></a><span class="c1">#/etc/hosts</span>
<a name="rest_code_34c4f52a36aa426eb8a993d2873927d4-2"></a><span class="m">127</span>.0.0.1             localhost.localdomain localhost
<a name="rest_code_34c4f52a36aa426eb8a993d2873927d4-3"></a>::1                 localhost6.localdomain6 localhost6
<a name="rest_code_34c4f52a36aa426eb8a993d2873927d4-4"></a><span class="m">127</span>.0.0.1   a.domain.com
<a name="rest_code_34c4f52a36aa426eb8a993d2873927d4-5"></a><span class="m">127</span>.0.0.1   b.domain.com
</pre></td>
</tr></table>
<p>Simplemente he añadido las líneas 4 y 5.</p>
</div>
<div class="section" id="todo-listo">
<h3><a class="toc-backref" href="posts/reverse-proxy-multidomain-docker/#id7">¡Todo listo!</a></h3>
<p>Ya solo nos queda probar el ejemplo.</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/reverse-proxy-multidomain-docker/#rest_code_a00ddfbbe5ec4a0182a5d4792764a8ed-1">1</a>
<a href="posts/reverse-proxy-multidomain-docker/#rest_code_a00ddfbbe5ec4a0182a5d4792764a8ed-2">2</a></pre></div></td>
<td class="code"><pre class="code bash"><a name="rest_code_a00ddfbbe5ec4a0182a5d4792764a8ed-1"></a>docker-compose build
<a name="rest_code_a00ddfbbe5ec4a0182a5d4792764a8ed-2"></a>docker-compose up
</pre></td>
</tr></table>
<p>Ya están las tres contenedores arrancados.</p>
<p>Ahora podemos abrir nuestro navegador y escribir a.domain.com y nos mostrará el texto <em>App A works!</em>. Si escribimos b.domain.com entonces veremos <em>App B works!</em>.</p>
<div class="figure">
<a class="reference external image-reference" href="../galleries/docker-multidomain/a.screenshot.png"><img alt="/galleries/docker-multidomain/a.screenshot.thumbnail.png" src="../galleries/docker-multidomain/a.screenshot.thumbnail.png"></a>
<p class="caption">a.domain.com en el navegador</p>
</div>
<div class="figure">
<a class="reference external image-reference" href="../galleries/docker-multidomain/b.screenshot.png"><img alt="/galleries/docker-multidomain/b.screenshot.thumbnail.png" src="../galleries/docker-multidomain/b.screenshot.thumbnail.png"></a>
<p class="caption">b.domain.com en el navegador</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">En la mayoría de distribuciones Linux necesitarás privilegios para ejecutar los comandos docker (sudo).</p>
</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-micro"><header><h1 class="p-name entry-title"><a href="posts/rust-rest-framework-comparison/" class="u-url">Comparación frameworks REST para RUST</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/rust-rest-framework-comparison/" rel="bookmark"><time class="published dt-published" datetime="2016-04-14T20:40:00+02:00" title="2016-04-14">2016-04-14</time></a></p>
                <p class="commentline">
        
    <a href="posts/rust-rest-framework-comparison/#disqus_thread" data-disqus-identifier="cache/posts/rust-rest-framework-comparison.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Estoy empezando a hacer mis primeros pinitos con <a class="reference external" href="https://www.rust-lang.org/">Rust</a>, es un lenguage de programación que promete ser tan rápido como <a class="reference external" href="https://en.wikipedia.org/wiki/C%2B%2B">C/C++</a>, pero más seguro en cuanto a la gestión de memoria ser refiere. Básicamente, no permite al programador hacer "cosas malas" con la memoria como: olvidarse de liberar la memoria que no se va a utilizar o liberar memoria que no es tuya. En estos casos, <a class="reference external" href="https://www.rust-lang.org/">Rust</a> simplemente no compilará.</p>
<p>Para aprender he pensado en hacer algún pequeño proyecto, tengo algunas ideas, pero todas pasan por ofrecer una <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a>, así que me he puesto a buscar frameworks que me faciliten esta tarea y me he llevado una grata sorpresa al encontrar una muy <a class="reference external" href="https://github.com/flosse/rust-web-framework-comparison">buena comparativa con el estado de los frameworks REST para Rust</a>, a continuación os dejo el enlace:</p>
<p><a class="reference external" href="https://github.com/flosse/rust-web-framework-comparison">https://github.com/flosse/rust-web-framework-comparison</a></p>
</div>
    </div>
    </article><article class="h-entry post-micro"><header><h1 class="p-name entry-title"><a href="posts/recursive-dos-unix/" class="u-url">Convertir archivos en formato Windows a formato Unix</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/recursive-dos-unix/" rel="bookmark"><time class="published dt-published" datetime="2016-02-12T10:34:00+01:00" title="2016-02-12">2016-02-12</time></a></p>
                <p class="commentline">
        
    <a href="posts/recursive-dos-unix/#disqus_thread" data-disqus-identifier="cache/posts/recursive-dos-unix.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Si alguna vez has programado desde un entorno Windows para entornos Unix, seguramente habrás tenido este problema: Los archivos que instalas en tu entorno Unix tienen formato Windows.</p>
<p>Hay un forma bastante sencilla de convertir todos los archivos que tienes en un directorio de formato Windows a Unix.</p>
<pre class="code bash"><a name="rest_code_293b9b248b9e49f3a02cd0e38aa278fa-1"></a>find . -type f -print0 <span class="p">|</span> xargs -0 dos2unix
</pre>
<p>Lo he sacado, como no, de <a class="reference external" href="http://stackoverflow.com/questions/11929461/how-can-i-run-dos2unix-on-an-entire-directory">http://stackoverflow.com/questions/11929461/how-can-i-run-dos2unix-on-an-entire-directory</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/rest-urls/" class="u-url">Creando REST URLs</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/rest-urls/" rel="bookmark"><time class="published dt-published" datetime="2015-08-16T14:00:00+02:00" title="2015-08-16">2015-08-16</time></a></p>
                <p class="commentline">
        
    <a href="posts/rest-urls/#disqus_thread" data-disqus-identifier="cache/posts/rest-urls.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Las primeras veces que me puse a diseñar una <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a> <a class="reference external" href="https://es.wikipedia.org/wiki/Representational_State_Transfer">REST</a> cometí unos cuantos errores, por supuesto. A continuación os voy a contar algunos de los errores que cometí y lo que he entendido hasta hoy sobre la construcción de <a class="reference external" href="https://es.wikipedia.org/wiki/Localizador_de_recursos_uniforme">URLs</a> <a class="reference external" href="https://es.wikipedia.org/wiki/Representational_State_Transfer">REST</a> con ejemplos.</p>
<div class="contents topic" id="indice">
<p class="topic-title first">Índice</p>
<ul class="simple">
<li>
<a class="reference internal" href="posts/rest-urls/#fundamentos-rest" id="id3">Fundamentos REST</a><ul>
<li><a class="reference internal" href="posts/rest-urls/#verbos-rest" id="id4">Verbos REST</a></li>
<li><a class="reference internal" href="posts/rest-urls/#acceso-a-recursos" id="id5">Acceso a Recursos</a></li>
<li><a class="reference internal" href="posts/rest-urls/#modificar-recursos" id="id6">Modificar Recursos</a></li>
<li><a class="reference internal" href="posts/rest-urls/#borrar-recursos" id="id7">Borrar Recursos</a></li>
<li><a class="reference internal" href="posts/rest-urls/#crear-recursos" id="id8">Crear Recursos</a></li>
<li>
<a class="reference internal" href="posts/rest-urls/#colecciones" id="id9">Colecciones</a><ul>
<li><a class="reference internal" href="posts/rest-urls/#anadir-un-elemento-a-la-coleccion" id="id10">Añadir un elemento a la colección</a></li>
<li><a class="reference internal" href="posts/rest-urls/#modificar-un-elemento-de-la-coleccion" id="id11">Modificar un elemento de la colección</a></li>
<li><a class="reference internal" href="posts/rest-urls/#borrar-un-elemento-de-la-coleccion" id="id12">Borrar un elemento de la colección</a></li>
<li><a class="reference internal" href="posts/rest-urls/#leer-un-elemento-de-la-coleccion" id="id13">Leer un elemento de la colección</a></li>
<li><a class="reference internal" href="posts/rest-urls/#listar-elementos-de-la-coleccion" id="id14">Listar elementos de la colección</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="posts/rest-urls/#tipico-error" id="id15">Típico error</a></li>
<li><a class="reference internal" href="posts/rest-urls/#video-tutoriales" id="id16">Video Tutoriales</a></li>
</ul>
</div>
<div class="section" id="fundamentos-rest">
<h2>Fundamentos <a class="reference external" href="https://es.wikipedia.org/wiki/Representational_State_Transfer">REST</a>
</h2>
<ul class="simple">
<li>Utilizamos <a class="reference external" href="https://es.wikipedia.org/wiki/Localizador_de_recursos_uniforme">URLs</a> para acceder a recursos.</li>
<li>Utilizamos <em>verbos</em> para modificar recursos.</li>
<li>Nuestros <em>verbos</em> están proporcionados por el protocolo <a class="reference external" href="https://es.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a>.</li>
<li>Los <em>verbos</em> tienen un equivalente directo con las operaciones <a class="reference external" href="https://es.wikipedia.org/wiki/CRUD">CRUD</a> <a class="footnote-reference" href="posts/rest-urls/#id2" id="id1">[1]</a>.</li>
<li>Para acceder a un recurso existente necesitamos su identificador.</li>
</ul>
<div class="section" id="verbos-rest">
<h3>Verbos <a class="reference external" href="https://es.wikipedia.org/wiki/Representational_State_Transfer">REST</a>
</h3>
<dl class="docutils">
<dt>POST</dt>
<dd>(<strong>C</strong>) Utilizado para <strong>crear</strong> nuevos recursos.</dd>
<dt>GET</dt>
<dd>(<strong>R</strong>) Utilizado para <strong>leer</strong> un recursos existentes en el sistema.</dd>
<dt>PUT</dt>
<dd>(<strong>U</strong>) Utilizado para <strong>actualizar</strong> recursos existentes.</dd>
<dt>DELETE</dt>
<dd>(<strong>D</strong>) Utilizado para <strong>borrar</strong> recursos existentes.</dd>
</dl>
<p>En una tabla quedará más claro</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%">
<col width="26%">
<col width="51%">
</colgroup>
<tbody valign="top">
<tr>
<td>Verbo <a class="reference external" href="https://es.wikipedia.org/wiki/Representational_State_Transfer">REST</a>
</td>
<td>Acción <a class="reference external" href="https://es.wikipedia.org/wiki/CRUD">CRUD</a>
</td>
<td>Debe exisitir el recurso</td>
</tr>
<tr>
<td>POST</td>
<td>Crear</td>
<td>No</td>
</tr>
<tr>
<td>GET</td>
<td>Leer</td>
<td>Sí</td>
</tr>
<tr>
<td>PUT</td>
<td>Actualizar</td>
<td>Sí</td>
</tr>
<tr>
<td>DELETE</td>
<td>Borrar</td>
<td>Sí</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="acceso-a-recursos">
<h3><a class="toc-backref" href="posts/rest-urls/#id5">Acceso a Recursos</a></h3>
<p>Un recurso es <em>a lo que quieres acceder</em>. Por ejemplo, un coche.</p>
<p>Para poder acceder a un coche no es suficiente con esta información, no puedes ir a un concesionario y preguntar por un coche en general, tienes que decir qué coche quieres. Así que llegas al concesionario y dices:</p>
<p><em>Hola, buenos días. Quiero información sobre el Fiat Bravo 1.9 Emotion 120CV</em>.</p>
<p>De esta forma el dependiente sabe cuál es y te puede dar la información.</p>
<p>"Fiat Bravo 1.9 Emotion 120CV" es nuestro <strong>identificador</strong>.</p>
<p>Trasladando el ejemplo a las <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">APIs</a> <a class="reference external" href="https://es.wikipedia.org/wiki/Representational_State_Transfer">REST</a>:</p>
<pre class="literal-block">
GET   http://tiendadecoches.es/api/coches/fiat-bravo-19-emotion-120cv
</pre>
<p>De esta forma nuestra <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a> nos puede proporcionar información del coche.</p>
<p>Esto es un ejemplo muy simplificado, pero realmente cuando accedemos a un recurso concreto solemos utilizar algo que lo identifique de forma unívoca. Una práctica común y recomendable es utilizar <a class="reference external" href="https://es.wikipedia.org/wiki/Universally_unique_identifier">UUID</a>.</p>
<pre class="literal-block">
GET  http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f
</pre>
<p>Pero nuestra <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a>, al igual que una tienda, no tiene por qué ser tan estricta, podemos preguntar por los coches que tienen ciertas caracteríticas, podemos ir al concesionario y decir:</p>
<p><em>Hola buenos días, quiero un Fiat Bravo</em>.</p>
<p>Y el dependiente, amablemente, te mostrará todos los Fiat Bravo que tiene. Veamos cómo podemos decir esto a nuestra <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a>.</p>
<pre class="literal-block">
GET  http://tiendadecoches.es/api/coches/?marca=fiat&amp;modelo=bravo
</pre>
<p>Nuestra <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a> nos devolverá todos los coches que son marca Fiat y modelo Bravo.</p>
<p>Marca y modelo en este caso son lo que llamamos <strong>parámetros de consulta</strong> (query parameters).</p>
<p>Como os habréis dado cuenta durante el ejemplo, para obtener información de un recurso siempre hemos utilizado el <em>verbo</em> <strong>GET</strong>.</p>
</div>
<div class="section" id="modificar-recursos">
<h3><a class="toc-backref" href="posts/rest-urls/#id6">Modificar Recursos</a></h3>
<p>Nuestra <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a> también nos puede permitir modificar un recurso, al igual que para pedir información, para modificar un recurso necesitamos especificar qué recurso queremos modificar, así que necesitamos otra vez un <em>identificador</em>.</p>
<p>Antes queríamos información (leer) y utilizábamos nuestro verbo GET, ahora lo único que cambia es el verbo, queremos <strong>modificar</strong> así que utilizamos el verbo equivalente que nos proporciona el protocolo <a class="reference external" href="https://es.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a>: <strong>PUT</strong>.</p>
<pre class="literal-block">
PUT   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f
</pre>
<p>Pero nos falta algo, tenemos que decir qué queremos cambiar del coche, por ejemplo, imaginemos que queremos cambiar la cilintrada y poner 100CV.</p>
<p>Tenemos que enviar la nueva cilindrada a esta <a class="reference external" href="https://es.wikipedia.org/wiki/Localizador_de_recursos_uniforme">URL</a>  <a class="reference external" href="http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f">http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f</a> por <a class="reference external" href="https://es.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> utilizando el verbo <strong>PUT</strong>.</p>
<p>El protocolo <a class="reference external" href="https://es.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> nos permite enviar información en un mensaje PUT, así que solo nos falta pensar en el formato en que lo vamos a enviar.</p>
<p>Podemos enviarlo en <a class="reference external" href="https://es.wikipedia.org/wiki/JSON">JSON</a> o <a class="reference external" href="https://es.wikipedia.org/wiki/XML">XML</a> o como queramos, solo tenemos que estar seguros de que el formato que enviamos es lo que espera recibir el servidor.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Cuando definimos una <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a> <a class="reference external" href="https://es.wikipedia.org/wiki/Representational_State_Transfer">REST</a> tenemos que definir también el formato en que vamos a enviar los datos.</p>
</div>
<p>Ejemplo en <a class="reference external" href="https://es.wikipedia.org/wiki/JSON">JSON</a>:</p>
<pre class="literal-block">
{ cilindrada: 100 }
</pre>
</div>
<div class="section" id="borrar-recursos">
<h3><a class="toc-backref" href="posts/rest-urls/#id7">Borrar Recursos</a></h3>
<p>Continuando con el ejemplo de los coches, imaginemos que ahora somos el concesionario, y que ya no queremos vender más ese Fiat Bravo (concretamente el cce05bee-386b-11e5-a151-feff819cdc9f). Seguiremos manteniendo la <a class="reference external" href="https://es.wikipedia.org/wiki/Localizador_de_recursos_uniforme">URL</a> que identifica el recurso, pero cambiamos el verbo, no queremos leer (GET), ni modificar (PUT), queremos <strong>borrar (DELETE)</strong>.</p>
<pre class="literal-block">
DELETE   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f
</pre>
<p>En el caso del borrado, no hay que proporcionar ninguna información adicional, con el verbo (DELETE) y el recurso es suficiente.</p>
</div>
<div class="section" id="crear-recursos">
<h3><a class="toc-backref" href="posts/rest-urls/#id8">Crear Recursos</a></h3>
<p>Y nos queda último verbo, crear (POST). En este caso no hay que identificar el recurso, porque no existe todavía.</p>
<pre class="literal-block">
POST   http://tiendadecoches.es/api/coches/
</pre>
<p>Lo que sí que tenemos que enviar son los datos del recurso que vamos a crear.</p>
<p>En nuestro ejemplo, queremos crear un coche, así que ponemos toda la información necesaria para crear un coche dentro de la llamada POST de <a class="reference external" href="https://es.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a>, algo muy parecido como hemos hecho en el apartado <a class="reference internal" href="posts/rest-urls/#modificar-recursos">Modificar Recursos</a>, pero en este caso mandamos <strong>toda la información necesaria</strong>, no solo la cilindrada.</p>
<p>Ejemplo en <a class="reference external" href="https://es.wikipedia.org/wiki/JSON">JSON</a>:</p>
<pre class="literal-block">
{
"marca": "Fiat",
"modelo": "Bravo"
"anio": 2010
"puertas": 5,
"cilindrada": 120,
"version": "Emotion",
"climatizador": true,
"ac": false,
"fuel": "Diesel"
}
</pre>
<p>Podemos delegar en el sistema, para que cuando pidamos la creación de un recurso nuevo, nos asigne un nuevo <strong>identificador</strong>, o simplemente enviarlo con el resto de información:</p>
<pre class="literal-block">
{
"identificador": "cce05bee-386b-11e5-a151-feff819cdc9f"
"marca": "Fiat",
"modelo": "Bravo"
"anio": 2010
"puertas": 5,
"cilindrada": 120,
"version": "Emotion",
"climatizador": true,
"ac": false,
"fuel": "Diesel"
}
</pre>
</div>
<div class="section" id="colecciones">
<h3><a class="toc-backref" href="posts/rest-urls/#id9">Colecciones</a></h3>
<p>Algo que no quiero pasar por alto, porque al menos para mí no fue obvio, es el manejo de colecciones. Realmente ya está explicado, porque todas las acciones que hemos visto previamente sobre los coches, estaba aplicando realmente a una colección de coches.</p>
<p>Pero, ¿qué pasa si un recurso tiene a su vez una colección? Siguiendo con los coches, un coche puede tener una lista de aceites con los que puede funcionar, así que nuestra <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a> debería permitir obtener, modificar, borrar o crear elementos en la lista.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Para el ejemplo asumiremos que el identificador del aceite es el atributo tipo.</p>
</div>
<div class="section" id="anadir-un-elemento-a-la-coleccion">
<h4><a class="toc-backref" href="posts/rest-urls/#id10">Añadir un elemento a la colección</a></h4>
<p>Si queremos añadir un elemento a la colección de coches lo que vamos a hacer es crear un nuevo coche, así que estamos en el caso de <a class="reference internal" href="posts/rest-urls/#crear-recursos">Crear Recursos</a>.</p>
<p>Para añadir un nuevo aceite al coche cce05bee-386b-11e5-a151-feff819cdc9f, que ya existe:</p>
<pre class="literal-block">
POST   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/

{
"tipo": "5W30",
"otros_datos": "este es el mejor del mundo para este coche"
}
</pre>
<p>Si queremos añadir otro aceite:</p>
<pre class="literal-block">
POST   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/

{
"tipo": "10W30",
"otros_datos": "otras cosas sobre aceites de coche",
}
</pre>
</div>
<div class="section" id="modificar-un-elemento-de-la-coleccion">
<h4><a class="toc-backref" href="posts/rest-urls/#id11">Modificar un elemento de la colección</a></h4>
<p>Si queremos modificar los datos del aceite <em>5W30</em> del coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p>
<pre class="literal-block">
PUT   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/5W30/

{
"tipo": "5W30",
"otros_datos": "este ya no es el mejor del mundo para este coche"
}
</pre>
</div>
<div class="section" id="borrar-un-elemento-de-la-coleccion">
<h4><a class="toc-backref" href="posts/rest-urls/#id12">Borrar un elemento de la colección</a></h4>
<p>Para borrar un aceite <em>10W30</em> del coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p>
<pre class="literal-block">
DELETE   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/10W30
</pre>
</div>
<div class="section" id="leer-un-elemento-de-la-coleccion">
<h4><a class="toc-backref" href="posts/rest-urls/#id13">Leer un elemento de la colección</a></h4>
<p>Para obtener la información del aceite <em>10W30</em> del coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p>
<pre class="literal-block">
GET   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/10W30
</pre>
</div>
<div class="section" id="listar-elementos-de-la-coleccion">
<h4><a class="toc-backref" href="posts/rest-urls/#id14">Listar elementos de la colección</a></h4>
<p>Como hemos visto en <a class="reference internal" href="posts/rest-urls/#leer-un-elemento-de-la-coleccion">Leer un elemento de la colección</a>, podemos obtener información de cualquier elemento de la colección, pero también podemos obtener varios elementos de la colección, ordenarlos, paginarlos y aplicar cualquier tipo de acciones típicas de una colección.</p>
<p>Podemos obtener todos los aceites soportados por el coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>, es tan simple como:</p>
<pre class="literal-block">
GET   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/
</pre>
<p>Pero también podemos proporcionar otras funcionalidades en nuestra <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a>, como obtener los resultados ordenados:</p>
<pre class="literal-block">
GET   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/?ordenar_por=tipo&amp;orden=ascendente
</pre>
<p>Podemos pedir al <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a> que nos devuelva los 10 primeros aceites del coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p>
<pre class="literal-block">
GET   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/?numero_de_elementos=10
</pre>
<p>Cuando no queremos mostrar toda la lista completa, podemos proporcionar un sistema de paginación:</p>
<pre class="literal-block">
GET   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/?pagina=3&amp;numero_de_elementos=3
</pre>
<p>En la petición de arriba, estamos diciendo que nos devuelva la página 3 de los aceites del coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em> y que nos muestre 3 aceites por página. Si quisiéramos ir a la página siguiente:</p>
<pre class="literal-block">
GET   http://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/?pagina=4&amp;numero_de_elementos=3
</pre>
<p>Todas estas funcionalidades, son posibles gracias a los <strong>parámetros de consulta</strong>.</p>
</div>
</div>
</div>
<div class="section" id="tipico-error">
<h2><a class="toc-backref" href="posts/rest-urls/#id15">Típico error</a></h2>
<p>La primera vez que intenté diseñar un <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a> <a class="reference external" href="https://es.wikipedia.org/wiki/Representational_State_Transfer">REST</a> lo que hice fué otra cosa, era una <a class="reference external" href="https://es.wikipedia.org/wiki/Interfaz_de_programaci%C3%B3n_de_aplicaciones">API</a>, pero no <a class="reference external" href="https://es.wikipedia.org/wiki/Representational_State_Transfer">REST</a>.</p>
<p>Mi principal error fue en la construción de las <a class="reference external" href="https://es.wikipedia.org/wiki/Localizador_de_recursos_uniforme">URLs</a>, incluí <em>verbos</em> sin tener en cuenta que los verbos ya me los proporcionaba el protocolo <a class="reference external" href="https://es.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a>.</p>
<p>Por ejemplo, creaba <a class="reference external" href="https://es.wikipedia.org/wiki/Localizador_de_recursos_uniforme">URLs</a> del tipo:</p>
<pre class="literal-block">
POST    http://example.com/api/coches/seat-ibiza/borrar-rueda/3
</pre>
<p>Cuando lo correcto sería</p>
<pre class="literal-block">
DELETE  http://example.com/api/coches/seat-ibiza/ruedas/3
</pre>
</div>
<div class="section" id="video-tutoriales">
<h2><a class="toc-backref" href="posts/rest-urls/#id16">Video Tutoriales</a></h2>
<p>Estos tutoriales me fueron de gran ayuda y os recomiendo que los veáis enteros:</p>
<div class="youtube-video">
<iframe width="425" height="344" src="https://www.youtube.com/embed/NjpKwiRORI4?rel=0&amp;hd=1&amp;wmode=transparent"></iframe>
</div>
<div class="youtube-video">
<iframe width="425" height="344" src="https://www.youtube.com/embed/gYKJqUZXuBw?rel=0&amp;hd=1&amp;wmode=transparent"></iframe>
</div>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup>
<col class="label">
<col>
</colgroup>
<tbody valign="top"><tr>
<td class="label"><a class="fn-backref" href="posts/rest-urls/#id1">[1]</a></td>
<td>Create, Read, Update, Delete</td>
</tr></tbody>
</table>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/first-biicode-poco/" class="u-url">Gestión de dependencias C++: Biicode</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/first-biicode-poco/" rel="bookmark"><time class="published dt-published" datetime="2015-05-14T20:00:00+02:00" title="2015-05-14">2015-05-14</time></a></p>
                <p class="commentline">
        
    <a href="posts/first-biicode-poco/#disqus_thread" data-disqus-identifier="cache/posts/first-biicode-poco.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Hace tiempo que estoy interesado la construcción, gestión de dependencias, empaquetado y despliegue de proyectos software. Para <a class="reference external" href="http://java.com/en/download/whatis_java.jsp">Java</a>, <a class="reference external" href="http://www.scala-lang.org/">Scala</a>, <a class="reference external" href="http://www.python.org/">Python</a>, etc. Es bastante sencillo ya que hay herramientas como <a class="reference external" href="http://maven.apache.org/">Maven</a>, <a class="reference external" href="http://www.gradle.org/">Gradle</a>, <a class="reference external" href="https://pypi.python.org/pypi/pip">pip</a>, <a class="reference external" href="http://www.scala-sbt.org/">Sbt</a>, etc. Pero para C++_, lo más parecido que he encontrado es <a class="reference external" href="http://maven.apache.org/">Maven</a> con el plugin <a class="reference external" href="http://maven-nar.github.io/">Nar</a> o <a class="reference external" href="http://www.gradle.org/">Gradle</a> con su <a class="reference external" href="https://gradle.org/docs/current/userguide/nativeBinaries.html">plugin cpp</a> (que está en desarrollo).</p>
<p>Hace tiempo que conozco <a class="reference external" href="https://www.biicode.org/">Biicode</a>, pero no había sacado nunca tiempo para probarlo, hasta hoy.</p>
<p>El funcionamiento general es muy sencillo.</p>
<p>Necesitamos <a class="reference external" href="http://docs.biicode.com/c++/installation.html">instalar biicode en nuestra máquina</a>.</p>
<p>Yo he creado un pequeño ejemplo utilizando el sistema de log de la librería <a class="reference external" href="http://pocoproject.org/">Poco</a>.</p>
<p>He ejecutado este comando para crear mi proyecto, al que he llamado bii_log. Eso sí, lo tengo que crear debajo de mi nombre de usuario en <a class="reference external" href="https://www.biicode.org/">Biicode</a>, por si posteriormente lo quiero publicar.</p>
<pre class="code bash"><a name="rest_code_f2a0b5189f7f4604b7b78d9d394222c1-1"></a>bii new carlovin/bii_log --hello<span class="o">=</span>cpp
</pre>
<p>Se ha creado una estructura de directorios y ficheros con nuestro proyecto. Aunque los únicos ficheros que vamos a tocar son:</p>
<pre class="code bash"><a name="rest_code_bb3de943847c443185cda62b59f29b4a-1"></a>blocks/carlosvin/bii_log/main.cpp
<a name="rest_code_bb3de943847c443185cda62b59f29b4a-2"></a>blocks/carlosvin/bii_log/biicode.conf
</pre>
<p>En el fichero biicode.conf vamos a configurar nuestras dependencias, en nuestro caso la librería <a class="reference external" href="http://pocoproject.org/">Poco</a>.</p>
<pre class="code yaml"><a name="rest_code_43a88abe502745c399150102cd75fa5f-1"></a><span class="c1"># Biicode configuration file</span>
<a name="rest_code_43a88abe502745c399150102cd75fa5f-2"></a>
<a name="rest_code_43a88abe502745c399150102cd75fa5f-3"></a><span class="p p-Indicator">[</span><span class="nv">requirements</span><span class="p p-Indicator">]</span>
<a name="rest_code_43a88abe502745c399150102cd75fa5f-4"></a>    <span class="l l-Scalar l-Scalar-Plain">fenix/poco(develop)</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
<a name="rest_code_43a88abe502745c399150102cd75fa5f-5"></a>
<a name="rest_code_43a88abe502745c399150102cd75fa5f-6"></a><span class="p p-Indicator">[</span><span class="nv">parent</span><span class="p p-Indicator">]</span>
<a name="rest_code_43a88abe502745c399150102cd75fa5f-7"></a>        <span class="l l-Scalar l-Scalar-Plain">carlosvin/bii_log</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
<a name="rest_code_43a88abe502745c399150102cd75fa5f-8"></a>
<a name="rest_code_43a88abe502745c399150102cd75fa5f-9"></a><span class="p p-Indicator">[</span><span class="nv">includes</span><span class="p p-Indicator">]</span>
<a name="rest_code_43a88abe502745c399150102cd75fa5f-10"></a>    <span class="l l-Scalar l-Scalar-Plain">Poco/*.h</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">fenix/poco/Foundation/include</span>
</pre>
<p>En la sección [includes], estamos redefiniendo la ruta a nuestros ficheros de cabeceras, porque si no lo hiciéramos tendríamos que hacer algo así:</p>
<pre class="code cpp"><a name="rest_code_b787bb34e1444870a8aa08fb0cde6788-1"></a><span class="cp">#include</span> <span class="cpf">"fenix/poco/Foundation/include/Logger.h"</span><span class="cp"></span>
</pre>
<p>Gracias a esta línea, en nuestro código tendremos includes más claros como:</p>
<pre class="code cpp"><a name="rest_code_95921480e6e247fb9b3b27aabae8663e-1"></a><span class="cp">#include</span> <span class="cpf">"Poco/Logger.h"</span><span class="cp"></span>
</pre>
<p>Así de fácil, ya podemos utilizar la librería <a class="reference external" href="http://pocoproject.org/">Poco</a> en nuestro proyecto, por ejemplo:</p>
<pre class="code cpp"><a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-1"></a><span class="cp">#include</span> <span class="cpf">"Poco/FileChannel.h"</span><span class="cp"></span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-2"></a><span class="cp">#include</span> <span class="cpf">"Poco/FormattingChannel.h"</span><span class="cp"></span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-3"></a><span class="cp">#include</span> <span class="cpf">"Poco/PatternFormatter.h"</span><span class="cp"></span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-4"></a><span class="cp">#include</span> <span class="cpf">"Poco/Logger.h"</span><span class="cp"></span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-5"></a><span class="cp">#include</span> <span class="cpf">"Poco/AutoPtr.h"</span><span class="cp"></span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-6"></a>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-7"></a><span class="k">using</span> <span class="n">Poco</span><span class="o">::</span><span class="n">FileChannel</span><span class="p">;</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-8"></a><span class="k">using</span> <span class="n">Poco</span><span class="o">::</span><span class="n">FormattingChannel</span><span class="p">;</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-9"></a><span class="k">using</span> <span class="n">Poco</span><span class="o">::</span><span class="n">PatternFormatter</span><span class="p">;</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-10"></a><span class="k">using</span> <span class="n">Poco</span><span class="o">::</span><span class="n">Logger</span><span class="p">;</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-11"></a><span class="k">using</span> <span class="n">Poco</span><span class="o">::</span><span class="n">AutoPtr</span><span class="p">;</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-12"></a>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-13"></a><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-14"></a>        <span class="n">AutoPtr</span><span class="o">&lt;</span><span class="n">FileChannel</span><span class="o">&gt;</span> <span class="n">pChannel</span><span class="p">(</span><span class="k">new</span> <span class="n">FileChannel</span><span class="p">);</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-15"></a>        <span class="n">pChannel</span><span class="o">-&gt;</span><span class="n">setProperty</span><span class="p">(</span><span class="s">"path"</span><span class="p">,</span> <span class="s">"log/sample.log"</span><span class="p">);</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-16"></a>        <span class="n">pChannel</span><span class="o">-&gt;</span><span class="n">setProperty</span><span class="p">(</span><span class="s">"rotation"</span><span class="p">,</span> <span class="s">"100 K"</span><span class="p">);</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-17"></a>        <span class="n">pChannel</span><span class="o">-&gt;</span><span class="n">setProperty</span><span class="p">(</span><span class="s">"archive"</span><span class="p">,</span> <span class="s">"timestamp"</span><span class="p">);</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-18"></a>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-19"></a>        <span class="c1">//AutoPtr&lt;ConsoleChannel&gt; pCons(new ConsoleChannel);</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-20"></a>        <span class="n">AutoPtr</span><span class="o">&lt;</span><span class="n">PatternFormatter</span><span class="o">&gt;</span> <span class="n">pPF</span><span class="p">(</span><span class="k">new</span> <span class="n">PatternFormatter</span><span class="p">);</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-21"></a>        <span class="n">pPF</span><span class="o">-&gt;</span><span class="n">setProperty</span><span class="p">(</span><span class="s">"pattern"</span><span class="p">,</span> <span class="s">"%Y-%m-%d %H:%M:%S %s: %t"</span><span class="p">);</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-22"></a>        <span class="n">AutoPtr</span><span class="o">&lt;</span><span class="n">FormattingChannel</span><span class="o">&gt;</span> <span class="n">pFC</span><span class="p">(</span><span class="k">new</span> <span class="n">FormattingChannel</span><span class="p">(</span><span class="n">pPF</span><span class="p">,</span> <span class="n">pChannel</span><span class="p">));</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-23"></a>        <span class="n">Logger</span><span class="o">::</span><span class="n">root</span><span class="p">().</span><span class="n">setChannel</span><span class="p">(</span><span class="n">pFC</span><span class="p">);</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-24"></a>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-25"></a>        <span class="n">Logger</span> <span class="o">&amp;</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">::</span><span class="n">get</span><span class="p">(</span><span class="s">"TestChannel"</span><span class="p">);</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-26"></a>        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10000</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-27"></a>                <span class="n">poco_information</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="s">"This is a info"</span><span class="p">);</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-28"></a>                <span class="n">poco_warning</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="s">"This is a warning"</span><span class="p">);</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-29"></a>        <span class="p">}</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-30"></a>        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_dea5fd1ae54f427abe6bb03c974b0809-31"></a><span class="p">}</span>
</pre>
<p>Para compilar el proyecto simplemente hay que ejecutar:</p>
<pre class="code bash"><a name="rest_code_198576a799d04fb19939eb372c9db7e8-1"></a>bii cpp:build
</pre>
<p>Y para publicarlo y que cualquiera pueda utilizarlo, como nosotros hemos utilizado <a class="reference external" href="http://pocoproject.org/">Poco</a>:</p>
<pre class="code bash"><a name="rest_code_32fb991c0b5245dd98d17e6140d30578-1"></a>bii publish
</pre>
<p>Además de lo sencillo que ha resultado todo, me ha gustado mucho que después de ejecutar "bii cpp:build", mi <a class="reference external" href="https://eclipse.org">Eclipse</a> con <a class="reference external" href="https://eclipse.org/cdt/">CDT</a> indexaba perfectamente el código, así como el autocompletado y la navegación entre clases y métodos.</p>
<p>También he leído un artículo sobre lo bien que se integra con <a class="reference external" href="https://www.jetbrains.com/clion/">CLion</a>: <a class="reference external" href="http://blog.jetbrains.com/clion/2015/03/when-clion-met-biicode/">When CLion met biicode</a>.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/software-maintenance/" class="u-url">Mantenimiento de Software</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/software-maintenance/" rel="bookmark"><time class="published dt-published" datetime="2014-10-11T21:00:00+02:00" title="2014-10-11">2014-10-11</time></a></p>
                <p class="commentline">
        
    <a href="posts/software-maintenance/#disqus_thread" data-disqus-identifier="cache/posts/software-maintenance.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Hace unos días en el trabajo tuve que rellenar un documento en el que debía indicar el tipo de mantenimiento que debía hacer y sólo tenía dos opciones: correctivo y adaptativo. Esto me extrañó, porque el cambio que yo quería hacer no terminaba de encajar en ninguno de los dos tipos.</p>
<p>Haciendo memoria sobre lo que había dado en mi primera asignatura de Ingeniería del Software, conseguí recordar tres tipos, pero me parecía que me faltaba un tipo.</p>
<p>Hoy por casualidad he encontrado mis apuntes de Ingeniería del Software y estos son los tipos de mantenimiento ordenados de más a menos porcentaje de tiempo dedicado.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field">
<th class="field-name">Perfectivo:</th>
<td class="field-body">Actividades para mejorar o añadir nuevas funcionalidades requeridas por el usuario.</td>
</tr>
<tr class="field">
<th class="field-name">Adaptativo:</th>
<td class="field-body">Actividades para adaptar el sistema a los cambios en su entorno tecnológico (Hardware o software).</td>
</tr>
<tr class="field">
<th class="field-name">Correctivo:</th>
<td class="field-body">Corregir defectos en el hardware o software detectados por el usuario durante la explotación del sistema.</td>
</tr>
<tr class="field">
<th class="field-name">Preventivo:</th>
<td class="field-body">Actividades para facilitar el mantenimiento del futuro sistema.</td>
</tr>
</tbody>
</table>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/gradle-cpp/" class="u-url">Construir un proyecto C++ con Gradle</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/gradle-cpp/" rel="bookmark"><time class="published dt-published" datetime="2014-09-27T12:00:00+02:00" title="2014-09-27">2014-09-27</time></a></p>
                <p class="commentline">
        
    <a href="posts/gradle-cpp/#disqus_thread" data-disqus-identifier="cache/posts/gradle-cpp.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div class="section" id="introduccion">
<h2><a class="toc-backref" href="posts/gradle-cpp/#id7">Introducción</a></h2>
<p>La construcción, gestión de dependencias y distribución de mis proyectos es algo que cada vez me preocupa más, me gustaría encontrar una herramienta que unificara este proceso y fuese independiente del lenguaje, lo más parecido con lo que he trabajado ha sido <a class="reference external" href="http://www.scons.org">SCons</a>, <a class="reference external" href="http://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html#Autotools-Introduction">Autotools</a>, <a class="reference external" href="http://ant.apache.org">Ant</a>, <a class="reference external" href="http://maven.apache.org">Maven</a> y últimamente <a class="reference external" href="http://www.gradle.org">Gradle</a>.</p>
<p>Llevo un tiempo haciendo algunas cosas con <a class="reference external" href="http://www.gradle.org">Gradle</a>, pero siempre centrado en proyectos <a class="reference external" href="http://www.java.com">Java</a> utilizándolo como reemplazo a <a class="reference external" href="http://maven.apache.org">Maven</a>, porque que es más sencillo de usar y más rápido. También lo he utilizado en projectos <a class="reference external" href="http://developer.android.com/sdk/installing/studio-build.html">Android</a> y he sufrido la pareja <a class="reference external" href="http://developer.android.com/sdk/installing/studio-build.html">Android Studio + Gradle</a> en sus primeros matrimonios (porque yo he querido), actualmente está todo mucho más documentado y funciona muy bien.</p>
<p>Antes de nada hay que decir que la construcción de proyectos C/C++ y Objective-C con <a class="reference external" href="http://www.gradle.org">Gradle</a> se encuentra en fase de <a class="reference external" href="http://www.gradle.org/docs/current/userguide/feature_lifecycle.html#incubating">incubación</a>, aunque ya permite hacer algunas tareas avanzadas como:</p>
<ul class="simple">
<li>Generación de múltiples artefactos dentro del mismo proyecto, esto es varias librerías o ejecutables.</li>
<li>Gestionar las dependencias entre estos artefactos (sin versiones).</li>
<li>Generar distintos “sabores” de aplicaciones, por ejemplo: podremos generar una aplicación “Community” y otra con más características habilitadas llamada “Enterprise”.</li>
<li>Permite generar binarios para distintas plataformas, esto depende de las cadenas de herramientas ( <a class="reference external" href="http://es.wikipedia.org/wiki/Cadena_de_herramientas">Toolchains</a> ) que tengamos instaladas en la máquina de compilación.</li>
</ul>
<p>Como decía todavía tiene limitaciones, aunque están trabajando en ello y <a class="reference external" href="http://www.gradleware.com/resources/cpp/">si consiguen lo que tienen planeado</a> dejaré <a class="reference external" href="http://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html#Autotools-Introduction">Autotools</a> (me arrepentiré de haber dicho esto).</p>
<div class="contents topic" id="indice">
<p class="topic-title first">índice</p>
<ul class="simple">
<li><a class="reference internal" href="posts/gradle-cpp/#introduccion" id="id7">Introducción</a></li>
<li>
<a class="reference internal" href="posts/gradle-cpp/#un-caso-practico" id="id8">Un caso práctico</a><ul>
<li><a class="reference internal" href="posts/gradle-cpp/#estructura-del-proyecto" id="id9">Estructura del proyecto</a></li>
<li><a class="reference internal" href="posts/gradle-cpp/#la-aplicacion-c" id="id10">La Aplicación C++</a></li>
<li>
<a class="reference internal" href="posts/gradle-cpp/#construyendo-con-gradle" id="id11">Construyendo con Gradle</a><ul>
<li><a class="reference internal" href="posts/gradle-cpp/#caso-basico" id="id12">Caso básico</a></li>
<li>
<a class="reference internal" href="posts/gradle-cpp/#distintos-sabores" id="id13">Distintos “Sabores”</a><ul>
<li><a class="reference internal" href="posts/gradle-cpp/#community" id="id14">Community</a></li>
<li><a class="reference internal" href="posts/gradle-cpp/#enterprise" id="id15">Enterprise</a></li>
</ul>
</li>
<li><a class="reference internal" href="posts/gradle-cpp/#release-o-debug" id="id16">Release o Debug</a></li>
<li><a class="reference internal" href="posts/gradle-cpp/#multi-plataforma" id="id17">Multi-plataforma</a></li>
</ul>
</li>
<li><a class="reference internal" href="posts/gradle-cpp/#pruebalo-tu-mism" id="id18">Pruébalo tú mism@</a></li>
</ul>
</li>
<li><a class="reference internal" href="posts/gradle-cpp/#conclusiones" id="id19">Conclusiones</a></li>
</ul>
</div>
<p class="more"><a href="posts/gradle-cpp/">Leer más…</a></p>
</div>
    </div>
    </article><article class="h-entry post-micro"><header><h1 class="p-name entry-title"><a href="posts/sorting-algorithm-dancing/" class="u-url">Cómo funcionan los algoritmos de ordenación (Bailando)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Carlos Martín Sánchez
            </span></p>
            <p class="dateline"><a href="posts/sorting-algorithm-dancing/" rel="bookmark"><time class="published dt-published" datetime="2014-06-16T20:45:00+02:00" title="2014-06-16">2014-06-16</time></a></p>
                <p class="commentline">
        
    <a href="posts/sorting-algorithm-dancing/#disqus_thread" data-disqus-identifier="cache/posts/sorting-algorithm-dancing.en.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>He encontrado por ahí un grupo tecnológico-artístico llamados <a class="reference external" href="https://www.youtube.com/user/AlgoRythmics/videos">AlgoRythmics</a>, que enseñan cómo funcionan los algoritmos de ordenación más conocidos.</p>
<p>Siempre puedes consultar en la wikipedia <a class="reference external" href="http://es.wikipedia.org/wiki/Algoritmo_de_ordenamiento#Lista_de_algoritmos_de_ordenamiento">Algoritmos de ordenamiento</a>, aunque no creo que sea tan rápido ni tan divertido para aprender como con <a class="reference external" href="https://www.youtube.com/user/AlgoRythmics/videos">AlgoRythmics</a>, os dejo el ejemplo del <a class="reference external" href="http://es.wikipedia.org/wiki/Quicksort">Quicksort</a>.</p>
<div class="youtube-video">
<iframe width="425" height="344" src="https://www.youtube.com/embed/ywWBy6J5gz8?rel=0&amp;hd=1&amp;wmode=transparent"></iframe>
</div>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-2.html" rel="next">Publicaciones anteriores</a>
            </li>
        </ul></nav><script>var disqus_shortname="carlosvin";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer"><div style="display=flex-inline; vertical-align=middle">
        <a href="https://www.linkedin.com/in/carlosvin" style="margin-right: 3%;">Carlos Martín Sánchez</a>
        <a href="https://twitter.com/carlosvin" class="twitter-follow-button" style="float: right;" data-show-count="false">Follow @carlosvin</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
    <br>
    Contents © 2017 - 
    
   <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/ar/">
   <img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="http://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png"></a> - 
    Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a>
            
        </footer>
</div>
</div>


            <script src="../assets/js/all-nocdn.js"></script><script src="../assets/js/colorbox-i18n/jquery.colorbox-es.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("es");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1328360-9', 'carlosvin.github.io');
  ga('send', 'pageview');

</script><!-- Start of StatCounter Code for Default Guide --><script type="text/javascript">
var sc_project=9708205;
var sc_invisible=1;
var sc_security="4998d447";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script><noscript><div class="statcounter"><a title="web analytics" href="http://statcounter.com/" target="_blank"><img class="statcounter" src="http://c.statcounter.com/9708205/0/4998d447/1/" alt="web analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->


</body>
</html>
