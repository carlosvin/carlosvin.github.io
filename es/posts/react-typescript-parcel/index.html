<!DOCTYPE html>
<html prefix="" lang="es">
<head>
<meta charset="utf-8">
<meta name="description" content="proyecto de ejemplo en el que se muestra cómo crear una aplicación web de página única (SPA) con React, Typescript y Parcel.">
<meta name="viewport" content="width=device-width">
<title>SPA: React + Typescript + Parcel | Carlos says "bla bla"</title>
<link href="../../../assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (es)" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../../rss.xml">
<link rel="canonical" href="https://carlosvin.github.io/es/posts/react-typescript-parcel/">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-1328360-10"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-1328360-10');
</script><meta name="author" content="Carlos Martín Sánchez">
<link rel="prev" href="../creating-custom-maven-plugin-default/" title="Custom Maven Plugin: Override default build lifecycle" type="text/html">
<meta property="og:site_name" content='Carlos says "bla bla"'>
<meta property="og:title" content="SPA: React + Typescript + Parcel">
<meta property="og:url" content="https://carlosvin.github.io/es/posts/react-typescript-parcel/">
<meta property="og:description" content="proyecto de ejemplo en el que se muestra cómo crear una aplicación web de página única (SPA) con React, Typescript y Parcel.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2019-01-01T13:30:02+01:00">
<meta property="article:tag" content="Parcel">
<meta property="article:tag" content="React">
<meta property="article:tag" content="SPA">
<meta property="article:tag" content="Typescript">
<link rel="alternate" hreflang="en" href="../../../posts/react-typescript-parcel/">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>
    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
            styles, `#sidebar-checkbox` for behavior. -->
    <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox"><!-- Toggleable sidebar --><div class="sidebar" id="sidebar">
        <div class="sidebar-item">
<form class="form-inline" role="search" action="https://duckduckgo.com/">
  <div class="form-group">
    <input type="search" name="q" class="form-control" placeholder="Search on Carlos says " bla><input type="hidden" name="sites" value="https://carlosvin.github.io/">
</div>
  <button type="submit" class="search-icon">
    <svg viewbox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></button>
</form>
</div>
        
    <nav id="menu" role="navigation" class="sidebar-nav"><a class="sidebar-nav-item" href="../../archive.html">Archivos</a>
        <a class="sidebar-nav-item" href="../../categories/index.html">Categorías</a>
        <a class="sidebar-nav-item" href="../../rss.xml">RSS</a>
        <a class="sidebar-nav-item" href="../../../">In English</a>
    
    
    </nav><div class="sidebar-item">
          <a href="https://twitter.com/intent/user?screen_name=carlosvin" title="Twitter">
            @carlosvin
          </a><br><a href="https://github.com/carlosvin" title="Github">github.com/carlosvin</a><br><a href="https://www.linkedin.com/in/carlosvin" target="blank" title="Linkedin">Carlos Martín Sánchez</a>
        </div>
        </div>
    

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          
    <h3 id="brand" class="masthead-title">
      <a href="https://carlosvin.github.io/es/" title="Carlos says " bla rel="home">Carlos says "bla bla"</a>
    </h3>

        </div>
      </div>

      <div class="container content" id="content">
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="post-title p-name entry-title" itemprop="headline name"><a href="." class="u-url">SPA: React + Typescript + Parcel</a></h1>

        <div class="metadata">
            <p class="dateline"><a href="." rel="bookmark"><time class="post-date published dt-published" datetime="2019-01-01T13:30:02+01:00" itemprop="datePublished" title="1/1/19 13:30">1/1/19 13:30</time></a></p>
                <p class="commentline">
        
    <a href="#disqus_thread" data-disqus-identifier="cache/posts/react-typescript-parcel.en.html">Comments</a>


                <meta name="description" itemprop="description" content="proyecto de ejemplo en el que se muestra cómo crear una aplicación web de página única (SPA) con React, Typescript y Parcel."></p>
<div class="posttranslations translations">
                <a title="También disponible en: English" href="../../../posts/react-typescript-parcel/" rel="alternate" hreflang="en">English</a> 
        </div>

        </div>
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>Estaba a punto de empezar otro proyecto personal para crear una aplicación web de página única (<a href="https://es.wikipedia.org/wiki/Single-page_application">SPA - Single Page App</a>) en la que gestionar mi blog de viaje. </p>
<p>Tenía claras las tecnologías a utilizar, porque últimamente he trabajado bastante con <a href="https://reactjs.org">React</a> y <a href="https://www.typescriptlang.org/">Typescript</a> y me encuentro muy cómodo con esta pareja de tecnologías. Normalmente uso <a href="https://webpack.js.org/">Webpack</a> como empaquetador, pero hace algún tiempo había probado <a href="https://parceljs.org">Parcel</a> y me encantó lo simple y rápido que era crear un proyecto desde cero utilizando <a href="https://www.typescriptlang.org/">Typescript</a> y <a href="https://reactjs.org">React</a>. </p>
<p>He decidido crear un proyecto base, para poder reutilizarlo la próxima vez que quiera crear una <a href="https://es.wikipedia.org/wiki/Single-page_application">SPA</a> con mis tecnologías frontend favoritas, al menos hasta ahora. De esta forma, la próxima vez que quiera empezar un proyecto nuevo solamente tengo que:</p>
<pre class="code literal-block"><span></span>git clone https://github.com/carlosvin/react-typescript-parcel-template.git
</pre>


<p>O simplemente descargar el <a href="https://github.com/carlosvin/react-typescript-parcel-template/archive/1.0.zip">archivo ZIP con el proyecto</a>.</p>
<div class="toc">
<ul>
<li>
<a href="#inicio-rapido">Inicio Rápido</a><ul>
<li><a href="#servidor-de-desarrollo">Servidor de Desarrollo</a></li>
<li><a href="#generar-un-paquete-listo-para-produccion">Generar un paquete listo para producción</a></li>
</ul>
</li>
<li>
<a href="#creacion-del-proyecto-paso-a-paso">Creación del proyecto paso a paso</a><ul>
<li><a href="#anadir-dependencias">Añadir dependencias</a></li>
<li><a href="#codigo-fuente-de-la-aplicacion">Código fuente de la aplicación</a></li>
<li><a href="#comandos-para-construir-el-proyecto">Comandos para construir el proyecto</a></li>
<li><a href="#configurar-typescript-opcional">Configurar Typescript (opcional)</a></li>
</ul>
</li>
<li><a href="#codigo-fuente-completo">Código fuente completo</a></li>
</ul>
</div>
<h2 id="inicio-rapido">Inicio Rápido</h2>
<h3 id="servidor-de-desarrollo">Servidor de Desarrollo</h3>
<pre class="code literal-block"><span></span>git clone https://github.com/carlosvin/react-typescript-parcel-template.git
<span class="nb">cd</span> react-typescript-parcel-template
yarn install
yarn start
</pre>


<!--TEASER_END-->

<p>El último comando <code>yarn start</code>:</p>
<ul>
<li>Arrancará un servidor de desarrollo en <code>http://localhost:1234</code> con <a href="https://en.parceljs.org/hmr.html">reemplazo de módulos en caliente</a>.</li>
<li>Construirá automáticamente el proyecto cada vez que guardemos los cambios.</li>
</ul>
<div class="admonition type">
<p class="admonition-title">En resumen</p>
<p>Cada vez que guardes tus cambios, verás el resultado en <code>http://localhost:1234</code>  sin tener que refrescar la página.</p>
</div>
<h3 id="generar-un-paquete-listo-para-produccion">Generar un paquete listo para producción</h3>
<p>Simplemente ejecuta <code>yarn build</code>.</p>
<p>Las <a href="https://en.parceljs.org/production.html#optimisations">optimizaciones que Parcel aplica por defecto</a> serán aplicadas a los archivos generados, los cuales son guardados en la carpeta <code>dist</code>.</p>
<p>Dentro de la carpeta <code>dist</code> hay un informe sobre el tamaño de los archivos generados y el tamaño de las dependencias: <code>dist/report.html</code>, siempre está bien conocer cuán pesada es tu aplicación.</p>
<h2 id="creacion-del-proyecto-paso-a-paso">Creación del proyecto paso a paso</h2>
<p>Si simplemente quieres utilizar el proyecto puedes saltarte esta sección, aquí voy a describir paso a paso lo que hice para crear este proyecto base.</p>
<p>Comenzamos creando el archivo <code>package.json</code> con el comando <a href="https://yarnpkg.com/lang/en/docs/cli/init/">yarn init</a>.</p>
<pre class="code literal-block"><span></span>yarn init
</pre>


<h3 id="anadir-dependencias">Añadir dependencias</h3>
<p>Dependencias <a href="https://reactjs.org">React</a>.</p>
<pre class="code literal-block"><span></span>yarn add @types/react @types/react-dom react react-dom
</pre>


<p>El comando anterior modifica el archivo <code>package.json</code> en la sección <code>dependencies</code> e instalará esos paquetes en la carpeta <code>node_modules</code> para que posteriormente puedan ser utilizados por nuestro proyecto.</p>
<pre class="code literal-block"><span></span><span class="p">{</span>
  <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"project_name"</span><span class="p">,</span>
  <span class="nt">"version"</span><span class="p">:</span> <span class="s2">"1.0.0"</span><span class="p">,</span>
  <span class="nt">"main"</span><span class="p">:</span> <span class="s2">"index.js"</span><span class="p">,</span>
  <span class="nt">"license"</span><span class="p">:</span> <span class="s2">"MIT"</span><span class="p">,</span>
  <span class="nt">"dependencies"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"@types/react"</span><span class="p">:</span> <span class="s2">"^16.7.18"</span><span class="p">,</span>
    <span class="nt">"@types/react-dom"</span><span class="p">:</span> <span class="s2">"^16.0.11"</span><span class="p">,</span>
    <span class="nt">"react"</span><span class="p">:</span> <span class="s2">"^16.7.0"</span><span class="p">,</span>
    <span class="nt">"react-dom"</span><span class="p">:</span> <span class="s2">"^16.7.0"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre>


<p>También necesitamos el compilador de <a href="https://www.typescriptlang.org/">Typescript</a> como dependencia de desarrollo, esto significa que cuando empaquetemos nuestra aplicación para producción, estas dependencias de desarrollo no serán incluidas.</p>
<pre class="code literal-block"><span></span>yarn add --dev typescript
</pre>


<p>También necesitamos como dependencia de desarrollo nuestro empaquetador <a href="https://parceljs.org/">Parcel</a>.</p>
<pre class="code literal-block"><span></span>yarn add --dev parcel-bundler
</pre>


<p>He añadido una dependencia opcional, se trata del plugin para Parcel, para generar el informe del contenido del paquete. Es muy útil para detectar casos en los que añadimos una dependencia para, por ejemplo, comparar vectores de números, pero resulta que esta librería ocupa más que nuestra propia aplicación. En este caso hay que considerar otras librerías que hagan lo mismo y sean más ligeras.</p>
<p>Este plugin es la versión para Parcel de <a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">webpack-bundle-analyzer</a>.</p>
<pre class="code literal-block"><span></span>yarn add --dev parcel-plugin-bundle-visualiser
</pre>


<h3 id="codigo-fuente-de-la-aplicacion">Código fuente de la aplicación</h3>
<p>Primero creamos el punto de entrada de aplicación básica React en el archivo <code>src/index.tsx</code>.</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="o">*</span> <span class="k">as</span> <span class="n">React</span> <span class="kn">from</span> <span class="s2">"react"</span><span class="p">;</span>
<span class="kn">import</span> <span class="o">*</span> <span class="k">as</span> <span class="n">ReactDOM</span> <span class="kn">from</span> <span class="s2">"react-dom"</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">App</span> <span class="n">extends</span> <span class="n">React</span><span class="o">.</span><span class="n">PureComponent</span> <span class="p">{</span>
    <span class="n">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Hello</span> <span class="n">world</span><span class="err">!</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">ReactDOM</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
    <span class="o">&lt;</span><span class="n">App</span> <span class="o">/&gt;</span><span class="p">,</span>
    <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"app"</span><span class="p">)</span>
<span class="p">);</span>
</pre>


<p>Parcel puede utilizar un archivo <code>index.html</code> como punto de entrada a la aplicación y descubrir qué otros archivos tiene que procesar. Vamos a crear <code>src/index.html</code> como sigue:</p>
<pre class="code literal-block"><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"app"</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"./index.tsx"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre>


<p>Necesitamos la etiqueta <code>div</code> para que React pueda inyectar el DOM virtual que utiliza para trabajar. 
La declaración <code>script</code> es utilizada por Parcel para saber que tiene que empezar construyendo el archivo <code>index.tsx</code>.</p>
<h3 id="comandos-para-construir-el-proyecto">Comandos para construir el proyecto</h3>
<ul>
<li>
<code>build</code>: Descrito en la sección "Generar un paquete listo para producción".</li>
<li>
<code>start</code>: Descrito en "Servidor de desarrollo".</li>
</ul>
<pre class="code literal-block"><span></span>    <span class="s2">"scripts"</span><span class="err">:</span> <span class="p">{</span>
        <span class="nt">"start"</span><span class="p">:</span> <span class="s2">"parcel src/index.html"</span><span class="p">,</span>
        <span class="nt">"build"</span><span class="p">:</span> <span class="s2">"parcel build src/index.html"</span>
    <span class="p">}</span>
</pre>


<p>Ahora es realmente fácil:</p>
<ul>
<li>Arrancar el servidor de desarrollo: <code>yarn start</code>.</li>
<li>Generar un paquete para producción: <code>yarn build</code>.</li>
</ul>
<p>Hay otra forma descrita en la <a href="https://en.parceljs.org/getting_started.html">documentación de Parcel</a> que se basa en instalar Parcel de forma global en tu sistema. </p>
<p>Yo he optado por añadir Parcel como parte del proyecto, de esta forma el proyecto es menos dependiente del sistema y puedes utilizar diferentes versiones de Parcel en distintos proyectos.</p>
<p>No instalar Parcel globalmente en tu sistema tiene un pequeño inconveniente, no puedes ejecutar directamente desde consola <code>parcel index.html</code>, porque Parcel está instalado en la carpeta <code>node_modules</code> de tu proyecto.</p>
<p>Pero digo que es un pequeño inconveniente, porque hay una forma de ejecutar aplicaciones instaladas en <code>node_modules</code>: </p>
<pre class="code literal-block"><span></span>npx parcel index.html
</pre>


<p>Yo normalemente prefiero definir los comandos de construcción en el archivo <code>package.json</code>, porque así queda documentado en el código la forma en que debemos  construir el proyecto.</p>
<h3 id="configurar-typescript-opcional">Configurar Typescript (opcional)</h3>
<p>Crear un archivo <code>tsconfig.json</code>.</p>
<pre class="code literal-block"><span></span><span class="p">{</span>
    <span class="nt">"compilerOptions"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"outDir"</span><span class="p">:</span> <span class="s2">"./dist/"</span><span class="p">,</span>
        <span class="nt">"sourceMap"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">"noImplicitAny"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">"module"</span><span class="p">:</span> <span class="s2">"commonjs"</span><span class="p">,</span>
        <span class="nt">"target"</span><span class="p">:</span> <span class="s2">"es5"</span><span class="p">,</span>
        <span class="nt">"jsx"</span><span class="p">:</span> <span class="s2">"react"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>


<p>Con esta configuración indicamos al compilador de Typescript lo siguiente:</p>
<ul>
<li>Los archivos se generan en la carpeta <code>dist</code>.</li>
<li>Vamos a generar <a href="https://developer.mozilla.org/en-US/docs/Tools/Debugger/How_to/Use_a_source_map">source maps</a>, así podemos depurar directamente sobre los archivos typescript.</li>
<li>No permitir usar el tipo <code>any</code>, por ejemplo, la siguiente declaración no está permitida: <code>const elements: any;</code>
</li>
<li>El código utilizará <a href="https://requirejs.org/docs/commonjs.html">CommonJs</a> como sistema de módulos.</li>
<li>El código generado seguirá el estándar <a href="https://es.wikipedia.org/wiki/ECMAScript">ECMAScript</a>.</li>
<li>Soportar la sintáxis <a href="https://www.typescriptlang.org/docs/handbook/jsx.html">JSX</a> en los archivos .tsx.</li>
</ul>
<h2 id="codigo-fuente-completo">Código fuente completo</h2>
<p>El ejemplo completo se encuentra en: <a href="https://github.com/carlosvin/react-typescript-parcel-template">https://github.com/carlosvin/react-typescript-parcel-template</a>.</p>
<p>También puedes descargarlo directamente en los siguientes formatos:</p>
<ul>
<li><a href="https://github.com/carlosvin/react-typescript-parcel-template/archive/1.0.zip">zip</a></li>
<li><a href="https://github.com/carlosvin/react-typescript-parcel-template/archive/1.0.tar.gz">tar.gz</a></li>
</ul>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/parcel/" rel="tag">Parcel</a></li>
            <li><a class="tag p-category" href="../../categories/react/" rel="tag">React</a></li>
            <li><a class="tag p-category" href="../../categories/spa/" rel="tag">SPA</a></li>
            <li><a class="tag p-category" href="../../categories/typescript/" rel="tag">Typescript</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../creating-custom-maven-plugin-default/" rel="prev" title="Custom Maven Plugin: Override default build lifecycle">Publicación anterior</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comentarios</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="carlosvin",
            disqus_url="https://carlosvin.github.io/es/posts/react-typescript-parcel/",
        disqus_title="SPA: React + Typescript + Parcel",
        disqus_identifier="cache/posts/react-typescript-parcel.en.html",
        disqus_config = function () {
            this.language = "es_ES";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="carlosvin";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>
        <span>Powered by <a href="https://getnikola.com" rel="nofollow" target="_blank">Nikola</a></span>
        
   <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/2.5/ar/">
   <img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png"></a>
</p>
            
        </footer>
</div>
    </div>
    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    
    
    
            <script src="../../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("es");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
