import{J as t,S as e,i as s,s as a,m as n,g as r,t as i,k as l,d as o,K as c,z as h,A as u,D as d,E as m,e as p,a as $,b as f,f as g,L as y,n as w,c as v,h as j,j as x,u as k,p as E,x as b,v as L,q as S,H as A,r as D,w as I,M,N as P}from"./client.c7a8bb39.js";import{p as H,u as K}from"./url.5d04eaaf.js";import{t as N,a as T,D as Y}from"./Details.647f8d2f.js";const q=["date","title","slug","lang"];class z{constructor(e,s){const{title:a,doctitle:n,summary:r,description:i,slug:l,keywords:o,lang:c,date:h,updated:u,modified:d,previewImage:m,author:p,otherLangs:$}=e;this.title=a||n,this.lang=c,this.summary=r||i,this.slug=l||N(s.split(".")[0]),this.keywords=z.buildKeywords(o),this.filename=s,this.modified=u||d||h,this.date=h||u||d,this.author=p||t,this.previewImage=m||"icons/icon-192x192.png",this.otherLangs=$,this.validate()}static buildKeywords(t){return"string"==typeof t?t.split(",").map(t=>t.trim()):t}get path(){return H(this.slug,this.lang)}get url(){return K(this.slug,this.lang)}get jsonLd(){return`{\n            "@context": "https://schema.org",\n            "@type": "Article",\n            "mainEntityOfPage": {\n              "@type": "Webpage",\n              "@id": "https://google.com/article"\n            },\n            "headline": "${this.title}",\n            "alternativeHeadline": "${this.summary}",\n            "description": "${this.summary}",\n            "image": "${this.previewImage}",\n            "datePublished": "${this.date}",\n            "dateModified": "${this.modified}",\n            "keywords": "${this.keywords}",\n            "author": {\n              "@type": "Person",\n              "name": "${this.author}"\n            },\n            "publisher": "${this.author}"\n        }`}get jsonLdScript(){return`<script type="application/ld+json">${this.jsonLd}<\/script>`}validate(){q.forEach(t=>this._validate(t))}_validate(t){if(!this[t])throw`[${this.path}] Invalid post data: [${t}] field required`}}function O(t){return t.substring(0,10)}function R(t){let e;const s=new c({props:{href:`https://twitter.com/intent/tweet?url=${t[2]}&text=${t[0]}: ${t[1]}&hashtags=${t[3].join(",")}`,title:`Share "${t[0]}"`,icon:"twitter"}});return{c(){h(s.$$.fragment)},l(t){u(s.$$.fragment,t)},m(t,a){d(s,t,a),e=!0},p(t,e){const a={};15&e&&(a.href=`https://twitter.com/intent/tweet?url=${t[2]}&text=${t[0]}: ${t[1]}&hashtags=${t[3].join(",")}`),1&e&&(a.title=`Share "${t[0]}"`),s.$set(a)},i(t){e||(i(s.$$.fragment,t),e=!0)},o(t){l(s.$$.fragment,t),e=!1},d(t){m(s,t)}}}function U(t){let e,s;return{c(){e=p("button"),this.h()},l(t){e=$(t,"BUTTON",{title:!0,class:!0}),f(e).forEach(o),this.h()},h(){g(e,"title",t[0]),g(e,"class","svelte-1aekmf3")},m(a,n,i){r(a,e,n),i&&s(),s=y(e,"click",t[5])},p(t,s){1&s&&g(e,"title",t[0])},i:w,o:w,d(t){t&&o(e),s()}}}function _(t){let e,s,a,c;const h=[U,R],u=[];return e=function(t,e){return t[4]?0:1}(t),s=u[e]=h[e](t),{c(){s.c(),a=n()},l(t){s.l(t),a=n()},m(t,s){u[e].m(t,s),r(t,a,s),c=!0},p(t,[e]){s.p(t,e)},i(t){c||(i(s),c=!0)},o(t){l(s),c=!1},d(t){u[e].d(t),t&&o(a)}}}function B(t,e,s){let{title:a}=e,{text:n}=e,{url:r}=e,{keywords:i=[]}=e;const l="undefined"!=typeof navigator&&navigator.share;return t.$set=(t=>{"title"in t&&s(0,a=t.title),"text"in t&&s(1,n=t.text),"url"in t&&s(2,r=t.url),"keywords"in t&&s(3,i=t.keywords)}),[a,n,r,i,l,async function(){try{await navigator.share({title:a,text:n+T(i),url:r})}catch(t){console.error("Sharing",t)}}]}class J extends e{constructor(t){super(),s(this,t,B,_,a,{title:0,text:1,url:2,keywords:3})}}function V(t){let e,s;const a=t[1].default,n=v(a,t,t[0],null),c=n||{c:w,l:w,m:w,d:w};return{c(){e=p("div"),c&&c.c(),this.h()},l(t){e=$(t,"DIV",{class:!0});var s=f(e);c&&c.l(s),s.forEach(o),this.h()},h(){g(e,"class","content svelte-1gb6nlh")},m(t,a){r(t,e,a),c&&c.m(e,null),s=!0},p(t,[e]){n&&n.p&&1&e&&n.p(j(a,t,t[0],null),x(a,t[0],e,null))},i(t){s||(i(c,t),s=!0)},o(t){l(c,t),s=!1},d(t){t&&o(e),c&&c.d(t)}}}function W(t,e,s){let{$$slots:a={},$$scope:n}=e;return t.$set=(t=>{"$$scope"in t&&s(0,n=t.$$scope)}),[n,a]}class C extends e{constructor(t){super(),s(this,t,W,V,a,{})}}const{document:F}=P;function G(t){let e;return{c(){this.h()},l(t){this.h()},h(){e=new A(t[1],null)},m(t,s){e.m(t,s)},p(t,s){2&s&&e.p(t[1])},d(t){t&&e.d()}}}function Q(t){let e,s,a,c,y,w,v,j,x,M,P,H,N,T,q,z,R,U,_,B,V=t[0].title+"",W=t[0].summary+"";F.title=e=t[0].title;const Q=new J({props:{title:t[0].title,keywords:t[0].keywords,text:t[0].summary,url:K(t[0].slug,t[0].lang)}}),X=new Y({props:{post:t[0]}}),Z=new C({props:{$$slots:{default:[G]},$$scope:{ctx:t}}});return{c(){a=n(),c=p("meta"),w=p("meta"),j=p("link"),x=k(),M=p("header"),P=p("h1"),H=E(V),N=k(),T=p("span"),h(Q.$$.fragment),q=k(),z=p("p"),R=E(W),U=k(),h(X.$$.fragment),_=k(),h(Z.$$.fragment),this.h()},l(t){const e=b('[data-svelte="svelte-1v5cezs"]',F.head);a=n(),c=$(e,"META",{name:!0,content:!0,scheme:!0}),w=$(e,"META",{name:!0,content:!0}),j=$(e,"LINK",{rel:!0,href:!0,as:!0,onload:!0}),e.forEach(o),x=L(t),M=$(t,"HEADER",{class:!0});var s=f(M);P=$(s,"H1",{class:!0});var r=f(P);H=S(r,V),N=L(r),T=$(r,"SPAN",{class:!0});var i=f(T);u(Q.$$.fragment,i),i.forEach(o),r.forEach(o),q=L(s),z=$(s,"P",{class:!0});var l=f(z);R=S(l,W),l.forEach(o),U=L(s),u(X.$$.fragment,s),s.forEach(o),_=L(t),u(Z.$$.fragment,t),this.h()},h(){s=new A(t[2],null),g(c,"name","date"),g(c,"content",y=O(t[0].date)),g(c,"scheme","YYYY-MM-DD"),g(w,"name","description"),g(w,"content",v=t[0].summary),g(j,"rel","preload"),g(j,"href","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/default.min.css"),g(j,"as","style"),g(j,"onload","this.onload=null;this.rel='stylesheet'"),g(T,"class","share svelte-1svctju"),g(P,"class","svelte-1svctju"),g(z,"class","summary svelte-1svctju"),g(M,"class","svelte-1svctju")},m(t,e){s.m(F.head),D(F.head,a),D(F.head,c),D(F.head,w),D(F.head,j),r(t,x,e),r(t,M,e),D(M,P),D(P,H),D(P,N),D(P,T),d(Q,T,null),D(M,q),D(M,z),D(z,R),D(M,U),d(X,M,null),r(t,_,e),d(Z,t,e),B=!0},p(t,[s]){(!B||1&s)&&e!==(e=t[0].title)&&(F.title=e),(!B||1&s&&y!==(y=O(t[0].date)))&&g(c,"content",y),(!B||1&s&&v!==(v=t[0].summary))&&g(w,"content",v),(!B||1&s)&&V!==(V=t[0].title+"")&&I(H,V);const a={};1&s&&(a.title=t[0].title),1&s&&(a.keywords=t[0].keywords),1&s&&(a.text=t[0].summary),1&s&&(a.url=K(t[0].slug,t[0].lang)),Q.$set(a),(!B||1&s)&&W!==(W=t[0].summary+"")&&I(R,W);const n={};1&s&&(n.post=t[0]),X.$set(n);const r={};10&s&&(r.$$scope={dirty:s,ctx:t}),Z.$set(r)},i(t){B||(i(Q.$$.fragment,t),i(X.$$.fragment,t),i(Z.$$.fragment,t),B=!0)},o(t){l(Q.$$.fragment,t),l(X.$$.fragment,t),l(Z.$$.fragment,t),B=!1},d(t){o(a),t&&s.d(),o(c),o(w),o(j),t&&o(x),t&&o(M),m(Q),m(X),t&&o(_),m(Z,t)}}}async function X({params:t}){const[e,s]=t.slug,a=await this.fetch(`${H(e,s)}.json`),n=await a.json(),{entry:r,html:i}=n;if(200===a.status){if(s)return{post:new z(r),html:i};this.redirect(302,H(e,r.lang))}else this.error(a.status,n.message);return!1}function Z(t,e,s){M(async()=>{[...document.querySelectorAll('a[href^="#"]')].map(t=>t.href=document.location+new URL(t.href).hash)});let{post:a}=e,{html:n}=e,r=a.jsonLdScript;return t.$set=(t=>{"post"in t&&s(0,a=t.post),"html"in t&&s(1,n=t.html)}),[a,n,r]}export default class extends e{constructor(t){super(),s(this,t,Z,Q,a,{post:0,html:1})}}export{X as preload};
