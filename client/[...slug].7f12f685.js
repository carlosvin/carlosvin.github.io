import{O as t,S as e,i as s,s as a,a as n,l as r,t as i,n as l,f as o,P as h,c,h as u,m as d,o as m,e as p,d as f,v as g,j as $,z as y,A as w,B as v,C as j,G as x,b as L,u as k,q as S,g as E,w as b,k as z,x as A,Q as N,R as D,H as P}from"./client.6cb15d57.js";import{p as M,u as H}from"./url.92adabca.js";import{t as I,a as K,D as O}from"./Details.33754f41.js";import{j as T}from"./html.14495991.js";const Y=["date","title","slug","lang"];class q{constructor(e,s){const{title:a,doctitle:n,summary:r,description:i,slug:l,keywords:o,lang:h,date:c,updated:u,modified:d,previewimage:m,author:p,otherLangs:f}=e;this.title=a||n,this.lang=h,this.summary=r||i,this.slug=l||I(s.split(".")[0]),this.keywords=q.buildKeywords(o),this.filename=s,this.modified=u||d||c,this.date=c||u||d,this.author=p||t,this.previewimage=m||"icons/icon-192x192.png",this.otherLangs=f,this.validate()}static buildKeywords(t){return"string"==typeof t?t.split(",").map(t=>t.trim()):t}get path(){return M(this.slug,this.lang)}get url(){return H(this.slug,this.lang)}get jsonLd(){return{"@context":"https://schema.org","@type":"Article",mainEntityOfPage:{"@type":"Webpage","@id":"https://google.com/article"},headline:this.title,alternativeHeadline:this.summary,description:this.summary,image:this.previewimage,datePublished:this.date,dateModified:this.modified,keywords:this.keywords,author:{"@type":"Person",name:this.author},publisher:this.author}}get jsonLdScript(){return T(JSON.stringify(this.jsonLd))}validate(){Y.forEach(t=>this._validate(t))}_validate(t){if(!this[t])throw`[${this.path}] Invalid post data: [${t}] field required`}}function R(t){return t.substring(0,10)}function B(t){let e,s;return e=new h({props:{href:`https://twitter.com/intent/tweet?url=${t[2]}&text=${t[0]}: ${t[1]}&hashtags=${t[3].join(",")}`,title:`Share "${t[0]}"`,icon:"twitter"}}),{c(){c(e.$$.fragment)},l(t){u(e.$$.fragment,t)},m(t,a){d(e,t,a),s=!0},p(t,s){const a={};15&s&&(a.href=`https://twitter.com/intent/tweet?url=${t[2]}&text=${t[0]}: ${t[1]}&hashtags=${t[3].join(",")}`),1&s&&(a.title=`Share "${t[0]}"`),e.$set(a)},i(t){s||(i(e.$$.fragment,t),s=!0)},o(t){l(e.$$.fragment,t),s=!1},d(t){m(e,t)}}}function U(t){let e,s,a;return{c(){e=p("button"),this.h()},l(t){e=f(t,"BUTTON",{title:!0,class:!0}),g(e).forEach(o),this.h()},h(){$(e,"title",t[0]),$(e,"class","svelte-1aekmf3")},m(n,i){r(n,e,i),s||(a=y(e,"click",t[5]),s=!0)},p(t,s){1&s&&$(e,"title",t[0])},i:w,o:w,d(t){t&&o(e),s=!1,a()}}}function _(t){let e,s,a,h;const c=[U,B],u=[];return e=function(t,e){return t[4]?0:1}(t),s=u[e]=c[e](t),{c(){s.c(),a=n()},l(t){s.l(t),a=n()},m(t,s){u[e].m(t,s),r(t,a,s),h=!0},p(t,[e]){s.p(t,e)},i(t){h||(i(s),h=!0)},o(t){l(s),h=!1},d(t){u[e].d(t),t&&o(a)}}}function C(t,e,s){let{title:a}=e,{text:n}=e,{url:r}=e,{keywords:i=[]}=e;const l="undefined"!=typeof navigator&&navigator.share;return t.$set=t=>{"title"in t&&s(0,a=t.title),"text"in t&&s(1,n=t.text),"url"in t&&s(2,r=t.url),"keywords"in t&&s(3,i=t.keywords)},[a,n,r,i,l,async function(){try{await navigator.share({title:a,text:n+K(i),url:r})}catch(t){console.error("Sharing",t)}}]}class G extends e{constructor(t){super(),s(this,t,C,_,a,{title:0,text:1,url:2,keywords:3})}}function J(t){let e,s;const a=t[1].default,n=v(a,t,t[0],null);return{c(){e=p("div"),n&&n.c(),this.h()},l(t){e=f(t,"DIV",{class:!0});var s=g(e);n&&n.l(s),s.forEach(o),this.h()},h(){$(e,"class","content svelte-1yzd9zi")},m(t,a){r(t,e,a),n&&n.m(e,null),s=!0},p(t,[e]){n&&n.p&&1&e&&j(n,a,t,t[0],e,null,null)},i(t){s||(i(n,t),s=!0)},o(t){l(n,t),s=!1},d(t){t&&o(e),n&&n.d(t)}}}function Q(t,e,s){let{$$slots:a={},$$scope:n}=e;return t.$set=t=>{"$$scope"in t&&s(0,n=t.$$scope)},[n,a]}class V extends e{constructor(t){super(),s(this,t,Q,J,a,{})}}const{document:W}=D;function F(t,e,s){const a=t.slice();return a[3]=e[s],a}function X(t){let e,s=t[0].otherLangs,a=[];for(let e=0;e<s.length;e+=1)a[e]=Z(F(t,s,e));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=n()},l(t){for(let e=0;e<a.length;e+=1)a[e].l(t);e=n()},m(t,s){for(let e=0;e<a.length;e+=1)a[e].m(t,s);r(t,e,s)},p(t,n){if(1&n){let r;for(s=t[0].otherLangs,r=0;r<s.length;r+=1){const i=F(t,s,r);a[r]?a[r].p(i,n):(a[r]=Z(i),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}},d(t){x(a,t),t&&o(e)}}}function Z(t){let e,s,a;return{c(){e=p("link"),this.h()},l(t){e=f(t,"LINK",{rel:!0,hreflang:!0,href:!0}),this.h()},h(){$(e,"rel","alternate"),$(e,"hreflang",s=t[3]),$(e,"href",a=M(t[0].slug,t[3]))},m(t,s){r(t,e,s)},p(t,n){1&n&&s!==(s=t[3])&&$(e,"hreflang",s),1&n&&a!==(a=M(t[0].slug,t[3]))&&$(e,"href",a)},d(t){t&&o(e)}}}function tt(t){let e,s;return{c(){s=n(),this.h()},l(t){s=n(),this.h()},h(){e=new P(s)},m(a,n){e.m(t[1],a,n),r(a,s,n)},p(t,s){2&s&&e.p(t[1])},d(t){t&&o(s),t&&e.d()}}}function et(t){let e,s,a,h,y,w,v,j,x,N,D,M,I,K,T,Y,q,B,U,_,C,J,Q,F=t[0].title+"",Z=t[0].summary+"";W.title=e=t[0].title;let et=t[0].otherLangs&&t[0].otherLangs.length>0&&X(t);return T=new G({props:{title:t[0].title,keywords:t[0].keywords,text:t[0].summary,url:H(t[0].slug,t[0].lang)}}),_=new O({props:{post:t[0]}}),J=new V({props:{$$slots:{default:[tt]},$$scope:{ctx:t}}}),{c(){a=n(),h=p("meta"),w=p("meta"),et&&et.c(),j=p("link"),x=L(),N=p("header"),D=p("h1"),M=k(F),I=L(),K=p("span"),c(T.$$.fragment),Y=L(),q=p("p"),B=k(Z),U=L(),c(_.$$.fragment),C=L(),c(J.$$.fragment),this.h()},l(t){const e=S('[data-svelte="svelte-ydbxer"]',W.head);a=n(),h=f(e,"META",{name:!0,content:!0,scheme:!0}),w=f(e,"META",{name:!0,content:!0}),et&&et.l(e),j=f(e,"LINK",{rel:!0,href:!0,as:!0,onload:!0}),e.forEach(o),x=E(t),N=f(t,"HEADER",{class:!0});var s=g(N);D=f(s,"H1",{class:!0});var r=g(D);M=b(r,F),I=E(r),K=f(r,"SPAN",{class:!0});var i=g(K);u(T.$$.fragment,i),i.forEach(o),r.forEach(o),Y=E(s),q=f(s,"P",{class:!0});var l=g(q);B=b(l,Z),l.forEach(o),U=E(s),u(_.$$.fragment,s),s.forEach(o),C=E(t),u(J.$$.fragment,t),this.h()},h(){s=new P(a),$(h,"name","date"),$(h,"content",y=R(t[0].date)),$(h,"scheme","YYYY-MM-DD"),$(w,"name","description"),$(w,"content",v=t[0].summary),$(j,"rel","preload"),$(j,"href","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css"),$(j,"as","style"),$(j,"onload","this.onload=null;this.rel='stylesheet'"),$(K,"class","share svelte-5fppzy"),$(D,"class","svelte-5fppzy"),$(q,"class","summary svelte-5fppzy"),$(N,"class","svelte-5fppzy")},m(e,n){s.m(t[2],W.head),z(W.head,a),z(W.head,h),z(W.head,w),et&&et.m(W.head,null),z(W.head,j),r(e,x,n),r(e,N,n),z(N,D),z(D,M),z(D,I),z(D,K),d(T,K,null),z(N,Y),z(N,q),z(q,B),z(N,U),d(_,N,null),r(e,C,n),d(J,e,n),Q=!0},p(t,[a]){(!Q||1&a)&&e!==(e=t[0].title)&&(W.title=e),(!Q||4&a)&&s.p(t[2]),(!Q||1&a&&y!==(y=R(t[0].date)))&&$(h,"content",y),(!Q||1&a&&v!==(v=t[0].summary))&&$(w,"content",v),t[0].otherLangs&&t[0].otherLangs.length>0?et?et.p(t,a):(et=X(t),et.c(),et.m(j.parentNode,j)):et&&(et.d(1),et=null),(!Q||1&a)&&F!==(F=t[0].title+"")&&A(M,F);const n={};1&a&&(n.title=t[0].title),1&a&&(n.keywords=t[0].keywords),1&a&&(n.text=t[0].summary),1&a&&(n.url=H(t[0].slug,t[0].lang)),T.$set(n),(!Q||1&a)&&Z!==(Z=t[0].summary+"")&&A(B,Z);const r={};1&a&&(r.post=t[0]),_.$set(r);const i={};66&a&&(i.$$scope={dirty:a,ctx:t}),J.$set(i)},i(t){Q||(i(T.$$.fragment,t),i(_.$$.fragment,t),i(J.$$.fragment,t),Q=!0)},o(t){l(T.$$.fragment,t),l(_.$$.fragment,t),l(J.$$.fragment,t),Q=!1},d(t){o(a),t&&s.d(),o(h),o(w),et&&et.d(t),o(j),t&&o(x),t&&o(N),m(T),m(_),t&&o(C),m(J,t)}}}async function st({params:t}){const[e,s]=t.slug,a=await this.fetch(M(e,s)+".json"),n=await a.json(),{entry:r,html:i}=n;if(200===a.status){if(s){const{jsonLdScript:t}=new q(r);return{html:i,post:r,jsonLdScript:t}}return this.redirect(301,M(e,r.lang))}return this.error(a.status,n.message)}function at(t,e,s){N(async()=>{[...document.querySelectorAll('a[href^="#"]')].map(t=>t.href=document.location+new URL(t.href).hash)});let{post:a}=e,{html:n}=e,{jsonLdScript:r}=e;return t.$set=t=>{"post"in t&&s(0,a=t.post),"html"in t&&s(1,n=t.html),"jsonLdScript"in t&&s(2,r=t.jsonLdScript)},[a,n,r]}export default class extends e{constructor(t){super(),s(this,t,at,et,a,{post:0,html:1,jsonLdScript:2})}}export{st as preload};
