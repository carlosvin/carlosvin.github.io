import{S as t,i as e,s,r as a,g as n,t as r,k as l,d as o,I as i,m as c,o as h,p as u,q as d,e as m,a as f,b as p,f as $,J as g,n as y,x as w,w as v,F as x,z as k,y as j,A as E,C as q,K as A,L as C}from"./client.549adeaf.js";import{p as L,u as M}from"./models.e2bea35f.js";import{g as S}from"./dates.deba47a4.js";function T(t,e=" "){return[...t.map(t=>`#${t}`)].join(e)}function b(t){let e;const s=new i({props:{href:`https://twitter.com/intent/tweet?url=${t[2]}&text=${t[0]}: ${t[1]}&hashtags=${t[3].join(",")}`,title:`Share "${t[0]}"`,icon:"twitter"}});return{c(){c(s.$$.fragment)},l(t){h(s.$$.fragment,t)},m(t,a){u(s,t,a),e=!0},p(t,e){const a={};15&e&&(a.href=`https://twitter.com/intent/tweet?url=${t[2]}&text=${t[0]}: ${t[1]}&hashtags=${t[3].join(",")}`),1&e&&(a.title=`Share "${t[0]}"`),s.$set(a)},i(t){e||(r(s.$$.fragment,t),e=!0)},o(t){l(s.$$.fragment,t),e=!1},d(t){d(s,t)}}}function N(t){let e,s;return{c(){e=m("button"),this.h()},l(t){e=f(t,"BUTTON",{title:!0,class:!0}),p(e).forEach(o),this.h()},h(){$(e,"title",t[0]),$(e,"class","svelte-1aekmf3")},m(a,r,l){n(a,e,r),l&&s(),s=g(e,"click",t[5])},p(t,s){1&s&&$(e,"title",t[0])},i:y,o:y,d(t){t&&o(e),s()}}}function D(t){let e,s,i,c;const h=[N,b],u=[];return e=function(t,e){return t[4]?0:1}(t),s=u[e]=h[e](t),{c(){s.c(),i=a()},l(t){s.l(t),i=a()},m(t,s){u[e].m(t,s),n(t,i,s),c=!0},p(t,[e]){s.p(t,e)},i(t){c||(r(s),c=!0)},o(t){l(s),c=!1},d(t){u[e].d(t),t&&o(i)}}}function H(t,e,s){let{title:a}=e,{text:n}=e,{url:r}=e,{keywords:l=[]}=e;const o="undefined"!=typeof navigator&&navigator.share;return t.$set=(t=>{"title"in t&&s(0,a=t.title),"text"in t&&s(1,n=t.text),"url"in t&&s(2,r=t.url),"keywords"in t&&s(3,l=t.keywords)}),[a,n,r,l,o,async function(){try{await navigator.share({title:a,text:n+T(l),url:r})}catch(t){console.error("Sharing",t)}}]}class I extends t{constructor(t){super(),e(this,t,H,D,s,{title:0,text:1,url:2,keywords:3})}}const{document:Y}=C;function K(t){let e,s;return{c(){e=m("link"),this.h()},l(t){e=f(t,"LINK",{rel:!0,href:!0}),this.h()},h(){$(e,"rel","canonical"),$(e,"href",s=L(t[0].slug,t[0].lang))},m(t,s){n(t,e,s)},p(t,a){1&a&&s!==(s=L(t[0].slug,t[0].lang))&&$(e,"href",s)},d(t){t&&o(e)}}}function P(t){let e,s,a,i,g,y,A,C,L,T,b,N,D,H,P,R,U,z,B=t[0].title+"",F=t[0].description+"",J=t[0].html+"";Y.title=e=t[0].title;let O=t[1]&&K(t);const V=new I({props:{title:t[0].title,keywords:t[0].keywords,text:t[0].description,url:M(t[0].slug,t[0].lang)}});return{c(){s=m("meta"),i=m("meta"),O&&O.c(),y=m("link"),A=w(),C=m("header"),L=m("h1"),T=v(B),b=w(),N=m("span"),c(V.$$.fragment),D=w(),H=m("p"),P=v(F),R=w(),U=m("div"),this.h()},l(t){const e=x('[data-svelte="svelte-1mp2x6k"]',Y.head);s=f(e,"META",{name:!0,content:!0,scheme:!0}),i=f(e,"META",{name:!0,content:!0}),O&&O.l(e),y=f(e,"LINK",{rel:!0,href:!0,as:!0,onload:!0}),e.forEach(o),A=k(t),C=f(t,"HEADER",{class:!0});var a=p(C);L=f(a,"H1",{class:!0});var n=p(L);T=j(n,B),b=k(n),N=f(n,"SPAN",{class:!0});var r=p(N);h(V.$$.fragment,r),r.forEach(o),n.forEach(o),D=k(a),H=f(a,"P",{class:!0});var l=p(H);P=j(l,F),l.forEach(o),a.forEach(o),R=k(t),U=f(t,"DIV",{class:!0}),p(U).forEach(o),this.h()},h(){$(s,"name","date"),$(s,"content",a=S(t[0].date)),$(s,"scheme","YYYY-MM-DD"),$(i,"name","description"),$(i,"content",g=t[0].summary),$(y,"rel","preload"),$(y,"href","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/vs.min.css"),$(y,"as","style"),$(y,"onload","this.onload=null;this.rel='stylesheet'"),$(N,"class","share svelte-102solq"),$(L,"class","svelte-102solq"),$(H,"class","description svelte-102solq"),$(C,"class","svelte-102solq"),$(U,"class","content svelte-102solq")},m(t,e){E(Y.head,s),E(Y.head,i),O&&O.m(Y.head,null),E(Y.head,y),n(t,A,e),n(t,C,e),E(C,L),E(L,T),E(L,b),E(L,N),u(V,N,null),E(C,D),E(C,H),E(H,P),n(t,R,e),n(t,U,e),U.innerHTML=J,z=!0},p(t,[n]){(!z||1&n)&&e!==(e=t[0].title)&&(Y.title=e),(!z||1&n&&a!==(a=S(t[0].date)))&&$(s,"content",a),(!z||1&n&&g!==(g=t[0].summary))&&$(i,"content",g),t[1]?O?O.p(t,n):((O=K(t)).c(),O.m(y.parentNode,y)):O&&(O.d(1),O=null),(!z||1&n)&&B!==(B=t[0].title+"")&&q(T,B);const r={};1&n&&(r.title=t[0].title),1&n&&(r.keywords=t[0].keywords),1&n&&(r.text=t[0].description),1&n&&(r.url=M(t[0].slug,t[0].lang)),V.$set(r),(!z||1&n)&&F!==(F=t[0].description+"")&&q(P,F),(!z||1&n)&&J!==(J=t[0].html+"")&&(U.innerHTML=J)},i(t){z||(r(V.$$.fragment,t),z=!0)},o(t){l(V.$$.fragment,t),z=!1},d(t){o(s),o(i),O&&O.d(t),o(y),t&&o(A),t&&o(C),d(V),t&&o(R),t&&o(U)}}}async function R({params:t,query:e}){const[s,a]=t.slug,n=await this.fetch(L(s,a)+".json"),r=await n.json();return 200===n.status?{post:r}:301===n.status?{post:r,isCanonical:!0}:void this.error(n.status,r.message)}function U(t,e,s){A(async()=>{[...document.querySelectorAll('a[href^="#"]')].map(t=>t.href=document.location+new URL(t.href).hash)});let{post:a}=e,{isCanonical:n=!1}=e;return t.$set=(t=>{"post"in t&&s(0,a=t.post),"isCanonical"in t&&s(1,n=t.isCanonical)}),[a,n]}export default class extends t{constructor(t){super(),e(this,t,U,P,s,{post:0,isCanonical:1})}}export{R as preload};
