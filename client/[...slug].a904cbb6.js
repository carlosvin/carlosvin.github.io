import{S as t,i as s,s as e,m as a,g as n,t as r,k as l,d as o,J as c,z as i,A as h,D as u,E as m,e as $,a as f,b as d,f as p,K as g,n as y,c as v,h as w,j as x,u as j,p as k,x as E,v as b,q as D,r as A,w as S,L as M,M as N,N as T}from"./client.b911b13f.js";import{p as Y,u as q}from"./url.edb332cb.js";import{t as L,D as z}from"./Details.4bd1cc64.js";import{g as H}from"./dates.deba47a4.js";function I(t){let s;const e=new c({props:{href:`https://twitter.com/intent/tweet?url=${t[2]}&text=${t[0]}: ${t[1]}&hashtags=${t[3].join(",")}`,title:`Share "${t[0]}"`,icon:"twitter"}});return{c(){i(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,a){u(e,t,a),s=!0},p(t,s){const a={};15&s&&(a.href=`https://twitter.com/intent/tweet?url=${t[2]}&text=${t[0]}: ${t[1]}&hashtags=${t[3].join(",")}`),1&s&&(a.title=`Share "${t[0]}"`),e.$set(a)},i(t){s||(r(e.$$.fragment,t),s=!0)},o(t){l(e.$$.fragment,t),s=!1},d(t){m(e,t)}}}function K(t){let s,e;return{c(){s=$("button"),this.h()},l(t){s=f(t,"BUTTON",{title:!0,class:!0}),d(s).forEach(o),this.h()},h(){p(s,"title",t[0]),p(s,"class","svelte-1aekmf3")},m(a,r,l){n(a,s,r),l&&e(),e=g(s,"click",t[5])},p(t,e){1&e&&p(s,"title",t[0])},i:y,o:y,d(t){t&&o(s),e()}}}function P(t){let s,e,c,i;const h=[K,I],u=[];return s=function(t,s){return t[4]?0:1}(t),e=u[s]=h[s](t),{c(){e.c(),c=a()},l(t){e.l(t),c=a()},m(t,e){u[s].m(t,e),n(t,c,e),i=!0},p(t,[s]){e.p(t,s)},i(t){i||(r(e),i=!0)},o(t){l(e),i=!1},d(t){u[s].d(t),t&&o(c)}}}function R(t,s,e){let{title:a}=s,{text:n}=s,{url:r}=s,{keywords:l=[]}=s;const o="undefined"!=typeof navigator&&navigator.share;return t.$set=(t=>{"title"in t&&e(0,a=t.title),"text"in t&&e(1,n=t.text),"url"in t&&e(2,r=t.url),"keywords"in t&&e(3,l=t.keywords)}),[a,n,r,l,o,async function(){try{await navigator.share({title:a,text:n+L(l),url:r})}catch(t){console.error("Sharing",t)}}]}class U extends t{constructor(t){super(),s(this,t,R,P,e,{title:0,text:1,url:2,keywords:3})}}function B(t){let s,e;const a=t[1].default,c=v(a,t,t[0],null),i=c||{c:y,l:y,m:y,d:y};return{c(){s=$("div"),i&&i.c(),this.h()},l(t){s=f(t,"DIV",{class:!0});var e=d(s);i&&i.l(e),e.forEach(o),this.h()},h(){p(s,"class","content svelte-fa3uof")},m(t,a){n(t,s,a),i&&i.m(s,null),e=!0},p(t,[s]){c&&c.p&&1&s&&c.p(w(a,t,t[0],null),x(a,t[0],s,null))},i(t){e||(r(i,t),e=!0)},o(t){l(i,t),e=!1},d(t){t&&o(s),i&&i.d(t)}}}function J(t,s,e){let{$$slots:a={},$$scope:n}=s;return t.$set=(t=>{"$$scope"in t&&e(0,n=t.$$scope)}),[n,a]}class O extends t{constructor(t){super(),s(this,t,J,B,e,{})}}const{document:V}=N;function C(t){let s;return{c(){this.h()},l(t){this.h()},h(){s=new T(t[1],null)},m(t,e){s.m(t,e)},p(t,e){2&e&&s.p(t[1])},d(t){t&&s.d()}}}function F(t){let s,e,a,c,g,y,v,w,x,M,N,T,Y,L,I,K,P,R,B=t[0].title+"",J=t[0].summary+"";V.title=s=t[0].title;const F=new U({props:{title:t[0].title,keywords:t[0].keywords,text:t[0].summary,url:q(t[0].slug,t[0].lang)}}),G=new z({props:{post:t[0]}}),Q=new O({props:{$$slots:{default:[C]},$$scope:{ctx:t}}});return{c(){e=$("meta"),c=$("meta"),y=$("link"),v=j(),w=$("header"),x=$("h1"),M=k(B),N=j(),T=$("span"),i(F.$$.fragment),Y=j(),L=$("p"),I=k(J),K=j(),i(G.$$.fragment),P=j(),i(Q.$$.fragment),this.h()},l(t){const s=E('[data-svelte="svelte-sbarz4"]',V.head);e=f(s,"META",{name:!0,content:!0,scheme:!0}),c=f(s,"META",{name:!0,content:!0}),y=f(s,"LINK",{rel:!0,href:!0,as:!0,onload:!0}),s.forEach(o),v=b(t),w=f(t,"HEADER",{class:!0});var a=d(w);x=f(a,"H1",{class:!0});var n=d(x);M=D(n,B),N=b(n),T=f(n,"SPAN",{class:!0});var r=d(T);h(F.$$.fragment,r),r.forEach(o),n.forEach(o),Y=b(a),L=f(a,"P",{class:!0});var l=d(L);I=D(l,J),l.forEach(o),K=b(a),h(G.$$.fragment,a),a.forEach(o),P=b(t),h(Q.$$.fragment,t),this.h()},h(){p(e,"name","date"),p(e,"content",a=H(t[0].date)),p(e,"scheme","YYYY-MM-DD"),p(c,"name","description"),p(c,"content",g=t[0].summary),p(y,"rel","preload"),p(y,"href","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/vs.min.css"),p(y,"as","style"),p(y,"onload","this.onload=null;this.rel='stylesheet'"),p(T,"class","share svelte-1svctju"),p(x,"class","svelte-1svctju"),p(L,"class","summary svelte-1svctju"),p(w,"class","svelte-1svctju")},m(t,s){A(V.head,e),A(V.head,c),A(V.head,y),n(t,v,s),n(t,w,s),A(w,x),A(x,M),A(x,N),A(x,T),u(F,T,null),A(w,Y),A(w,L),A(L,I),A(w,K),u(G,w,null),n(t,P,s),u(Q,t,s),R=!0},p(t,[n]){(!R||1&n)&&s!==(s=t[0].title)&&(V.title=s),(!R||1&n&&a!==(a=H(t[0].date)))&&p(e,"content",a),(!R||1&n&&g!==(g=t[0].summary))&&p(c,"content",g),(!R||1&n)&&B!==(B=t[0].title+"")&&S(M,B);const r={};1&n&&(r.title=t[0].title),1&n&&(r.keywords=t[0].keywords),1&n&&(r.text=t[0].summary),1&n&&(r.url=q(t[0].slug,t[0].lang)),F.$set(r),(!R||1&n)&&J!==(J=t[0].summary+"")&&S(I,J);const l={};1&n&&(l.post=t[0]),G.$set(l);const o={};6&n&&(o.$$scope={dirty:n,ctx:t}),Q.$set(o)},i(t){R||(r(F.$$.fragment,t),r(G.$$.fragment,t),r(Q.$$.fragment,t),R=!0)},o(t){l(F.$$.fragment,t),l(G.$$.fragment,t),l(Q.$$.fragment,t),R=!1},d(t){o(e),o(c),o(y),t&&o(v),t&&o(w),m(F),m(G),t&&o(P),m(Q,t)}}}async function G({params:t,query:s}){const[e,a]=t.slug,n=await this.fetch(Y(e,a)+".json"),r=await n.json(),{entry:l,html:o}=r;if(200===n.status){if(a)return{post:l,html:o};this.redirect(302,Y(e,l.lang))}else this.error(n.status,r.message)}function Q(t,s,e){M(async()=>{[...document.querySelectorAll('a[href^="#"]')].map(t=>t.href=document.location+new URL(t.href).hash)});let{post:a}=s,{html:n}=s;return t.$set=(t=>{"post"in t&&e(0,a=t.post),"html"in t&&e(1,n=t.html)}),[a,n]}export default class extends t{constructor(t){super(),s(this,t,Q,F,e,{post:0,html:1})}}export{G as preload};
