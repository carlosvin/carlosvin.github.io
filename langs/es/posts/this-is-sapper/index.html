<!doctype html>
<html lang="es">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../../../favicon.png" />
		<script src="https://cdn.jsdelivr.net/npm/@statsig/js-client@1/build/statsig-js-client+session-replay+web-analytics.min.js?apikey=client-HFdLXhoqeAqLJGsEO0FuGCieE2nSFNxpPp2ziw3ZPYK"></script>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="/app.css" />
		
		<link href="../../../../_app/immutable/assets/2.D6-wnWlq.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/IconLink.DCDy1KOq.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/Social.BuJ-IkEK.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/8.BrJEuWPS.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/Details.CFCg3rNQ.css" rel="stylesheet">
		<link rel="modulepreload" href="../../../../_app/immutable/entry/start.BY3CMCe4.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/entry.CoXDGBRA.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/runtime.B6RPaHn-.js">
		<link rel="modulepreload" href="../../../../_app/immutable/entry/app.DYIRw7IZ.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/render.D3Fqu4WM.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/svelte-head.DIKBRFqu.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/disclose-version.CC-duLav.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/3.BSPqVS-c.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/props.PCEjw1P-.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/0.B8I90xuT.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/misc.miZ5XAUJ.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/2.DwQmd_1B.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/lifecycle.DkULVVTe.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/attributes.BBFwatIg.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/IconLink.BzKk1u2O.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/Social.Bk_NS1wS.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/8.Bha5KSvC.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/url.BRZsJGrD.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/Details.BxKKAt3G.js"><!--[--><meta name="date.created" content="2020-08-28T00:00:00.000Z"> <meta name="date.updated" content="2020-08-28T00:00:00.000Z"> <meta name="description" content="Este blog ha sido migrado desde Nikola a Sapper. En este artículo describiré las principales razones, resultados de pruebas de rendimiento y otras reflexiones sobre la utilización de Sapper y Svelte para generar sitios web estáticos."> <!--[--><!--[--><link rel="alternate" hreflang="en" href="/langs/en/posts/this-is-sapper"><!--]--><!--]--> <!----><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"Webpage","@id":"https://google.com/article"},"headline":"This is Sapper!","alternativeHeadline":"Este blog ha sido migrado desde Nikola a Sapper. En este artículo describiré las principales razones, resultados de pruebas de rendimiento y otras reflexiones sobre la utilización de Sapper y Svelte para generar sitios web estáticos.","description":"Este blog ha sido migrado desde Nikola a Sapper. En este artículo describiré las principales razones, resultados de pruebas de rendimiento y otras reflexiones sobre la utilización de Sapper y Svelte para generar sitios web estáticos.","image":"https://sapper.svelte.dev/sapper-logo-horizontal.svg","datePublished":"2020-08-28T00:00:00.000Z","dateModified":"2020-08-28T00:00:00.000Z","keywords":["Sapper","Svelte","JAMStack","PWA","Static Site Generator"],"author":{"@type":"Person","name":"Carlos"},"publisher":{"@type":"Person","name":"Carlos"}}</script><!----><!--]--><title>This is Sapper!</title>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><!----><!--[--><!----><nav class="svelte-1kqmhwi"><ul class="svelte-1kqmhwi"><li class="svelte-1rykg79"><a aria-current="page" href="/langs/es/posts" rel="prefetch" class="svelte-1rykg79"><!----><img class="logo svelte-1kqmhwi" src="/favicon.png" alt="Carlos dice bla bla logo"><!----></a></li><!----></ul> <ul class="closed svelte-1kqmhwi"><li class="svelte-1rykg79"><a aria-current="page" href="/langs/es/posts" rel="prefetch" class="svelte-1rykg79"><!----><span class="siteName">Carlos dice bla bla</span><!----></a></li><!----> <li class="svelte-1rykg79"><a href="/langs/es/categories" rel="prefetch" class="svelte-1rykg79"><!----><!---->Categorías<!----></a></li><!----> <li class="svelte-1rykg79"><a href="/langs/es/about" rel="prefetch" class="svelte-1rykg79"><!----><!---->Sobre mi<!----></a></li><!----></ul> <!--[--><!----><div class="h svelte-geb0ta"><!----><a href="/langs/es/feed.xml" target="_blank" class="icon rss svelte-blgowr" title="Suscríbete al feed Carlos dice bla bla" rel="noopener" aria-label="Suscríbete al feed Carlos dice bla bla"><!----><!----></a><!----> <a href="https://github.com/carlosvin" target="_blank" class="icon github svelte-blgowr" title="Find me at github" rel="noopener" aria-label="Find me at github"><!----><!----></a><!----> <a href="https://stackoverflow.com/users/1421059/carlosvin" target="_blank" class="icon stackoverflow svelte-blgowr" title="Find me at stackoverflow" rel="noopener" aria-label="Find me at stackoverflow"><!----><!----></a><!----></div><!----><!--]--> <button type="button" class="svelte-1kqmhwi">≡</button></nav><!----> <main class="svelte-7ld3yf"><!----><!----><header class="svelte-1ikjkmw"><h1 class="svelte-1ikjkmw">This is Sapper! <span class="share svelte-1ikjkmw"><!--[!--><a href="https://twitter.com/intent/tweet?url=/langs/es/posts/this-is-sapper&amp;text=This is Sapper!:&amp;nbsp;Este blog ha sido migrado desde Nikola a Sapper. En este artículo describiré las principales razones, resultados de pruebas de rendimiento y otras reflexiones sobre la utilización de Sapper y Svelte para generar sitios web estáticos.&amp;hashtags=Sapper,Svelte,JAMStack,PWA,Static Site Generator" target="_blank" class="icon twitter svelte-blgowr" title="Share &quot;This is Sapper!&quot;" rel="noopener" aria-label="Share &quot;This is Sapper!&quot;"><!----><!----></a><!--]--><!----></span></h1> <p class="summary svelte-1ikjkmw">Este blog ha sido migrado desde Nikola a Sapper. En este artículo describiré las principales razones, resultados de pruebas de rendimiento y otras reflexiones sobre la utilización de Sapper y Svelte para generar sitios web estáticos.</p> <div class="subtitle svelte-9uod0d"><span class="date">8/28/2020</span> <span class="langs"><!--[--><ul class="otherLangs svelte-1numgf3"><!--[--><!--[--><li class="svelte-1numgf3"><a rel="alternate" hreflang="en" href="/langs/en/posts/this-is-sapper" title="Check the post in other language: en">en</a></li><!--]--><!--]--></ul><!--]--><!----></span> <!--[--><span class="tags svelte-wqh6y7"><!--[--><a href="/langs/es/categories/sapper" title="Sapper" class="svelte-1g7d2s3">Sapper</a><a href="/langs/es/categories/svelte" title="Svelte" class="svelte-1g7d2s3">Svelte</a><a href="/langs/es/categories/jamstack" title="JAMStack" class="svelte-1g7d2s3">JAMStack</a><a href="/langs/es/categories/pwa" title="PWA" class="svelte-1g7d2s3">PWA</a><a href="/langs/es/categories/static-site-generator" title="Static Site Generator" class="svelte-1g7d2s3">Static Site Generator</a><!--]--></span><!--]--><!----></div><!----></header> <div class="postContent"><!----><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_por_qué_dejar_nikola">Por qué dejar Nikola?</a></li>
<li><a href="#_por_qué_sapper">Por qué Sapper?</a>
<ul class="sectlevel2">
<li><a href="#_dx_developer_experience">DX: Developer experience</a></li>
<li><a href="#_ux_la_experiencia_de_usuario_con_sapper">UX: La experiencia de usuario con Sapper</a></li>
</ul>
</li>
<li><a href="#_asciidoctor">Asciidoctor</a>
<ul class="sectlevel2">
<li><a href="#_rollup_plugin_asciidoc_al_rescate">rollup-plugin-asciidoc al rescate</a></li>
<li><a href="#_rollup_plugin_glob_al_rescate">rollup-plugin-glob al rescate</a></li>
</ul>
</li>
<li><a href="#_resaltado_de_sintáxis_para_el_código_fuente">Resaltado de sintáxis para el código fuente</a></li>
<li><a href="#_resultado">Resultado</a></li>
<li><a href="#_pruebas">Pruebas</a>
<ul class="sectlevel2">
<li><a href="#_escribiendo_una_prueba">Escribiendo una prueba</a></li>
</ul>
</li>
<li><a href="#_typescript">Typescript</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>He migrado el stack the tecnologías utilizado en mi blog de <a href="https://getnikola.com" target="_blank" rel="noopener">Nikola</a> + <a href="https://en.wikipedia.org/wiki/ReStructuredText" target="_blank" rel="noopener">reStructuredText</a> a <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a> + <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_por_qué_dejar_nikola">Por qué dejar <a href="https://getnikola.com" target="_blank" rel="noopener">Nikola</a>?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Este blog ha sido generado por <a href="https://getnikola.com" target="_blank" rel="noopener">Nikola</a> desde 2014, cuando el término <a href="https://jamstack.org" target="_blank" rel="noopener">JAMStack</a> ni existía. Funcionó muy bien estos años y tiene todas las características que necesitaba por defecto:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Soporte multi-idioma.</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/ReStructuredText" target="_blank" rel="noopener">reStructuredText</a>, el cual prefiero sobre <a href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="noopener">Markdown</a>.</p>
</li>
<li>
<p>Está desarrollado en <a href="https://python.org" target="_blank" rel="noopener">Python</a>, uno de mis lenguajes de programación preferidos.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Pero tuve algunos <strong>problemillas</strong> que me molestaban desde el principio:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>El fichero de configuración estaba un poco hinchado y era algo confuso.</p>
</li>
<li>
<p>No era fácil para mí crear, modificar on encontrar templates que me convenciesen.</p>
</li>
<li>
<p>El rendimiento del sitio era algo mediocre, el último informe que generé con <a href="https://developers.google.com/web/tools/lighthouse" target="_blank" rel="noopener">Lighthouse audits</a> era alrededor de 80, excepto por la sección SEO que era 96.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_por_qué_sapper">Por qué Sapper?</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dx_developer_experience">DX: Developer experience</h3>
<div class="paragraph">
<p>Ya había utilizado <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a> para crear algunas pequeñas <a href="https://web.dev/progressive-web-apps" target="_blank" rel="noopener">PWA</a>s <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>, aquí puedes encontrar 2 ejemplos que desarrollé con <a href="https://svelte.dev" target="_blank" rel="noopener">Svelte</a> y <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="https://currency-loss.netlify.app" target="_blank" rel="noopener">Currency Exchage Loss Calculator</a></dt>
<dd>
<p>Una aplicación útil para viajeros que utilizan casas de cambio. Dependiendo en el cambio que ofrezcan en ese momento y la cantidad de dinero que quieras cambiar, te muestra la cantidad de dinero que estás perdiendo en esta transacción de cambio.</p>
</dd>
<dt class="hdlist1"><a href="https://covid-stats-pwa.netlify.app" target="_blank" rel="noopener">COVID-19 Stats</a></dt>
<dd>
<p>Muestra estadísticas actualizadas sobre el COVID-19 por país y por fecha.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Durante la creación de estas <a href="https://web.dev/progressive-web-apps" target="_blank" rel="noopener">PWA</a>s, la experiencia de desarrollo con <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a>&amp;<a href="https://svelte.dev" target="_blank" rel="noopener">Svelte</a> ha sido bastante impresionante.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ux_la_experiencia_de_usuario_con_sapper">UX: La experiencia de usuario con Sapper</h3>
<div class="paragraph">
<p>Últimament me he encontrado con algunos blogs utilizando <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a> como el propio blog de <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a>, <a href="https://www.codingwithjesse.com/blog/statically-generating-a-blog-with-svelte-sapper/" target="_blank" rel="noopener">Coding with Jessie</a> or <a href="https://www.swyx.io/writing/svelte-static/" target="_blank" rel="noopener">swyx.io</a>. La experiencia de usuario me ha parecido similar a Gatsby, quizá algo más ligeros y más originales.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a> está inspirado en <a href="https://nextjs.org/">Next.js</a>, aquí puedes encontrar <a href="https://sapper.svelte.dev/docs#Comparison_with_Next_js">una comparación con este conocido framework</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asciidoctor"><a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>No tengo una preferencia clara sobre <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> o <a href="https://en.wikipedia.org/wiki/ReStructuredText" target="_blank" rel="noopener">reStructuredText</a>, estoy cómo con ambos, pero hay más soporte para  <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> en otros lenguajes de programación como <a href="https://en.wikipedia.org/wiki/JavaScript" target="_blank" rel="noopener">JavaScript</a>. Así que, básicamente he cambiado a <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> prque no encontré una librería <a href="https://en.wikipedia.org/wiki/JavaScript" target="_blank" rel="noopener">JavaScript</a> que convirtiese correctamente <a href="https://en.wikipedia.org/wiki/ReStructuredText" target="_blank" rel="noopener">reStructuredText</a> a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a>.</p>
</div>
<div class="paragraph">
<p>El principal problema de no utilizar <a href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="noopener">Markdown</a> fue la falta de plugins de <a href="https://rollupjs.org" target="_blank" rel="noopener">Rollup</a> para convertir <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a>, así que creé uno, <a href="https://github.com/carlosvin/rollup-plugin-asciidoc" target="_blank" rel="noopener">rollup-plugin-asciidoc</a>. La implementación fue muy sencilla, el plugin simplemente utiliza la librería <a href="https://asciidoctor.org/docs/asciidoctor.js/" target="_blank" rel="noopener">Asciidoctor.js</a> para convertir un texto de entrada en formato <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a>.</p>
</div>
<div class="sect2">
<h3 id="_rollup_plugin_asciidoc_al_rescate"><a href="https://github.com/carlosvin/rollup-plugin-asciidoc" target="_blank" rel="noopener">rollup-plugin-asciidoc</a> al rescate</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Con <a href="https://github.com/carlosvin/rollup-plugin-asciidoc" target="_blank" rel="noopener">rollup-plugin-asciidoc</a> podemos importar <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> archivos de nuestro blog y <a href="https://rollupjs.org" target="_blank" rel="noopener">Rollup</a> los convertirá a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_ejemplo">Ejemplo</h4>
<div class="listingblock">
<div class="title">a-blog-post.adoc</div>
<div class="content">
<pre class="highlight"><code class="language-adoc" data-lang="adoc"><span class="hljs-section">= Post title</span>
<span class="hljs-meta">:date:</span> 2019-11-11

Such a post!</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Con <a href="https://github.com/carlosvin/rollup-plugin-asciidoc" target="_blank" rel="noopener">rollup-plugin-asciidoc</a> podemos importar archivos <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> uno por uno.</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="hljs-keyword">import</span> doc <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./a-blog-post.adoc&#x27;</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doc);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Salida</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">{
  <span class="hljs-attr">meta</span>: {
    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Post title&quot;</span>,
    <span class="hljs-attr">date</span>: <span class="hljs-string">&quot;2019-11-11&quot;</span>
  },
  <span class="hljs-attr">html</span>: <span class="hljs-string">&quot;&lt;p&gt;Such a post!&lt;/p&gt;&quot;</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pero importar ficheros uno por uno no es útil para un blog donde tenemos muchos archivos, los cuales no queremos importart manualmente uno por uno.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rollup_plugin_glob_al_rescate"><a href="https://www.npmjs.com/package/rollup-plugin-glob" target="_blank" rel="noopener">rollup-plugin-glob</a> al rescate</h3>
<div class="paragraph">
<p>Con <a href="https://www.npmjs.com/package/rollup-plugin-glob" target="_blank" rel="noopener">rollup-plugin-glob</a> podemos importar todos los ficheros que estén en un directorio por extensión, esto significa que ya tenemos todos los posts de nuestro blog convertidos a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a> en un par de líneas de código.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="hljs-keyword">import</span> allAdoc <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../posts/**/*.adoc&#x27;</span>;

allAdoc.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">post</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(post));</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output: List of posts already converted to HTML</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">{ <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Post title&quot;</span>, <span class="hljs-attr">date</span>: <span class="hljs-string">&quot;2019-11-11&quot;</span> },
  <span class="hljs-attr">html</span>: <span class="hljs-string">&quot;&lt;p&gt;Post 1.&lt;/p&gt;&quot;</span>
}
{ <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Post title&quot;</span>, <span class="hljs-attr">date</span>: <span class="hljs-string">&quot;2020-02-22&quot;</span> },
  <span class="hljs-attr">html</span>: <span class="hljs-string">&quot;&lt;h2&gt;Title post&lt;/h2&gt;&lt;p&gt;This is a sample post...&lt;/p&gt;&quot;</span>
}
<span class="hljs-comment">// ...</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resaltado_de_sintáxis_para_el_código_fuente">Resaltado de sintáxis para el código fuente</h2>
<div class="sectionbody">
<div class="paragraph">
<p>El tema principal de mi blog es la Ingeniería del Software, así que el resaltado de sintáxis es uno de los requisitos más importantes que un generador de sitios web estáticos debe cumplir.</p>
</div>
<div class="paragraph">
<p>Al principio utilicé <a href="https://highlightjs.org/usage/" target="_blank" rel="noopener">la librería highlightjs desde un CDN</a>, que consiste en importar un fichero javascript para analizar el código fuente y un fichero CSS para aplicar el resaltado.</p>
</div>
<div class="paragraph">
<p>Más tarde me dí cuenta, de que el trabajo de análisis del código fuente lo podemos hacer tiempo de compilación, cuando convertimos <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a> en la implementación del <a href="https://github.com/carlosvin/rollup-plugin-asciidoc" target="_blank" rel="noopener">rollup-plugin-asciidoc</a>, de esta forma el usuario no tendrá que descargar el fichero <a href="https://en.wikipedia.org/wiki/JavaScript" target="_blank" rel="noopener">JavaScript</a> ni procesar el código fuente en su navegador.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Haciendo el resaltado de sintáxis mientra construimos el sitio web, mejoramos el rendimiento del blog y reducimos los datos que el usuario tiene que descargar.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La generación del resaltado de sintáxis en la construcción del sitio web tiene 2 grandes beneficios:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reducir el tamaño del sitio web: no necesitamos descargar los 27KB del fichero <a href="https://highlightjs.org/usage/">highlightjs javascript library</a>.</p>
</li>
<li>
<p>Mejora de rendimiento: el análisis del código fuente se hace solo una vez, mientras se construye el sitio web.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resultado">Resultado</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Todavía hay <a href="https://github.com/carlosvin/carlosvin.github.io/issues">algunos problemas o mejoras que hacer=_blank</a>, pero hasta ahora tenemos un blog con las siguientes características:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Generación automática de <a href="/sitemap.xml">Sitemap</a> and <a href="/langs/en/feed.xml">Atom feeds</a>.</p>
</li>
<li>
<p>Soporte multi-idioma (todavía faltan muchas traducciones).</p>
</li>
<li>
<p>Resaltado de código.</p>
</li>
<li>
<p>Puntuación de 100 en <a href="https://developers.google.com/web/tools/lighthouse" target="_blank" rel="noopener">Lighthouse audits</a>, aunque todavía hay algunas páginas con menos de 100.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts/lighthouse-results.webp" alt="lighthouse score" width="95%">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pruebas">Pruebas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Soy un ferviente defensor de las pruebas automáticas, no me gusta escribirlas, pero creo que es la mejor forma de saber que todo funciona como se espera.</p>
</div>
<div class="paragraph">
<p>El template de <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a> trae preconfigurado un test de integración muy simple. Utiliza <a href="https://www.cypress.io/" target="_blank" rel="noopener">Cypress</a>, un framework de pruebas E2E <sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>, más sencillo que <a href="https://www.selenium.dev/" target="_blank" rel="noopener">Selenium</a>, aunque creo que todavía no podemos hablar de <a href="https://blog.logrocket.com/cypress-io-the-selenium-killer/" target="_blank" rel="noopener">the Selenium Killer</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
En muchos casos no puede reemplazar a <a href="https://www.selenium.dev/" target="_blank" rel="noopener">Selenium</a>: La principal razón es que <a href="https://www.cypress.io/" target="_blank" rel="noopener">Cypress</a> por diseño no tiene algunas funcionalidades que podrías necesitar, depende del proyecto, como por ejemplo soporte para pruebas en casi cualquier navegador y plataforma, como el proporcionado por <a href="https://www.selenium.dev/documentation/en/grid/components_of_a_grid/" target="_blank" rel="noopener">Selenium grid</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>He añadido algunas pruebas para este blog (y añadiré más), como verificar que la información del header es correcta, que funcionan las redirecciones, que los principales flujos de navegación funcionan&#8230;&#8203; Todo ello en un par de horas, incluyendo correcciones de errores encontrados. Por esto me encanta escribir pruebas con <a href="https://www.cypress.io/" target="_blank" rel="noopener">Cypress</a>, por su productividad.</p>
</div>
<div class="sect2">
<h3 id="_escribiendo_una_prueba">Escribiendo una prueba</h3>
<div class="paragraph">
<p>Funciona de forma similar a Selenium:
. Abre una página.
. Accede a un elemento utilizando <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/id" target="_blank" rel="noopener">HTML identifier</a> (<code>#element-id</code>), <a href="https://en.wikipedia.org/wiki/XPath" target="_blank" rel="noopener">XPath</a> (<code>/a[@title='link title']</code>) or <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors" target="_blank" rel="noopener">CSS selector</a> (<code>div &gt; a.cssClass</code>).
. Interactuar con el elemento seleccionado.
. Validar que todo se comporta de forma esperada.</p>
</div>
<div class="paragraph">
<p>Puedes encontrar ejemplos de pruebas en la carpeta <a href="https://github.com/carlosvin/carlosvin.github.io/tree/site/cypress/integration">cypress/integration</a>.</p>
</div>
<div class="listingblock">
<div class="title">Ejemplo simple</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;Header&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  cy.<span class="hljs-title function_">visit</span>(<span class="hljs-string">&#x27;/posts/this-is-sapper/en&#x27;</span>) <b class="conum">(1)</b>
  cy.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;.subtitle .date&#x27;</span>).<span class="hljs-title function_">contains</span>(<span class="hljs-string">&#x27;28/08/2020&#x27;</span>) <b class="conum">(2)</b>
});</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Navega al path de un post.</p>
</li>
<li>
<p>Comprueba que la fecha que aparece en el subtítulo es correcta.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_typescript">Typescript</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Finalmente <a href="https://svelte.dev/blog/svelte-and-typescript">el soporte de Svelte para Typescript está terminado</a> y después de más trabajo del esperado, he migrado <a href="https://github.com/carlosvin/carlosvin.github.io">este blog utlizando Sapper con Javascript a Sapper con Typescript</a>.
Te animo a que utilices este proyecto como ejemplo o template para tu blog, si encuentras algún problema, el feedback es bienvenido. Hay todavía <a href="https://github.com/carlosvin/carlosvin.github.io/issues">algunos problemas</a>, como averiguar que si utilizar <a href="https://eslint.org/" target="_blank" rel="noopener">eslint</a> o <a href="https://github.com/sveltejs/language-tools" target="_blank" rel="noopener">svelte-check</a> o ambos.</p>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Progressive Web Application
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. End to end
</div>
</div><!----> <div class="comments"><script src="https://utteranc.es/client.js" repo="carlosvin/carlosvin.github.io" issue-term="title" label="comment" theme="github-light" crossorigin="anonymous" async>
	</script></div><!----></div><!----><!----><!----></main><!----><!--]--><!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_1bomfbz = {
						base: new URL("../../../..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [null,{"type":"data","data":{path:"/langs/es/posts/this-is-sapper/",lang:"es",translations:{lang:"es",author:"Carlos Martin Sanchez",siteName:"Carlos dice bla bla",siteDescription:"Qué está pasando por mi cabeza y alrededores",categories:"categorías",Categories:"Categorías",RecentPosts:"Últimas entradas",NoPosts:"No hay entradas",SubscribeTo:"Suscríbete al feed",AboutMe:"Sobre mi",AllPosts:"Todas las entradas"}},"uses":{"params":["lang"],"url":1},"slash":"always"},{"type":"data","data":{html:"\u003Cdiv id=\"toc\" class=\"toc\">\n\u003Cdiv id=\"toctitle\">Table of Contents\u003C/div>\n\u003Cul class=\"sectlevel1\">\n\u003Cli>\u003Ca href=\"#_por_qué_dejar_nikola\">Por qué dejar Nikola?\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_por_qué_sapper\">Por qué Sapper?\u003C/a>\n\u003Cul class=\"sectlevel2\">\n\u003Cli>\u003Ca href=\"#_dx_developer_experience\">DX: Developer experience\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_ux_la_experiencia_de_usuario_con_sapper\">UX: La experiencia de usuario con Sapper\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\u003Ca href=\"#_asciidoctor\">Asciidoctor\u003C/a>\n\u003Cul class=\"sectlevel2\">\n\u003Cli>\u003Ca href=\"#_rollup_plugin_asciidoc_al_rescate\">rollup-plugin-asciidoc al rescate\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_rollup_plugin_glob_al_rescate\">rollup-plugin-glob al rescate\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\u003Ca href=\"#_resaltado_de_sintáxis_para_el_código_fuente\">Resaltado de sintáxis para el código fuente\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_resultado\">Resultado\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_pruebas\">Pruebas\u003C/a>\n\u003Cul class=\"sectlevel2\">\n\u003Cli>\u003Ca href=\"#_escribiendo_una_prueba\">Escribiendo una prueba\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\u003Ca href=\"#_typescript\">Typescript\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003Cdiv id=\"preamble\">\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>He migrado el stack the tecnologías utilizado en mi blog de \u003Ca href=\"https://getnikola.com\" target=\"_blank\" rel=\"noopener\">Nikola\u003C/a> + \u003Ca href=\"https://en.wikipedia.org/wiki/ReStructuredText\" target=\"_blank\" rel=\"noopener\">reStructuredText\u003C/a> a \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a> + \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a>.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_por_qué_dejar_nikola\">Por qué dejar \u003Ca href=\"https://getnikola.com\" target=\"_blank\" rel=\"noopener\">Nikola\u003C/a>?\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Este blog ha sido generado por \u003Ca href=\"https://getnikola.com\" target=\"_blank\" rel=\"noopener\">Nikola\u003C/a> desde 2014, cuando el término \u003Ca href=\"https://jamstack.org\" target=\"_blank\" rel=\"noopener\">JAMStack\u003C/a> ni existía. Funcionó muy bien estos años y tiene todas las características que necesitaba por defecto:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>Soporte multi-idioma.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://en.wikipedia.org/wiki/ReStructuredText\" target=\"_blank\" rel=\"noopener\">reStructuredText\u003C/a>, el cual prefiero sobre \u003Ca href=\"https://en.wikipedia.org/wiki/Markdown\" target=\"_blank\" rel=\"noopener\">Markdown\u003C/a>.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Está desarrollado en \u003Ca href=\"https://python.org\" target=\"_blank\" rel=\"noopener\">Python\u003C/a>, uno de mis lenguajes de programación preferidos.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Pero tuve algunos \u003Cstrong>problemillas\u003C/strong> que me molestaban desde el principio:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>El fichero de configuración estaba un poco hinchado y era algo confuso.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>No era fácil para mí crear, modificar on encontrar templates que me convenciesen.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>El rendimiento del sitio era algo mediocre, el último informe que generé con \u003Ca href=\"https://developers.google.com/web/tools/lighthouse\" target=\"_blank\" rel=\"noopener\">Lighthouse audits\u003C/a> era alrededor de 80, excepto por la sección SEO que era 96.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_por_qué_sapper\">Por qué Sapper?\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_dx_developer_experience\">DX: Developer experience\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Ya había utilizado \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a> para crear algunas pequeñas \u003Ca href=\"https://web.dev/progressive-web-apps\" target=\"_blank\" rel=\"noopener\">PWA\u003C/a>s \u003Csup class=\"footnote\">[\u003Ca id=\"_footnoteref_1\" class=\"footnote\" href=\"#_footnotedef_1\" title=\"View footnote.\">1\u003C/a>]\u003C/sup>, aquí puedes encontrar 2 ejemplos que desarrollé con \u003Ca href=\"https://svelte.dev\" target=\"_blank\" rel=\"noopener\">Svelte\u003C/a> y \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a>:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"dlist\">\n\u003Cdl>\n\u003Cdt class=\"hdlist1\">\u003Ca href=\"https://currency-loss.netlify.app\" target=\"_blank\" rel=\"noopener\">Currency Exchage Loss Calculator\u003C/a>\u003C/dt>\n\u003Cdd>\n\u003Cp>Una aplicación útil para viajeros que utilizan casas de cambio. Dependiendo en el cambio que ofrezcan en ese momento y la cantidad de dinero que quieras cambiar, te muestra la cantidad de dinero que estás perdiendo en esta transacción de cambio.\u003C/p>\n\u003C/dd>\n\u003Cdt class=\"hdlist1\">\u003Ca href=\"https://covid-stats-pwa.netlify.app\" target=\"_blank\" rel=\"noopener\">COVID-19 Stats\u003C/a>\u003C/dt>\n\u003Cdd>\n\u003Cp>Muestra estadísticas actualizadas sobre el COVID-19 por país y por fecha.\u003C/p>\n\u003C/dd>\n\u003C/dl>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Durante la creación de estas \u003Ca href=\"https://web.dev/progressive-web-apps\" target=\"_blank\" rel=\"noopener\">PWA\u003C/a>s, la experiencia de desarrollo con \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a>&amp;\u003Ca href=\"https://svelte.dev\" target=\"_blank\" rel=\"noopener\">Svelte\u003C/a> ha sido bastante impresionante.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_ux_la_experiencia_de_usuario_con_sapper\">UX: La experiencia de usuario con Sapper\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Últimament me he encontrado con algunos blogs utilizando \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a> como el propio blog de \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a>, \u003Ca href=\"https://www.codingwithjesse.com/blog/statically-generating-a-blog-with-svelte-sapper/\" target=\"_blank\" rel=\"noopener\">Coding with Jessie\u003C/a> or \u003Ca href=\"https://www.swyx.io/writing/svelte-static/\" target=\"_blank\" rel=\"noopener\">swyx.io\u003C/a>. La experiencia de usuario me ha parecido similar a Gatsby, quizá algo más ligeros y más originales.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"admonitionblock note\">\n\u003Ctable>\n\u003Ctr>\n\u003Ctd class=\"icon\">\n\u003Cdiv class=\"title\">Note\u003C/div>\n\u003C/td>\n\u003Ctd class=\"content\">\n\u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a> está inspirado en \u003Ca href=\"https://nextjs.org/\">Next.js\u003C/a>, aquí puedes encontrar \u003Ca href=\"https://sapper.svelte.dev/docs#Comparison_with_Next_js\">una comparación con este conocido framework\u003C/a>.\n\u003C/td>\n\u003C/tr>\n\u003C/table>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_asciidoctor\">\u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a>\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>No tengo una preferencia clara sobre \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> o \u003Ca href=\"https://en.wikipedia.org/wiki/ReStructuredText\" target=\"_blank\" rel=\"noopener\">reStructuredText\u003C/a>, estoy cómo con ambos, pero hay más soporte para  \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> en otros lenguajes de programación como \u003Ca href=\"https://en.wikipedia.org/wiki/JavaScript\" target=\"_blank\" rel=\"noopener\">JavaScript\u003C/a>. Así que, básicamente he cambiado a \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> prque no encontré una librería \u003Ca href=\"https://en.wikipedia.org/wiki/JavaScript\" target=\"_blank\" rel=\"noopener\">JavaScript\u003C/a> que convirtiese correctamente \u003Ca href=\"https://en.wikipedia.org/wiki/ReStructuredText\" target=\"_blank\" rel=\"noopener\">reStructuredText\u003C/a> a \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>El principal problema de no utilizar \u003Ca href=\"https://en.wikipedia.org/wiki/Markdown\" target=\"_blank\" rel=\"noopener\">Markdown\u003C/a> fue la falta de plugins de \u003Ca href=\"https://rollupjs.org\" target=\"_blank\" rel=\"noopener\">Rollup\u003C/a> para convertir \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> a \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a>, así que creé uno, \u003Ca href=\"https://github.com/carlosvin/rollup-plugin-asciidoc\" target=\"_blank\" rel=\"noopener\">rollup-plugin-asciidoc\u003C/a>. La implementación fue muy sencilla, el plugin simplemente utiliza la librería \u003Ca href=\"https://asciidoctor.org/docs/asciidoctor.js/\" target=\"_blank\" rel=\"noopener\">Asciidoctor.js\u003C/a> para convertir un texto de entrada en formato \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> a \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_rollup_plugin_asciidoc_al_rescate\">\u003Ca href=\"https://github.com/carlosvin/rollup-plugin-asciidoc\" target=\"_blank\" rel=\"noopener\">rollup-plugin-asciidoc\u003C/a> al rescate\u003C/h3>\n\u003Cdiv class=\"admonitionblock tip\">\n\u003Ctable>\n\u003Ctr>\n\u003Ctd class=\"icon\">\n\u003Cdiv class=\"title\">Tip\u003C/div>\n\u003C/td>\n\u003Ctd class=\"content\">\nCon \u003Ca href=\"https://github.com/carlosvin/rollup-plugin-asciidoc\" target=\"_blank\" rel=\"noopener\">rollup-plugin-asciidoc\u003C/a> podemos importar \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> archivos de nuestro blog y \u003Ca href=\"https://rollupjs.org\" target=\"_blank\" rel=\"noopener\">Rollup\u003C/a> los convertirá a \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a>.\n\u003C/td>\n\u003C/tr>\n\u003C/table>\n\u003C/div>\n\u003Cdiv class=\"sect3\">\n\u003Ch4 id=\"_ejemplo\">Ejemplo\u003C/h4>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">a-blog-post.adoc\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-adoc\" data-lang=\"adoc\">\u003Cspan class=\"hljs-section\">= Post title\u003C/span>\n\u003Cspan class=\"hljs-meta\">:date:\u003C/span> 2019-11-11\n\nSuch a post!\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">Con \u003Ca href=\"https://github.com/carlosvin/rollup-plugin-asciidoc\" target=\"_blank\" rel=\"noopener\">rollup-plugin-asciidoc\u003C/a> podemos importar archivos \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> uno por uno.\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-javascript\" data-lang=\"javascript\">\u003Cspan class=\"hljs-keyword\">import\u003C/span> doc \u003Cspan class=\"hljs-keyword\">from\u003C/span> \u003Cspan class=\"hljs-string\">&#x27;./a-blog-post.adoc&#x27;\u003C/span>;\n\n\u003Cspan class=\"hljs-variable language_\">console\u003C/span>.\u003Cspan class=\"hljs-title function_\">log\u003C/span>(doc);\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">Salida\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-javascript\" data-lang=\"javascript\">{\n  \u003Cspan class=\"hljs-attr\">meta\u003C/span>: {\n    \u003Cspan class=\"hljs-attr\">title\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Post title&quot;\u003C/span>,\n    \u003Cspan class=\"hljs-attr\">date\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;2019-11-11&quot;\u003C/span>\n  },\n  \u003Cspan class=\"hljs-attr\">html\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;&lt;p&gt;Such a post!&lt;/p&gt;&quot;\u003C/span>\n}\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Pero importar ficheros uno por uno no es útil para un blog donde tenemos muchos archivos, los cuales no queremos importart manualmente uno por uno.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_rollup_plugin_glob_al_rescate\">\u003Ca href=\"https://www.npmjs.com/package/rollup-plugin-glob\" target=\"_blank\" rel=\"noopener\">rollup-plugin-glob\u003C/a> al rescate\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Con \u003Ca href=\"https://www.npmjs.com/package/rollup-plugin-glob\" target=\"_blank\" rel=\"noopener\">rollup-plugin-glob\u003C/a> podemos importar todos los ficheros que estén en un directorio por extensión, esto significa que ya tenemos todos los posts de nuestro blog convertidos a \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a> en un par de líneas de código.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-javascript\" data-lang=\"javascript\">\u003Cspan class=\"hljs-keyword\">import\u003C/span> allAdoc \u003Cspan class=\"hljs-keyword\">from\u003C/span> \u003Cspan class=\"hljs-string\">&#x27;../posts/**/*.adoc&#x27;\u003C/span>;\n\nallAdoc.\u003Cspan class=\"hljs-title function_\">forEach\u003C/span>(\u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-params\">post\u003C/span> =&gt;\u003C/span> \u003Cspan class=\"hljs-variable language_\">console\u003C/span>.\u003Cspan class=\"hljs-title function_\">log\u003C/span>(post));\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">Output: List of posts already converted to HTML\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-javascript\" data-lang=\"javascript\">{ \u003Cspan class=\"hljs-attr\">meta\u003C/span>: { \u003Cspan class=\"hljs-attr\">title\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Post title&quot;\u003C/span>, \u003Cspan class=\"hljs-attr\">date\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;2019-11-11&quot;\u003C/span> },\n  \u003Cspan class=\"hljs-attr\">html\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;&lt;p&gt;Post 1.&lt;/p&gt;&quot;\u003C/span>\n}\n{ \u003Cspan class=\"hljs-attr\">meta\u003C/span>: { \u003Cspan class=\"hljs-attr\">title\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Post title&quot;\u003C/span>, \u003Cspan class=\"hljs-attr\">date\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;2020-02-22&quot;\u003C/span> },\n  \u003Cspan class=\"hljs-attr\">html\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;&lt;h2&gt;Title post&lt;/h2&gt;&lt;p&gt;This is a sample post...&lt;/p&gt;&quot;\u003C/span>\n}\n\u003Cspan class=\"hljs-comment\">// ...\u003C/span>\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_resaltado_de_sintáxis_para_el_código_fuente\">Resaltado de sintáxis para el código fuente\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>El tema principal de mi blog es la Ingeniería del Software, así que el resaltado de sintáxis es uno de los requisitos más importantes que un generador de sitios web estáticos debe cumplir.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Al principio utilicé \u003Ca href=\"https://highlightjs.org/usage/\" target=\"_blank\" rel=\"noopener\">la librería highlightjs desde un CDN\u003C/a>, que consiste en importar un fichero javascript para analizar el código fuente y un fichero CSS para aplicar el resaltado.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Más tarde me dí cuenta, de que el trabajo de análisis del código fuente lo podemos hacer tiempo de compilación, cuando convertimos \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> a \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a> en la implementación del \u003Ca href=\"https://github.com/carlosvin/rollup-plugin-asciidoc\" target=\"_blank\" rel=\"noopener\">rollup-plugin-asciidoc\u003C/a>, de esta forma el usuario no tendrá que descargar el fichero \u003Ca href=\"https://en.wikipedia.org/wiki/JavaScript\" target=\"_blank\" rel=\"noopener\">JavaScript\u003C/a> ni procesar el código fuente en su navegador.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"admonitionblock tip\">\n\u003Ctable>\n\u003Ctr>\n\u003Ctd class=\"icon\">\n\u003Cdiv class=\"title\">Tip\u003C/div>\n\u003C/td>\n\u003Ctd class=\"content\">\nHaciendo el resaltado de sintáxis mientra construimos el sitio web, mejoramos el rendimiento del blog y reducimos los datos que el usuario tiene que descargar.\n\u003C/td>\n\u003C/tr>\n\u003C/table>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>La generación del resaltado de sintáxis en la construcción del sitio web tiene 2 grandes beneficios:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>Reducir el tamaño del sitio web: no necesitamos descargar los 27KB del fichero \u003Ca href=\"https://highlightjs.org/usage/\">highlightjs javascript library\u003C/a>.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Mejora de rendimiento: el análisis del código fuente se hace solo una vez, mientras se construye el sitio web.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_resultado\">Resultado\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Todavía hay \u003Ca href=\"https://github.com/carlosvin/carlosvin.github.io/issues\">algunos problemas o mejoras que hacer=_blank\u003C/a>, pero hasta ahora tenemos un blog con las siguientes características:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>Generación automática de \u003Ca href=\"/sitemap.xml\">Sitemap\u003C/a> and \u003Ca href=\"/langs/en/feed.xml\">Atom feeds\u003C/a>.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Soporte multi-idioma (todavía faltan muchas traducciones).\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Resaltado de código.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Puntuación de 100 en \u003Ca href=\"https://developers.google.com/web/tools/lighthouse\" target=\"_blank\" rel=\"noopener\">Lighthouse audits\u003C/a>, aunque todavía hay algunas páginas con menos de 100.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003Cdiv class=\"imageblock\">\n\u003Cdiv class=\"content\">\n\u003Cimg src=\"/posts/lighthouse-results.webp\" alt=\"lighthouse score\" width=\"95%\">\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_pruebas\">Pruebas\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Soy un ferviente defensor de las pruebas automáticas, no me gusta escribirlas, pero creo que es la mejor forma de saber que todo funciona como se espera.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>El template de \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a> trae preconfigurado un test de integración muy simple. Utiliza \u003Ca href=\"https://www.cypress.io/\" target=\"_blank\" rel=\"noopener\">Cypress\u003C/a>, un framework de pruebas E2E \u003Csup class=\"footnote\">[\u003Ca id=\"_footnoteref_2\" class=\"footnote\" href=\"#_footnotedef_2\" title=\"View footnote.\">2\u003C/a>]\u003C/sup>, más sencillo que \u003Ca href=\"https://www.selenium.dev/\" target=\"_blank\" rel=\"noopener\">Selenium\u003C/a>, aunque creo que todavía no podemos hablar de \u003Ca href=\"https://blog.logrocket.com/cypress-io-the-selenium-killer/\" target=\"_blank\" rel=\"noopener\">the Selenium Killer\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"admonitionblock note\">\n\u003Ctable>\n\u003Ctr>\n\u003Ctd class=\"icon\">\n\u003Cdiv class=\"title\">Note\u003C/div>\n\u003C/td>\n\u003Ctd class=\"content\">\nEn muchos casos no puede reemplazar a \u003Ca href=\"https://www.selenium.dev/\" target=\"_blank\" rel=\"noopener\">Selenium\u003C/a>: La principal razón es que \u003Ca href=\"https://www.cypress.io/\" target=\"_blank\" rel=\"noopener\">Cypress\u003C/a> por diseño no tiene algunas funcionalidades que podrías necesitar, depende del proyecto, como por ejemplo soporte para pruebas en casi cualquier navegador y plataforma, como el proporcionado por \u003Ca href=\"https://www.selenium.dev/documentation/en/grid/components_of_a_grid/\" target=\"_blank\" rel=\"noopener\">Selenium grid\u003C/a>.\n\u003C/td>\n\u003C/tr>\n\u003C/table>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>He añadido algunas pruebas para este blog (y añadiré más), como verificar que la información del header es correcta, que funcionan las redirecciones, que los principales flujos de navegación funcionan&#8230;&#8203; Todo ello en un par de horas, incluyendo correcciones de errores encontrados. Por esto me encanta escribir pruebas con \u003Ca href=\"https://www.cypress.io/\" target=\"_blank\" rel=\"noopener\">Cypress\u003C/a>, por su productividad.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_escribiendo_una_prueba\">Escribiendo una prueba\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Funciona de forma similar a Selenium:\n. Abre una página.\n. Accede a un elemento utilizando \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/id\" target=\"_blank\" rel=\"noopener\">HTML identifier\u003C/a> (\u003Ccode>#element-id\u003C/code>), \u003Ca href=\"https://en.wikipedia.org/wiki/XPath\" target=\"_blank\" rel=\"noopener\">XPath\u003C/a> (\u003Ccode>/a[@title='link title']\u003C/code>) or \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors\" target=\"_blank\" rel=\"noopener\">CSS selector\u003C/a> (\u003Ccode>div &gt; a.cssClass\u003C/code>).\n. Interactuar con el elemento seleccionado.\n. Validar que todo se comporta de forma esperada.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Puedes encontrar ejemplos de pruebas en la carpeta \u003Ca href=\"https://github.com/carlosvin/carlosvin.github.io/tree/site/cypress/integration\">cypress/integration\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">Ejemplo simple\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-javascript\" data-lang=\"javascript\">\u003Cspan class=\"hljs-title function_\">it\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;Header&#x27;\u003C/span>, \u003Cspan class=\"hljs-function\">() =&gt;\u003C/span> {\n  cy.\u003Cspan class=\"hljs-title function_\">visit\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;/posts/this-is-sapper/en&#x27;\u003C/span>) \u003Cb class=\"conum\">(1)\u003C/b>\n  cy.\u003Cspan class=\"hljs-title function_\">get\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;.subtitle .date&#x27;\u003C/span>).\u003Cspan class=\"hljs-title function_\">contains\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;28/08/2020&#x27;\u003C/span>) \u003Cb class=\"conum\">(2)\u003C/b>\n});\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"colist arabic\">\n\u003Col>\n\u003Cli>\n\u003Cp>Navega al path de un post.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Comprueba que la fecha que aparece en el subtítulo es correcta.\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_typescript\">Typescript\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Finalmente \u003Ca href=\"https://svelte.dev/blog/svelte-and-typescript\">el soporte de Svelte para Typescript está terminado\u003C/a> y después de más trabajo del esperado, he migrado \u003Ca href=\"https://github.com/carlosvin/carlosvin.github.io\">este blog utlizando Sapper con Javascript a Sapper con Typescript\u003C/a>.\nTe animo a que utilices este proyecto como ejemplo o template para tu blog, si encuentras algún problema, el feedback es bienvenido. Hay todavía \u003Ca href=\"https://github.com/carlosvin/carlosvin.github.io/issues\">algunos problemas\u003C/a>, como averiguar que si utilizar \u003Ca href=\"https://eslint.org/\" target=\"_blank\" rel=\"noopener\">eslint\u003C/a> o \u003Ca href=\"https://github.com/sveltejs/language-tools\" target=\"_blank\" rel=\"noopener\">svelte-check\u003C/a> o ambos.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv id=\"footnotes\">\n\u003Chr>\n\u003Cdiv class=\"footnote\" id=\"_footnotedef_1\">\n\u003Ca href=\"#_footnoteref_1\">1\u003C/a>. Progressive Web Application\n\u003C/div>\n\u003Cdiv class=\"footnote\" id=\"_footnotedef_2\">\n\u003Ca href=\"#_footnoteref_2\">2\u003C/a>. End to end\n\u003C/div>\n\u003C/div>",props:{title:"This is Sapper!",lang:"es",summary:"Este blog ha sido migrado desde Nikola a Sapper. En este artículo describiré las principales razones, resultados de pruebas de rendimiento y otras reflexiones sobre la utilización de Sapper y Svelte para generar sitios web estáticos.",slug:"this-is-sapper",keywords:["Sapper","Svelte","JAMStack","PWA","Static Site Generator"],filepath:"/static/posts/this-is-sapper.es.adoc",dirpath:"/static/posts",created:1598572800000,modified:1598572800000,otherLangs:["en"],author:"Carlos",previewimage:"https://sapper.svelte.dev/sapper-logo-horizontal.svg",path:"/langs/es/posts/this-is-sapper"},jsonLd:"\u003Cscript type=\"application/ld+json\">{\"@context\":\"https://schema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"Webpage\",\"@id\":\"https://google.com/article\"},\"headline\":\"This is Sapper!\",\"alternativeHeadline\":\"Este blog ha sido migrado desde Nikola a Sapper. En este artículo describiré las principales razones, resultados de pruebas de rendimiento y otras reflexiones sobre la utilización de Sapper y Svelte para generar sitios web estáticos.\",\"description\":\"Este blog ha sido migrado desde Nikola a Sapper. En este artículo describiré las principales razones, resultados de pruebas de rendimiento y otras reflexiones sobre la utilización de Sapper y Svelte para generar sitios web estáticos.\",\"image\":\"https://sapper.svelte.dev/sapper-logo-horizontal.svg\",\"datePublished\":\"2020-08-28T00:00:00.000Z\",\"dateModified\":\"2020-08-28T00:00:00.000Z\",\"keywords\":[\"Sapper\",\"Svelte\",\"JAMStack\",\"PWA\",\"Static Site Generator\"],\"author\":{\"@type\":\"Person\",\"name\":\"Carlos\"},\"publisher\":{\"@type\":\"Person\",\"name\":\"Carlos\"}}\u003C/script>"},"uses":{"params":["slug","lang"]}}];

					Promise.all([
						import("../../../../_app/immutable/entry/start.BY3CMCe4.js"),
						import("../../../../_app/immutable/entry/app.DYIRw7IZ.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 8],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
