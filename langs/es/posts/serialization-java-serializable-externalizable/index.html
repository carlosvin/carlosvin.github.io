<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Distintas formas de serialización en Java: Comparación de rendimiento</title><!-- HTML_TAG_START -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-1328360-10', 'auto');
	</script>
	<!-- HTML_TAG_END --><meta name="date.created" content="2014-05-13T15:00:00.000Z" data-svelte="svelte-1lps7vh"><meta name="date.updated" content="2014-05-13T15:00:00.000Z" data-svelte="svelte-1lps7vh"><meta name="description" content="Comparación de rendimientos entre distintas formas de serialización en Java" data-svelte="svelte-1lps7vh"><link rel="alternate" hreflang="en" href="/langs/en/posts/serialization-java-serializable-externalizable" data-svelte="svelte-1lps7vh"><link rel="alternate" href="/langs/es/posts/serialization-java-serializable-externalizable.ld.json" type="application/ld+json" data-svelte="svelte-1lps7vh">

		

		<link rel="modulepreload" href="/./_app/start-3c405898.js">
		<link rel="modulepreload" href="/./_app/chunks/vendor-06504bf4.js">
		<link rel="modulepreload" href="/./_app/chunks/singletons-12a22614.js">
		<link rel="modulepreload" href="/./_app/pages/__layout.svelte-3a65bae6.js">
		<link rel="modulepreload" href="/./_app/chunks/lang-272c19da.js">
		<link rel="modulepreload" href="/./_app/chunks/conf-318ca8e3.js">
		<link rel="modulepreload" href="/./_app/chunks/Social-e93430b9.js">
		<link rel="modulepreload" href="/./_app/chunks/IconLink-72099c32.js">
		<link rel="modulepreload" href="/./_app/pages/langs/[lang]/posts/[slug].svelte-4c2931e8.js">
		<link rel="modulepreload" href="/./_app/chunks/url-28a36952.js">
		<link rel="modulepreload" href="/./_app/chunks/Details-16d9cd28.js">
		<link rel="stylesheet" href="/./_app/assets/start-a8cd1609.css">
		<link rel="stylesheet" href="/./_app/assets/pages/__layout.svelte-371e20bd.css">
		<link rel="stylesheet" href="/./_app/assets/Social-cc5c0bed.css">
		<link rel="stylesheet" href="/./_app/assets/IconLink-5c07e51e.css">
		<link rel="stylesheet" href="/./_app/assets/pages/langs/[lang]/posts/[slug].svelte-88707559.css">
		<link rel="stylesheet" href="/./_app/assets/Details-e90b3cb2.css">

		<script type="module">
			import { start } from "/./_app/start-3c405898.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"","assets":"/."},
				session: {},
				host: location.host,
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/./_app/pages/__layout.svelte-3a65bae6.js"),
						import("/./_app/pages/langs/[lang]/posts/[slug].svelte-4c2931e8.js")
					],
					page: {
						host: location.host, // TODO this is redundant
						path: "/langs/es/posts/serialization-java-serializable-externalizable",
						query: new URLSearchParams(""),
						params: {"lang":"es","slug":"serialization-java-serializable-externalizable"}
					}
				}
			});
		</script>
	</head>
	<body>
		<div id="svelte">






<nav class="svelte-17lil9l"><ul class="svelte-17lil9l"><li class="svelte-1nihsj5"><a href="/langs/es" rel="prefetch" class="svelte-1nihsj5"><img class="logo svelte-17lil9l" src="/favicon.png" alt="Carlos dice bla bla logo"></a>
</li></ul>
	<ul class="closed svelte-17lil9l"><li class="svelte-1nihsj5"><a href="/langs/es" rel="prefetch" class="svelte-1nihsj5"><span class="siteName">Carlos dice bla bla</span></a>
</li>
<li class="svelte-1nihsj5"><a href="/langs/es/categories" rel="prefetch" class="svelte-1nihsj5">Categorías</a>
</li>
<li class="svelte-1nihsj5"><a href="/langs/es/about" rel="prefetch" class="svelte-1nihsj5">About</a>
</li></ul>
	<div class="h svelte-geb0ta"><a href="/langs/es/feed.xml" target="_blank" class="icon rss svelte-blgowr" title="Suscríbete a Carlos dice bla bla" rel="noopener" aria-label="Suscríbete a Carlos dice bla bla">
</a>
	<a href="https://github.com/carlosvin" target="_blank" class="icon github svelte-blgowr" title="Find me at github" rel="noopener" aria-label="Find me at github">
</a>
	<a href="https://twitter.com/carlosvin" target="_blank" class="icon twitter svelte-blgowr" title="Find me at twitter" rel="noopener" aria-label="Find me at twitter">
</a>
	<a href="https://stackoverflow.com/story/carlosvin" target="_blank" class="icon stackoverflow svelte-blgowr" title="Find me at stackoverflow" rel="noopener" aria-label="Find me at stackoverflow">
</a>
</div>
	<button type="button" class="svelte-17lil9l">≡</button>
</nav>

<main class="svelte-1m42syy">

<header class="svelte-1ikjkmw"><h1 class="svelte-1ikjkmw">Distintas formas de serialización en Java: Comparación de rendimiento
<span class="share svelte-1ikjkmw"><a href="https://twitter.com/intent/tweet?url=/langs/es/posts/serialization-java-serializable-externalizable&amp;text=Distintas formas de serialización en Java: Comparación de rendimiento:&amp;nbsp;Comparación de rendimientos entre distintas formas de serialización en Java&amp;hashtags=Java,Performance" target="_blank" class="icon twitter svelte-blgowr" title="Share &quot;Distintas formas de serialización en Java: Comparación de rendimiento&quot;" rel="noopener" aria-label="Share &quot;Distintas formas de serialización en Java: Comparación de rendimiento&quot;">
</a></span></h1>
	<p class="summary svelte-1ikjkmw">Comparación de rendimientos entre distintas formas de serialización en Java</p>
	<div class="subtitle svelte-1s3ascd"><span class="date">13/05/2014</span>
	<span class="tags svelte-ym0wdt"><a href="/langs/es/categories/java" title="Java" class="svelte-dagte2"><span class="hover svelte-1kmrl92">Java
</span>
</a><a href="/langs/es/categories/performance" title="Performance" class="svelte-dagte2"><span class="hover svelte-1kmrl92">Performance
</span>
</a></span>
</div></header>

<div class="postContent"><!-- HTML_TAG_START --><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_serializable">Serializable</a></li>
<li><a href="#_externalizable">Externalizable</a></li>
<li><a href="#_pruebas_de_rendimiento_serializable_vs_externalizable">Pruebas de Rendimiento (Serializable vs Externalizable)</a>
<ul class="sectlevel2">
<li><a href="#_implementando_el_interfaz_serializable">Implementando el interfaz Serializable</a></li>
<li><a href="#_utilizando_el_interfaz_externalizable_mal">Utilizando el interfaz Externalizable (mal)</a></li>
<li><a href="#_utilizando_el_interfaz_externalizable_correctamente">Utilizando el interfaz Externalizable (correctamente)</a></li>
<li><a href="#_analizando_los_resultados">Analizando los resultados</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Hace poco, he tenido que serializar/deserializar unos datos en <a href="https://www.java.com" target="_blank" rel="noopener">Java</a>, hacía mucho que no lo hacía en formato binario directamente (ultimamente he utilizado <a href="https://www.json.org" target="_blank" rel="noopener">JSON</a> o <a href="https://en.wikipedia.org/wiki/XML" target="_blank" rel="noopener">XML</a>). Recordaba haber serializado objetos implementando el interfaz <a href="https://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html" target="_blank" rel="noopener">Serializable</a>, pero había visto por Internet otra forma implementando el interfaz <a href="https://docs.oracle.com/javase/7/docs/api/java/io/Externalizable.html" target="_blank" rel="noopener">Externalizable</a>, ¿cuál interfaz utilizo? Pues depende lo que quieras y necesites, como todo.</p>
</div>
<div class="paragraph">
<p>Veamos cuándo utilizar <a href="#_serializable">Serializable</a> o <a href="#_externalizable">Externalizable</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_serializable">Serializable</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Cuando quieras escribir poco código, es la forma fácil.</p>
</li>
<li>
<p>Pero tiene algunas restricciones: El objeto a serializar debe implementar el constructor por defecto. Debe hacerse responsable de los atributos no accesibles de la clase padre.</p>
</li>
<li>
<p>Cuando no te importe mucho el rendimiento, como veremos en la sección <a href="#_pruebas_de_rendimiento_serializable_vs_externalizable">Pruebas de Rendimiento (Serializable vs Externalizable)</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_externalizable">Externalizable</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Vas a tener que implementar tú mismo los métodos de serialización.</p>
</li>
<li>
<p>Cuando no puedas utilizar <a href="#_serializable">Serializable</a>.</p>
</li>
<li>
<p>Cuando quieras obtener un mejor rendimiento, como veremos en la sección <a href="#_pruebas_de_rendimiento_serializable_vs_externalizable">Pruebas de Rendimiento (Serializable vs Externalizable)</a>.</p>
</li>
<li>
<p>Si tienes que encargarte de la serialización de los atributos de la clase padre, te recomiendo utilizar <a href="https://docs.oracle.com/javase/7/docs/api/java/io/Externalizable.html" target="_blank" rel="noopener">Externalizable</a>, porque evitamos una sobrescritura extraña de métodos privados.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeObject</span><span class="hljs-params">(ObjectOutputStream oos)</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">readObject</span><span class="hljs-params">(ObjectInputStream ois)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pruebas_de_rendimiento_serializable_vs_externalizable">Pruebas de Rendimiento (Serializable vs Externalizable)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>El interfaz <a href="#_serializable">Serializable</a> utilizando la introspección de <a href="https://www.java.com" target="_blank" rel="noopener">Java</a>, adivina los tipos de los atributos de las clases que va a serializar/deserializar, pero esta "magia" tiene una penalización en el rendimiento.</p>
</div>
<div class="paragraph">
<p>Al utilizar el interfaz <a href="#_externalizable">Externalizable</a> somos nosotros los que decidimos cómo serializar/deserializar los objetos, es decir, tenemos que escribir nosotros el código que hace esto. Hemos perdido comodidad, pero evitamos que <a href="https://www.java.com" target="_blank" rel="noopener">Java</a> haga algunas tareas y, si sobrescribimos correctamente los métodos del interfaz <a href="#_externalizable">Externalizable</a>, conseguiremos una mejora de rendimiento.</p>
</div>
<div class="paragraph">
<p>Para saber cuánto es la diferencia de rendimiento, he escrito un <a href="https://github.com/carlosvin/serializations-performance-java" target="_blank" rel="noopener">pequeño ejemplo en el que se serializa un objeto con dos colecciones con 100000 emails y 100000 teléfonos</a>. He contemplado 3 casos:</p>
</div>
<div class="sect2">
<h3 id="_implementando_el_interfaz_serializable">Implementando el interfaz Serializable</h3>
<div class="paragraph">
<p>Como dijimos más arriba, cuando implementamos el interfaz <a href="https://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html" target="_blank" rel="noopener">Serializable</a>, <a href="https://www.java.com" target="_blank" rel="noopener">Java</a> tiene que adivinar ciertas cosas, en este proceso sacrifica algo de rendimiento (es el que más tarda), a cambio ĺo único que tenemos que hacer es que nuestra clase implemente el interfaz <a href="https://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html" target="_blank" rel="noopener">Serializable</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Contacts</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>{
  <span class="hljs-comment">// ...</span>
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>1133 milisegundos en serializar</p>
</li>
<li>
<p>506 milisegundos en deserializar</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_utilizando_el_interfaz_externalizable_mal">Utilizando el interfaz Externalizable (mal)</h3>
<div class="paragraph">
<p>En este caso somos nosotros los encargados de "decir" a <a href="https://www.java.com" target="_blank" rel="noopener">Java</a> cómo debe serializar/deserializar, pero debemos ser cuidadosos, de lo contrario podemos quedarnos con lo peor de los dos mundos, por ejemplo: Si simplemente serializamos/deserializamos los atributos de la clase, y estos son atributos complejos (como colecciones), <a href="https://www.java.com" target="_blank" rel="noopener">Java</a> también tiene que adivinar bastantes cosas y también sacrificamos algo de rendimiento y además hemos tenido que escribir más código.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">readExternal</span><span class="hljs-params">(ObjectInput in)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException </span>{
  setEmails((Set&lt;String&gt;) in.readObject());
  setPhones((Set&lt;String&gt;) in.readObject());
}

<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeExternal</span><span class="hljs-params">(ObjectOutput out)</span> <span class="hljs-keyword">throws</span> IOException </span>{
  out.writeObject(emails);
  out.writeObject(phones);
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>737 milisegundos en serializar</p>
</li>
<li>
<p>367 milisegundos en deserializar</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_utilizando_el_interfaz_externalizable_correctamente">Utilizando el interfaz Externalizable (correctamente)</h3>
<div class="paragraph">
<p>Si serializamos/deserializamos uno por uno los elementos de las colecciones, ahorramos aún más tiempo, porque <a href="https://www.java.com" target="_blank" rel="noopener">Java</a> está serializando tipos más simples (en este caso java.lang.String).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">readExternal</span><span class="hljs-params">(ObjectInput in)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException </span>{
  emails.clear();
  phones.clear();
  <span class="hljs-keyword">int</span> nEmails = in.readInt();
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nEmails; i++) {
    emails.add(in.readUTF());
  }
  <span class="hljs-keyword">int</span> nPhones = in.readInt();
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nPhones; i++) {
    phones.add(in.readUTF());
  }
}

<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeExternal</span><span class="hljs-params">(ObjectOutput out)</span> <span class="hljs-keyword">throws</span> IOException </span>{
  out.writeInt(emails.size());
  <span class="hljs-keyword">for</span> (String e : emails) {
    out.writeUTF(e);
  }
  out.writeInt(phones.size());
  <span class="hljs-keyword">for</span> (String p : phones) {
    out.writeUTF(p);
  }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>204 milisegundos en serializar</p>
</li>
<li>
<p>92 milisegundos en deserializar</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Hemos ganado rendimiento a costa de escribir un poco más de código.</p>
</div>
</div>
<div class="sect2">
<h3 id="_analizando_los_resultados">Analizando los resultados</h3>
<div class="paragraph">
<p>Por el hecho de utilizar un interfaz u otro, no ganamos rendimiento.</p>
</div>
<div class="paragraph">
<p>Ganamos rendimiento porque el interfaz <a href="#_externalizable">Externalizable</a> nos "obliga" a implementar parte de la serialización y quitamos esta carga a <a href="https://www.java.com" target="_blank" rel="noopener">Java</a>.</p>
</div>
<div class="paragraph">
<p>Aunque como hemos visto en <a href="#_utilizando_el_interfaz_externalizable_mal">Utilizando el interfaz Externalizable (mal)</a>, si no tenemos cuidado, conseguiremos una mejora poco significativa a costa de complicar nuestro código fuente.</p>
</div>
<div class="paragraph">
<p>A continuación os dejo los enlaces a:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://carlosvin.github.io/serializations-performance-java/classes/com.github.carlosvin.contacts.SerializationTest.html">Resultados de los tests</a>.</p>
</li>
<li>
<p><a href="https://github.com/carlosvin/serializations-performance-java/">Código en github</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div><!-- HTML_TAG_END -->
	<div class="comments"><script src="https://utteranc.es/client.js" repo="carlosvin/carlosvin.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script></div>
	<a href="/posts/serialization-java-serializable-externalizable/es"></a>
</div>
</main>



	<script type="application/json" data-type="svelte-data" data-url="/langs/es/posts/serialization-java-serializable-externalizable.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"html\":\"\u003Cdiv id=\\\"toc\\\" class=\\\"toc\\\"\u003E\\n\u003Cdiv id=\\\"toctitle\\\"\u003ETable of Contents\u003C\u002Fdiv\u003E\\n\u003Cul class=\\\"sectlevel1\\\"\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_serializable\\\"\u003ESerializable\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_externalizable\\\"\u003EExternalizable\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_pruebas_de_rendimiento_serializable_vs_externalizable\\\"\u003EPruebas de Rendimiento (Serializable vs Externalizable)\u003C\u002Fa\u003E\\n\u003Cul class=\\\"sectlevel2\\\"\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_implementando_el_interfaz_serializable\\\"\u003EImplementando el interfaz Serializable\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_utilizando_el_interfaz_externalizable_mal\\\"\u003EUtilizando el interfaz Externalizable (mal)\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_utilizando_el_interfaz_externalizable_correctamente\\\"\u003EUtilizando el interfaz Externalizable (correctamente)\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_analizando_los_resultados\\\"\u003EAnalizando los resultados\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv id=\\\"preamble\\\"\u003E\\n\u003Cdiv class=\\\"sectionbody\\\"\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EHace poco, he tenido que serializar\u002Fdeserializar unos datos en \u003Ca href=\\\"https:\u002F\u002Fwww.java.com\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EJava\u003C\u002Fa\u003E, hacía mucho que no lo hacía en formato binario directamente (ultimamente he utilizado \u003Ca href=\\\"https:\u002F\u002Fwww.json.org\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EJSON\u003C\u002Fa\u003E o \u003Ca href=\\\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FXML\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EXML\u003C\u002Fa\u003E). Recordaba haber serializado objetos implementando el interfaz \u003Ca href=\\\"https:\u002F\u002Fdocs.oracle.com\u002Fjavase\u002F7\u002Fdocs\u002Fapi\u002Fjava\u002Fio\u002FSerializable.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003ESerializable\u003C\u002Fa\u003E, pero había visto por Internet otra forma implementando el interfaz \u003Ca href=\\\"https:\u002F\u002Fdocs.oracle.com\u002Fjavase\u002F7\u002Fdocs\u002Fapi\u002Fjava\u002Fio\u002FExternalizable.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EExternalizable\u003C\u002Fa\u003E, ¿cuál interfaz utilizo? Pues depende lo que quieras y necesites, como todo.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EVeamos cuándo utilizar \u003Ca href=\\\"#_serializable\\\"\u003ESerializable\u003C\u002Fa\u003E o \u003Ca href=\\\"#_externalizable\\\"\u003EExternalizable\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect1\\\"\u003E\\n\u003Ch2 id=\\\"_serializable\\\"\u003ESerializable\u003C\u002Fh2\u003E\\n\u003Cdiv class=\\\"sectionbody\\\"\u003E\\n\u003Cdiv class=\\\"ulist\\\"\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\\n\u003Cp\u003ECuando quieras escribir poco código, es la forma fácil.\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\\n\u003Cp\u003EPero tiene algunas restricciones: El objeto a serializar debe implementar el constructor por defecto. Debe hacerse responsable de los atributos no accesibles de la clase padre.\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\\n\u003Cp\u003ECuando no te importe mucho el rendimiento, como veremos en la sección \u003Ca href=\\\"#_pruebas_de_rendimiento_serializable_vs_externalizable\\\"\u003EPruebas de Rendimiento (Serializable vs Externalizable)\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect1\\\"\u003E\\n\u003Ch2 id=\\\"_externalizable\\\"\u003EExternalizable\u003C\u002Fh2\u003E\\n\u003Cdiv class=\\\"sectionbody\\\"\u003E\\n\u003Cdiv class=\\\"ulist\\\"\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\\n\u003Cp\u003EVas a tener que implementar tú mismo los métodos de serialización.\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\\n\u003Cp\u003ECuando no puedas utilizar \u003Ca href=\\\"#_serializable\\\"\u003ESerializable\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\\n\u003Cp\u003ECuando quieras obtener un mejor rendimiento, como veremos en la sección \u003Ca href=\\\"#_pruebas_de_rendimiento_serializable_vs_externalizable\\\"\u003EPruebas de Rendimiento (Serializable vs Externalizable)\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\\n\u003Cp\u003ESi tienes que encargarte de la serialización de los atributos de la clase padre, te recomiendo utilizar \u003Ca href=\\\"https:\u002F\u002Fdocs.oracle.com\u002Fjavase\u002F7\u002Fdocs\u002Fapi\u002Fjava\u002Fio\u002FExternalizable.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EExternalizable\u003C\u002Fa\u003E, porque evitamos una sobrescritura extraña de métodos privados.\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-java\\\" data-lang=\\\"java\\\"\u003E\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Eprivate\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EwriteObject\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E(ObjectOutputStream oos)\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eprivate\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EreadObject\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E(ObjectInputStream ois)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect1\\\"\u003E\\n\u003Ch2 id=\\\"_pruebas_de_rendimiento_serializable_vs_externalizable\\\"\u003EPruebas de Rendimiento (Serializable vs Externalizable)\u003C\u002Fh2\u003E\\n\u003Cdiv class=\\\"sectionbody\\\"\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EEl interfaz \u003Ca href=\\\"#_serializable\\\"\u003ESerializable\u003C\u002Fa\u003E utilizando la introspección de \u003Ca href=\\\"https:\u002F\u002Fwww.java.com\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EJava\u003C\u002Fa\u003E, adivina los tipos de los atributos de las clases que va a serializar\u002Fdeserializar, pero esta \\\"magia\\\" tiene una penalización en el rendimiento.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EAl utilizar el interfaz \u003Ca href=\\\"#_externalizable\\\"\u003EExternalizable\u003C\u002Fa\u003E somos nosotros los que decidimos cómo serializar\u002Fdeserializar los objetos, es decir, tenemos que escribir nosotros el código que hace esto. Hemos perdido comodidad, pero evitamos que \u003Ca href=\\\"https:\u002F\u002Fwww.java.com\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EJava\u003C\u002Fa\u003E haga algunas tareas y, si sobrescribimos correctamente los métodos del interfaz \u003Ca href=\\\"#_externalizable\\\"\u003EExternalizable\u003C\u002Fa\u003E, conseguiremos una mejora de rendimiento.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EPara saber cuánto es la diferencia de rendimiento, he escrito un \u003Ca href=\\\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fserializations-performance-java\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003Epequeño ejemplo en el que se serializa un objeto con dos colecciones con 100000 emails y 100000 teléfonos\u003C\u002Fa\u003E. He contemplado 3 casos:\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect2\\\"\u003E\\n\u003Ch3 id=\\\"_implementando_el_interfaz_serializable\\\"\u003EImplementando el interfaz Serializable\u003C\u002Fh3\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EComo dijimos más arriba, cuando implementamos el interfaz \u003Ca href=\\\"https:\u002F\u002Fdocs.oracle.com\u002Fjavase\u002F7\u002Fdocs\u002Fapi\u002Fjava\u002Fio\u002FSerializable.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003ESerializable\u003C\u002Fa\u003E, \u003Ca href=\\\"https:\u002F\u002Fwww.java.com\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EJava\u003C\u002Fa\u003E tiene que adivinar ciertas cosas, en este proceso sacrifica algo de rendimiento (es el que más tarda), a cambio ĺo único que tenemos que hacer es que nuestra clase implemente el interfaz \u003Ca href=\\\"https:\u002F\u002Fdocs.oracle.com\u002Fjavase\u002F7\u002Fdocs\u002Fapi\u002Fjava\u002Fio\u002FSerializable.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003ESerializable\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-java\\\" data-lang=\\\"java\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-class\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EContacts\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Eimplements\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003ESerializable\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\\n  \u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"ulist\\\"\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\\n\u003Cp\u003E1133 milisegundos en serializar\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\\n\u003Cp\u003E506 milisegundos en deserializar\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect2\\\"\u003E\\n\u003Ch3 id=\\\"_utilizando_el_interfaz_externalizable_mal\\\"\u003EUtilizando el interfaz Externalizable (mal)\u003C\u002Fh3\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EEn este caso somos nosotros los encargados de \\\"decir\\\" a \u003Ca href=\\\"https:\u002F\u002Fwww.java.com\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EJava\u003C\u002Fa\u003E cómo debe serializar\u002Fdeserializar, pero debemos ser cuidadosos, de lo contrario podemos quedarnos con lo peor de los dos mundos, por ejemplo: Si simplemente serializamos\u002Fdeserializamos los atributos de la clase, y estos son atributos complejos (como colecciones), \u003Ca href=\\\"https:\u002F\u002Fwww.java.com\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EJava\u003C\u002Fa\u003E también tiene que adivinar bastantes cosas y también sacrificamos algo de rendimiento y además hemos tenido que escribir más código.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-java\\\" data-lang=\\\"java\\\"\u003E\u003Cspan class=\\\"hljs-meta\\\"\u003E@Override\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EreadExternal\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E(ObjectInput in)\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethrows\u003C\u002Fspan\u003E IOException, ClassNotFoundException \u003C\u002Fspan\u003E{\\n  setEmails((Set&lt;String&gt;) in.readObject());\\n  setPhones((Set&lt;String&gt;) in.readObject());\\n}\\n\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E@Override\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EwriteExternal\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E(ObjectOutput out)\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethrows\u003C\u002Fspan\u003E IOException \u003C\u002Fspan\u003E{\\n  out.writeObject(emails);\\n  out.writeObject(phones);\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"ulist\\\"\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\\n\u003Cp\u003E737 milisegundos en serializar\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\\n\u003Cp\u003E367 milisegundos en deserializar\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect2\\\"\u003E\\n\u003Ch3 id=\\\"_utilizando_el_interfaz_externalizable_correctamente\\\"\u003EUtilizando el interfaz Externalizable (correctamente)\u003C\u002Fh3\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003ESi serializamos\u002Fdeserializamos uno por uno los elementos de las colecciones, ahorramos aún más tiempo, porque \u003Ca href=\\\"https:\u002F\u002Fwww.java.com\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EJava\u003C\u002Fa\u003E está serializando tipos más simples (en este caso java.lang.String).\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-java\\\" data-lang=\\\"java\\\"\u003E\u003Cspan class=\\\"hljs-meta\\\"\u003E@Override\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EreadExternal\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E(ObjectInput in)\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethrows\u003C\u002Fspan\u003E IOException, ClassNotFoundException \u003C\u002Fspan\u003E{\\n  emails.clear();\\n  phones.clear();\\n  \u003Cspan class=\\\"hljs-keyword\\\"\u003Eint\u003C\u002Fspan\u003E nEmails = in.readInt();\\n  \u003Cspan class=\\\"hljs-keyword\\\"\u003Efor\u003C\u002Fspan\u003E (\u003Cspan class=\\\"hljs-keyword\\\"\u003Eint\u003C\u002Fspan\u003E i = \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E; i &lt; nEmails; i++) {\\n    emails.add(in.readUTF());\\n  }\\n  \u003Cspan class=\\\"hljs-keyword\\\"\u003Eint\u003C\u002Fspan\u003E nPhones = in.readInt();\\n  \u003Cspan class=\\\"hljs-keyword\\\"\u003Efor\u003C\u002Fspan\u003E (\u003Cspan class=\\\"hljs-keyword\\\"\u003Eint\u003C\u002Fspan\u003E i = \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E; i &lt; nPhones; i++) {\\n    phones.add(in.readUTF());\\n  }\\n}\\n\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E@Override\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-keyword\\\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003EwriteExternal\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E(ObjectOutput out)\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethrows\u003C\u002Fspan\u003E IOException \u003C\u002Fspan\u003E{\\n  out.writeInt(emails.size());\\n  \u003Cspan class=\\\"hljs-keyword\\\"\u003Efor\u003C\u002Fspan\u003E (String e : emails) {\\n    out.writeUTF(e);\\n  }\\n  out.writeInt(phones.size());\\n  \u003Cspan class=\\\"hljs-keyword\\\"\u003Efor\u003C\u002Fspan\u003E (String p : phones) {\\n    out.writeUTF(p);\\n  }\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"ulist\\\"\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\\n\u003Cp\u003E204 milisegundos en serializar\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\\n\u003Cp\u003E92 milisegundos en deserializar\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EHemos ganado rendimiento a costa de escribir un poco más de código.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect2\\\"\u003E\\n\u003Ch3 id=\\\"_analizando_los_resultados\\\"\u003EAnalizando los resultados\u003C\u002Fh3\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EPor el hecho de utilizar un interfaz u otro, no ganamos rendimiento.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EGanamos rendimiento porque el interfaz \u003Ca href=\\\"#_externalizable\\\"\u003EExternalizable\u003C\u002Fa\u003E nos \\\"obliga\\\" a implementar parte de la serialización y quitamos esta carga a \u003Ca href=\\\"https:\u002F\u002Fwww.java.com\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EJava\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EAunque como hemos visto en \u003Ca href=\\\"#_utilizando_el_interfaz_externalizable_mal\\\"\u003EUtilizando el interfaz Externalizable (mal)\u003C\u002Fa\u003E, si no tenemos cuidado, conseguiremos una mejora poco significativa a costa de complicar nuestro código fuente.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EA continuación os dejo los enlaces a:\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"ulist\\\"\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\\n\u003Cp\u003E\u003Ca href=\\\"http:\u002F\u002Fcarlosvin.github.io\u002Fserializations-performance-java\u002Fclasses\u002Fcom.github.carlosvin.contacts.SerializationTest.html\\\"\u003EResultados de los tests\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\\n\u003Cp\u003E\u003Ca href=\\\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fserializations-performance-java\u002F\\\"\u003ECódigo en github\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\",\"props\":{\"title\":\"Distintas formas de serialización en Java: Comparación de rendimiento\",\"created\":1399993200000,\"modified\":1399993200000,\"filepath\":\"\u002FUsers\u002Fcarlos.martin-sanchez\u002Fpers\u002Fcarlosvin.github.io\u002Fstatic\u002Fposts\u002Fserialization-java-serializable-externalizable.es.adoc\",\"dirpath\":\"\u002FUsers\u002Fcarlos.martin-sanchez\u002Fpers\u002Fcarlosvin.github.io\u002Fstatic\u002Fposts\",\"keywords\":[\"Java\",\"Performance\"],\"lang\":\"es\",\"otherLangs\":[\"en\"],\"slug\":\"serialization-java-serializable-externalizable\",\"summary\":\"Comparación de rendimientos entre distintas formas de serialización en Java\",\"author\":\"Carlos Martin Sanchez\",\"path\":\"\u002Flangs\u002Fes\u002Fposts\u002Fserialization-java-serializable-externalizable\"}}"}</script>
</div>
	</body>
</html>
