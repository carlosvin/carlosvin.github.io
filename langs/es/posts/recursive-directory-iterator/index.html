<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Sistema de Ficheros en C++17</title><!-- HTML_TAG_START -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-1328360-10', 'auto');
	</script>
	<!-- HTML_TAG_END --><meta name="date.created" content="2017-05-28T07:00:00.000Z" data-svelte="svelte-1lps7vh"><meta name="date.updated" content="2017-05-28T07:00:00.000Z" data-svelte="svelte-1lps7vh"><meta name="description" content="Vamos a analizar con un ejemplo la forma de recorrer directorios de manera recursiva a partir de C++17" data-svelte="svelte-1lps7vh"><link rel="alternate" hreflang="en" href="/langs/en/posts/recursive-directory-iterator" data-svelte="svelte-1lps7vh"><link rel="alternate" href="/langs/es/posts/recursive-directory-iterator.ld.json" type="application/ld+json" data-svelte="svelte-1lps7vh">

		

		<link rel="stylesheet" href="/_app/assets/start-61d1577b.css">
		<link rel="stylesheet" href="/_app/assets/pages/langs/_lang_/__layout.svelte-8bf39628.css">
		<link rel="stylesheet" href="/_app/assets/Social-7f1225f5.css">
		<link rel="stylesheet" href="/_app/assets/IconLink-98c179b7.css">
		<link rel="stylesheet" href="/_app/assets/pages/langs/_lang_/posts/_slug_.svelte-5c4cbc84.css">
		<link rel="stylesheet" href="/_app/assets/Details-4d02ff5e.css">
		<link rel="modulepreload" href="/_app/start-2ad185d8.js">
		<link rel="modulepreload" href="/_app/chunks/vendor-7b6b0807.js">
		<link rel="modulepreload" href="/_app/chunks/singletons-a42a5e91.js">
		<link rel="modulepreload" href="/_app/layout.svelte-31892555.js">
		<link rel="modulepreload" href="/_app/pages/langs/_lang_/__layout.svelte-cb1c0706.js">
		<link rel="modulepreload" href="/_app/chunks/lang-92ec2f88.js">
		<link rel="modulepreload" href="/_app/chunks/Social-d91f5de4.js">
		<link rel="modulepreload" href="/_app/chunks/IconLink-f7cf6098.js">
		<link rel="modulepreload" href="/_app/pages/langs/_lang_/posts/_slug_.svelte-498b05f9.js">
		<link rel="modulepreload" href="/_app/chunks/url-bb89230a.js">
		<link rel="modulepreload" href="/_app/chunks/Details-f56da587.js">

		<script type="module">
			import { start } from "/_app/start-2ad185d8.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"","assets":""},
				session: {},
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/_app/layout.svelte-31892555.js"),
						import("/_app/pages/langs/_lang_/__layout.svelte-cb1c0706.js"),
						import("/_app/pages/langs/_lang_/posts/_slug_.svelte-498b05f9.js")
					],
					url: new URL("http://prerender/langs/es/posts/recursive-directory-iterator"),
					params: {lang:"es",slug:"recursive-directory-iterator"}
				}
			});
		</script>
	</head>
	<body>
		<div id="svelte">




<nav class="svelte-1kqmhwi"><ul class="svelte-1kqmhwi"><li class="svelte-1rykg79"><a aria-current="page" href="/langs/es/posts" rel="prefetch" class="svelte-1rykg79"><img class="logo svelte-1kqmhwi" src="/favicon.png" alt="Carlos dice bla bla logo"></a>
</li></ul>
	<ul class="closed svelte-1kqmhwi"><li class="svelte-1rykg79"><a aria-current="page" href="/langs/es/posts" rel="prefetch" class="svelte-1rykg79"><span class="siteName">Carlos dice bla bla</span></a>
</li>
		<li class="svelte-1rykg79"><a href="/langs/es/categories" rel="prefetch" class="svelte-1rykg79">Categorías</a>
</li>
		<li class="svelte-1rykg79"><a href="/langs/es/about" rel="prefetch" class="svelte-1rykg79">About</a>
</li></ul>
	<div class="h svelte-geb0ta"><a href="/langs/es/feed.xml" target="_blank" class="icon rss svelte-blgowr" title="Suscríbete a Carlos dice bla bla" rel="noopener" aria-label="Suscríbete a Carlos dice bla bla">
</a>
	<a href="https://github.com/carlosvin" target="_blank" class="icon github svelte-blgowr" title="Find me at github" rel="noopener" aria-label="Find me at github">
</a>
	<a href="https://twitter.com/carlosvin" target="_blank" class="icon twitter svelte-blgowr" title="Find me at twitter" rel="noopener" aria-label="Find me at twitter">
</a>
	<a href="https://stackoverflow.com/story/carlosvin" target="_blank" class="icon stackoverflow svelte-blgowr" title="Find me at stackoverflow" rel="noopener" aria-label="Find me at stackoverflow">
</a>
</div>
	<button type="button" class="svelte-1kqmhwi">≡</button>
</nav>
<main class="svelte-1m42syy">

<header class="svelte-1ikjkmw"><h1 class="svelte-1ikjkmw">Sistema de Ficheros en C++17
		<span class="share svelte-1ikjkmw"><a href="https://twitter.com/intent/tweet?url=/langs/es/posts/recursive-directory-iterator&amp;text=Sistema de Ficheros en C++17:&amp;nbsp;Vamos a analizar con un ejemplo la forma de recorrer directorios de manera recursiva a partir de C++17&amp;hashtags=C++,C++11,C++17,IO,Filesystem" target="_blank" class="icon twitter svelte-blgowr" title="Share &quot;Sistema de Ficheros en C++17&quot;" rel="noopener" aria-label="Share &quot;Sistema de Ficheros en C++17&quot;">
</a></span></h1>
	<p class="summary svelte-1ikjkmw">Vamos a analizar con un ejemplo la forma de recorrer directorios de manera recursiva a partir de C++17</p>
	<div class="subtitle svelte-19u0gw1"><span class="date svelte-19u0gw1">28/05/2017</span>
	<span class="tags svelte-wqh6y7"><a href="/langs/es/categories/c" title="C++" class="svelte-vx17la">C++
</a><a href="/langs/es/categories/c11" title="C++11" class="svelte-vx17la">C++11
</a><a href="/langs/es/categories/c17" title="C++17" class="svelte-vx17la">C++17
</a><a href="/langs/es/categories/io" title="IO" class="svelte-vx17la">IO
</a><a href="/langs/es/categories/filesystem" title="Filesystem" class="svelte-vx17la">Filesystem
</a></span>
</div></header>

<div class="postContent"><!-- HTML_TAG_START --><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introducción">Introducción</a></li>
<li><a href="#_comenzar_a_utilizar_característica_experimental_filesystem_c17_g">Comenzar a utilizar característica experimental filesystem C&#43;&#43;17 (g++)</a></li>
<li><a href="#_características_de_filesystem_c17">Características de filesystem C&#43;&#43;17</a>
<ul class="sectlevel2">
<li><a href="#_stdfilesystempath">std::filesystem::path</a></li>
<li><a href="#_separador_de_directorios">Separador de directorios</a></li>
<li><a href="#_operador_de_separador_de_directorios">Operador de separador de directorios</a></li>
<li><a href="#_crear_y_borrar_directorios">Crear y borrar directorios</a></li>
</ul>
</li>
<li><a href="#_ejemplo_completo_iterar_recursivamente_por_directorios">Ejemplo completo: Iterar Recursivamente por Directorios</a>
<ul class="sectlevel2">
<li><a href="#_c11">C&#43;&#43;11</a></li>
<li><a href="#_c17">C&#43;&#43;17</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="_introducción">Introducción</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A partir de C&#43;&#43;17 se añadirán nuevas abstracciones sobre el sistema de ficheros. De momento están disponibles como parte de las <a href="https://en.cppreference.com/w/cpp/experimental">Características Experimentales de C&#43;&#43;</a>. Si queréis profundizar aquí está el <a href="https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4100.pdf" target="_blank" rel="noopener">borrador final de la Especificación Técnica del Sistema de Ficheros</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comenzar_a_utilizar_característica_experimental_filesystem_c17_g">Comenzar a utilizar característica experimental filesystem C&#43;&#43;17 (g++)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Simplemente debemos "decir" al compilador que:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>estamos escribiendo código C&#43;&#43;17 (<code>-c++1z</code>) y</p>
</li>
<li>
<p>que añada la librería estándar con la librería filesystem (<code>-lstdc++fs</code>).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">g++ -std=c++1z main.cpp -lstdc++fs &amp;&amp; ./a.out</code></pre>
</div>
</div>
<div class="paragraph">
<p>Veamos un ejemplo muy simple utilizando la clase <code>std::filesystem::path</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;experimental/filesystem&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">namespace</span> fs = std::experimental::filesystem;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    fs::path aPath {<span class="hljs-string">&quot;./path/to/file.txt&quot;</span>};

    cout &lt;&lt; <span class="hljs-string">&quot;Parent path: &quot;</span> &lt;&lt; aPath.<span class="hljs-built_in">parent_path</span>() &lt;&lt; endl;
    cout &lt;&lt; <span class="hljs-string">&quot;Filename: &quot;</span> &lt;&lt; aPath.<span class="hljs-built_in">filename</span>() &lt;&lt; endl;
    cout &lt;&lt; <span class="hljs-string">&quot;Extension: &quot;</span> &lt;&lt; aPath.<span class="hljs-built_in">extension</span>() &lt;&lt; endl;

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><a href="https://coliru.stacked-crooked.com/a/9f8bebb8b7f0fbe7" target="_blank" rel="noopener">Resultado de compilar y ejecutar el ejemplo anterior C&#43;&#43;17</a></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ g++ -std=c++1z main.cpp -lstdc++fs &amp;&amp; ./a.out
$ ./a.out

Parent path: <span class="hljs-string">&quot;./path/to&quot;</span>
Filename: <span class="hljs-string">&quot;file.txt&quot;</span>
Extension: <span class="hljs-string">&quot;.txt&quot;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_características_de_filesystem_c17">Características de filesystem C&#43;&#43;17</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A continuación vamos a analizar algunas características que nos proporciona <a href="https://en.cppreference.com/w/cpp/filesystem" target="_blank" rel="noopener">std::filesystem</a> con ejemplos en C&#43;&#43;11 y C&#43;&#43;17, de esta forma podremos hacernos una idea de las utilidades que esta nueva librería nos trae y cómo efectivamente ayuda al desarrollador a escribir código más claro y seguro.</p>
</div>
<div class="sect2">
<h3 id="_stdfilesystempath">std::filesystem::path</h3>
<div class="paragraph">
<p>Más arriba ya hemos visto un pequeño <a href="https://coliru.stacked-crooked.com/a/9f8bebb8b7f0fbe7" target="_blank" rel="noopener">ejemplo de uso de clase std::filesystem::path</a>. Ésta abstracción nos proporciona una ruta a ficheros y directorios multi-plataforma, utilizando el separador de directorios correspondiente a la plataforma en la que trabajamos <code>\</code> en sistemas basados en Windows y <code>/</code> en sistemas basados en Unix.</p>
</div>
</div>
<div class="sect2">
<h3 id="_separador_de_directorios">Separador de directorios</h3>
<div class="paragraph">
<p>Si quisiéramos que nuestro software utilizase el separador de directorios correcto para una plataforma, en C&#43;&#43;11 podríamos utilizar una macro de compilación condicional:</p>
</div>
<div class="listingblock">
<div class="title">Separador de directorios independiente de la plataforma en C&#43;&#43;11</div>
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span>
<span class="hljs-type">const</span> string SEP = <span class="hljs-string">&quot;\\&quot;</span>;
<span class="hljs-meta">#<span class="hljs-keyword">else</span></span>
<span class="hljs-type">const</span> string SEP = <span class="hljs-string">&quot;/&quot;</span>;
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    cout &lt;&lt; <span class="hljs-string">&quot;Separator in my system &quot;</span> &lt;&lt; SEP &lt;&lt; endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://coliru.stacked-crooked.com/a/5023ee989105fc54" target="_blank" rel="noopener">Compilar y ejecutar: ejemplo separador C&#43;&#43;11</a>.</p>
</div>
<div class="listingblock">
<div class="title">Separador de directorios independiente de la plataforma en C&#43;&#43;17. Más sencillo y claro.</div>
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;experimental/filesystem&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">namespace</span> fs = std::experimental::filesystem;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    cout &lt;&lt; <span class="hljs-string">&quot;Separator in my system &quot;</span> &lt;&lt; fs::path::preferred_separator &lt;&lt; endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://coliru.stacked-crooked.com/a/1f2f63b3f5597d05" target="_blank" rel="noopener">Compilar y ejecutar: ejemplo separador C&#43;&#43;17</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_operador_de_separador_de_directorios">Operador de separador de directorios</h3>
<div class="paragraph">
<p><a href="https://en.cppreference.com/w/cpp/filesystem/path">std::filesystem::path</a> implementa el operador <code>/</code>, el cual nos permite concatenar fácilmente rutas a ficheros o directorios.</p>
</div>
<div class="paragraph">
<p>Si quisiéramos construir rutas a directorios en C&#43;&#43;11, tendríamos que implementar cierta lógica extra para detectar que no añadimos separadores extra y para utilizar el separador correcto:</p>
</div>
<div class="listingblock">
<div class="title">Concatenar paths en C&#43;&#43;11</div>
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span>
<span class="hljs-type">const</span> string SEP = <span class="hljs-string">&quot;\\&quot;</span>;
<span class="hljs-meta">#<span class="hljs-keyword">else</span></span>
<span class="hljs-type">const</span> string SEP = <span class="hljs-string">&quot;/&quot;</span>;
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    string root {<span class="hljs-string">&quot;/&quot;</span>};
    string dir {<span class="hljs-string">&quot;var/www/&quot;</span>};
    string index {<span class="hljs-string">&quot;index.html&quot;</span>};

    string pathToIndex{};
    pathToIndex.<span class="hljs-built_in">append</span>(root).<span class="hljs-built_in">append</span>(SEP).<span class="hljs-built_in">append</span>(dir).<span class="hljs-built_in">append</span>(SEP).<span class="hljs-built_in">append</span>(index);

    cout &lt;&lt; pathToIndex &lt;&lt; endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><a href="https://coliru.stacked-crooked.com/a/290b278ec1de9573" target="_blank" rel="noopener">Compilar y ejecutar: ejemplo concatenar rutas C&#43;&#43;11</a></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">//var/www//index.html</code></pre>
</div>
</div>
<div class="paragraph">
<p>Como vemos el resultado no es del todo correcto, deberíamos comprobar si las partes de la ruta ya contienen separador, para no añadirlo.</p>
</div>
<div class="paragraph">
<p>Toda esta lógica ya está implementada en <a href="https://en.cppreference.com/w/cpp/filesystem/path">std::filesystem::path</a>, así que el código en C&#43;&#43;17 sería algo así:</p>
</div>
<div class="listingblock">
<div class="title">Concatenar paths en C&#43;&#43;17</div>
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;experimental/filesystem&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">namespace</span> fs = std::experimental::filesystem;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    fs::path root {<span class="hljs-string">&quot;/&quot;</span>};
    fs::path dir {<span class="hljs-string">&quot;var/www/&quot;</span>};
    fs::path index {<span class="hljs-string">&quot;index.html&quot;</span>};

    fs::path pathToIndex = root / dir / index;

    cout &lt;&lt; pathToIndex &lt;&lt; endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><a href="https://coliru.stacked-crooked.com/a/a24d50875b4daad1">Compilar y ejecutar: ejemplo concatenar rutas C&#43;&#43;17</a>.</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"><span class="hljs-string">&quot;/var/www/index.html&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Aquí el código es más limpio y el resultado es simplemente correcto, no hay separadores duplicados.</p>
</div>
</div>
<div class="sect2">
<h3 id="_crear_y_borrar_directorios">Crear y borrar directorios</h3>
<div class="paragraph">
<p><a href="https://en.cppreference.com/w/cpp/filesystem" target="_blank" rel="noopener">std::filesystem</a> introduce algunas facilidades para crear y borrar directorios y ficheros, primero vamos a ver una de las formas de hacerlo en C&#43;&#43;11.</p>
</div>
<div class="listingblock">
<div class="title">Crear y borrar directorios anidados en C&#43;&#43;11</div>
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">auto</span> opts = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;
    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;sandbox&quot;</span>, opts);
    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;sandbox/a&quot;</span>, opts);
    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;sandbox/a/b&quot;</span>, opts);
    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;sandbox/c&quot;</span>, opts);
    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;sandbox/c/d&quot;</span>, opts);

    <span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;ls -la sandbox/*&quot;</span>);

    <span class="hljs-built_in">remove</span>(<span class="hljs-string">&quot;sandbox/c/d&quot;</span>);
    <span class="hljs-built_in">remove</span>(<span class="hljs-string">&quot;sandbox/a/b&quot;</span>);
    <span class="hljs-built_in">remove</span>(<span class="hljs-string">&quot;sandbox/c&quot;</span>);
    <span class="hljs-built_in">remove</span>(<span class="hljs-string">&quot;sandbox/a&quot;</span>);
    <span class="hljs-built_in">remove</span>(<span class="hljs-string">&quot;sandbox&quot;</span>);

    <span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;ls -la&quot;</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><a href="https://coliru.stacked-crooked.com/a/26f4763ec5b42adb">Compilar y ejecutar: crear y borrar directorios C&#43;&#43;11</a>.</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">g++-4.9 -std=c++11 main.cpp -lm &amp;&amp; ./a.out
sandbox/a:
total 12
drwxr-xr-x 3 2001 2000 4096 May 28 12:27 .
drwxr-xr-x 4 2001 2000 4096 May 28 12:27 ..
drwxr-xr-x 2 2001 2000 4096 May 28 12:27 b

sandbox/c:
total 12
drwxr-xr-x 3 2001 2000 4096 May 28 12:27 .
drwxr-xr-x 4 2001 2000 4096 May 28 12:27 ..
drwxr-xr-x 2 2001 2000 4096 May 28 12:27 d
total 8012
drwxrwxrwx 2 2001 2000    4096 May 28 12:27 .
drwxrwxrwx 3 2002 2000 8175616 May 28 12:27 ..
-rwxr-xr-x 1 2001 2000    8168 May 28 12:27 a.out
-rw-rw-rw- 1 2001 2000     517 May 28 12:27 main.cpp</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para crear y borrar directorios anidados, debemos hacerlo uno por uno. Podemos escribir este fragmento de código con menos líneas, pero aún así tendremos que tener cuidado del orden en el que creamos/borramos los directorios.</p>
</div>
<div class="listingblock">
<div class="title">En C&#43;&#43;17 podemos borrar y crear directorios anidados con una sola llamada.</div>
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;experimental/filesystem&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">namespace</span> fs = std::experimental::filesystem;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    fs::<span class="hljs-built_in">create_directories</span>(<span class="hljs-string">&quot;sandbox/a/b&quot;</span>);
    fs::<span class="hljs-built_in">create_directories</span>(<span class="hljs-string">&quot;sandbox/c/d&quot;</span>);
    <span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;ls -la sandbox/*&quot;</span>);

    cout &lt;&lt; <span class="hljs-string">&quot;Were directories removed? &quot;</span> &lt;&lt; fs::<span class="hljs-built_in">remove_all</span>(<span class="hljs-string">&quot;sandbox&quot;</span>) &lt;&lt; endl;
    <span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;ls -la&quot;</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><a href="https://coliru.stacked-crooked.com/a/62c2d22fa0e7144c">Compilar y ejecutar: crear y borrar directorios C&#43;&#43;17</a>.</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">g++ -std=c++1z -fconcepts -fgnu-tm  -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs &amp;&amp; ./a.out
sandbox/a:
total 12
drwxr-xr-x 3 2001 2000 4096 May 28 16:45 .
drwxr-xr-x 4 2001 2000 4096 May 28 16:45 ..
drwxr-xr-x 2 2001 2000 4096 May 28 16:45 b

sandbox/c:
total 12
drwxr-xr-x 3 2001 2000 4096 May 28 16:45 .
drwxr-xr-x 4 2001 2000 4096 May 28 16:45 ..
drwxr-xr-x 2 2001 2000 4096 May 28 16:45 d
Were directories removed? 1
total 10132
drwxrwxrwx 2 2001 2000    4096 May 28 16:45 .
drwxrwxrwx 3 2002 2000 8175616 May 28 16:45 ..
-rwxr-xr-x 1 2001 2000 2170976 May 28 16:45 a.out
-rw-rw-rw- 1 2001 2000     393 May 28 16:45 main.cpp</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ejemplo_completo_iterar_recursivamente_por_directorios">Ejemplo completo: Iterar Recursivamente por Directorios</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vamos a ver un ejemplo algo más completo, consiste en iterar recursivamente a través de directorios, filtrando los ficheros por extension.</p>
</div>
<div class="sect2">
<h3 id="_c11">C&#43;&#43;11</h3>
<div class="paragraph">
<p>Este es el ejemplo en C&#43;&#43;11, sin filtrar por extension, para evitar complicarlo:</p>
</div>
<div class="listingblock">
<div class="title">filesystem.11.cpp</div>
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dirent.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span> <span class="hljs-comment">// std::ofstream</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;system_error&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">const</span> string UP_DIR = <span class="hljs-string">&quot;..&quot;</span>;
<span class="hljs-type">const</span> string CURRENT_DIR = <span class="hljs-string">&quot;.&quot;</span>;
<span class="hljs-type">const</span> string SEP = <span class="hljs-string">&quot;/&quot;</span>;


<span class="hljs-function">string <span class="hljs-title">path</span><span class="hljs-params">(initializer_list&lt;string&gt; parts)</span>
</span>{
    string pathTmp {};
    string separator = <span class="hljs-string">&quot;&quot;</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp; part: parts)
    {
        pathTmp.<span class="hljs-built_in">append</span>(separator).<span class="hljs-built_in">append</span>(part);
        separator = SEP;
    }
    <span class="hljs-keyword">return</span> pathTmp;
}

<span class="hljs-function">vector&lt;string&gt; <span class="hljs-title">getDirectoryFiles</span><span class="hljs-params">(<span class="hljs-type">const</span> string&amp; dir, <span class="hljs-type">const</span> vector&lt;string&gt; &amp; extensions)</span>
</span>{
    vector&lt;string&gt; files;
    <span class="hljs-function">shared_ptr&lt;DIR&gt; <span class="hljs-title">directory_ptr</span><span class="hljs-params">(opendir(dir.c_str()), [](DIR* dir){ dir &amp;&amp; closedir(dir); })</span></span>;
    <span class="hljs-keyword">if</span> (!directory_ptr)
    {
        <span class="hljs-keyword">throw</span> <span class="hljs-built_in">system_error</span>(<span class="hljs-built_in">error_code</span>(errno, <span class="hljs-built_in">system_category</span>()), <span class="hljs-string">&quot;Error opening : &quot;</span> + dir);
    }

    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">dirent</span> *dirent_ptr;
    <span class="hljs-keyword">while</span> ((dirent_ptr = <span class="hljs-built_in">readdir</span>(directory_ptr.<span class="hljs-built_in">get</span>())) != <span class="hljs-literal">nullptr</span>)
    {
        <span class="hljs-type">const</span> string fileName {dirent_ptr-&gt;d_name};
        <span class="hljs-keyword">if</span> (dirent_ptr-&gt;d_type == DT_DIR)
        {
            <span class="hljs-keyword">if</span> (CURRENT_DIR != fileName &amp;&amp; UP_DIR != fileName)
            {
                <span class="hljs-keyword">auto</span> subFiles = <span class="hljs-built_in">getDirectoryFiles</span>(<span class="hljs-built_in">path</span>({dir, fileName}), extensions);
                files.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">end</span>(files), <span class="hljs-built_in">begin</span>(subFiles), <span class="hljs-built_in">end</span>(subFiles));
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dirent_ptr-&gt;d_type == DT_REG)
        {
            <span class="hljs-comment">// here we should check also if filename has an extension in extensions vector</span>
            files.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">path</span>({dir, fileName}));
        }
    }
    <span class="hljs-keyword">return</span> files;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">auto</span> opt = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;
    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;sandbox&quot;</span>, opt);
    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;sandbox/a&quot;</span>, opt);
    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;sandbox/a/b&quot;</span>, opt);

	vector&lt;string&gt; e_files = {
	    <span class="hljs-string">&quot;./sandbox/a/b/file1.rst&quot;</span>,
	    <span class="hljs-string">&quot;./sandbox/a/b/file1.txt&quot;</span>,
	    <span class="hljs-string">&quot;./sandbox/a/file2.RST&quot;</span>,
	    <span class="hljs-string">&quot;./sandbox/file3.md&quot;</span>,
	    <span class="hljs-string">&quot;./sandbox/will_be.ignored&quot;</span>
	};

	<span class="hljs-comment">// create files</span>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;f: e_files)
	{
		<span class="hljs-function">ofstream <span class="hljs-title">of</span><span class="hljs-params">(f, ofstream::out)</span></span>;
		of &lt;&lt; <span class="hljs-string">&quot;test&quot;</span>;
	}

    cout &lt;&lt; <span class="hljs-string">&quot;filtered files: &quot;</span> &lt;&lt; endl;
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;f: <span class="hljs-built_in">getDirectoryFiles</span>(<span class="hljs-string">&quot;.&quot;</span>, {<span class="hljs-string">&quot;.rst&quot;</span>, <span class="hljs-string">&quot;.RST&quot;</span>, <span class="hljs-string">&quot;.md&quot;</span>})){
	    cout &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; f &lt;&lt; endl;
	}

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><a href="https://coliru.stacked-crooked.com/a/af4228e039a281b3" target="_blank" rel="noopener">Compilar y ejecutar el ejemplo C&#43;&#43;11</a>.</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">g++ -std=c++11 -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs &amp;&amp; ./a.out
filtered files:
	./main.cpp
	./sandbox/file3.md
	./sandbox/will_be.ignored
	./sandbox/a/b/file1.rst
	./sandbox/a/b/file1.txt
	./sandbox/a/file2.RST
	./a.out</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c17">C&#43;&#43;17</h3>
<div class="paragraph">
<p>El siguiente ejemplo filtra los ficheros por extension.</p>
</div>
<div class="listingblock">
<div class="title">filesystem.17.cpp</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"><span class="hljs-comment">#include &lt;dirent.h&gt;</span>
<span class="hljs-comment">#include &lt;cstring&gt;</span>
<span class="hljs-comment">#include &lt;iostream&gt;</span>
<span class="hljs-comment">#include &lt;fstream&gt; // std::ofstream</span>
<span class="hljs-comment">#include &lt;vector&gt;</span>
<span class="hljs-comment">#include &lt;memory&gt;</span>
<span class="hljs-comment">#include &lt;system_error&gt;</span>
<span class="hljs-comment">#include &lt;sys/stat.h&gt;</span>

using namespace std;

const string UP_DIR = <span class="hljs-string">&quot;..&quot;</span>;
const string CURRENT_DIR = <span class="hljs-string">&quot;.&quot;</span>;
const string SEP = <span class="hljs-string">&quot;/&quot;</span>;


string path(initializer_list&lt;string&gt; parts)
{
    string pathTmp {};
    string separator = <span class="hljs-string">&quot;&quot;</span>;
    <span class="hljs-keyword">for</span> (auto &amp; part: parts)
    {
        pathTmp.append(separator).append(part);
        separator = SEP;
    }
    <span class="hljs-built_in">return</span> pathTmp;
}

vector&lt;string&gt; getDirectoryFiles(const string&amp; <span class="hljs-built_in">dir</span>, const vector&lt;string&gt; &amp; extensions)
{
    vector&lt;string&gt; files;
    shared_ptr&lt;DIR&gt; directory_ptr(opendir(dir.c_str()), [](DIR* <span class="hljs-built_in">dir</span>){ <span class="hljs-built_in">dir</span> &amp;&amp; closedir(<span class="hljs-built_in">dir</span>); });
    <span class="hljs-keyword">if</span> (!directory_ptr)
    {
        throw system_error(error_code(errno, system_category()), <span class="hljs-string">&quot;Error opening : &quot;</span> + <span class="hljs-built_in">dir</span>);
    }

    struct dirent *dirent_ptr;
    <span class="hljs-keyword">while</span> ((dirent_ptr = readdir(directory_ptr.get())) != nullptr)
    {
        const string fileName {dirent_ptr-&gt;d_name};
        <span class="hljs-keyword">if</span> (dirent_ptr-&gt;d_type == DT_DIR)
        {
            <span class="hljs-keyword">if</span> (CURRENT_DIR != fileName &amp;&amp; UP_DIR != fileName)
            {
                auto subFiles = getDirectoryFiles(path({<span class="hljs-built_in">dir</span>, fileName}), extensions);
                files.insert(end(files), begin(subFiles), end(subFiles));
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dirent_ptr-&gt;d_type == DT_REG)
        {
            // here we should check also <span class="hljs-keyword">if</span> filename has an extension <span class="hljs-keyword">in</span> extensions vector
            files.push_back(path({<span class="hljs-built_in">dir</span>, fileName}));
        }
    }
    <span class="hljs-built_in">return</span> files;
}

int <span class="hljs-function"><span class="hljs-title">main</span></span> ()
{
    auto opt = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;
    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;sandbox&quot;</span>, opt);
    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;sandbox/a&quot;</span>, opt);
    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;sandbox/a/b&quot;</span>, opt);

	vector&lt;string&gt; e_files = {
	    <span class="hljs-string">&quot;./sandbox/a/b/file1.rst&quot;</span>,
	    <span class="hljs-string">&quot;./sandbox/a/b/file1.txt&quot;</span>,
	    <span class="hljs-string">&quot;./sandbox/a/file2.RST&quot;</span>,
	    <span class="hljs-string">&quot;./sandbox/file3.md&quot;</span>,
	    <span class="hljs-string">&quot;./sandbox/will_be.ignored&quot;</span>
	};

	// create files
	<span class="hljs-keyword">for</span> (auto &amp;f: e_files)
	{
		ofstream of(f, ofstream::out);
		of &lt;&lt; <span class="hljs-string">&quot;test&quot;</span>;
	}

    cout &lt;&lt; <span class="hljs-string">&quot;filtered files: &quot;</span> &lt;&lt; <span class="hljs-string">endl;
	for (auto &amp;f: getDirectoryFiles(&quot;.&quot;, {&quot;.rst&quot;, &quot;.RST&quot;, &quot;.md&quot;})){
	    cout &lt;&lt; &quot;\t&quot; &lt;&lt; f &lt;&lt; endl</span>;
	}

    <span class="hljs-built_in">return</span> 0;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><a href="https://coliru.stacked-crooked.com/a/af4228e039a281b3" target="_blank" rel="noopener">Compilar y ejecutar el ejemplo C&#43;&#43;17</a>.</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">g++ -std=c++11 -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs &amp;&amp; ./a.out
filtered files:
	./main.cpp
	./sandbox/file3.md
	./sandbox/will_be.ignored
	./sandbox/a/b/file1.rst
	./sandbox/a/b/file1.txt
	./sandbox/a/file2.RST
	./a.out</code></pre>
</div>
</div>
</div>
</div>
</div><!-- HTML_TAG_END -->
	<div class="comments"><script src="https://utteranc.es/client.js" repo="carlosvin/carlosvin.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script></div>
	
	<a href="/posts/recursive-directory-iterator/es"></a>
	
	<a href="/posts/recursive-directory-iterator"></a>
</div>
</main>

<script type="application/json" data-type="svelte-data" data-url="/langs/es/posts/recursive-directory-iterator.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"html\":\"\u003Cdiv id=\\\"toc\\\" class=\\\"toc\\\"\u003E\\n\u003Cdiv id=\\\"toctitle\\\"\u003ETable of Contents\u003C\u002Fdiv\u003E\\n\u003Cul class=\\\"sectlevel1\\\"\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_introducción\\\"\u003EIntroducción\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_comenzar_a_utilizar_característica_experimental_filesystem_c17_g\\\"\u003EComenzar a utilizar característica experimental filesystem C&#43;&#43;17 (g++)\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_características_de_filesystem_c17\\\"\u003ECaracterísticas de filesystem C&#43;&#43;17\u003C\u002Fa\u003E\\n\u003Cul class=\\\"sectlevel2\\\"\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_stdfilesystempath\\\"\u003Estd::filesystem::path\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_separador_de_directorios\\\"\u003ESeparador de directorios\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_operador_de_separador_de_directorios\\\"\u003EOperador de separador de directorios\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_crear_y_borrar_directorios\\\"\u003ECrear y borrar directorios\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_ejemplo_completo_iterar_recursivamente_por_directorios\\\"\u003EEjemplo completo: Iterar Recursivamente por Directorios\u003C\u002Fa\u003E\\n\u003Cul class=\\\"sectlevel2\\\"\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_c11\\\"\u003EC&#43;&#43;11\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003Cli\u003E\u003Ca href=\\\"#_c17\\\"\u003EC&#43;&#43;17\u003C\u002Fa\u003E\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect1\\\"\u003E\\n\u003Ch2 id=\\\"_introducción\\\"\u003EIntroducción\u003C\u002Fh2\u003E\\n\u003Cdiv class=\\\"sectionbody\\\"\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EA partir de C&#43;&#43;17 se añadirán nuevas abstracciones sobre el sistema de ficheros. De momento están disponibles como parte de las \u003Ca href=\\\"https:\u002F\u002Fen.cppreference.com\u002Fw\u002Fcpp\u002Fexperimental\\\"\u003ECaracterísticas Experimentales de C&#43;&#43;\u003C\u002Fa\u003E. Si queréis profundizar aquí está el \u003Ca href=\\\"https:\u002F\u002Fwww.open-std.org\u002Fjtc1\u002Fsc22\u002Fwg21\u002Fdocs\u002Fpapers\u002F2014\u002Fn4100.pdf\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003Eborrador final de la Especificación Técnica del Sistema de Ficheros\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect1\\\"\u003E\\n\u003Ch2 id=\\\"_comenzar_a_utilizar_característica_experimental_filesystem_c17_g\\\"\u003EComenzar a utilizar característica experimental filesystem C&#43;&#43;17 (g++)\u003C\u002Fh2\u003E\\n\u003Cdiv class=\\\"sectionbody\\\"\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003ESimplemente debemos \\\"decir\\\" al compilador que:\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"ulist\\\"\u003E\\n\u003Cul\u003E\\n\u003Cli\u003E\\n\u003Cp\u003Eestamos escribiendo código C&#43;&#43;17 (\u003Ccode\u003E-c++1z\u003C\u002Fcode\u003E) y\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003Cli\u003E\\n\u003Cp\u003Eque añada la librería estándar con la librería filesystem (\u003Ccode\u003E-lstdc++fs\u003C\u002Fcode\u003E).\u003C\u002Fp\u003E\\n\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-bash\\\" data-lang=\\\"bash\\\"\u003Eg++ -std=c++1z main.cpp -lstdc++fs &amp;&amp; .\u002Fa.out\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EVeamos un ejemplo muy simple utilizando la clase \u003Ccode\u003Estd::filesystem::path\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-cpp\\\" data-lang=\\\"cpp\\\"\u003E\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;experimental\u002Ffilesystem&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E fs = std::experimental::filesystem;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E std;\\n\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-type\\\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E()\u003C\u002Fspan\u003E\\n\u003C\u002Fspan\u003E{\\n    fs::path aPath {\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fpath\u002Fto\u002Ffile.txt&quot;\u003C\u002Fspan\u003E};\\n\\n    cout &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;Parent path: &quot;\u003C\u002Fspan\u003E &lt;&lt; aPath.\u003Cspan class=\\\"hljs-built_in\\\"\u003Eparent_path\u003C\u002Fspan\u003E() &lt;&lt; endl;\\n    cout &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;Filename: &quot;\u003C\u002Fspan\u003E &lt;&lt; aPath.\u003Cspan class=\\\"hljs-built_in\\\"\u003Efilename\u003C\u002Fspan\u003E() &lt;&lt; endl;\\n    cout &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;Extension: &quot;\u003C\u002Fspan\u003E &lt;&lt; aPath.\u003Cspan class=\\\"hljs-built_in\\\"\u003Eextension\u003C\u002Fspan\u003E() &lt;&lt; endl;\\n\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E;\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003E\u003Ca href=\\\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F9f8bebb8b7f0fbe7\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003EResultado de compilar y ejecutar el ejemplo anterior C&#43;&#43;17\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-bash\\\" data-lang=\\\"bash\\\"\u003E$ g++ -std=c++1z main.cpp -lstdc++fs &amp;&amp; .\u002Fa.out\\n$ .\u002Fa.out\\n\\nParent path: \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fpath\u002Fto&quot;\u003C\u002Fspan\u003E\\nFilename: \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;file.txt&quot;\u003C\u002Fspan\u003E\\nExtension: \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.txt&quot;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect1\\\"\u003E\\n\u003Ch2 id=\\\"_características_de_filesystem_c17\\\"\u003ECaracterísticas de filesystem C&#43;&#43;17\u003C\u002Fh2\u003E\\n\u003Cdiv class=\\\"sectionbody\\\"\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EA continuación vamos a analizar algunas características que nos proporciona \u003Ca href=\\\"https:\u002F\u002Fen.cppreference.com\u002Fw\u002Fcpp\u002Ffilesystem\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003Estd::filesystem\u003C\u002Fa\u003E con ejemplos en C&#43;&#43;11 y C&#43;&#43;17, de esta forma podremos hacernos una idea de las utilidades que esta nueva librería nos trae y cómo efectivamente ayuda al desarrollador a escribir código más claro y seguro.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect2\\\"\u003E\\n\u003Ch3 id=\\\"_stdfilesystempath\\\"\u003Estd::filesystem::path\u003C\u002Fh3\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EMás arriba ya hemos visto un pequeño \u003Ca href=\\\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F9f8bebb8b7f0fbe7\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003Eejemplo de uso de clase std::filesystem::path\u003C\u002Fa\u003E. Ésta abstracción nos proporciona una ruta a ficheros y directorios multi-plataforma, utilizando el separador de directorios correspondiente a la plataforma en la que trabajamos \u003Ccode\u003E\\\\\u003C\u002Fcode\u003E en sistemas basados en Windows y \u003Ccode\u003E\u002F\u003C\u002Fcode\u003E en sistemas basados en Unix.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect2\\\"\u003E\\n\u003Ch3 id=\\\"_separador_de_directorios\\\"\u003ESeparador de directorios\u003C\u002Fh3\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003ESi quisiéramos que nuestro software utilizase el separador de directorios correcto para una plataforma, en C&#43;&#43;11 podríamos utilizar una macro de compilación condicional:\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003ESeparador de directorios independiente de la plataforma en C&#43;&#43;11\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-cpp\\\" data-lang=\\\"cpp\\\"\u003E\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E std;\\n\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Eifdef\u003C\u002Fspan\u003E _WIN32\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-type\\\"\u003Econst\u003C\u002Fspan\u003E string SEP = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;\\\\\\\\&quot;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Eelse\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-type\\\"\u003Econst\u003C\u002Fspan\u003E string SEP = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;\u002F&quot;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Eendif\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-type\\\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E()\u003C\u002Fspan\u003E\\n\u003C\u002Fspan\u003E{\\n    cout &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;Separator in my system &quot;\u003C\u002Fspan\u003E &lt;&lt; SEP &lt;&lt; endl;\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E;\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003E\u003Ca href=\\\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F5023ee989105fc54\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003ECompilar y ejecutar: ejemplo separador C&#43;&#43;11\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003ESeparador de directorios independiente de la plataforma en C&#43;&#43;17. Más sencillo y claro.\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-cpp\\\" data-lang=\\\"cpp\\\"\u003E\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;experimental\u002Ffilesystem&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E fs = std::experimental::filesystem;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E std;\\n\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-type\\\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E()\u003C\u002Fspan\u003E\\n\u003C\u002Fspan\u003E{\\n    cout &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;Separator in my system &quot;\u003C\u002Fspan\u003E &lt;&lt; fs::path::preferred_separator &lt;&lt; endl;\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E;\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003E\u003Ca href=\\\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F1f2f63b3f5597d05\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003ECompilar y ejecutar: ejemplo separador C&#43;&#43;17\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect2\\\"\u003E\\n\u003Ch3 id=\\\"_operador_de_separador_de_directorios\\\"\u003EOperador de separador de directorios\u003C\u002Fh3\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003E\u003Ca href=\\\"https:\u002F\u002Fen.cppreference.com\u002Fw\u002Fcpp\u002Ffilesystem\u002Fpath\\\"\u003Estd::filesystem::path\u003C\u002Fa\u003E implementa el operador \u003Ccode\u003E\u002F\u003C\u002Fcode\u003E, el cual nos permite concatenar fácilmente rutas a ficheros o directorios.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003ESi quisiéramos construir rutas a directorios en C&#43;&#43;11, tendríamos que implementar cierta lógica extra para detectar que no añadimos separadores extra y para utilizar el separador correcto:\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003EConcatenar paths en C&#43;&#43;11\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-cpp\\\" data-lang=\\\"cpp\\\"\u003E\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E std;\\n\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Eifdef\u003C\u002Fspan\u003E _WIN32\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-type\\\"\u003Econst\u003C\u002Fspan\u003E string SEP = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;\\\\\\\\&quot;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Eelse\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-type\\\"\u003Econst\u003C\u002Fspan\u003E string SEP = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;\u002F&quot;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Eendif\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-type\\\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E()\u003C\u002Fspan\u003E\\n\u003C\u002Fspan\u003E{\\n    string root {\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;\u002F&quot;\u003C\u002Fspan\u003E};\\n    string dir {\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;var\u002Fwww\u002F&quot;\u003C\u002Fspan\u003E};\\n    string index {\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;index.html&quot;\u003C\u002Fspan\u003E};\\n\\n    string pathToIndex{};\\n    pathToIndex.\u003Cspan class=\\\"hljs-built_in\\\"\u003Eappend\u003C\u002Fspan\u003E(root).\u003Cspan class=\\\"hljs-built_in\\\"\u003Eappend\u003C\u002Fspan\u003E(SEP).\u003Cspan class=\\\"hljs-built_in\\\"\u003Eappend\u003C\u002Fspan\u003E(dir).\u003Cspan class=\\\"hljs-built_in\\\"\u003Eappend\u003C\u002Fspan\u003E(SEP).\u003Cspan class=\\\"hljs-built_in\\\"\u003Eappend\u003C\u002Fspan\u003E(index);\\n\\n    cout &lt;&lt; pathToIndex &lt;&lt; endl;\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E;\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003E\u003Ca href=\\\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F290b278ec1de9573\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003ECompilar y ejecutar: ejemplo concatenar rutas C&#43;&#43;11\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-bash\\\" data-lang=\\\"bash\\\"\u003E\u002F\u002Fvar\u002Fwww\u002F\u002Findex.html\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EComo vemos el resultado no es del todo correcto, deberíamos comprobar si las partes de la ruta ya contienen separador, para no añadirlo.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EToda esta lógica ya está implementada en \u003Ca href=\\\"https:\u002F\u002Fen.cppreference.com\u002Fw\u002Fcpp\u002Ffilesystem\u002Fpath\\\"\u003Estd::filesystem::path\u003C\u002Fa\u003E, así que el código en C&#43;&#43;17 sería algo así:\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003EConcatenar paths en C&#43;&#43;17\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-cpp\\\" data-lang=\\\"cpp\\\"\u003E\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;experimental\u002Ffilesystem&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E fs = std::experimental::filesystem;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E std;\\n\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-type\\\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E()\u003C\u002Fspan\u003E\\n\u003C\u002Fspan\u003E{\\n    fs::path root {\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;\u002F&quot;\u003C\u002Fspan\u003E};\\n    fs::path dir {\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;var\u002Fwww\u002F&quot;\u003C\u002Fspan\u003E};\\n    fs::path index {\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;index.html&quot;\u003C\u002Fspan\u003E};\\n\\n    fs::path pathToIndex = root \u002F dir \u002F index;\\n\\n    cout &lt;&lt; pathToIndex &lt;&lt; endl;\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E;\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003E\u003Ca href=\\\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002Fa24d50875b4daad1\\\"\u003ECompilar y ejecutar: ejemplo concatenar rutas C&#43;&#43;17\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-bash\\\" data-lang=\\\"bash\\\"\u003E\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;\u002Fvar\u002Fwww\u002Findex.html&quot;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EAquí el código es más limpio y el resultado es simplemente correcto, no hay separadores duplicados.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect2\\\"\u003E\\n\u003Ch3 id=\\\"_crear_y_borrar_directorios\\\"\u003ECrear y borrar directorios\u003C\u002Fh3\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003E\u003Ca href=\\\"https:\u002F\u002Fen.cppreference.com\u002Fw\u002Fcpp\u002Ffilesystem\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003Estd::filesystem\u003C\u002Fa\u003E introduce algunas facilidades para crear y borrar directorios y ficheros, primero vamos a ver una de las formas de hacerlo en C&#43;&#43;11.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003ECrear y borrar directorios anidados en C&#43;&#43;11\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-cpp\\\" data-lang=\\\"cpp\\\"\u003E\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;cstdio&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;sys\u002Fstat.h&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E std;\\n\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-type\\\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E()\u003C\u002Fspan\u003E\\n\u003C\u002Fspan\u003E{\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Eauto\u003C\u002Fspan\u003E opts = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Emkdir\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox&quot;\u003C\u002Fspan\u003E, opts);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Emkdir\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fa&quot;\u003C\u002Fspan\u003E, opts);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Emkdir\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fa\u002Fb&quot;\u003C\u002Fspan\u003E, opts);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Emkdir\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fc&quot;\u003C\u002Fspan\u003E, opts);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Emkdir\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fc\u002Fd&quot;\u003C\u002Fspan\u003E, opts);\\n\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Esystem\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ls -la sandbox\u002F*&quot;\u003C\u002Fspan\u003E);\\n\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Eremove\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fc\u002Fd&quot;\u003C\u002Fspan\u003E);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Eremove\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fa\u002Fb&quot;\u003C\u002Fspan\u003E);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Eremove\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fc&quot;\u003C\u002Fspan\u003E);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Eremove\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fa&quot;\u003C\u002Fspan\u003E);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Eremove\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox&quot;\u003C\u002Fspan\u003E);\\n\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Esystem\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ls -la&quot;\u003C\u002Fspan\u003E);\\n\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E;\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003E\u003Ca href=\\\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F26f4763ec5b42adb\\\"\u003ECompilar y ejecutar: crear y borrar directorios C&#43;&#43;11\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-bash\\\" data-lang=\\\"bash\\\"\u003Eg++-4.9 -std=c++11 main.cpp -lm &amp;&amp; .\u002Fa.out\\nsandbox\u002Fa:\\ntotal 12\\ndrwxr-xr-x 3 2001 2000 4096 May 28 12:27 .\\ndrwxr-xr-x 4 2001 2000 4096 May 28 12:27 ..\\ndrwxr-xr-x 2 2001 2000 4096 May 28 12:27 b\\n\\nsandbox\u002Fc:\\ntotal 12\\ndrwxr-xr-x 3 2001 2000 4096 May 28 12:27 .\\ndrwxr-xr-x 4 2001 2000 4096 May 28 12:27 ..\\ndrwxr-xr-x 2 2001 2000 4096 May 28 12:27 d\\ntotal 8012\\ndrwxrwxrwx 2 2001 2000    4096 May 28 12:27 .\\ndrwxrwxrwx 3 2002 2000 8175616 May 28 12:27 ..\\n-rwxr-xr-x 1 2001 2000    8168 May 28 12:27 a.out\\n-rw-rw-rw- 1 2001 2000     517 May 28 12:27 main.cpp\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EPara crear y borrar directorios anidados, debemos hacerlo uno por uno. Podemos escribir este fragmento de código con menos líneas, pero aún así tendremos que tener cuidado del orden en el que creamos\u002Fborramos los directorios.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003EEn C&#43;&#43;17 podemos borrar y crear directorios anidados con una sola llamada.\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-cpp\\\" data-lang=\\\"cpp\\\"\u003E\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;experimental\u002Ffilesystem&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E fs = std::experimental::filesystem;\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E std;\\n\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-type\\\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E()\u003C\u002Fspan\u003E\\n\u003C\u002Fspan\u003E{\\n    fs::\u003Cspan class=\\\"hljs-built_in\\\"\u003Ecreate_directories\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fa\u002Fb&quot;\u003C\u002Fspan\u003E);\\n    fs::\u003Cspan class=\\\"hljs-built_in\\\"\u003Ecreate_directories\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fc\u002Fd&quot;\u003C\u002Fspan\u003E);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Esystem\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ls -la sandbox\u002F*&quot;\u003C\u002Fspan\u003E);\\n\\n    cout &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;Were directories removed? &quot;\u003C\u002Fspan\u003E &lt;&lt; fs::\u003Cspan class=\\\"hljs-built_in\\\"\u003Eremove_all\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox&quot;\u003C\u002Fspan\u003E) &lt;&lt; endl;\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Esystem\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;ls -la&quot;\u003C\u002Fspan\u003E);\\n\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E;\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003E\u003Ca href=\\\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F62c2d22fa0e7144c\\\"\u003ECompilar y ejecutar: crear y borrar directorios C&#43;&#43;17\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-bash\\\" data-lang=\\\"bash\\\"\u003Eg++ -std=c++1z -fconcepts -fgnu-tm  -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs &amp;&amp; .\u002Fa.out\\nsandbox\u002Fa:\\ntotal 12\\ndrwxr-xr-x 3 2001 2000 4096 May 28 16:45 .\\ndrwxr-xr-x 4 2001 2000 4096 May 28 16:45 ..\\ndrwxr-xr-x 2 2001 2000 4096 May 28 16:45 b\\n\\nsandbox\u002Fc:\\ntotal 12\\ndrwxr-xr-x 3 2001 2000 4096 May 28 16:45 .\\ndrwxr-xr-x 4 2001 2000 4096 May 28 16:45 ..\\ndrwxr-xr-x 2 2001 2000 4096 May 28 16:45 d\\nWere directories removed? 1\\ntotal 10132\\ndrwxrwxrwx 2 2001 2000    4096 May 28 16:45 .\\ndrwxrwxrwx 3 2002 2000 8175616 May 28 16:45 ..\\n-rwxr-xr-x 1 2001 2000 2170976 May 28 16:45 a.out\\n-rw-rw-rw- 1 2001 2000     393 May 28 16:45 main.cpp\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect1\\\"\u003E\\n\u003Ch2 id=\\\"_ejemplo_completo_iterar_recursivamente_por_directorios\\\"\u003EEjemplo completo: Iterar Recursivamente por Directorios\u003C\u002Fh2\u003E\\n\u003Cdiv class=\\\"sectionbody\\\"\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EVamos a ver un ejemplo algo más completo, consiste en iterar recursivamente a través de directorios, filtrando los ficheros por extension.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect2\\\"\u003E\\n\u003Ch3 id=\\\"_c11\\\"\u003EC&#43;&#43;11\u003C\u002Fh3\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EEste es el ejemplo en C&#43;&#43;11, sin filtrar por extension, para evitar complicarlo:\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003Efilesystem.11.cpp\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-cpp\\\" data-lang=\\\"cpp\\\"\u003E\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;dirent.h&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;cstring&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;fstream&gt;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F std::ofstream\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;vector&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;memory&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;system_error&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-meta\\\"\u003E#\u003Cspan class=\\\"hljs-keyword\\\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-string\\\"\u003E&lt;sys\u002Fstat.h&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n\\n\u003Cspan class=\\\"hljs-keyword\\\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Enamespace\u003C\u002Fspan\u003E std;\\n\\n\u003Cspan class=\\\"hljs-type\\\"\u003Econst\u003C\u002Fspan\u003E string UP_DIR = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;..&quot;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-type\\\"\u003Econst\u003C\u002Fspan\u003E string CURRENT_DIR = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.&quot;\u003C\u002Fspan\u003E;\\n\u003Cspan class=\\\"hljs-type\\\"\u003Econst\u003C\u002Fspan\u003E string SEP = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;\u002F&quot;\u003C\u002Fspan\u003E;\\n\\n\\n\u003Cspan class=\\\"hljs-function\\\"\u003Estring \u003Cspan class=\\\"hljs-title\\\"\u003Epath\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E(initializer_list&lt;string&gt; parts)\u003C\u002Fspan\u003E\\n\u003C\u002Fspan\u003E{\\n    string pathTmp {};\\n    string separator = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;&quot;\u003C\u002Fspan\u003E;\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Efor\u003C\u002Fspan\u003E (\u003Cspan class=\\\"hljs-keyword\\\"\u003Eauto\u003C\u002Fspan\u003E &amp; part: parts)\\n    {\\n        pathTmp.\u003Cspan class=\\\"hljs-built_in\\\"\u003Eappend\u003C\u002Fspan\u003E(separator).\u003Cspan class=\\\"hljs-built_in\\\"\u003Eappend\u003C\u002Fspan\u003E(part);\\n        separator = SEP;\\n    }\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E pathTmp;\\n}\\n\\n\u003Cspan class=\\\"hljs-function\\\"\u003Evector&lt;string&gt; \u003Cspan class=\\\"hljs-title\\\"\u003EgetDirectoryFiles\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E(\u003Cspan class=\\\"hljs-type\\\"\u003Econst\u003C\u002Fspan\u003E string&amp; dir, \u003Cspan class=\\\"hljs-type\\\"\u003Econst\u003C\u002Fspan\u003E vector&lt;string&gt; &amp; extensions)\u003C\u002Fspan\u003E\\n\u003C\u002Fspan\u003E{\\n    vector&lt;string&gt; files;\\n    \u003Cspan class=\\\"hljs-function\\\"\u003Eshared_ptr&lt;DIR&gt; \u003Cspan class=\\\"hljs-title\\\"\u003Edirectory_ptr\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E(opendir(dir.c_str()), [](DIR* dir){ dir &amp;&amp; closedir(dir); })\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E;\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Eif\u003C\u002Fspan\u003E (!directory_ptr)\\n    {\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Ethrow\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-built_in\\\"\u003Esystem_error\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-built_in\\\"\u003Eerror_code\u003C\u002Fspan\u003E(errno, \u003Cspan class=\\\"hljs-built_in\\\"\u003Esystem_category\u003C\u002Fspan\u003E()), \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;Error opening : &quot;\u003C\u002Fspan\u003E + dir);\\n    }\\n\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title class_\\\"\u003Edirent\u003C\u002Fspan\u003E *dirent_ptr;\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ewhile\u003C\u002Fspan\u003E ((dirent_ptr = \u003Cspan class=\\\"hljs-built_in\\\"\u003Ereaddir\u003C\u002Fspan\u003E(directory_ptr.\u003Cspan class=\\\"hljs-built_in\\\"\u003Eget\u003C\u002Fspan\u003E())) != \u003Cspan class=\\\"hljs-literal\\\"\u003Enullptr\u003C\u002Fspan\u003E)\\n    {\\n        \u003Cspan class=\\\"hljs-type\\\"\u003Econst\u003C\u002Fspan\u003E string fileName {dirent_ptr-&gt;d_name};\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Eif\u003C\u002Fspan\u003E (dirent_ptr-&gt;d_type == DT_DIR)\\n        {\\n            \u003Cspan class=\\\"hljs-keyword\\\"\u003Eif\u003C\u002Fspan\u003E (CURRENT_DIR != fileName &amp;&amp; UP_DIR != fileName)\\n            {\\n                \u003Cspan class=\\\"hljs-keyword\\\"\u003Eauto\u003C\u002Fspan\u003E subFiles = \u003Cspan class=\\\"hljs-built_in\\\"\u003EgetDirectoryFiles\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-built_in\\\"\u003Epath\u003C\u002Fspan\u003E({dir, fileName}), extensions);\\n                files.\u003Cspan class=\\\"hljs-built_in\\\"\u003Einsert\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-built_in\\\"\u003Eend\u003C\u002Fspan\u003E(files), \u003Cspan class=\\\"hljs-built_in\\\"\u003Ebegin\u003C\u002Fspan\u003E(subFiles), \u003Cspan class=\\\"hljs-built_in\\\"\u003Eend\u003C\u002Fspan\u003E(subFiles));\\n            }\\n        }\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Eif\u003C\u002Fspan\u003E (dirent_ptr-&gt;d_type == DT_REG)\\n        {\\n            \u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F here we should check also if filename has an extension in extensions vector\u003C\u002Fspan\u003E\\n            files.\u003Cspan class=\\\"hljs-built_in\\\"\u003Epush_back\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-built_in\\\"\u003Epath\u003C\u002Fspan\u003E({dir, fileName}));\\n        }\\n    }\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E files;\\n}\\n\\n\u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-type\\\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-title\\\"\u003Emain\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-params\\\"\u003E()\u003C\u002Fspan\u003E\\n\u003C\u002Fspan\u003E{\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Eauto\u003C\u002Fspan\u003E opt = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Emkdir\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox&quot;\u003C\u002Fspan\u003E, opt);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Emkdir\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fa&quot;\u003C\u002Fspan\u003E, opt);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Emkdir\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fa\u002Fb&quot;\u003C\u002Fspan\u003E, opt);\\n\\n\\tvector&lt;string&gt; e_files = {\\n\\t    \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.rst&quot;\u003C\u002Fspan\u003E,\\n\\t    \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.txt&quot;\u003C\u002Fspan\u003E,\\n\\t    \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fsandbox\u002Fa\u002Ffile2.RST&quot;\u003C\u002Fspan\u003E,\\n\\t    \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fsandbox\u002Ffile3.md&quot;\u003C\u002Fspan\u003E,\\n\\t    \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fsandbox\u002Fwill_be.ignored&quot;\u003C\u002Fspan\u003E\\n\\t};\\n\\n\\t\u003Cspan class=\\\"hljs-comment\\\"\u003E\u002F\u002F create files\u003C\u002Fspan\u003E\\n\\t\u003Cspan class=\\\"hljs-keyword\\\"\u003Efor\u003C\u002Fspan\u003E (\u003Cspan class=\\\"hljs-keyword\\\"\u003Eauto\u003C\u002Fspan\u003E &amp;f: e_files)\\n\\t{\\n\\t\\t\u003Cspan class=\\\"hljs-function\\\"\u003Eofstream \u003Cspan class=\\\"hljs-title\\\"\u003Eof\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-params\\\"\u003E(f, ofstream::out)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E;\\n\\t\\tof &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;test&quot;\u003C\u002Fspan\u003E;\\n\\t}\\n\\n    cout &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;filtered files: &quot;\u003C\u002Fspan\u003E &lt;&lt; endl;\\n\\t\u003Cspan class=\\\"hljs-keyword\\\"\u003Efor\u003C\u002Fspan\u003E (\u003Cspan class=\\\"hljs-keyword\\\"\u003Eauto\u003C\u002Fspan\u003E &amp;f: \u003Cspan class=\\\"hljs-built_in\\\"\u003EgetDirectoryFiles\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.&quot;\u003C\u002Fspan\u003E, {\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.rst&quot;\u003C\u002Fspan\u003E, \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.RST&quot;\u003C\u002Fspan\u003E, \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.md&quot;\u003C\u002Fspan\u003E})){\\n\\t    cout &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;\\\\t&quot;\u003C\u002Fspan\u003E &lt;&lt; f &lt;&lt; endl;\\n\\t}\\n\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-number\\\"\u003E0\u003C\u002Fspan\u003E;\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003E\u003Ca href=\\\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002Faf4228e039a281b3\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003ECompilar y ejecutar el ejemplo C&#43;&#43;11\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-bash\\\" data-lang=\\\"bash\\\"\u003Eg++ -std=c++11 -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs &amp;&amp; .\u002Fa.out\\nfiltered files:\\n\\t.\u002Fmain.cpp\\n\\t.\u002Fsandbox\u002Ffile3.md\\n\\t.\u002Fsandbox\u002Fwill_be.ignored\\n\\t.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.rst\\n\\t.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.txt\\n\\t.\u002Fsandbox\u002Fa\u002Ffile2.RST\\n\\t.\u002Fa.out\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"sect2\\\"\u003E\\n\u003Ch3 id=\\\"_c17\\\"\u003EC&#43;&#43;17\u003C\u002Fh3\u003E\\n\u003Cdiv class=\\\"paragraph\\\"\u003E\\n\u003Cp\u003EEl siguiente ejemplo filtra los ficheros por extension.\u003C\u002Fp\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003Efilesystem.17.cpp\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-bash\\\" data-lang=\\\"bash\\\"\u003E\u003Cspan class=\\\"hljs-comment\\\"\u003E#include &lt;dirent.h&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-comment\\\"\u003E#include &lt;cstring&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-comment\\\"\u003E#include &lt;iostream&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-comment\\\"\u003E#include &lt;fstream&gt; \u002F\u002F std::ofstream\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-comment\\\"\u003E#include &lt;vector&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-comment\\\"\u003E#include &lt;memory&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-comment\\\"\u003E#include &lt;system_error&gt;\u003C\u002Fspan\u003E\\n\u003Cspan class=\\\"hljs-comment\\\"\u003E#include &lt;sys\u002Fstat.h&gt;\u003C\u002Fspan\u003E\\n\\nusing namespace std;\\n\\nconst string UP_DIR = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;..&quot;\u003C\u002Fspan\u003E;\\nconst string CURRENT_DIR = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.&quot;\u003C\u002Fspan\u003E;\\nconst string SEP = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;\u002F&quot;\u003C\u002Fspan\u003E;\\n\\n\\nstring path(initializer_list&lt;string&gt; parts)\\n{\\n    string pathTmp {};\\n    string separator = \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;&quot;\u003C\u002Fspan\u003E;\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Efor\u003C\u002Fspan\u003E (auto &amp; part: parts)\\n    {\\n        pathTmp.append(separator).append(part);\\n        separator = SEP;\\n    }\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Ereturn\u003C\u002Fspan\u003E pathTmp;\\n}\\n\\nvector&lt;string&gt; getDirectoryFiles(const string&amp; \u003Cspan class=\\\"hljs-built_in\\\"\u003Edir\u003C\u002Fspan\u003E, const vector&lt;string&gt; &amp; extensions)\\n{\\n    vector&lt;string&gt; files;\\n    shared_ptr&lt;DIR&gt; directory_ptr(opendir(dir.c_str()), [](DIR* \u003Cspan class=\\\"hljs-built_in\\\"\u003Edir\u003C\u002Fspan\u003E){ \u003Cspan class=\\\"hljs-built_in\\\"\u003Edir\u003C\u002Fspan\u003E &amp;&amp; closedir(\u003Cspan class=\\\"hljs-built_in\\\"\u003Edir\u003C\u002Fspan\u003E); });\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Eif\u003C\u002Fspan\u003E (!directory_ptr)\\n    {\\n        throw system_error(error_code(errno, system_category()), \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;Error opening : &quot;\u003C\u002Fspan\u003E + \u003Cspan class=\\\"hljs-built_in\\\"\u003Edir\u003C\u002Fspan\u003E);\\n    }\\n\\n    struct dirent *dirent_ptr;\\n    \u003Cspan class=\\\"hljs-keyword\\\"\u003Ewhile\u003C\u002Fspan\u003E ((dirent_ptr = readdir(directory_ptr.get())) != nullptr)\\n    {\\n        const string fileName {dirent_ptr-&gt;d_name};\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Eif\u003C\u002Fspan\u003E (dirent_ptr-&gt;d_type == DT_DIR)\\n        {\\n            \u003Cspan class=\\\"hljs-keyword\\\"\u003Eif\u003C\u002Fspan\u003E (CURRENT_DIR != fileName &amp;&amp; UP_DIR != fileName)\\n            {\\n                auto subFiles = getDirectoryFiles(path({\u003Cspan class=\\\"hljs-built_in\\\"\u003Edir\u003C\u002Fspan\u003E, fileName}), extensions);\\n                files.insert(end(files), begin(subFiles), end(subFiles));\\n            }\\n        }\\n        \u003Cspan class=\\\"hljs-keyword\\\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-keyword\\\"\u003Eif\u003C\u002Fspan\u003E (dirent_ptr-&gt;d_type == DT_REG)\\n        {\\n            \u002F\u002F here we should check also \u003Cspan class=\\\"hljs-keyword\\\"\u003Eif\u003C\u002Fspan\u003E filename has an extension \u003Cspan class=\\\"hljs-keyword\\\"\u003Ein\u003C\u002Fspan\u003E extensions vector\\n            files.push_back(path({\u003Cspan class=\\\"hljs-built_in\\\"\u003Edir\u003C\u002Fspan\u003E, fileName}));\\n        }\\n    }\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Ereturn\u003C\u002Fspan\u003E files;\\n}\\n\\nint \u003Cspan class=\\\"hljs-function\\\"\u003E\u003Cspan class=\\\"hljs-title\\\"\u003Emain\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E ()\\n{\\n    auto opt = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Emkdir\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox&quot;\u003C\u002Fspan\u003E, opt);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Emkdir\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fa&quot;\u003C\u002Fspan\u003E, opt);\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Emkdir\u003C\u002Fspan\u003E(\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;sandbox\u002Fa\u002Fb&quot;\u003C\u002Fspan\u003E, opt);\\n\\n\\tvector&lt;string&gt; e_files = {\\n\\t    \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.rst&quot;\u003C\u002Fspan\u003E,\\n\\t    \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.txt&quot;\u003C\u002Fspan\u003E,\\n\\t    \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fsandbox\u002Fa\u002Ffile2.RST&quot;\u003C\u002Fspan\u003E,\\n\\t    \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fsandbox\u002Ffile3.md&quot;\u003C\u002Fspan\u003E,\\n\\t    \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;.\u002Fsandbox\u002Fwill_be.ignored&quot;\u003C\u002Fspan\u003E\\n\\t};\\n\\n\\t\u002F\u002F create files\\n\\t\u003Cspan class=\\\"hljs-keyword\\\"\u003Efor\u003C\u002Fspan\u003E (auto &amp;f: e_files)\\n\\t{\\n\\t\\tofstream of(f, ofstream::out);\\n\\t\\tof &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;test&quot;\u003C\u002Fspan\u003E;\\n\\t}\\n\\n    cout &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003E&quot;filtered files: &quot;\u003C\u002Fspan\u003E &lt;&lt; \u003Cspan class=\\\"hljs-string\\\"\u003Eendl;\\n\\tfor (auto &amp;f: getDirectoryFiles(&quot;.&quot;, {&quot;.rst&quot;, &quot;.RST&quot;, &quot;.md&quot;})){\\n\\t    cout &lt;&lt; &quot;\\\\t&quot; &lt;&lt; f &lt;&lt; endl\u003C\u002Fspan\u003E;\\n\\t}\\n\\n    \u003Cspan class=\\\"hljs-built_in\\\"\u003Ereturn\u003C\u002Fspan\u003E 0;\\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"listingblock\\\"\u003E\\n\u003Cdiv class=\\\"title\\\"\u003E\u003Ca href=\\\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002Faf4228e039a281b3\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\u003ECompilar y ejecutar el ejemplo C&#43;&#43;17\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E\\n\u003Cdiv class=\\\"content\\\"\u003E\\n\u003Cpre class=\\\"highlight\\\"\u003E\u003Ccode class=\\\"language-bash\\\" data-lang=\\\"bash\\\"\u003Eg++ -std=c++11 -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs &amp;&amp; .\u002Fa.out\\nfiltered files:\\n\\t.\u002Fmain.cpp\\n\\t.\u002Fsandbox\u002Ffile3.md\\n\\t.\u002Fsandbox\u002Fwill_be.ignored\\n\\t.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.rst\\n\\t.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.txt\\n\\t.\u002Fsandbox\u002Fa\u002Ffile2.RST\\n\\t.\u002Fa.out\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\\n\u003C\u002Fdiv\u003E\",\"props\":{\"title\":\"Sistema de Ficheros en C++17\",\"created\":1495954800000,\"modified\":1495954800000,\"filepath\":\"\u002Fhome\u002Fcarlos\u002Fworkspace\u002Fpers\u002Fblablablog\u002Fposts\u002Frecursive-directory-iterator.es.adoc\",\"dirpath\":\"\u002Fhome\u002Fcarlos\u002Fworkspace\u002Fpers\u002Fblablablog\u002Fposts\",\"keywords\":[\"C++\",\"C++11\",\"C++17\",\"IO\",\"Filesystem\"],\"lang\":\"es\",\"otherLangs\":[\"en\"],\"slug\":\"recursive-directory-iterator\",\"summary\":\"Vamos a analizar con un ejemplo la forma de recorrer directorios de manera recursiva a partir de C++17\",\"author\":\"Carlos\",\"path\":\"\u002Flangs\u002Fes\u002Fposts\u002Frecursive-directory-iterator\"}}"}</script></div>
	</body>
</html>
