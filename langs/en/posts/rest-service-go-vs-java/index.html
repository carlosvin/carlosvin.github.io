<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../../../favicon.png" />
		<script
			async
			src="https://cdn.jsdelivr.net/npm/@statsig/js-client@1/build/statsig-js-client+session-replay+web-analytics.min.js?apikey=client-HFdLXhoqeAqLJGsEO0FuGCieE2nSFNxpPp2ziw3ZPYK"
		></script>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="/app.css" />
		
		<link href="../../../../_app/immutable/assets/2.BkyfcBaI.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/IconLink.2qtseSjK.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/Social.CTdkLZ_f.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/8.CqjetrkP.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/Details.C_CQQSd4.css" rel="stylesheet">
		<link rel="modulepreload" href="../../../../_app/immutable/entry/start.Dg2WxSzj.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/entry.BXLEF9h2.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/runtime.3FY_vtsg.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/index-client.B1gllz1k.js">
		<link rel="modulepreload" href="../../../../_app/immutable/entry/app.DiecyXnG.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/render.CY392Wed.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/svelte-head.CPyUmzYt.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/disclose-version.B5WKJUOZ.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/3.CAhkvHRE.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/props.DBxtFyAD.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/0.hWIgE5sI.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/2.Xa-J0HUn.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/misc.8zLmL9bg.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/lifecycle.4u1WjEOg.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/IconLink.k-vueeZX.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/Social.D6bLOiwf.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/8.DMK56GIg.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/url.QYYjpySO.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/Details.C57OQ6iz.js"><!--[--><meta property="og:title" content="Golang over Java for REST services"> <meta name="date.created" content="2020-11-01T00:00:00.000Z"> <meta name="date.updated" content="2020-11-01T00:00:00.000Z"> <meta name="description" content="Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang"> <meta property="og:description" content="Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang"> <meta property="og:type" content="article"> <meta property="og:url" content="http://sveltekit-prerender/langs/en/posts/rest-service-go-vs-java/"> <meta property="og:locale" content="en"> <meta property="og:locale:alternate" content="es"> <meta property="og:image"> <meta property="og:article:tag" content="REST,API,Web Services,Java,Golang,Gingonic,Spring"> <!--[--><!--[--><link rel="alternate" hreflang="es" href="/langs/es/posts/rest-service-go-vs-java"><!--]--><!--]--> <!----><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"Webpage","@id":"https://google.com/article"},"headline":"Golang over Java for REST services","alternativeHeadline":"Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang","description":"Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang","datePublished":"2020-11-01T00:00:00.000Z","dateModified":"2020-11-01T00:00:00.000Z","keywords":["REST","API","Web Services","Java","Golang","Gingonic","Spring"],"author":{"@type":"Person","name":"Carlos Martin Sanchez"},"publisher":{"@type":"Person","name":"Carlos Martin Sanchez"}}</script><!----><!--]--><title>Golang over Java for REST services</title>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><!--[--><!----><nav class="svelte-pyuk6k"><ul class="svelte-pyuk6k"><li class="svelte-2j41u7"><a aria-current="page" href="/langs/en/posts" rel="prefetch" class="svelte-2j41u7"><!----><img class="logo svelte-pyuk6k" src="/favicon.25px.png" alt="Carlos Say's Bla Bla logo"><!----></a></li><!----></ul> <ul class="closed svelte-pyuk6k"><li class="svelte-2j41u7"><a aria-current="page" href="/langs/en/posts" rel="prefetch" class="svelte-2j41u7"><!----><span class="siteName">Carlos Say's Bla Bla</span><!----></a></li><!----> <li class="svelte-2j41u7"><a href="/langs/en/categories" rel="prefetch" class="svelte-2j41u7"><!----><!---->Categories<!----></a></li><!----> <li class="svelte-2j41u7"><a href="/langs/en/about" rel="prefetch" class="svelte-2j41u7"><!----><!---->About me<!----></a></li><!----></ul> <!--[--><!----><div class="h svelte-geb0ta"><!----><a href="/langs/en/feed.xml" target="_blank" class="icon rss svelte-blgowr" title="Subscribe to the feed Carlos Say's Bla Bla" rel="noopener" aria-label="Subscribe to the feed Carlos Say's Bla Bla"><!----><!----></a><!----> <a href="https://github.com/carlosvin" target="_blank" class="icon github svelte-blgowr" title="Find me at github" rel="noopener" aria-label="Find me at github"><!----><!----></a><!----> <a href="https://stackoverflow.com/users/1421059/carlosvin" target="_blank" class="icon stackoverflow svelte-blgowr" title="Find me at stackoverflow" rel="noopener" aria-label="Find me at stackoverflow"><!----><!----></a><!----></div><!----><!--]--> <button type="button" class="svelte-pyuk6k">â‰¡</button></nav><!----> <main class="svelte-qhq9sm"><!----><!----><header class="svelte-1ikjkmw"><h1 class="svelte-1ikjkmw">Golang over Java for REST services <span class="share svelte-1ikjkmw"><!--[!--><a href="https://twitter.com/intent/tweet?url=/langs/en/posts/rest-service-go-vs-java&amp;text=Golang over Java for REST services:&amp;nbsp;Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang&amp;hashtags=REST,API,Web Services,Java,Golang,Gingonic,Spring" target="_blank" class="icon twitter svelte-blgowr" title="Share &quot;Golang over Java for REST services&quot;" rel="noopener" aria-label="Share &quot;Golang over Java for REST services&quot;"><!----><!----></a><!--]--><!----></span></h1> <p class="summary svelte-1ikjkmw">Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang</p> <div class="subtitle svelte-9uod0d"><span class="date">11/1/2020</span> <span class="langs"><!--[--><ul class="otherLangs svelte-1numgf3"><!--[--><!--[--><li class="svelte-1numgf3"><a rel="alternate" hreflang="es" href="/langs/es/posts/rest-service-go-vs-java" title="Check the post in other language: es">es</a></li><!--]--><!--]--></ul><!--]--><!----></span> <!--[--><span class="tags svelte-wqh6y7"><!--[--><a href="/langs/en/categories/rest" title="REST" class="svelte-1g7d2s3">REST</a><a href="/langs/en/categories/api" title="API" class="svelte-1g7d2s3">API</a><a href="/langs/en/categories/web-services" title="Web Services" class="svelte-1g7d2s3">Web Services</a><a href="/langs/en/categories/java" title="Java" class="svelte-1g7d2s3">Java</a><a href="/langs/en/categories/golang" title="Golang" class="svelte-1g7d2s3">Golang</a><a href="/langs/en/categories/gingonic" title="Gingonic" class="svelte-1g7d2s3">Gingonic</a><a href="/langs/en/categories/spring" title="Spring" class="svelte-1g7d2s3">Spring</a><!--]--></span><!--]--><!----></div><!----></header> <div class="postContent"><!----><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_actual_project_examples">Actual project examples</a></li>
<li><a href="#_the_ecosystems">The Ecosystems</a></li>
<li><a href="#_routing">Routing</a>
<ul class="sectlevel2">
<li><a href="#_go_without_framework">Go - Without framework</a></li>
<li><a href="#_go_gin_framework">Go - Gin Framework</a></li>
<li><a href="#_java_spring_io">Java + Spring.io</a></li>
</ul>
</li>
<li><a href="#_validations">Validations</a>
<ul class="sectlevel2">
<li><a href="#_go_gin_framework_2">Go - Gin Framework</a></li>
<li><a href="#_java_spring_io_2">Java + Spring.io</a></li>
<li><a href="#_filtering_and_middleware">Filtering and Middleware</a></li>
</ul>
</li>
<li><a href="#_dependency_injection_ioc">Dependency injection / IoC</a>
<ul class="sectlevel2">
<li><a href="#_spring_ioc">Spring IoC</a></li>
<li><a href="#_go">Go</a></li>
</ul>
</li>
<li><a href="#_testing">Testing</a>
<ul class="sectlevel2">
<li><a href="#_unit_tests">Unit tests</a></li>
<li><a href="#_integration_tests">Integration tests</a></li>
</ul>
</li>
<li><a href="#_performance">Performance</a>
<ul class="sectlevel2">
<li><a href="#_memory">Memory</a></li>
<li><a href="#_speed">Speed</a></li>
</ul>
</li>
<li><a href="#_conclusions">Conclusions</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Lately I&#8217;ve been working with two different technology stacks almost in parallel, in both cases we were using them to develop <a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener">REST</a> services.</p>
</div>
<div class="paragraph">
<p>During this time I&#8217;ve come up with some conclusions and opinions I&#8217;d like to share.</p>
</div>
<div class="paragraph">
<p>A disclaimer, few months ago, I had several years of experience with Java and 0 days of professional experience with Golang.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_actual_project_examples">Actual project examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Few months ago I created <a href="https://covid-rest.appspot.com/docs" target="_blank" rel="noopener">an API to extract and structure COVID-19 data</a> from <a href="https://www.ecdc.europa.eu/en/publications-data/download-todays-data-geographic-distribution-covid-19-cases-worldwide" target="_blank" rel="noopener">ECDC website</a>. I developed it in <a href="https://spring.io/guides/gs/rest-service" target="_blank" rel="noopener">Spring Boot (REST)</a>.</p>
</div>
<div class="paragraph">
<p>Few months later I had the luck of work on my first professional project in <a href="https://golang.org" target="_blank" rel="noopener">Go</a> and I decided to create a port of <a href="https://covid-rest.appspot.com/docs" target="_blank" rel="noopener">the API to extract COVID-19 data</a> in <a href="https://golang.org" target="_blank" rel="noopener">Go</a>, just for learning and for fun.</p>
</div>
<div class="paragraph">
<p>Now we have two REST services, almost functionally identical, but developed in two different tech stacks, so we can easily compare some relevant aspects of both.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Source code for the 2 REST services implementations</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="https://www.java.com" target="_blank" rel="noopener">Java</a> + <a href="https://spring.io/guides/gs/rest-service" target="_blank" rel="noopener">Spring Boot (REST)</a></th>
<th class="tableblock halign-left valign-top"><a href="https://golang.org" target="_blank" rel="noopener">Go</a> + <a href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener">Gin framework</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/carlosvin/covid-rest" class="bare">https://github.com/carlosvin/covid-rest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/carlosvin/covid-rest-go" class="bare">https://github.com/carlosvin/covid-rest-go</a></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
I actually created that <a href="https://covid-rest.appspot.com/docs">COVID-19 data REST API</a> to be the data source for the <a href="https://covid-stats-pwa.netlify.app" target="_blank" rel="noopener">COVID19-Stats App</a>, a <a href="https://web.dev/progressive-web-apps" target="_blank" rel="noopener">PWA</a> built with <a href="https://svelte.dev" target="_blank" rel="noopener">Svelte</a>, but that&#8217;s another topic.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_ecosystems">The Ecosystems</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to create a <a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener">REST</a> service just in plain Java you will have extra work to do, in Golang a little bit less. That&#8217;s why we use framework, because they&#8217;ve already solved many common problems for us.</p>
</div>
<div class="paragraph">
<p>For this comparison I am going to use <a href="https://spring.io/guides/gs/rest-service" target="_blank" rel="noopener">Spring Boot (REST)</a> for <a href="https://www.java.com" target="_blank" rel="noopener">Java</a> and <a href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener">Gin framework</a> for <a href="https://golang.org" target="_blank" rel="noopener">Go</a>, but in both languages there are a lot of production ready nice options.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_routing">Routing</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_go_without_framework">Go - Without framework</h3>
<div class="paragraph">
<p>Go uses the concept of <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="_blank" rel="noopener">HTTP</a> multiplexer or router. You can specify routes using patterns and link those routes to handlers. The router will decide which handler has to execute the request based on the path received.</p>
</div>
<div class="listingblock">
<div class="title">router.go file</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">&quot;log&quot;</span>
	<span class="hljs-string">&quot;net/http&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	router := http.NewServeMux()
	router.Handle(<span class="hljs-string">&quot;/redirect&quot;</span>, http.RedirectHandler(<span class="hljs-string">&quot;https://carlosvin.github.io/&quot;</span>, <span class="hljs-number">307</span>))
	router.HandleFunc(<span class="hljs-string">&quot;/hello&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {
		w.Write([]<span class="hljs-type">byte</span>(<span class="hljs-string">&quot;Hello world!&quot;</span>))
	})
	log.Println(<span class="hljs-string">&quot;Listening...&quot;</span>)
	http.ListenAndServe(<span class="hljs-string">&quot;:3000&quot;</span>, router)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Source code is already quite simple, but there might more complex routing use cases.</p>
</div>
</div>
<div class="sect2">
<h3 id="_go_gin_framework">Go - Gin Framework</h3>
<div class="paragraph">
<p>Happily there are frameworks that help us to keep our base code simple, for example when we need to extract path parameters, which is quite common use case in <a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener">REST</a> <a href="https://en.wikipedia.org/wiki/Application_programming_interface" target="_blank" rel="noopener">API</a>s, we can use a routing library, I&#8217;ve used <a href="https://github.com/gorilla/mux" target="_blank" rel="noopener">Gorilla Mux</a> and <a href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener">Gin framework</a> and I liked more <a href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener">Gin framework</a>.</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/carlosvin/covid-rest-go/blob/master/main.go">Full example</a></div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go"><span class="hljs-keyword">import</span> (
	<span class="hljs-string">&quot;github.com/carlosvin/covid-rest-go/handlers&quot;</span>
	<span class="hljs-string">&quot;github.com/carlosvin/covid-rest-go/readers&quot;</span>
	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {

	<span class="hljs-comment">// ...</span>

	r := gin.Default()
	r.GET(<span class="hljs-string">&quot;/countries&quot;</span>, router.Countries)
	r.GET(<span class="hljs-string">&quot;/countries/:code&quot;</span>, router.Country)
	r.GET(<span class="hljs-string">&quot;/countries/:code/dates&quot;</span>, router.CountryDates)
	r.GET(<span class="hljs-string">&quot;/countries/:code/dates/:date&quot;</span>, router.CountryDate)
	r.Run()
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/carlosvin/covid-rest-go/blob/master/handlers/countries.go">And this is a handler example</a>, the router.Countries one</div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *routerImpl)</span></span> Countries(c *gin.Context) {
	c.JSON(<span class="hljs-number">200</span>, r.countries())
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_java_spring_io">Java + Spring.io</h3>
<div class="paragraph">
<p>The <a href="https://spring.io/guides/gs/rest-service" target="_blank" rel="noopener">Spring Boot (REST)</a> is based on the concept of Controller, it is implemented using annotations on the class and methods.</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/carlosvin/covid-rest/blob/master/src/main/java/com/carlosvin/covid/controllers/CountriesController.java" target="_blank" rel="noopener">CountriesController.java</a></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-meta">@Validated</span>
<span class="hljs-meta">@RestController</span> <b class="conum">(1)</b>
<span class="hljs-meta">@RequestMapping(&quot;/countries&quot;)</span> <b class="conum">(2)</b>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CountriesController</span> {

	<span class="hljs-comment">// Some source code is not shown, you can find the complete example in the repository</span>

	<span class="hljs-meta">@GetMapping(&quot;/{country}/dates/{isoDateStr}&quot;)</span>  <b class="conum">(3)</b>
	<span class="hljs-keyword">public</span> DateStatsDto <span class="hljs-title function_">getDateByCountry</span><span class="hljs-params">(<span class="hljs-meta">@Size(min = 2, max = 2)</span> <span class="hljs-meta">@PathVariable</span> String country, <span class="hljs-meta">@Size(min = 10, max = 20)</span> <span class="hljs-meta">@PathVariable</span> String isoDateStr)</span> <span class="hljs-keyword">throws</span> NotFoundException {
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DateStatsDto</span>(service.getDate(country, DateUtils.convert(isoDateStr)));
	}
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Declare the class as Controller so it is registered in <a href="https://spring.io/guides/gs/rest-service" target="_blank" rel="noopener">Spring Boot (REST)</a></p>
</li>
<li>
<p>Controller base path definition</p>
</li>
<li>
<p>Handler definition for a nested path under the main controller path. <a href="https://spring.io/guides/gs/rest-service" target="_blank" rel="noopener">Spring Boot (REST)</a> makes easy to extract path variables defined in the route, you can directly use them as method arguments.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validations">Validations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_go_gin_framework_2">Go - Gin Framework</h3>
<div class="paragraph">
<p><a href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener">Gin framework</a> uses an external validation package <a href="https://godoc.org/github.com/go-playground/validator">validator</a>, besides that it is fully integrated with <a href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener">Gin framework</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go"><span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
	Name  <span class="hljs-type">string</span> <span class="hljs-string">`validate:&quot;required&quot;`</span> <b class="conum">(1)</b>
	Email <span class="hljs-type">string</span> <span class="hljs-string">`validate:&quot;required,email&quot;`</span>
}

err := validate.Struct(user) <b class="conum">(2)</b>
validationErrors := err.(validator.ValidationErrors) <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The validation system uses <a href="https://golang.org" target="_blank" rel="noopener">Go</a> tags, it is not the same as <a href="https://www.java.com" target="_blank" rel="noopener">Java</a> annotations, but in the validation case, it works in pretty same way as annotations.</p>
</li>
<li>
<p>Executes the validation explicitly</p>
</li>
<li>
<p>Extracts validation errors</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_java_spring_io_2">Java + Spring.io</h3>
<div class="paragraph">
<p>You can enable the validation in the controller level, then in the handlers you can also specify the type of validation. Let&#8217;s explain it using the previous example:</p>
</div>
<div class="listingblock">
<div class="title"><a href="https://github.com/carlosvin/covid-rest/blob/master/src/main/java/com/carlosvin/covid/controllers/CountriesController.java" target="_blank" rel="noopener">CountriesController.java</a></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-meta">@Validated</span> <b class="conum">(1)</b>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping(&quot;/countries&quot;)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CountriesController</span> {

	<span class="hljs-comment">// Some source code is not shown, you can find the complete example in the repository</span>

	<span class="hljs-meta">@GetMapping(&quot;/{country}/dates/{isoDateStr}&quot;)</span>
	<span class="hljs-keyword">public</span> DateStatsDto <span class="hljs-title function_">getDateByCountry</span><span class="hljs-params">(
		<span class="hljs-meta">@Size(min = 2, max = 2)</span> <span class="hljs-meta">@PathVariable</span> String country, <b class="conum">(2)</b>
		<span class="hljs-meta">@Size(min = 10, max = 20)</span> <span class="hljs-meta">@PathVariable</span> String isoDateStr)</span> <span class="hljs-keyword">throws</span> NotFoundException {
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DateStatsDto</span>(service.getDate(country, DateUtils.convert(isoDateStr)));
	}
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Declare the class as Controller so it is registered in <a href="https://spring.io/guides/gs/rest-service" target="_blank" rel="noopener">Spring Boot (REST)</a></p>
</li>
<li>
<p><code>@Size</code> validates that the input argument country has 2 characters</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The validation system is more powerful than you can see in this code snippet, for example adding <code>@Valid</code> annotation opens the door to complex types validation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_filtering_and_middleware">Filtering and Middleware</h3>
<div class="paragraph">
<p>Different approaches, pretty much the same end result.</p>
</div>
<div class="paragraph">
<p>I will elaborate this topic in following days.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependency_injection_ioc">Dependency injection / IoC</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_spring_ioc"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators" target="_blank" rel="noopener">Spring IoC</a></h3>
<div class="paragraph">
<p><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators" target="_blank" rel="noopener">Spring IoC</a> is the most complete and powerful systems I&#8217;ve ever used for <a href="https://en.wikipedia.org/wiki/Inversion_of_control" target="_blank" rel="noopener">IoC</a>, actually, the first time I used Spring professionally was just to deal with <a href="https://en.wikipedia.org/wiki/Inversion_of_control" target="_blank" rel="noopener">IoC</a>. It supports XML configuration files or <a href="https://www.java.com" target="_blank" rel="noopener">Java</a> annotations, I like annotations more, here a simple example from <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators" target="_blank" rel="noopener">Spring IoC</a> documentation:</p>
</div>
<div class="listingblock">
<div class="title">Spring IoC example</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JpaMovieFinder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MovieFinder</span> { <b class="conum">(1)</b>
    <span class="hljs-comment">// implementation elided for clarity</span>
}

<span class="hljs-comment">//</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleMovieLister</span> {

    <span class="hljs-keyword">private</span> MovieFinder movieFinder;

    <span class="hljs-meta">@Autowired</span> <b class="conum">(2)</b>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMovieFinder</span><span class="hljs-params">(MovieFinder movieFinder)</span> {
        <span class="hljs-built_in">this</span>.movieFinder = movieFinder;
    }

    <span class="hljs-comment">// ...</span>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>JpaMovieFinder</code> is instantiated by <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators" target="_blank" rel="noopener">Spring IoC</a></p>
</li>
<li>
<p>With <code>@Autowired</code> annotation <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators" target="_blank" rel="noopener">Spring IoC</a> knows that has to inject <code>movieFinder</code> argument. It should be a class implementing <code>MovieFinder</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_go">Go</h3>
<div class="paragraph">
<p>Neither <a href="https://golang.org" target="_blank" rel="noopener">Go</a> nor <a href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener">Gin framework</a> has any <a href="https://en.wikipedia.org/wiki/Inversion_of_control" target="_blank" rel="noopener">IoC</a> solution, but you can still apply <a href="https://en.wikipedia.org/wiki/Dependency_injection" target="_blank" rel="noopener">Dependency Injection</a> technique to decouple your components and improve the testability of your system.</p>
</div>
<div class="listingblock">
<div class="title">Dependency injection simple example in <a href="https://golang.org" target="_blank" rel="noopener">Go</a></div>
<div class="content">
<pre class="highlight"><code class="language-go" data-lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span>

<span class="hljs-comment">// Greeter interface to greet the caller</span>
<span class="hljs-keyword">type</span> Greeter <span class="hljs-keyword">interface</span> {
	greet()
}

<span class="hljs-keyword">type</span> greeterHello <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(g *greeterHello)</span></span> greet() { <b class="conum">(3)</b>
	fmt.Println(<span class="hljs-string">&quot;Hello!&quot;</span>)
}

<span class="hljs-keyword">type</span> greeterHi <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(g *greeterHi)</span></span> greet() { <b class="conum">(4)</b>
	fmt.Println(<span class="hljs-string">&quot;Hi!&quot;</span>)
}

<span class="hljs-comment">// App Application representation</span>
<span class="hljs-keyword">type</span> App <span class="hljs-keyword">struct</span> {
	greeters []Greeter <b class="conum">(1)</b>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(app *App)</span></span> startup() {
	<span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> app.greeters {
		v.greet()
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	greeters := []Greeter{ <b class="conum">(2)</b>
		&amp;greeterHello{},
		&amp;greeterHi{},
		&amp;greeterHello{}}

	app := &amp;App{greeters}

	app.startup()
}

<span class="hljs-comment">/*
&lt;1&gt; `App` accepts an array of `Greeter`
&lt;2&gt; During `App` instantiation we pass different implementations of `Greeter`
&lt;3&gt; Greeter implementation that prints *Hello!*
&lt;4&gt; Greeter implementation that prints *Hi!*
*/</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is more verbose, but there is an advantage, there is nothing hidden, everything is explicit and you have full control of instantiation order.</p>
</div>
<div class="paragraph">
<p>As soon as you use <a href="https://en.wikipedia.org/wiki/Dependency_injection" target="_blank" rel="noopener">Dependency Injection</a>, I don&#8217;t have any strong opinion about using <a href="https://en.wikipedia.org/wiki/Inversion_of_control" target="_blank" rel="noopener">IoC</a> system or doing <a href="https://en.wikipedia.org/wiki/Dependency_injection" target="_blank" rel="noopener">Dependency Injection</a> manually.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing">Testing</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_unit_tests">Unit tests</h3>
<div class="paragraph">
<p>For unit tests there are no big differences.</p>
</div>
<div class="paragraph">
<p><a href="https://golang.org" target="_blank" rel="noopener">Go</a> comes with a standard <a href="https://golang.org/pkg/testing/" target="_blank" rel="noopener">library for testing and benchmarking</a>.</p>
</div>
<div class="paragraph">
<p>For <a href="https://www.java.com" target="_blank" rel="noopener">Java</a> there are many well-known unit testing frameworks, but Spring already has quite big support for <a href="https://docs.spring.io/spring-batch/docs/current/reference/html/testing.html" target="_blank" rel="noopener">unit testing</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_integration_tests">Integration tests</h3>
<div class="sect3">
<h4 id="_go_2">Go</h4>
<div class="paragraph">
<p>There are no support for Integration Tests in <a href="https://golang.org" target="_blank" rel="noopener">Go</a>, you will have to implement everything by yourself, although it is not difficult, <a href="https://kpat.io/2019/06/testing-with-gin/" target="_blank" rel="noopener">here you can find a simple example</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_spring">Spring</h4>
<div class="paragraph">
<p>On the other hand, <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html" target="_bank">Spring has a great testing support</a>.</p>
</div>
<div class="paragraph">
<p>To write integration tests for <a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener">REST</a> services, <a href="https://spring.io/guides/gs/testing-web/" target="_blank" rel="noopener">MockMvc</a> is really convenient.</p>
</div>
<div class="paragraph">
<p>I&#8217;ve used <a href="https://github.com/carlosvin/covid-rest/blob/master/src/test/java/com/carlosvin/covid/CountriesControllerTest.java" target="_blank" rel="noopener">MockMvc in the covid-rest project</a>.</p>
</div>
<div class="listingblock">
<div class="title">MockMvc code snippet from <a href="https://github.com/carlosvin/covid-rest/blob/master/src/test/java/com/carlosvin/covid/CountriesControllerTest.java" target="_blank" rel="noopener">CountriesControllerTest.java</a></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">	<span class="hljs-meta">@Autowired</span>
	<span class="hljs-keyword">private</span> MockMvc mockMvc; <b class="conum">(1)</b>

	<span class="hljs-meta">@Test</span>
	<span class="hljs-keyword">void</span> <span class="hljs-title function_">getCountries</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
		<span class="hljs-built_in">this</span>.mockMvc.perform(get(<span class="hljs-string">&quot;/countries&quot;</span>)) <b class="conum">(2)</b>
				.andDo(print()).andExpect(status().isOk()) <b class="conum">(3)</b>
				.andExpect(jsonPath(<span class="hljs-string">&quot;$.*&quot;</span>, hasSize(<span class="hljs-number">144</span>)))
				.andExpect(jsonPath(<span class="hljs-string">&quot;$.ES.confirmedCases&quot;</span>,comparesEqualTo(<span class="hljs-number">9191</span>)))
				.andExpect(jsonPath(<span class="hljs-string">&quot;$.ES.deathsNumber&quot;</span>, comparesEqualTo(<span class="hljs-number">309</span>)))
				.andExpect(jsonPath(<span class="hljs-string">&quot;$.ES.countryCode&quot;</span>, comparesEqualTo(<span class="hljs-string">&quot;ES&quot;</span>)))
				.andExpect(jsonPath(<span class="hljs-string">&quot;$.ES.countryName&quot;</span>, comparesEqualTo(<span class="hljs-string">&quot;Spain&quot;</span>)))
				.andExpect(jsonPath(<span class="hljs-string">&quot;$.ES.path&quot;</span>, comparesEqualTo(<span class="hljs-string">&quot;/countries/ES&quot;</span>)))
				.andExpect(jsonPath(<span class="hljs-string">&quot;$.VC.countryName&quot;</span>, comparesEqualTo(<span class="hljs-string">&quot;Saint Vincent and the Grenadines&quot;</span>)))
				.andDo(document(<span class="hljs-string">&quot;countries/list&quot;</span>, preprocessResponse(prettyPrint(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">CropPreprocessor</span>())));
	}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The Spring test runner injects the MockMvc object.</p>
</li>
<li>
<p>We use MockMvc to call to the endpoint we have created.</p>
</li>
<li>
<p>Then we validate the endpoint response: status code and body.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_performance">Performance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Besides the languages specific differences, the main difference is the performance. The CPU consumption in <a href="https://golang.org" target="_blank" rel="noopener">Go</a> is smaller, but about the memory the difference is really significant, <strong>the order of 30 times smaller fingerprint</strong>.</p>
</div>
<div class="sect2">
<h3 id="_memory">Memory</h3>
<div class="paragraph">
<p>Here I&#8217;ve found a surprising difference, just by checking the memory consumption in my laptop.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener">Gin framework</a> <code>15.6MB</code></p>
</li>
<li>
<p><a href="https://spring.io/guides/gs/rest-service" target="_blank" rel="noopener">Spring Boot (REST)</a> <code>465.9MB</code></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts/rest-service-go-vs-java/memory-consumption-go-java.png" alt="Memory consumption">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_speed">Speed</h3>
<div class="paragraph">
<p>Following the <a href="https://www.techempower.com/benchmarks/" target="_blank" rel="noopener">TechEmpower benchmarks</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener">Gin framework</a> is in 193 position, 9.9%.</p>
</li>
<li>
<p><a href="https://spring.io/guides/gs/rest-service" target="_blank" rel="noopener">Spring Boot (REST)</a> is in 284 position, 4%.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Following the <a href="https://github.com/the-benchmarker/web-frameworks" target="_blank" rel="noopener">The Benchmarker results</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener">Gin framework</a>: position 33.</p>
</li>
<li>
<p><a href="https://spring.io/guides/gs/rest-service" target="_blank" rel="noopener">Spring Boot (REST)</a>: position 68.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusions">Conclusions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If I were you, I&#8217;d choose <a href="https://golang.org" target="_blank" rel="noopener">Go</a> if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you value the explicit over implicit, keep in mind that there is a cost, you will most likely have to write more lines of code.</p>
</li>
<li>
<p>If you value the simplicity, <a href="https://golang.org" target="_blank" rel="noopener">Go</a> has a quite reduced set of keywords, which reduces the learning curve and simplifies the code reviews.</p>
</li>
<li>
<p>If RAM memory usage is critical for your project, actually I&#8217;d just keep away from <a href="https://spring.io/guides/gs/rest-service" target="_blank" rel="noopener">Spring Boot (REST)</a>.</p>
</li>
<li>
<p>If the project you are going to work on is a distributed system, specially if it is based on <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="_blank" rel="noopener">HTTP</a>.</p>
</li>
</ul>
</div>
</div>
</div><!----> <div class="comments"><script src="https://utteranc.es/client.js" repo="carlosvin/carlosvin.github.io" issue-term="title" label="comment" theme="github-light" crossorigin="anonymous" async>
	</script></div><!----></div><!----><!----><!----></main> <footer class="svelte-qhq9sm"><span>Carlos Say's Bla Bla</span> <code>1.0.1</code></footer><!----><!--]--><!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_1qhkr5p = {
						base: new URL("../../../..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../../../../_app/immutable/entry/start.Dg2WxSzj.js"),
						import("../../../../_app/immutable/entry/app.DiecyXnG.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 8],
							data: [null,{"type":"data","data":{path:"/langs/en/posts/rest-service-go-vs-java/",lang:"en",translations:{lang:"en",author:"Carlos Martin Sanchez",siteName:"Carlos Say's Bla Bla",siteDescription:"What is going on in my mind and its surroundings",categories:"categories",Categories:"Categories",RecentPosts:"Recent posts",NoPosts:"There are no posts",SubscribeTo:"Subscribe to the feed",AboutMe:"About me",AllPosts:"All posts"},version:"1.0.1"},"uses":{"params":["lang"],"url":1},"slash":"always"},{"type":"data","data":{html:"\u003Cdiv id=\"toc\" class=\"toc\">\n\u003Cdiv id=\"toctitle\">Table of Contents\u003C/div>\n\u003Cul class=\"sectlevel1\">\n\u003Cli>\u003Ca href=\"#_actual_project_examples\">Actual project examples\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_the_ecosystems\">The Ecosystems\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_routing\">Routing\u003C/a>\n\u003Cul class=\"sectlevel2\">\n\u003Cli>\u003Ca href=\"#_go_without_framework\">Go - Without framework\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_go_gin_framework\">Go - Gin Framework\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_java_spring_io\">Java + Spring.io\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\u003Ca href=\"#_validations\">Validations\u003C/a>\n\u003Cul class=\"sectlevel2\">\n\u003Cli>\u003Ca href=\"#_go_gin_framework_2\">Go - Gin Framework\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_java_spring_io_2\">Java + Spring.io\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_filtering_and_middleware\">Filtering and Middleware\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\u003Ca href=\"#_dependency_injection_ioc\">Dependency injection / IoC\u003C/a>\n\u003Cul class=\"sectlevel2\">\n\u003Cli>\u003Ca href=\"#_spring_ioc\">Spring IoC\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_go\">Go\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\u003Ca href=\"#_testing\">Testing\u003C/a>\n\u003Cul class=\"sectlevel2\">\n\u003Cli>\u003Ca href=\"#_unit_tests\">Unit tests\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_integration_tests\">Integration tests\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\u003Ca href=\"#_performance\">Performance\u003C/a>\n\u003Cul class=\"sectlevel2\">\n\u003Cli>\u003Ca href=\"#_memory\">Memory\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_speed\">Speed\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\u003Ca href=\"#_conclusions\">Conclusions\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003Cdiv id=\"preamble\">\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Lately I&#8217;ve been working with two different technology stacks almost in parallel, in both cases we were using them to develop \u003Ca href=\"https://en.wikipedia.org/wiki/Representational_state_transfer\" target=\"_blank\" rel=\"noopener\">REST\u003C/a> services.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>During this time I&#8217;ve come up with some conclusions and opinions I&#8217;d like to share.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>A disclaimer, few months ago, I had several years of experience with Java and 0 days of professional experience with Golang.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_actual_project_examples\">Actual project examples\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Few months ago I created \u003Ca href=\"https://covid-rest.appspot.com/docs\" target=\"_blank\" rel=\"noopener\">an API to extract and structure COVID-19 data\u003C/a> from \u003Ca href=\"https://www.ecdc.europa.eu/en/publications-data/download-todays-data-geographic-distribution-covid-19-cases-worldwide\" target=\"_blank\" rel=\"noopener\">ECDC website\u003C/a>. I developed it in \u003Ca href=\"https://spring.io/guides/gs/rest-service\" target=\"_blank\" rel=\"noopener\">Spring Boot (REST)\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Few months later I had the luck of work on my first professional project in \u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a> and I decided to create a port of \u003Ca href=\"https://covid-rest.appspot.com/docs\" target=\"_blank\" rel=\"noopener\">the API to extract COVID-19 data\u003C/a> in \u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a>, just for learning and for fun.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Now we have two REST services, almost functionally identical, but developed in two different tech stacks, so we can easily compare some relevant aspects of both.\u003C/p>\n\u003C/div>\n\u003Ctable class=\"tableblock frame-all grid-all stretch\">\n\u003Ccaption class=\"title\">Table 1. Source code for the 2 REST services implementations\u003C/caption>\n\u003Ccolgroup>\n\u003Ccol style=\"width: 50%;\">\n\u003Ccol style=\"width: 50%;\">\n\u003C/colgroup>\n\u003Cthead>\n\u003Ctr>\n\u003Cth class=\"tableblock halign-left valign-top\">\u003Ca href=\"https://www.java.com\" target=\"_blank\" rel=\"noopener\">Java\u003C/a> + \u003Ca href=\"https://spring.io/guides/gs/rest-service\" target=\"_blank\" rel=\"noopener\">Spring Boot (REST)\u003C/a>\u003C/th>\n\u003Cth class=\"tableblock halign-left valign-top\">\u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a> + \u003Ca href=\"https://github.com/gin-gonic/gin\" target=\"_blank\" rel=\"noopener\">Gin framework\u003C/a>\u003C/th>\n\u003C/tr>\n\u003C/thead>\n\u003Ctbody>\n\u003Ctr>\n\u003Ctd class=\"tableblock halign-left valign-top\">\u003Cp class=\"tableblock\">\u003Ca href=\"https://github.com/carlosvin/covid-rest\" class=\"bare\">https://github.com/carlosvin/covid-rest\u003C/a>\u003C/p>\u003C/td>\n\u003Ctd class=\"tableblock halign-left valign-top\">\u003Cp class=\"tableblock\">\u003Ca href=\"https://github.com/carlosvin/covid-rest-go\" class=\"bare\">https://github.com/carlosvin/covid-rest-go\u003C/a>\u003C/p>\u003C/td>\n\u003C/tr>\n\u003C/tbody>\n\u003C/table>\n\u003Cdiv class=\"admonitionblock note\">\n\u003Ctable>\n\u003Ctr>\n\u003Ctd class=\"icon\">\n\u003Cdiv class=\"title\">Note\u003C/div>\n\u003C/td>\n\u003Ctd class=\"content\">\nI actually created that \u003Ca href=\"https://covid-rest.appspot.com/docs\">COVID-19 data REST API\u003C/a> to be the data source for the \u003Ca href=\"https://covid-stats-pwa.netlify.app\" target=\"_blank\" rel=\"noopener\">COVID19-Stats App\u003C/a>, a \u003Ca href=\"https://web.dev/progressive-web-apps\" target=\"_blank\" rel=\"noopener\">PWA\u003C/a> built with \u003Ca href=\"https://svelte.dev\" target=\"_blank\" rel=\"noopener\">Svelte\u003C/a>, but that&#8217;s another topic.\n\u003C/td>\n\u003C/tr>\n\u003C/table>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_the_ecosystems\">The Ecosystems\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>If you want to create a \u003Ca href=\"https://en.wikipedia.org/wiki/Representational_state_transfer\" target=\"_blank\" rel=\"noopener\">REST\u003C/a> service just in plain Java you will have extra work to do, in Golang a little bit less. That&#8217;s why we use framework, because they&#8217;ve already solved many common problems for us.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>For this comparison I am going to use \u003Ca href=\"https://spring.io/guides/gs/rest-service\" target=\"_blank\" rel=\"noopener\">Spring Boot (REST)\u003C/a> for \u003Ca href=\"https://www.java.com\" target=\"_blank\" rel=\"noopener\">Java\u003C/a> and \u003Ca href=\"https://github.com/gin-gonic/gin\" target=\"_blank\" rel=\"noopener\">Gin framework\u003C/a> for \u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a>, but in both languages there are a lot of production ready nice options.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_routing\">Routing\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_go_without_framework\">Go - Without framework\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Go uses the concept of \u003Ca href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol\" target=\"_blank\" rel=\"noopener\">HTTP\u003C/a> multiplexer or router. You can specify routes using patterns and link those routes to handlers. The router will decide which handler has to execute the request based on the path received.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">router.go file\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-go\" data-lang=\"go\">\u003Cspan class=\"hljs-keyword\">package\u003C/span> main\n\n\u003Cspan class=\"hljs-keyword\">import\u003C/span> (\n\t\u003Cspan class=\"hljs-string\">&quot;log&quot;\u003C/span>\n\t\u003Cspan class=\"hljs-string\">&quot;net/http&quot;\u003C/span>\n)\n\n\u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-keyword\">func\u003C/span> \u003Cspan class=\"hljs-title\">main\u003C/span>\u003Cspan class=\"hljs-params\">()\u003C/span>\u003C/span> {\n\trouter := http.NewServeMux()\n\trouter.Handle(\u003Cspan class=\"hljs-string\">&quot;/redirect&quot;\u003C/span>, http.RedirectHandler(\u003Cspan class=\"hljs-string\">&quot;https://carlosvin.github.io/&quot;\u003C/span>, \u003Cspan class=\"hljs-number\">307\u003C/span>))\n\trouter.HandleFunc(\u003Cspan class=\"hljs-string\">&quot;/hello&quot;\u003C/span>, \u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-keyword\">func\u003C/span>\u003Cspan class=\"hljs-params\">(w http.ResponseWriter, r *http.Request)\u003C/span>\u003C/span> {\n\t\tw.Write([]\u003Cspan class=\"hljs-type\">byte\u003C/span>(\u003Cspan class=\"hljs-string\">&quot;Hello world!&quot;\u003C/span>))\n\t})\n\tlog.Println(\u003Cspan class=\"hljs-string\">&quot;Listening...&quot;\u003C/span>)\n\thttp.ListenAndServe(\u003Cspan class=\"hljs-string\">&quot;:3000&quot;\u003C/span>, router)\n}\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Source code is already quite simple, but there might more complex routing use cases.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_go_gin_framework\">Go - Gin Framework\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Happily there are frameworks that help us to keep our base code simple, for example when we need to extract path parameters, which is quite common use case in \u003Ca href=\"https://en.wikipedia.org/wiki/Representational_state_transfer\" target=\"_blank\" rel=\"noopener\">REST\u003C/a> \u003Ca href=\"https://en.wikipedia.org/wiki/Application_programming_interface\" target=\"_blank\" rel=\"noopener\">API\u003C/a>s, we can use a routing library, I&#8217;ve used \u003Ca href=\"https://github.com/gorilla/mux\" target=\"_blank\" rel=\"noopener\">Gorilla Mux\u003C/a> and \u003Ca href=\"https://github.com/gin-gonic/gin\" target=\"_blank\" rel=\"noopener\">Gin framework\u003C/a> and I liked more \u003Ca href=\"https://github.com/gin-gonic/gin\" target=\"_blank\" rel=\"noopener\">Gin framework\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">\u003Ca href=\"https://github.com/carlosvin/covid-rest-go/blob/master/main.go\">Full example\u003C/a>\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-go\" data-lang=\"go\">\u003Cspan class=\"hljs-keyword\">import\u003C/span> (\n\t\u003Cspan class=\"hljs-string\">&quot;github.com/carlosvin/covid-rest-go/handlers&quot;\u003C/span>\n\t\u003Cspan class=\"hljs-string\">&quot;github.com/carlosvin/covid-rest-go/readers&quot;\u003C/span>\n\t\u003Cspan class=\"hljs-string\">&quot;github.com/gin-gonic/gin&quot;\u003C/span>\n)\n\n\u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-keyword\">func\u003C/span> \u003Cspan class=\"hljs-title\">main\u003C/span>\u003Cspan class=\"hljs-params\">()\u003C/span>\u003C/span> {\n\n\t\u003Cspan class=\"hljs-comment\">// ...\u003C/span>\n\n\tr := gin.Default()\n\tr.GET(\u003Cspan class=\"hljs-string\">&quot;/countries&quot;\u003C/span>, router.Countries)\n\tr.GET(\u003Cspan class=\"hljs-string\">&quot;/countries/:code&quot;\u003C/span>, router.Country)\n\tr.GET(\u003Cspan class=\"hljs-string\">&quot;/countries/:code/dates&quot;\u003C/span>, router.CountryDates)\n\tr.GET(\u003Cspan class=\"hljs-string\">&quot;/countries/:code/dates/:date&quot;\u003C/span>, router.CountryDate)\n\tr.Run()\n}\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">\u003Ca href=\"https://github.com/carlosvin/covid-rest-go/blob/master/handlers/countries.go\">And this is a handler example\u003C/a>, the router.Countries one\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-go\" data-lang=\"go\">\u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-keyword\">func\u003C/span> \u003Cspan class=\"hljs-params\">(r *routerImpl)\u003C/span>\u003C/span> Countries(c *gin.Context) {\n\tc.JSON(\u003Cspan class=\"hljs-number\">200\u003C/span>, r.countries())\n}\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_java_spring_io\">Java + Spring.io\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>The \u003Ca href=\"https://spring.io/guides/gs/rest-service\" target=\"_blank\" rel=\"noopener\">Spring Boot (REST)\u003C/a> is based on the concept of Controller, it is implemented using annotations on the class and methods.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">\u003Ca href=\"https://github.com/carlosvin/covid-rest/blob/master/src/main/java/com/carlosvin/covid/controllers/CountriesController.java\" target=\"_blank\" rel=\"noopener\">CountriesController.java\u003C/a>\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-java\" data-lang=\"java\">\u003Cspan class=\"hljs-meta\">@Validated\u003C/span>\n\u003Cspan class=\"hljs-meta\">@RestController\u003C/span> \u003Cb class=\"conum\">(1)\u003C/b>\n\u003Cspan class=\"hljs-meta\">@RequestMapping(&quot;/countries&quot;)\u003C/span> \u003Cb class=\"conum\">(2)\u003C/b>\n\u003Cspan class=\"hljs-keyword\">public\u003C/span> \u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">CountriesController\u003C/span> {\n\n\t\u003Cspan class=\"hljs-comment\">// Some source code is not shown, you can find the complete example in the repository\u003C/span>\n\n\t\u003Cspan class=\"hljs-meta\">@GetMapping(&quot;/{country}/dates/{isoDateStr}&quot;)\u003C/span>  \u003Cb class=\"conum\">(3)\u003C/b>\n\t\u003Cspan class=\"hljs-keyword\">public\u003C/span> DateStatsDto \u003Cspan class=\"hljs-title function_\">getDateByCountry\u003C/span>\u003Cspan class=\"hljs-params\">(\u003Cspan class=\"hljs-meta\">@Size(min = 2, max = 2)\u003C/span> \u003Cspan class=\"hljs-meta\">@PathVariable\u003C/span> String country, \u003Cspan class=\"hljs-meta\">@Size(min = 10, max = 20)\u003C/span> \u003Cspan class=\"hljs-meta\">@PathVariable\u003C/span> String isoDateStr)\u003C/span> \u003Cspan class=\"hljs-keyword\">throws\u003C/span> NotFoundException {\n\t\t\u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">DateStatsDto\u003C/span>(service.getDate(country, DateUtils.convert(isoDateStr)));\n\t}\n}\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"colist arabic\">\n\u003Col>\n\u003Cli>\n\u003Cp>Declare the class as Controller so it is registered in \u003Ca href=\"https://spring.io/guides/gs/rest-service\" target=\"_blank\" rel=\"noopener\">Spring Boot (REST)\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Controller base path definition\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Handler definition for a nested path under the main controller path. \u003Ca href=\"https://spring.io/guides/gs/rest-service\" target=\"_blank\" rel=\"noopener\">Spring Boot (REST)\u003C/a> makes easy to extract path variables defined in the route, you can directly use them as method arguments.\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_validations\">Validations\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_go_gin_framework_2\">Go - Gin Framework\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>\u003Ca href=\"https://github.com/gin-gonic/gin\" target=\"_blank\" rel=\"noopener\">Gin framework\u003C/a> uses an external validation package \u003Ca href=\"https://godoc.org/github.com/go-playground/validator\">validator\u003C/a>, besides that it is fully integrated with \u003Ca href=\"https://github.com/gin-gonic/gin\" target=\"_blank\" rel=\"noopener\">Gin framework\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-go\" data-lang=\"go\">\u003Cspan class=\"hljs-keyword\">type\u003C/span> User \u003Cspan class=\"hljs-keyword\">struct\u003C/span> {\n\tName  \u003Cspan class=\"hljs-type\">string\u003C/span> \u003Cspan class=\"hljs-string\">`validate:&quot;required&quot;`\u003C/span> \u003Cb class=\"conum\">(1)\u003C/b>\n\tEmail \u003Cspan class=\"hljs-type\">string\u003C/span> \u003Cspan class=\"hljs-string\">`validate:&quot;required,email&quot;`\u003C/span>\n}\n\nerr := validate.Struct(user) \u003Cb class=\"conum\">(2)\u003C/b>\nvalidationErrors := err.(validator.ValidationErrors) \u003Cb class=\"conum\">(3)\u003C/b>\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"colist arabic\">\n\u003Col>\n\u003Cli>\n\u003Cp>The validation system uses \u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a> tags, it is not the same as \u003Ca href=\"https://www.java.com\" target=\"_blank\" rel=\"noopener\">Java\u003C/a> annotations, but in the validation case, it works in pretty same way as annotations.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Executes the validation explicitly\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Extracts validation errors\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_java_spring_io_2\">Java + Spring.io\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>You can enable the validation in the controller level, then in the handlers you can also specify the type of validation. Let&#8217;s explain it using the previous example:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">\u003Ca href=\"https://github.com/carlosvin/covid-rest/blob/master/src/main/java/com/carlosvin/covid/controllers/CountriesController.java\" target=\"_blank\" rel=\"noopener\">CountriesController.java\u003C/a>\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-java\" data-lang=\"java\">\u003Cspan class=\"hljs-meta\">@Validated\u003C/span> \u003Cb class=\"conum\">(1)\u003C/b>\n\u003Cspan class=\"hljs-meta\">@RestController\u003C/span>\n\u003Cspan class=\"hljs-meta\">@RequestMapping(&quot;/countries&quot;)\u003C/span>\n\u003Cspan class=\"hljs-keyword\">public\u003C/span> \u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">CountriesController\u003C/span> {\n\n\t\u003Cspan class=\"hljs-comment\">// Some source code is not shown, you can find the complete example in the repository\u003C/span>\n\n\t\u003Cspan class=\"hljs-meta\">@GetMapping(&quot;/{country}/dates/{isoDateStr}&quot;)\u003C/span>\n\t\u003Cspan class=\"hljs-keyword\">public\u003C/span> DateStatsDto \u003Cspan class=\"hljs-title function_\">getDateByCountry\u003C/span>\u003Cspan class=\"hljs-params\">(\n\t\t\u003Cspan class=\"hljs-meta\">@Size(min = 2, max = 2)\u003C/span> \u003Cspan class=\"hljs-meta\">@PathVariable\u003C/span> String country, \u003Cb class=\"conum\">(2)\u003C/b>\n\t\t\u003Cspan class=\"hljs-meta\">@Size(min = 10, max = 20)\u003C/span> \u003Cspan class=\"hljs-meta\">@PathVariable\u003C/span> String isoDateStr)\u003C/span> \u003Cspan class=\"hljs-keyword\">throws\u003C/span> NotFoundException {\n\t\t\u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">DateStatsDto\u003C/span>(service.getDate(country, DateUtils.convert(isoDateStr)));\n\t}\n}\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"colist arabic\">\n\u003Col>\n\u003Cli>\n\u003Cp>Declare the class as Controller so it is registered in \u003Ca href=\"https://spring.io/guides/gs/rest-service\" target=\"_blank\" rel=\"noopener\">Spring Boot (REST)\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ccode>@Size\u003C/code> validates that the input argument country has 2 characters\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>The validation system is more powerful than you can see in this code snippet, for example adding \u003Ccode>@Valid\u003C/code> annotation opens the door to complex types validation.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_filtering_and_middleware\">Filtering and Middleware\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Different approaches, pretty much the same end result.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>I will elaborate this topic in following days.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_dependency_injection_ioc\">Dependency injection / IoC\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_spring_ioc\">\u003Ca href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators\" target=\"_blank\" rel=\"noopener\">Spring IoC\u003C/a>\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>\u003Ca href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators\" target=\"_blank\" rel=\"noopener\">Spring IoC\u003C/a> is the most complete and powerful systems I&#8217;ve ever used for \u003Ca href=\"https://en.wikipedia.org/wiki/Inversion_of_control\" target=\"_blank\" rel=\"noopener\">IoC\u003C/a>, actually, the first time I used Spring professionally was just to deal with \u003Ca href=\"https://en.wikipedia.org/wiki/Inversion_of_control\" target=\"_blank\" rel=\"noopener\">IoC\u003C/a>. It supports XML configuration files or \u003Ca href=\"https://www.java.com\" target=\"_blank\" rel=\"noopener\">Java\u003C/a> annotations, I like annotations more, here a simple example from \u003Ca href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators\" target=\"_blank\" rel=\"noopener\">Spring IoC\u003C/a> documentation:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">Spring IoC example\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-java\" data-lang=\"java\">\u003Cspan class=\"hljs-meta\">@Repository\u003C/span>\n\u003Cspan class=\"hljs-keyword\">public\u003C/span> \u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">JpaMovieFinder\u003C/span> \u003Cspan class=\"hljs-keyword\">implements\u003C/span> \u003Cspan class=\"hljs-title class_\">MovieFinder\u003C/span> { \u003Cb class=\"conum\">(1)\u003C/b>\n    \u003Cspan class=\"hljs-comment\">// implementation elided for clarity\u003C/span>\n}\n\n\u003Cspan class=\"hljs-comment\">//\u003C/span>\n\n\u003Cspan class=\"hljs-keyword\">public\u003C/span> \u003Cspan class=\"hljs-keyword\">class\u003C/span> \u003Cspan class=\"hljs-title class_\">SimpleMovieLister\u003C/span> {\n\n    \u003Cspan class=\"hljs-keyword\">private\u003C/span> MovieFinder movieFinder;\n\n    \u003Cspan class=\"hljs-meta\">@Autowired\u003C/span> \u003Cb class=\"conum\">(2)\u003C/b>\n    \u003Cspan class=\"hljs-keyword\">public\u003C/span> \u003Cspan class=\"hljs-keyword\">void\u003C/span> \u003Cspan class=\"hljs-title function_\">setMovieFinder\u003C/span>\u003Cspan class=\"hljs-params\">(MovieFinder movieFinder)\u003C/span> {\n        \u003Cspan class=\"hljs-built_in\">this\u003C/span>.movieFinder = movieFinder;\n    }\n\n    \u003Cspan class=\"hljs-comment\">// ...\u003C/span>\n}\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"colist arabic\">\n\u003Col>\n\u003Cli>\n\u003Cp>\u003Ccode>JpaMovieFinder\u003C/code> is instantiated by \u003Ca href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators\" target=\"_blank\" rel=\"noopener\">Spring IoC\u003C/a>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>With \u003Ccode>@Autowired\u003C/code> annotation \u003Ca href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators\" target=\"_blank\" rel=\"noopener\">Spring IoC\u003C/a> knows that has to inject \u003Ccode>movieFinder\u003C/code> argument. It should be a class implementing \u003Ccode>MovieFinder\u003C/code>\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_go\">Go\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Neither \u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a> nor \u003Ca href=\"https://github.com/gin-gonic/gin\" target=\"_blank\" rel=\"noopener\">Gin framework\u003C/a> has any \u003Ca href=\"https://en.wikipedia.org/wiki/Inversion_of_control\" target=\"_blank\" rel=\"noopener\">IoC\u003C/a> solution, but you can still apply \u003Ca href=\"https://en.wikipedia.org/wiki/Dependency_injection\" target=\"_blank\" rel=\"noopener\">Dependency Injection\u003C/a> technique to decouple your components and improve the testability of your system.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">Dependency injection simple example in \u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a>\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-go\" data-lang=\"go\">\u003Cspan class=\"hljs-keyword\">package\u003C/span> main\n\n\u003Cspan class=\"hljs-keyword\">import\u003C/span> \u003Cspan class=\"hljs-string\">&quot;fmt&quot;\u003C/span>\n\n\u003Cspan class=\"hljs-comment\">// Greeter interface to greet the caller\u003C/span>\n\u003Cspan class=\"hljs-keyword\">type\u003C/span> Greeter \u003Cspan class=\"hljs-keyword\">interface\u003C/span> {\n\tgreet()\n}\n\n\u003Cspan class=\"hljs-keyword\">type\u003C/span> greeterHello \u003Cspan class=\"hljs-keyword\">struct\u003C/span>{}\n\n\u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-keyword\">func\u003C/span> \u003Cspan class=\"hljs-params\">(g *greeterHello)\u003C/span>\u003C/span> greet() { \u003Cb class=\"conum\">(3)\u003C/b>\n\tfmt.Println(\u003Cspan class=\"hljs-string\">&quot;Hello!&quot;\u003C/span>)\n}\n\n\u003Cspan class=\"hljs-keyword\">type\u003C/span> greeterHi \u003Cspan class=\"hljs-keyword\">struct\u003C/span>{}\n\n\u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-keyword\">func\u003C/span> \u003Cspan class=\"hljs-params\">(g *greeterHi)\u003C/span>\u003C/span> greet() { \u003Cb class=\"conum\">(4)\u003C/b>\n\tfmt.Println(\u003Cspan class=\"hljs-string\">&quot;Hi!&quot;\u003C/span>)\n}\n\n\u003Cspan class=\"hljs-comment\">// App Application representation\u003C/span>\n\u003Cspan class=\"hljs-keyword\">type\u003C/span> App \u003Cspan class=\"hljs-keyword\">struct\u003C/span> {\n\tgreeters []Greeter \u003Cb class=\"conum\">(1)\u003C/b>\n}\n\n\u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-keyword\">func\u003C/span> \u003Cspan class=\"hljs-params\">(app *App)\u003C/span>\u003C/span> startup() {\n\t\u003Cspan class=\"hljs-keyword\">for\u003C/span> _, v := \u003Cspan class=\"hljs-keyword\">range\u003C/span> app.greeters {\n\t\tv.greet()\n\t}\n}\n\n\u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-keyword\">func\u003C/span> \u003Cspan class=\"hljs-title\">main\u003C/span>\u003Cspan class=\"hljs-params\">()\u003C/span>\u003C/span> {\n\tgreeters := []Greeter{ \u003Cb class=\"conum\">(2)\u003C/b>\n\t\t&amp;greeterHello{},\n\t\t&amp;greeterHi{},\n\t\t&amp;greeterHello{}}\n\n\tapp := &amp;App{greeters}\n\n\tapp.startup()\n}\n\n\u003Cspan class=\"hljs-comment\">/*\n&lt;1&gt; `App` accepts an array of `Greeter`\n&lt;2&gt; During `App` instantiation we pass different implementations of `Greeter`\n&lt;3&gt; Greeter implementation that prints *Hello!*\n&lt;4&gt; Greeter implementation that prints *Hi!*\n*/\u003C/span>\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>It is more verbose, but there is an advantage, there is nothing hidden, everything is explicit and you have full control of instantiation order.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>As soon as you use \u003Ca href=\"https://en.wikipedia.org/wiki/Dependency_injection\" target=\"_blank\" rel=\"noopener\">Dependency Injection\u003C/a>, I don&#8217;t have any strong opinion about using \u003Ca href=\"https://en.wikipedia.org/wiki/Inversion_of_control\" target=\"_blank\" rel=\"noopener\">IoC\u003C/a> system or doing \u003Ca href=\"https://en.wikipedia.org/wiki/Dependency_injection\" target=\"_blank\" rel=\"noopener\">Dependency Injection\u003C/a> manually.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_testing\">Testing\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_unit_tests\">Unit tests\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>For unit tests there are no big differences.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>\u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a> comes with a standard \u003Ca href=\"https://golang.org/pkg/testing/\" target=\"_blank\" rel=\"noopener\">library for testing and benchmarking\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>For \u003Ca href=\"https://www.java.com\" target=\"_blank\" rel=\"noopener\">Java\u003C/a> there are many well-known unit testing frameworks, but Spring already has quite big support for \u003Ca href=\"https://docs.spring.io/spring-batch/docs/current/reference/html/testing.html\" target=\"_blank\" rel=\"noopener\">unit testing\u003C/a>.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_integration_tests\">Integration tests\u003C/h3>\n\u003Cdiv class=\"sect3\">\n\u003Ch4 id=\"_go_2\">Go\u003C/h4>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>There are no support for Integration Tests in \u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a>, you will have to implement everything by yourself, although it is not difficult, \u003Ca href=\"https://kpat.io/2019/06/testing-with-gin/\" target=\"_blank\" rel=\"noopener\">here you can find a simple example\u003C/a>.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect3\">\n\u003Ch4 id=\"_spring\">Spring\u003C/h4>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>On the other hand, \u003Ca href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html\" target=\"_bank\">Spring has a great testing support\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>To write integration tests for \u003Ca href=\"https://en.wikipedia.org/wiki/Representational_state_transfer\" target=\"_blank\" rel=\"noopener\">REST\u003C/a> services, \u003Ca href=\"https://spring.io/guides/gs/testing-web/\" target=\"_blank\" rel=\"noopener\">MockMvc\u003C/a> is really convenient.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>I&#8217;ve used \u003Ca href=\"https://github.com/carlosvin/covid-rest/blob/master/src/test/java/com/carlosvin/covid/CountriesControllerTest.java\" target=\"_blank\" rel=\"noopener\">MockMvc in the covid-rest project\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">MockMvc code snippet from \u003Ca href=\"https://github.com/carlosvin/covid-rest/blob/master/src/test/java/com/carlosvin/covid/CountriesControllerTest.java\" target=\"_blank\" rel=\"noopener\">CountriesControllerTest.java\u003C/a>\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-java\" data-lang=\"java\">\t\u003Cspan class=\"hljs-meta\">@Autowired\u003C/span>\n\t\u003Cspan class=\"hljs-keyword\">private\u003C/span> MockMvc mockMvc; \u003Cb class=\"conum\">(1)\u003C/b>\n\n\t\u003Cspan class=\"hljs-meta\">@Test\u003C/span>\n\t\u003Cspan class=\"hljs-keyword\">void\u003C/span> \u003Cspan class=\"hljs-title function_\">getCountries\u003C/span>\u003Cspan class=\"hljs-params\">()\u003C/span> \u003Cspan class=\"hljs-keyword\">throws\u003C/span> Exception {\n\t\t\u003Cspan class=\"hljs-built_in\">this\u003C/span>.mockMvc.perform(get(\u003Cspan class=\"hljs-string\">&quot;/countries&quot;\u003C/span>)) \u003Cb class=\"conum\">(2)\u003C/b>\n\t\t\t\t.andDo(print()).andExpect(status().isOk()) \u003Cb class=\"conum\">(3)\u003C/b>\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\">&quot;$.*&quot;\u003C/span>, hasSize(\u003Cspan class=\"hljs-number\">144\u003C/span>)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\">&quot;$.ES.confirmedCases&quot;\u003C/span>,comparesEqualTo(\u003Cspan class=\"hljs-number\">9191\u003C/span>)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\">&quot;$.ES.deathsNumber&quot;\u003C/span>, comparesEqualTo(\u003Cspan class=\"hljs-number\">309\u003C/span>)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\">&quot;$.ES.countryCode&quot;\u003C/span>, comparesEqualTo(\u003Cspan class=\"hljs-string\">&quot;ES&quot;\u003C/span>)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\">&quot;$.ES.countryName&quot;\u003C/span>, comparesEqualTo(\u003Cspan class=\"hljs-string\">&quot;Spain&quot;\u003C/span>)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\">&quot;$.ES.path&quot;\u003C/span>, comparesEqualTo(\u003Cspan class=\"hljs-string\">&quot;/countries/ES&quot;\u003C/span>)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\">&quot;$.VC.countryName&quot;\u003C/span>, comparesEqualTo(\u003Cspan class=\"hljs-string\">&quot;Saint Vincent and the Grenadines&quot;\u003C/span>)))\n\t\t\t\t.andDo(document(\u003Cspan class=\"hljs-string\">&quot;countries/list&quot;\u003C/span>, preprocessResponse(prettyPrint(), \u003Cspan class=\"hljs-keyword\">new\u003C/span> \u003Cspan class=\"hljs-title class_\">CropPreprocessor\u003C/span>())));\n\t}\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"colist arabic\">\n\u003Col>\n\u003Cli>\n\u003Cp>The Spring test runner injects the MockMvc object.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>We use MockMvc to call to the endpoint we have created.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Then we validate the endpoint response: status code and body.\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_performance\">Performance\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Besides the languages specific differences, the main difference is the performance. The CPU consumption in \u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a> is smaller, but about the memory the difference is really significant, \u003Cstrong>the order of 30 times smaller fingerprint\u003C/strong>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_memory\">Memory\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Here I&#8217;ve found a surprising difference, just by checking the memory consumption in my laptop.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://github.com/gin-gonic/gin\" target=\"_blank\" rel=\"noopener\">Gin framework\u003C/a> \u003Ccode>15.6MB\u003C/code>\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://spring.io/guides/gs/rest-service\" target=\"_blank\" rel=\"noopener\">Spring Boot (REST)\u003C/a> \u003Ccode>465.9MB\u003C/code>\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003Cdiv class=\"imageblock\">\n\u003Cdiv class=\"content\">\n\u003Cimg src=\"/posts/rest-service-go-vs-java/memory-consumption-go-java.png\" alt=\"Memory consumption\">\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_speed\">Speed\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Following the \u003Ca href=\"https://www.techempower.com/benchmarks/\" target=\"_blank\" rel=\"noopener\">TechEmpower benchmarks\u003C/a>:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://github.com/gin-gonic/gin\" target=\"_blank\" rel=\"noopener\">Gin framework\u003C/a> is in 193 position, 9.9%.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://spring.io/guides/gs/rest-service\" target=\"_blank\" rel=\"noopener\">Spring Boot (REST)\u003C/a> is in 284 position, 4%.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Following the \u003Ca href=\"https://github.com/the-benchmarker/web-frameworks\" target=\"_blank\" rel=\"noopener\">The Benchmarker results\u003C/a>:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://github.com/gin-gonic/gin\" target=\"_blank\" rel=\"noopener\">Gin framework\u003C/a>: position 33.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://spring.io/guides/gs/rest-service\" target=\"_blank\" rel=\"noopener\">Spring Boot (REST)\u003C/a>: position 68.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_conclusions\">Conclusions\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>If I were you, I&#8217;d choose \u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a> if:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>If you value the explicit over implicit, keep in mind that there is a cost, you will most likely have to write more lines of code.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>If you value the simplicity, \u003Ca href=\"https://golang.org\" target=\"_blank\" rel=\"noopener\">Go\u003C/a> has a quite reduced set of keywords, which reduces the learning curve and simplifies the code reviews.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>If RAM memory usage is critical for your project, actually I&#8217;d just keep away from \u003Ca href=\"https://spring.io/guides/gs/rest-service\" target=\"_blank\" rel=\"noopener\">Spring Boot (REST)\u003C/a>.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>If the project you are going to work on is a distributed system, specially if it is based on \u003Ca href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol\" target=\"_blank\" rel=\"noopener\">HTTP\u003C/a>.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003C/div>\n\u003C/div>",props:{title:"Golang over Java for REST services",lang:"en",summary:"Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang",slug:"rest-service-go-vs-java",keywords:["REST","API","Web Services","Java","Golang","Gingonic","Spring"],filepath:"/static/posts/rest-service-go-vs-java/rest-service-go-vs-java.adoc",dirpath:"/static/posts/rest-service-go-vs-java",created:1604188800000,modified:1604188800000,otherLangs:["es"],author:"Carlos Martin Sanchez",previewimage:void 0,path:"/langs/en/posts/rest-service-go-vs-java"},jsonLd:"\u003Cscript type=\"application/ld+json\">{\"@context\":\"https://schema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"Webpage\",\"@id\":\"https://google.com/article\"},\"headline\":\"Golang over Java for REST services\",\"alternativeHeadline\":\"Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang\",\"description\":\"Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang\",\"datePublished\":\"2020-11-01T00:00:00.000Z\",\"dateModified\":\"2020-11-01T00:00:00.000Z\",\"keywords\":[\"REST\",\"API\",\"Web Services\",\"Java\",\"Golang\",\"Gingonic\",\"Spring\"],\"author\":{\"@type\":\"Person\",\"name\":\"Carlos Martin Sanchez\"},\"publisher\":{\"@type\":\"Person\",\"name\":\"Carlos Martin Sanchez\"}}\u003C/script>"},"uses":{"params":["slug","lang"]}}],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
