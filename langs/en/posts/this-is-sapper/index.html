<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../../../favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="/app.css" />
		
		<link href="../../../../_app/immutable/assets/2.D6-wnWlq.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/IconLink.DCDy1KOq.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/Social.BuJ-IkEK.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/8.BrJEuWPS.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/Details.9eYqvsBa.css" rel="stylesheet">
		<link rel="modulepreload" href="../../../../_app/immutable/entry/start.C-oHEv2Z.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/entry.C-zGv6ER.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/runtime.Dmq9lEfb.js">
		<link rel="modulepreload" href="../../../../_app/immutable/entry/app.DSnmZfIt.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/render.DEuRsD3K.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/svelte-head.gMhgFLgJ.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/disclose-version.DZGYuMPK.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/if.DdJqp0Gs.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/props.DtZ137fb.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/0.Ju4b_HEQ.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/misc.Djj4xh76.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/lifecycle.Dfv6L9JC.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/html.B-jAldvN.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/stores.nEPa7w18.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/2.BdJhhyR_.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/attributes.Dp_OjnNi.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/IconLink.B1K-9nqp.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/Social.D9rHMohW.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/8.ZkUutzok.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/url.CTei4sZV.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/Details.CG9aGsbs.js"><!--[--><!---->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-1328360-10', 'auto');
	</script>
	<!----><!--]--><!--[--><meta name="date.created" content="2020-04-19T00:00:00.000Z"> <meta name="date.updated" content="2020-04-19T00:00:00.000Z"> <meta name="description" content="This static blog site has been migrated from Nikola to Sapper. In this article we will go through the main reasons, performance results and some other thoughts about using Sapper and Svelte for generate an static web site"> <!--[--><!--[--><link rel="alternate" hreflang="es" href="/langs/es/posts/this-is-sapper"><!--]--><!--]--> <!----><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"Webpage","@id":"https://google.com/article"},"headline":"This is Sapper!","alternativeHeadline":"This static blog site has been migrated from Nikola to Sapper. In this article we will go through the main reasons, performance results and some other thoughts about using Sapper and Svelte for generate an static web site","description":"This static blog site has been migrated from Nikola to Sapper. In this article we will go through the main reasons, performance results and some other thoughts about using Sapper and Svelte for generate an static web site","image":"https://sapper.svelte.dev/sapper-logo-horizontal.svg","datePublished":"2020-04-19T00:00:00.000Z","dateModified":"2020-04-19T00:00:00.000Z","keywords":["Sapper","Svelte","JAMStack","PWA","Static Site Generator"],"author":{"@type":"Person","name":"Carlos"},"publisher":{"@type":"Person","name":"Carlos"}}</script><!----><!--]--><title>This is Sapper!</title>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><!--[--><!--]--> <!----><!--[--><!----><nav class="svelte-1kqmhwi"><ul class="svelte-1kqmhwi"><li class="svelte-1rykg79"><a aria-current="page" href="/langs/en/posts" rel="prefetch" class="svelte-1rykg79"><!----><img class="logo svelte-1kqmhwi" src="/favicon.png" alt="Carlos Say's Bla Bla logo"><!----></a></li><!----></ul> <ul class="closed svelte-1kqmhwi"><li class="svelte-1rykg79"><a aria-current="page" href="/langs/en/posts" rel="prefetch" class="svelte-1rykg79"><!----><span class="siteName">Carlos Say's Bla Bla</span><!----></a></li><!----> <li class="svelte-1rykg79"><a href="/langs/en/categories" rel="prefetch" class="svelte-1rykg79"><!----><!---->Categories<!----></a></li><!----> <li class="svelte-1rykg79"><a href="/langs/en/about" rel="prefetch" class="svelte-1rykg79"><!----><!---->About me<!----></a></li><!----></ul> <!--[--><!----><div class="h svelte-geb0ta"><!----><a href="/langs/en/feed.xml" target="_blank" class="icon rss svelte-blgowr" title="Subscribe to the feed Carlos Say's Bla Bla" rel="noopener" aria-label="Subscribe to the feed Carlos Say's Bla Bla"><!----><!----></a><!----> <a href="https://github.com/carlosvin" target="_blank" class="icon github svelte-blgowr" title="Find me at github" rel="noopener" aria-label="Find me at github"><!----><!----></a><!----> <a href="https://stackoverflow.com/users/1421059/carlosvin" target="_blank" class="icon stackoverflow svelte-blgowr" title="Find me at stackoverflow" rel="noopener" aria-label="Find me at stackoverflow"><!----><!----></a><!----></div><!----><!--]--> <button type="button" class="svelte-1kqmhwi">â‰¡</button></nav><!----> <main class="svelte-7ld3yf"><!----><!----><header class="svelte-1ikjkmw"><h1 class="svelte-1ikjkmw">This is Sapper! <span class="share svelte-1ikjkmw"><!--[!--><a href="https://twitter.com/intent/tweet?url=/langs/en/posts/this-is-sapper&amp;text=This is Sapper!:&amp;nbsp;This static blog site has been migrated from Nikola to Sapper. In this article we will go through the main reasons, performance results and some other thoughts about using Sapper and Svelte for generate an static web site&amp;hashtags=Sapper,Svelte,JAMStack,PWA,Static Site Generator" target="_blank" class="icon twitter svelte-blgowr" title="Share &quot;This is Sapper!&quot;" rel="noopener" aria-label="Share &quot;This is Sapper!&quot;"><!----><!----></a><!--]--><!----></span></h1> <p class="summary svelte-1ikjkmw">This static blog site has been migrated from Nikola to Sapper. In this article we will go through the main reasons, performance results and some other thoughts about using Sapper and Svelte for generate an static web site</p> <div class="subtitle svelte-pcqcm5"><span class="date svelte-pcqcm5">4/19/2020</span> <!--[--><span class="tags svelte-wqh6y7"><!--[--><a href="/langs/en/categories/sapper" title="Sapper" class="svelte-vx17la">Sapper</a><a href="/langs/en/categories/svelte" title="Svelte" class="svelte-vx17la">Svelte</a><a href="/langs/en/categories/jamstack" title="JAMStack" class="svelte-vx17la">JAMStack</a><a href="/langs/en/categories/pwa" title="PWA" class="svelte-vx17la">PWA</a><a href="/langs/en/categories/static-site-generator" title="Static Site Generator" class="svelte-vx17la">Static Site Generator</a><!--]--></span><!--]--><!----></div><!----></header> <div class="postContent"><!----><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_why_leaving_nikola">Why leaving Nikola</a></li>
<li><a href="#_why_sapper">Why Sapper</a>
<ul class="sectlevel2">
<li><a href="#_dx_developer_experience">DX: Developer experience</a></li>
<li><a href="#_ux_final_result_of_blogs_in_sapper">UX: Final result of blogs in Sapper</a></li>
</ul>
</li>
<li><a href="#_asciidoctor">Asciidoctor</a>
<ul class="sectlevel2">
<li><a href="#_rollup_plugin_asciidoc_to_the_rescue">rollup-plugin-asciidoc to the rescue</a></li>
<li><a href="#_rollup_plugin_glob_to_the_rescue">rollup-plugin-glob to the rescue</a></li>
</ul>
</li>
<li><a href="#_syntax_highlighting">Syntax highlighting</a></li>
<li><a href="#_result">Result</a></li>
<li><a href="#_testing">Testing</a>
<ul class="sectlevel2">
<li><a href="#_writing_a_test">Writing a test</a></li>
</ul>
</li>
<li><a href="#_typescript">Typescript</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>I&#8217;ve migrated my blog infrastructure from <a href="https://getnikola.com" target="_blank" rel="noopener">Nikola</a> + <a href="https://en.wikipedia.org/wiki/ReStructuredText" target="_blank" rel="noopener">reStructuredText</a> to <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a> + <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_leaving_nikola">Why leaving <a href="https://getnikola.com" target="_blank" rel="noopener">Nikola</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This blog was powered by <a href="https://getnikola.com" target="_blank" rel="noopener">Nikola</a> since 2014, when <a href="https://jamstack.org" target="_blank" rel="noopener">JAMStack</a> term didn&#8217;t even exist. It really did the job, it has out-of-the-box features that I needed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Simple multi-lang support.</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/ReStructuredText" target="_blank" rel="noopener">reStructuredText</a> which I prefer over <a href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="noopener">Markdown</a>.</p>
</li>
<li>
<p>It was developed in <a href="https://python.org" target="_blank" rel="noopener">Python</a>, a programming language that I know and I enjoy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>But, I faced some <strong>issues</strong> which annoyed me for quite some time:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>My config file got bloated.</p>
</li>
<li>
<p>It was not easy to modify or create templates, neither to find templates I liked.</p>
</li>
<li>
<p>Site performance was not awesome, my last <a href="https://developers.google.com/web/tools/lighthouse" target="_blank" rel="noopener">Lighthouse audits</a> report was around 80, depending on the section. Except SEO section, which was 96.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_sapper">Why Sapper</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dx_developer_experience">DX: Developer experience</h3>
<div class="paragraph">
<p>I already used <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a> for creating some tiny <a href="https://web.dev/progressive-web-apps" target="_blank" rel="noopener">PWA</a>s <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>, here 2 examples I developed to learn <a href="https://svelte.dev" target="_blank" rel="noopener">Svelte</a> and <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="https://currency-loss.netlify.app" target="_blank" rel="noopener">Currency Exchage Loss Calculator</a></dt>
<dd>
<p>It is a helpful application for travelers visiting currency exchange houses. Based on the rate they offer and the money you want ot change it calculates the amount of money that you are losing in that transaction.</p>
</dd>
<dt class="hdlist1"><a href="https://covid-stats-pwa.netlify.app" target="_blank" rel="noopener">COVID-19 Stats</a></dt>
<dd>
<p>It shows COVID-19 statistics by country and date.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>While creating those <a href="https://web.dev/progressive-web-apps" target="_blank" rel="noopener">PWA</a>s, developing experience with <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a>&amp;<a href="https://svelte.dev" target="_blank" rel="noopener">Svelte</a> was quite impressive.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ux_final_result_of_blogs_in_sapper">UX: Final result of blogs in Sapper</h3>
<div class="paragraph">
<p>Lately I&#8217;ve stumbled upon with some blogs using <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a> like the own <a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a> blog, <a href="https://www.codingwithjesse.com/blog/statically-generating-a-blog-with-svelte-sapper/" target="_blank" rel="noopener">Coding with Jessie</a> or <a href="https://www.swyx.io/writing/svelte-static/" target="_blank" rel="noopener">swyx.io</a>. Check those blogs by yourself, IMHO user experience is pretty good in all of them.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a> is inspired in <a href="https://nextjs.org/">Next.js</a>, here you can find <a href="https://sapper.svelte.dev/docs#Comparison_with_Next_js">a comparison with this better known JAMStack framework</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asciidoctor"><a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>I don&#8217;t have a strong opinion about using <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> or <a href="https://en.wikipedia.org/wiki/ReStructuredText" target="_blank" rel="noopener">reStructuredText</a>, I am comfortable with both of them, but there is more support for <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> in other programming languages, like <a href="https://en.wikipedia.org/wiki/JavaScript" target="_blank" rel="noopener">JavaScript</a>. So basically I switched to <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> because I didn&#8217;t find a <a href="https://en.wikipedia.org/wiki/JavaScript" target="_blank" rel="noopener">JavaScript</a> library able to properly convert <a href="https://en.wikipedia.org/wiki/ReStructuredText" target="_blank" rel="noopener">reStructuredText</a> to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a>.</p>
</div>
<div class="paragraph">
<p>The main issue I found not using <a href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="noopener">Markdown</a> was the lack of <a href="https://rollupjs.org" target="_blank" rel="noopener">Rollup</a> plugins to convert <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a>, so I just created one, <a href="https://github.com/carlosvin/rollup-plugin-asciidoc" target="_blank" rel="noopener">rollup-plugin-asciidoc</a>. Implementation was quite simple, the plugin is just using <a href="https://asciidoctor.org/docs/asciidoctor.js/" target="_blank" rel="noopener">Asciidoctor.js</a> <a href="https://en.wikipedia.org/wiki/JavaScript" target="_blank" rel="noopener">JavaScript</a> library to convert the <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> text input to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a>.</p>
</div>
<div class="sect2">
<h3 id="_rollup_plugin_asciidoc_to_the_rescue"><a href="https://github.com/carlosvin/rollup-plugin-asciidoc" target="_blank" rel="noopener">rollup-plugin-asciidoc</a> to the rescue</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
With <a href="https://github.com/carlosvin/rollup-plugin-asciidoc" target="_blank" rel="noopener">rollup-plugin-asciidoc</a> we can import <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> files in our blog and <a href="https://rollupjs.org" target="_blank" rel="noopener">Rollup</a> will convert them to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_example">Example</h4>
<div class="listingblock">
<div class="title">a-blog-post.adoc</div>
<div class="content">
<pre class="highlight"><code class="language-adoc" data-lang="adoc"><span class="hljs-section">= Post title</span>
<span class="hljs-meta">:date:</span> 2019-11-11

Such a post!</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">With <a href="https://github.com/carlosvin/rollup-plugin-asciidoc" target="_blank" rel="noopener">rollup-plugin-asciidoc</a> we can import <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> files one by one.</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="hljs-keyword">import</span> doc <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./a-blog-post.adoc&#x27;</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doc);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">{
  <span class="hljs-attr">meta</span>: {
    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Post title&quot;</span>,
    <span class="hljs-attr">date</span>: <span class="hljs-string">&quot;2019-11-11&quot;</span>
  },
  <span class="hljs-attr">html</span>: <span class="hljs-string">&quot;&lt;p&gt;Such a post!&lt;/p&gt;&quot;</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Importing files one by one is not really convenient for a blog where we have many files which we don&#8217;t want to import manually.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rollup_plugin_glob_to_the_rescue"><a href="https://www.npmjs.com/package/rollup-plugin-glob" target="_blank" rel="noopener">rollup-plugin-glob</a> to the rescue</h3>
<div class="paragraph">
<p>With <a href="https://www.npmjs.com/package/rollup-plugin-glob" target="_blank" rel="noopener">rollup-plugin-glob</a> we can import all the files in a directory by extension, so now we have our index of posts automatically converted to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="hljs-keyword">import</span> allAdoc <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../posts/**/*.adoc&#x27;</span>;

allAdoc.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">post</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(post));</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output: List of posts already converted to HTML</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">{ <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Post title&quot;</span>, <span class="hljs-attr">date</span>: <span class="hljs-string">&quot;2019-11-11&quot;</span> },
  <span class="hljs-attr">html</span>: <span class="hljs-string">&quot;&lt;p&gt;Post 1.&lt;/p&gt;&quot;</span>
}
{ <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Post title&quot;</span>, <span class="hljs-attr">date</span>: <span class="hljs-string">&quot;2020-02-22&quot;</span> },
  <span class="hljs-attr">html</span>: <span class="hljs-string">&quot;&lt;h2&gt;Title post&lt;/h2&gt;&lt;p&gt;This is a sample post...&lt;/p&gt;&quot;</span>
}
<span class="hljs-comment">// ...</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_syntax_highlighting">Syntax highlighting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>My blog is mainly about Software Engineering, so I have a strong requirement, code highlighting.</p>
</div>
<div class="paragraph">
<p>At the begging I started using <a href="https://highlightjs.org/usage/" target="_blank" rel="noopener">highlightjs library from a CDN</a> for source code highlighting. We use imported library to parse the source code and for styling the result we need to import also a CSS file.</p>
</div>
<div class="paragraph">
<p>Later I realized that we can do the parsing work when we compile <a href="https://asciidoctor.org/" target="_blank" rel="noopener">Asciidoctor</a> to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" rel="noopener">HTML</a> in <a href="https://github.com/carlosvin/rollup-plugin-asciidoc" target="_blank" rel="noopener">rollup-plugin-asciidoc</a> implementation, so we don&#8217;t have to download the <a href="https://en.wikipedia.org/wiki/JavaScript" target="_blank" rel="noopener">JavaScript</a> file.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Doing code highlighting transformation during the site building phase we are improving application performance and reducing bundle size.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Code highlighting transformation during site build step bring 2 great benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reducing bundle size: we don&#8217;t need the 27KB of <a href="https://highlightjs.org/usage/">highlightjs javascript library</a>.</p>
</li>
<li>
<p>Improving performance: source code parsing is done only once while site is built.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_result">Result</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I still have some <a href="https://github.com/carlosvin/carlosvin.github.io/issues" target="_blank" rel="noopener">work to do</a>, but so far I have a blog with following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Automated generation of <a href="/sitemap.xml">Sitemap</a> and <a href="/langs/en/feed.xml">RSS feed</a>.</p>
</li>
<li>
<p>Multi-language support (I still have to translate some texts).</p>
</li>
<li>
<p>Syntax highlighting.</p>
</li>
<li>
<p>100 score in <a href="https://developers.google.com/web/tools/lighthouse" target="_blank" rel="noopener">Lighthouse audits</a>.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts/lighthouse-results.webp" alt="lighthouse score" width="95%">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing">Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I am a big fan of automated testing, I don&#8217;t love writing them, but I think they are the best way to know if your software is behaving as expected.</p>
</div>
<div class="paragraph">
<p><a href="https://sapper.svelte.dev/" target="_blank" rel="noopener">Sapper</a> template brings a pre-configured simple end to end test. It is using <a href="https://www.cypress.io/" target="_blank" rel="noopener">Cypress</a>, an E2E <sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> testing framework which has a nicer developer experience than <a href="https://www.selenium.dev/" target="_blank" rel="noopener">Selenium</a>, although I think it is still far of being <a href="https://blog.logrocket.com/cypress-io-the-selenium-killer/" target="_blank" rel="noopener">the Selenium Killer</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Not yet a <a href="https://www.selenium.dev/" target="_blank" rel="noopener">Selenium</a> killer: The main reason is that <a href="https://www.cypress.io/" target="_blank" rel="noopener">Cypress</a> lacks of some features you might need, depending on the project, like cross-browser and cross-platform testing offered by <a href="https://www.selenium.dev/documentation/en/grid/components_of_a_grid/" target="_blank" rel="noopener">Selenium grid</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>I&#8217;ve added some tests for this blog (and I plan to add more), I&#8217;ve tested that post header information is correct, that redirection logic is working, main navigation works and metadata is correct, in a couple of hour and including bugfixes! That&#8217;s why I love writing tests with <a href="https://www.cypress.io/" target="_blank" rel="noopener">Cypress</a>, the productivity.</p>
</div>
<div class="sect2">
<h3 id="_writing_a_test">Writing a test</h3>
<div class="paragraph">
<p>It works pretty much as Selenium.
. Opens a page
. Access to an element using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/id" target="_blank" rel="noopener">HTML identifier</a> (<code>#element-id</code>), <a href="https://en.wikipedia.org/wiki/XPath" target="_blank" rel="noopener">XPath</a> (<code>/a[@title='link title']</code>) or <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors" target="_blank" rel="noopener">CSS selector</a> (<code>div &gt; a.cssClass</code>).
. Interact with selected element on the page.
. Validate expectations.</p>
</div>
<div class="paragraph">
<p>You can find this blog tests at <a href="https://github.com/carlosvin/carlosvin.github.io/tree/site/cypress/integration">cypress/integration</a> folder.</p>
</div>
<div class="listingblock">
<div class="title">Simple test example</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;Header&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  cy.<span class="hljs-title function_">visit</span>(<span class="hljs-string">&#x27;/posts/this-is-sapper/en&#x27;</span>) <b class="conum">(1)</b>
  cy.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;.subtitle .date&#x27;</span>).<span class="hljs-title function_">contains</span>(<span class="hljs-string">&#x27;28/08/2020&#x27;</span>) <b class="conum">(2)</b>
});</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>It navigates to the post absolute path</p>
</li>
<li>
<p>It checks that date is correct in subtitle</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_typescript">Typescript</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Finally <a href="https://svelte.dev/blog/svelte-and-typescript">Svelte support for Typescript is completed</a> and after quite few some work, I&#8217;ve migrated <a href="https://github.com/carlosvin/carlosvin.github.io">this Blog supported by Sapper to Typescript also</a>. Feel free to use it as template or example, there are still some caveats, like clarify wether keep using eslint or svelte-check or both.</p>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Progressive Web Application
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. End to end
</div>
</div><!----> <div class="comments"><script src="https://utteranc.es/client.js" repo="carlosvin/carlosvin.github.io" issue-term="title" label="comment" theme="github-light" crossorigin="anonymous" async>
	</script></div><!----></div><!----><!----><!----></main><!----><!--]--><!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_zc2u8q = {
						base: new URL("../../../..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [null,{"type":"data","data":{path:"/langs/en/posts/this-is-sapper/",lang:"en",translations:{lang:"en",author:"Carlos Martin Sanchez",siteName:"Carlos Say's Bla Bla",siteDescription:"What is going on in my mind and its surroundings",categories:"categories",Categories:"Categories",RecentPosts:"Recent posts",NoPosts:"There are no posts",SubscribeTo:"Subscribe to the feed",AboutMe:"About me",AllPosts:"All posts"}},"uses":{"params":["lang"],"url":1},"slash":"always"},{"type":"data","data":{html:"\u003Cdiv id=\"toc\" class=\"toc\">\n\u003Cdiv id=\"toctitle\">Table of Contents\u003C/div>\n\u003Cul class=\"sectlevel1\">\n\u003Cli>\u003Ca href=\"#_why_leaving_nikola\">Why leaving Nikola\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_why_sapper\">Why Sapper\u003C/a>\n\u003Cul class=\"sectlevel2\">\n\u003Cli>\u003Ca href=\"#_dx_developer_experience\">DX: Developer experience\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_ux_final_result_of_blogs_in_sapper\">UX: Final result of blogs in Sapper\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\u003Ca href=\"#_asciidoctor\">Asciidoctor\u003C/a>\n\u003Cul class=\"sectlevel2\">\n\u003Cli>\u003Ca href=\"#_rollup_plugin_asciidoc_to_the_rescue\">rollup-plugin-asciidoc to the rescue\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_rollup_plugin_glob_to_the_rescue\">rollup-plugin-glob to the rescue\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\u003Ca href=\"#_syntax_highlighting\">Syntax highlighting\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_result\">Result\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"#_testing\">Testing\u003C/a>\n\u003Cul class=\"sectlevel2\">\n\u003Cli>\u003Ca href=\"#_writing_a_test\">Writing a test\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\u003Ca href=\"#_typescript\">Typescript\u003C/a>\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003Cdiv id=\"preamble\">\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>I&#8217;ve migrated my blog infrastructure from \u003Ca href=\"https://getnikola.com\" target=\"_blank\" rel=\"noopener\">Nikola\u003C/a> + \u003Ca href=\"https://en.wikipedia.org/wiki/ReStructuredText\" target=\"_blank\" rel=\"noopener\">reStructuredText\u003C/a> to \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a> + \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a>.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_why_leaving_nikola\">Why leaving \u003Ca href=\"https://getnikola.com\" target=\"_blank\" rel=\"noopener\">Nikola\u003C/a>\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>This blog was powered by \u003Ca href=\"https://getnikola.com\" target=\"_blank\" rel=\"noopener\">Nikola\u003C/a> since 2014, when \u003Ca href=\"https://jamstack.org\" target=\"_blank\" rel=\"noopener\">JAMStack\u003C/a> term didn&#8217;t even exist. It really did the job, it has out-of-the-box features that I needed:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>Simple multi-lang support.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Ca href=\"https://en.wikipedia.org/wiki/ReStructuredText\" target=\"_blank\" rel=\"noopener\">reStructuredText\u003C/a> which I prefer over \u003Ca href=\"https://en.wikipedia.org/wiki/Markdown\" target=\"_blank\" rel=\"noopener\">Markdown\u003C/a>.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>It was developed in \u003Ca href=\"https://python.org\" target=\"_blank\" rel=\"noopener\">Python\u003C/a>, a programming language that I know and I enjoy.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>But, I faced some \u003Cstrong>issues\u003C/strong> which annoyed me for quite some time:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>My config file got bloated.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>It was not easy to modify or create templates, neither to find templates I liked.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Site performance was not awesome, my last \u003Ca href=\"https://developers.google.com/web/tools/lighthouse\" target=\"_blank\" rel=\"noopener\">Lighthouse audits\u003C/a> report was around 80, depending on the section. Except SEO section, which was 96.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_why_sapper\">Why Sapper\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_dx_developer_experience\">DX: Developer experience\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>I already used \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a> for creating some tiny \u003Ca href=\"https://web.dev/progressive-web-apps\" target=\"_blank\" rel=\"noopener\">PWA\u003C/a>s \u003Csup class=\"footnote\">[\u003Ca id=\"_footnoteref_1\" class=\"footnote\" href=\"#_footnotedef_1\" title=\"View footnote.\">1\u003C/a>]\u003C/sup>, here 2 examples I developed to learn \u003Ca href=\"https://svelte.dev\" target=\"_blank\" rel=\"noopener\">Svelte\u003C/a> and \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a>:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"dlist\">\n\u003Cdl>\n\u003Cdt class=\"hdlist1\">\u003Ca href=\"https://currency-loss.netlify.app\" target=\"_blank\" rel=\"noopener\">Currency Exchage Loss Calculator\u003C/a>\u003C/dt>\n\u003Cdd>\n\u003Cp>It is a helpful application for travelers visiting currency exchange houses. Based on the rate they offer and the money you want ot change it calculates the amount of money that you are losing in that transaction.\u003C/p>\n\u003C/dd>\n\u003Cdt class=\"hdlist1\">\u003Ca href=\"https://covid-stats-pwa.netlify.app\" target=\"_blank\" rel=\"noopener\">COVID-19 Stats\u003C/a>\u003C/dt>\n\u003Cdd>\n\u003Cp>It shows COVID-19 statistics by country and date.\u003C/p>\n\u003C/dd>\n\u003C/dl>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>While creating those \u003Ca href=\"https://web.dev/progressive-web-apps\" target=\"_blank\" rel=\"noopener\">PWA\u003C/a>s, developing experience with \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a>&amp;\u003Ca href=\"https://svelte.dev\" target=\"_blank\" rel=\"noopener\">Svelte\u003C/a> was quite impressive.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_ux_final_result_of_blogs_in_sapper\">UX: Final result of blogs in Sapper\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Lately I&#8217;ve stumbled upon with some blogs using \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a> like the own \u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a> blog, \u003Ca href=\"https://www.codingwithjesse.com/blog/statically-generating-a-blog-with-svelte-sapper/\" target=\"_blank\" rel=\"noopener\">Coding with Jessie\u003C/a> or \u003Ca href=\"https://www.swyx.io/writing/svelte-static/\" target=\"_blank\" rel=\"noopener\">swyx.io\u003C/a>. Check those blogs by yourself, IMHO user experience is pretty good in all of them.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"admonitionblock note\">\n\u003Ctable>\n\u003Ctr>\n\u003Ctd class=\"icon\">\n\u003Cdiv class=\"title\">Note\u003C/div>\n\u003C/td>\n\u003Ctd class=\"content\">\n\u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a> is inspired in \u003Ca href=\"https://nextjs.org/\">Next.js\u003C/a>, here you can find \u003Ca href=\"https://sapper.svelte.dev/docs#Comparison_with_Next_js\">a comparison with this better known JAMStack framework\u003C/a>.\n\u003C/td>\n\u003C/tr>\n\u003C/table>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_asciidoctor\">\u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a>\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>I don&#8217;t have a strong opinion about using \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> or \u003Ca href=\"https://en.wikipedia.org/wiki/ReStructuredText\" target=\"_blank\" rel=\"noopener\">reStructuredText\u003C/a>, I am comfortable with both of them, but there is more support for \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> in other programming languages, like \u003Ca href=\"https://en.wikipedia.org/wiki/JavaScript\" target=\"_blank\" rel=\"noopener\">JavaScript\u003C/a>. So basically I switched to \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> because I didn&#8217;t find a \u003Ca href=\"https://en.wikipedia.org/wiki/JavaScript\" target=\"_blank\" rel=\"noopener\">JavaScript\u003C/a> library able to properly convert \u003Ca href=\"https://en.wikipedia.org/wiki/ReStructuredText\" target=\"_blank\" rel=\"noopener\">reStructuredText\u003C/a> to \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>The main issue I found not using \u003Ca href=\"https://en.wikipedia.org/wiki/Markdown\" target=\"_blank\" rel=\"noopener\">Markdown\u003C/a> was the lack of \u003Ca href=\"https://rollupjs.org\" target=\"_blank\" rel=\"noopener\">Rollup\u003C/a> plugins to convert \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> to \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a>, so I just created one, \u003Ca href=\"https://github.com/carlosvin/rollup-plugin-asciidoc\" target=\"_blank\" rel=\"noopener\">rollup-plugin-asciidoc\u003C/a>. Implementation was quite simple, the plugin is just using \u003Ca href=\"https://asciidoctor.org/docs/asciidoctor.js/\" target=\"_blank\" rel=\"noopener\">Asciidoctor.js\u003C/a> \u003Ca href=\"https://en.wikipedia.org/wiki/JavaScript\" target=\"_blank\" rel=\"noopener\">JavaScript\u003C/a> library to convert the \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> text input to \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_rollup_plugin_asciidoc_to_the_rescue\">\u003Ca href=\"https://github.com/carlosvin/rollup-plugin-asciidoc\" target=\"_blank\" rel=\"noopener\">rollup-plugin-asciidoc\u003C/a> to the rescue\u003C/h3>\n\u003Cdiv class=\"admonitionblock tip\">\n\u003Ctable>\n\u003Ctr>\n\u003Ctd class=\"icon\">\n\u003Cdiv class=\"title\">Tip\u003C/div>\n\u003C/td>\n\u003Ctd class=\"content\">\nWith \u003Ca href=\"https://github.com/carlosvin/rollup-plugin-asciidoc\" target=\"_blank\" rel=\"noopener\">rollup-plugin-asciidoc\u003C/a> we can import \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> files in our blog and \u003Ca href=\"https://rollupjs.org\" target=\"_blank\" rel=\"noopener\">Rollup\u003C/a> will convert them to \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a>.\n\u003C/td>\n\u003C/tr>\n\u003C/table>\n\u003C/div>\n\u003Cdiv class=\"sect3\">\n\u003Ch4 id=\"_example\">Example\u003C/h4>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">a-blog-post.adoc\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-adoc\" data-lang=\"adoc\">\u003Cspan class=\"hljs-section\">= Post title\u003C/span>\n\u003Cspan class=\"hljs-meta\">:date:\u003C/span> 2019-11-11\n\nSuch a post!\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">With \u003Ca href=\"https://github.com/carlosvin/rollup-plugin-asciidoc\" target=\"_blank\" rel=\"noopener\">rollup-plugin-asciidoc\u003C/a> we can import \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> files one by one.\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-javascript\" data-lang=\"javascript\">\u003Cspan class=\"hljs-keyword\">import\u003C/span> doc \u003Cspan class=\"hljs-keyword\">from\u003C/span> \u003Cspan class=\"hljs-string\">&#x27;./a-blog-post.adoc&#x27;\u003C/span>;\n\n\u003Cspan class=\"hljs-variable language_\">console\u003C/span>.\u003Cspan class=\"hljs-title function_\">log\u003C/span>(doc);\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">Output\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-javascript\" data-lang=\"javascript\">{\n  \u003Cspan class=\"hljs-attr\">meta\u003C/span>: {\n    \u003Cspan class=\"hljs-attr\">title\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Post title&quot;\u003C/span>,\n    \u003Cspan class=\"hljs-attr\">date\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;2019-11-11&quot;\u003C/span>\n  },\n  \u003Cspan class=\"hljs-attr\">html\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;&lt;p&gt;Such a post!&lt;/p&gt;&quot;\u003C/span>\n}\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Importing files one by one is not really convenient for a blog where we have many files which we don&#8217;t want to import manually.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_rollup_plugin_glob_to_the_rescue\">\u003Ca href=\"https://www.npmjs.com/package/rollup-plugin-glob\" target=\"_blank\" rel=\"noopener\">rollup-plugin-glob\u003C/a> to the rescue\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>With \u003Ca href=\"https://www.npmjs.com/package/rollup-plugin-glob\" target=\"_blank\" rel=\"noopener\">rollup-plugin-glob\u003C/a> we can import all the files in a directory by extension, so now we have our index of posts automatically converted to \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-javascript\" data-lang=\"javascript\">\u003Cspan class=\"hljs-keyword\">import\u003C/span> allAdoc \u003Cspan class=\"hljs-keyword\">from\u003C/span> \u003Cspan class=\"hljs-string\">&#x27;../posts/**/*.adoc&#x27;\u003C/span>;\n\nallAdoc.\u003Cspan class=\"hljs-title function_\">forEach\u003C/span>(\u003Cspan class=\"hljs-function\">\u003Cspan class=\"hljs-params\">post\u003C/span> =&gt;\u003C/span> \u003Cspan class=\"hljs-variable language_\">console\u003C/span>.\u003Cspan class=\"hljs-title function_\">log\u003C/span>(post));\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">Output: List of posts already converted to HTML\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-javascript\" data-lang=\"javascript\">{ \u003Cspan class=\"hljs-attr\">meta\u003C/span>: { \u003Cspan class=\"hljs-attr\">title\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Post title&quot;\u003C/span>, \u003Cspan class=\"hljs-attr\">date\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;2019-11-11&quot;\u003C/span> },\n  \u003Cspan class=\"hljs-attr\">html\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;&lt;p&gt;Post 1.&lt;/p&gt;&quot;\u003C/span>\n}\n{ \u003Cspan class=\"hljs-attr\">meta\u003C/span>: { \u003Cspan class=\"hljs-attr\">title\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;Post title&quot;\u003C/span>, \u003Cspan class=\"hljs-attr\">date\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;2020-02-22&quot;\u003C/span> },\n  \u003Cspan class=\"hljs-attr\">html\u003C/span>: \u003Cspan class=\"hljs-string\">&quot;&lt;h2&gt;Title post&lt;/h2&gt;&lt;p&gt;This is a sample post...&lt;/p&gt;&quot;\u003C/span>\n}\n\u003Cspan class=\"hljs-comment\">// ...\u003C/span>\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_syntax_highlighting\">Syntax highlighting\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>My blog is mainly about Software Engineering, so I have a strong requirement, code highlighting.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>At the begging I started using \u003Ca href=\"https://highlightjs.org/usage/\" target=\"_blank\" rel=\"noopener\">highlightjs library from a CDN\u003C/a> for source code highlighting. We use imported library to parse the source code and for styling the result we need to import also a CSS file.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Later I realized that we can do the parsing work when we compile \u003Ca href=\"https://asciidoctor.org/\" target=\"_blank\" rel=\"noopener\">Asciidoctor\u003C/a> to \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/HTML\" target=\"_blank\" rel=\"noopener\">HTML\u003C/a> in \u003Ca href=\"https://github.com/carlosvin/rollup-plugin-asciidoc\" target=\"_blank\" rel=\"noopener\">rollup-plugin-asciidoc\u003C/a> implementation, so we don&#8217;t have to download the \u003Ca href=\"https://en.wikipedia.org/wiki/JavaScript\" target=\"_blank\" rel=\"noopener\">JavaScript\u003C/a> file.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"admonitionblock tip\">\n\u003Ctable>\n\u003Ctr>\n\u003Ctd class=\"icon\">\n\u003Cdiv class=\"title\">Tip\u003C/div>\n\u003C/td>\n\u003Ctd class=\"content\">\nDoing code highlighting transformation during the site building phase we are improving application performance and reducing bundle size.\n\u003C/td>\n\u003C/tr>\n\u003C/table>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Code highlighting transformation during site build step bring 2 great benefits:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>Reducing bundle size: we don&#8217;t need the 27KB of \u003Ca href=\"https://highlightjs.org/usage/\">highlightjs javascript library\u003C/a>.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Improving performance: source code parsing is done only once while site is built.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_result\">Result\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>I still have some \u003Ca href=\"https://github.com/carlosvin/carlosvin.github.io/issues\" target=\"_blank\" rel=\"noopener\">work to do\u003C/a>, but so far I have a blog with following features:\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"ulist\">\n\u003Cul>\n\u003Cli>\n\u003Cp>Automated generation of \u003Ca href=\"/sitemap.xml\">Sitemap\u003C/a> and \u003Ca href=\"/langs/en/feed.xml\">RSS feed\u003C/a>.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Multi-language support (I still have to translate some texts).\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Syntax highlighting.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>100 score in \u003Ca href=\"https://developers.google.com/web/tools/lighthouse\" target=\"_blank\" rel=\"noopener\">Lighthouse audits\u003C/a>.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003C/div>\n\u003Cdiv class=\"imageblock\">\n\u003Cdiv class=\"content\">\n\u003Cimg src=\"/posts/lighthouse-results.webp\" alt=\"lighthouse score\" width=\"95%\">\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_testing\">Testing\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>I am a big fan of automated testing, I don&#8217;t love writing them, but I think they are the best way to know if your software is behaving as expected.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>\u003Ca href=\"https://sapper.svelte.dev/\" target=\"_blank\" rel=\"noopener\">Sapper\u003C/a> template brings a pre-configured simple end to end test. It is using \u003Ca href=\"https://www.cypress.io/\" target=\"_blank\" rel=\"noopener\">Cypress\u003C/a>, an E2E \u003Csup class=\"footnote\">[\u003Ca id=\"_footnoteref_2\" class=\"footnote\" href=\"#_footnotedef_2\" title=\"View footnote.\">2\u003C/a>]\u003C/sup> testing framework which has a nicer developer experience than \u003Ca href=\"https://www.selenium.dev/\" target=\"_blank\" rel=\"noopener\">Selenium\u003C/a>, although I think it is still far of being \u003Ca href=\"https://blog.logrocket.com/cypress-io-the-selenium-killer/\" target=\"_blank\" rel=\"noopener\">the Selenium Killer\u003C/a>.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"admonitionblock note\">\n\u003Ctable>\n\u003Ctr>\n\u003Ctd class=\"icon\">\n\u003Cdiv class=\"title\">Note\u003C/div>\n\u003C/td>\n\u003Ctd class=\"content\">\nNot yet a \u003Ca href=\"https://www.selenium.dev/\" target=\"_blank\" rel=\"noopener\">Selenium\u003C/a> killer: The main reason is that \u003Ca href=\"https://www.cypress.io/\" target=\"_blank\" rel=\"noopener\">Cypress\u003C/a> lacks of some features you might need, depending on the project, like cross-browser and cross-platform testing offered by \u003Ca href=\"https://www.selenium.dev/documentation/en/grid/components_of_a_grid/\" target=\"_blank\" rel=\"noopener\">Selenium grid\u003C/a>.\n\u003C/td>\n\u003C/tr>\n\u003C/table>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>I&#8217;ve added some tests for this blog (and I plan to add more), I&#8217;ve tested that post header information is correct, that redirection logic is working, main navigation works and metadata is correct, in a couple of hour and including bugfixes! That&#8217;s why I love writing tests with \u003Ca href=\"https://www.cypress.io/\" target=\"_blank\" rel=\"noopener\">Cypress\u003C/a>, the productivity.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"sect2\">\n\u003Ch3 id=\"_writing_a_test\">Writing a test\u003C/h3>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>It works pretty much as Selenium.\n. Opens a page\n. Access to an element using \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/id\" target=\"_blank\" rel=\"noopener\">HTML identifier\u003C/a> (\u003Ccode>#element-id\u003C/code>), \u003Ca href=\"https://en.wikipedia.org/wiki/XPath\" target=\"_blank\" rel=\"noopener\">XPath\u003C/a> (\u003Ccode>/a[@title='link title']\u003C/code>) or \u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors\" target=\"_blank\" rel=\"noopener\">CSS selector\u003C/a> (\u003Ccode>div &gt; a.cssClass\u003C/code>).\n. Interact with selected element on the page.\n. Validate expectations.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"paragraph\">\n\u003Cp>You can find this blog tests at \u003Ca href=\"https://github.com/carlosvin/carlosvin.github.io/tree/site/cypress/integration\">cypress/integration\u003C/a> folder.\u003C/p>\n\u003C/div>\n\u003Cdiv class=\"listingblock\">\n\u003Cdiv class=\"title\">Simple test example\u003C/div>\n\u003Cdiv class=\"content\">\n\u003Cpre class=\"highlight\">\u003Ccode class=\"language-javascript\" data-lang=\"javascript\">\u003Cspan class=\"hljs-title function_\">it\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;Header&#x27;\u003C/span>, \u003Cspan class=\"hljs-function\">() =&gt;\u003C/span> {\n  cy.\u003Cspan class=\"hljs-title function_\">visit\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;/posts/this-is-sapper/en&#x27;\u003C/span>) \u003Cb class=\"conum\">(1)\u003C/b>\n  cy.\u003Cspan class=\"hljs-title function_\">get\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;.subtitle .date&#x27;\u003C/span>).\u003Cspan class=\"hljs-title function_\">contains\u003C/span>(\u003Cspan class=\"hljs-string\">&#x27;28/08/2020&#x27;\u003C/span>) \u003Cb class=\"conum\">(2)\u003C/b>\n});\u003C/code>\u003C/pre>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"colist arabic\">\n\u003Col>\n\u003Cli>\n\u003Cp>It navigates to the post absolute path\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>It checks that date is correct in subtitle\u003C/p>\n\u003C/li>\n\u003C/ol>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv class=\"sect1\">\n\u003Ch2 id=\"_typescript\">Typescript\u003C/h2>\n\u003Cdiv class=\"sectionbody\">\n\u003Cdiv class=\"paragraph\">\n\u003Cp>Finally \u003Ca href=\"https://svelte.dev/blog/svelte-and-typescript\">Svelte support for Typescript is completed\u003C/a> and after quite few some work, I&#8217;ve migrated \u003Ca href=\"https://github.com/carlosvin/carlosvin.github.io\">this Blog supported by Sapper to Typescript also\u003C/a>. Feel free to use it as template or example, there are still some caveats, like clarify wether keep using eslint or svelte-check or both.\u003C/p>\n\u003C/div>\n\u003C/div>\n\u003C/div>\n\u003Cdiv id=\"footnotes\">\n\u003Chr>\n\u003Cdiv class=\"footnote\" id=\"_footnotedef_1\">\n\u003Ca href=\"#_footnoteref_1\">1\u003C/a>. Progressive Web Application\n\u003C/div>\n\u003Cdiv class=\"footnote\" id=\"_footnotedef_2\">\n\u003Ca href=\"#_footnoteref_2\">2\u003C/a>. End to end\n\u003C/div>\n\u003C/div>",props:{title:"This is Sapper!",lang:"en",summary:"This static blog site has been migrated from Nikola to Sapper. In this article we will go through the main reasons, performance results and some other thoughts about using Sapper and Svelte for generate an static web site",slug:"this-is-sapper",keywords:["Sapper","Svelte","JAMStack","PWA","Static Site Generator"],filepath:"/static/posts/this-is-sapper.adoc",dirpath:"/static/posts",created:1587254400000,modified:1587254400000,otherLangs:["es"],author:"Carlos",previewimage:"https://sapper.svelte.dev/sapper-logo-horizontal.svg",path:"/langs/en/posts/this-is-sapper"},jsonLd:"\u003Cscript type=\"application/ld+json\">{\"@context\":\"https://schema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"Webpage\",\"@id\":\"https://google.com/article\"},\"headline\":\"This is Sapper!\",\"alternativeHeadline\":\"This static blog site has been migrated from Nikola to Sapper. In this article we will go through the main reasons, performance results and some other thoughts about using Sapper and Svelte for generate an static web site\",\"description\":\"This static blog site has been migrated from Nikola to Sapper. In this article we will go through the main reasons, performance results and some other thoughts about using Sapper and Svelte for generate an static web site\",\"image\":\"https://sapper.svelte.dev/sapper-logo-horizontal.svg\",\"datePublished\":\"2020-04-19T00:00:00.000Z\",\"dateModified\":\"2020-04-19T00:00:00.000Z\",\"keywords\":[\"Sapper\",\"Svelte\",\"JAMStack\",\"PWA\",\"Static Site Generator\"],\"author\":{\"@type\":\"Person\",\"name\":\"Carlos\"},\"publisher\":{\"@type\":\"Person\",\"name\":\"Carlos\"}}\u003C/script>"},"uses":{"params":["slug","lang"]}}];

					Promise.all([
						import("../../../../_app/immutable/entry/start.C-oHEv2Z.js"),
						import("../../../../_app/immutable/entry/app.DSnmZfIt.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 8],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
