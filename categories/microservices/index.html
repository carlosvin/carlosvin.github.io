<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <meta content=sapper name=generator> <meta content=a22af7614c96254d name=yandex-verification> <link href=/icons/icon-192x192.png rel=apple-touch-icon> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.2949866476.css rel=stylesheet><link href=client/client.ab7128da.css rel=stylesheet><link href=client/Entry.4e3d1a9a.css rel=stylesheet><link href=client/Index.6d042ce3.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Microservices</title><link href=/rss rel=alternate type=application/rss+xml title='Subscribe to Carlos dice "bla bla"'><meta content="Posts related with Microservices" name=description><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-1v6ow72><button class=svelte-1v6ow72>≡</button> <ul class="svelte-1v6ow72 closed"><li class=svelte-1y8uoef><a href=. class=svelte-1y8uoef>Carlos dice "bla bla"</a></li> <li class=svelte-1y8uoef><a href=categories class=svelte-1y8uoef aria-current=page>Categories</a></li> <li class=svelte-1y8uoef><a href=about class=svelte-1y8uoef>About</a></ul> <div class="h svelte-1w8skyw"><a href=/rss class="icon svelte-hpmv97 rss" rel=noopener target=_blank title='Subscribe to Carlos dice "bla bla"'></a> <a href=https://github.com/carlosvin class="icon svelte-hpmv97 github" rel=noopener target=_blank title="Me at github"></a> <a href=https://twitter.com/carlosvin class="icon svelte-hpmv97 twitter" rel=noopener target=_blank title="Me at twitter"></a> <a href=https://stackoverflow.com/story/carlosvin class="icon svelte-hpmv97 stackoverflow" rel=noopener target=_blank title="Me at stackoverflow"></a></div></nav> <main class=svelte-1uhnsl8> <h1>Posts related with Microservices</h1> <ul class=svelte-so88q0><li class=svelte-5htvxd><a href=/posts/reverse-proxy-multidomain-docker/ rel=prefetch>Multi-Domain Docker Containers <span class="svelte-qsdwvk date">24/11/2016</span></a> <div><span class="svelte-qsdwvk summary">How to create different Docker containers with different domain names in the same host.</span> <span class="svelte-qsdwvk summary langs">Available in <span class="svelte-qsdwvk lang"><a href=/posts/reverse-proxy-multidomain-docker/en>en</a></span> </span></div><li class=svelte-5htvxd><a href=/posts/reverse-proxy-multidomain-docker/ rel=prefetch>Contenedores Docker multi-dominio <span class="svelte-qsdwvk date">23/11/2016</span></a> <div><span class="svelte-qsdwvk summary">Cómo crear varios contenedores Docker con diferentes dominios en la misma máquina..</span> <span class="svelte-qsdwvk summary langs">Available in <span class="svelte-qsdwvk lang"><a href=/posts/reverse-proxy-multidomain-docker/es>es</a></span> </span></div></ul></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W){return {category:f,posts:[{sectids:a,"toc-placement":g,notitle:a,stylesheet:a,webfonts:a,prewrap:a,"attribute-undefined":h,"attribute-missing":i,"iconfont-remote":a,"caution-caption":j,"important-caption":k,"note-caption":l,"tip-caption":m,"warning-caption":n,"example-caption":o,"figure-caption":p,"table-caption":q,"toc-title":r,"section-refsig":s,"part-refsig":t,"chapter-refsig":u,"appendix-refsig":c,"appendix-caption":c,"untitled-label":v,"version-label":w,"last-update-label":x,docfile:"reverse-proxy-multidomain-docker.en.adoc",docdir:a,docfilesuffix:y,docname:"reverse-proxy-multidomain-docker.en",embedded:a,asciidoctor:a,"asciidoctor-version":z,"safe-mode-name":A,"safe-mode-secure":a,"safe-mode-level":B,"max-include-depth":C,"user-home":d,backend:D,"max-attribute-value-size":E,linkcss:a,doctype:F,htmlsyntax:b,"backend-html5-doctype-article":a,"doctype-article":a,"backend-html5":a,outfilesuffix:G,filetype:b,"filetype-html":a,"basebackend-html-doctype-article":a,"basebackend-html":a,basebackend:b,stylesdir:d,iconsdir:H,localdate:I,localyear:e,localtime:J,localdatetime:K,docdate:L,docyear:e,doctime:M,docdatetime:N,doctitle:O,date:"2016\u002F11\u002F24 21:00",keywords:[P,f],description:Q,lang:"en",toc:a,nginx:R,"nginx-proxy":S,authorcount:T,title:O,summary:Q,html:"\u003Cdiv id=\"toc\" class=\"toc\"\u003E\n\u003Cdiv id=\"toctitle\"\u003ETable of Contents\u003C\u002Fdiv\u003E\n\u003Cul class=\"sectlevel1\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_use_case\"\u003EUse case\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_how_to_configure_multi_domain_reverse_proxy\"\u003EHow to Configure Multi-Domain Reverse Proxy\u003C\u002Fa\u003E\n\u003Cul class=\"sectlevel2\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_example_project_structure\"\u003EExample Project Structure\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_architecture_configuration_docker_compose\"\u003EArchitecture Configuration (docker-compose)\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_application_image_configuration\"\u003EApplication Image Configuration\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_adding_domain_names_to_your_development_environment_configuration\"\u003EAdding domain names to your development environment configuration\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_everything_ready\"\u003EEverything ready!\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_use_case\"\u003EUse case\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EWe have several server applications in the same development environment, each application is bundled in a Docker container, e.g: \u003Cstrong\u003E\"Container A\"\u003C\u002Fstrong\u003E and \u003Cstrong\u003E\"Container B\"\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EWith Docker those applications have the same IP address. One way to differentiate and access to an specific application is exposing different ports.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fdocker-multidomain\u002Fip.png\" alt=\"ip\" width=\"320\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EContainers exposing the same IP address and different ports.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"ulist\"\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003EIf we want to call to \u003Cstrong\u003E\"Application A\"\u003C\u002Fstrong\u003E we will do: \u003Ccode\u003EGET \u003Ca href=\"http:\u002F\u002F10.20.30.40:8080\u002Fcolors\u002Fred\" class=\"bare\"\u003Ehttp:\u002F\u002F10.20.30.40:8080\u002Fcolors\u002Fred\u003C\u002Fa\u003E\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EIf we want to call to \u003Cstrong\u003E\"Application B\"\u003C\u002Fstrong\u003E we will do: \u003Ccode\u003EGET \u003Ca href=\"http:\u002F\u002F10.20.30.40:8081\u002Ffruits\u002Ftomato\" class=\"bare\"\u003Ehttp:\u002F\u002F10.20.30.40:8081\u002Ffruits\u002Ftomato\u003C\u002Fa\u003E\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EBut that solution is a little bit confusing, does 8080 mean we are accessing to \"application A\"?\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EIt would be \u003Cstrong\u003Esimpler and easier\u003C\u002Fstrong\u003E to remind something like:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"ulist\"\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003ECalling \u003Cstrong\u003E\"Application A\"\u003C\u002Fstrong\u003E: \u003Ccode\u003EGET \u003Ca href=\"http:\u002F\u002Fa.domain.com\u002Fcolors\u002Fred\" class=\"bare\"\u003Ehttp:\u002F\u002Fa.domain.com\u002Fcolors\u002Fred\u003C\u002Fa\u003E\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ECalling \u003Cstrong\u003E\"Application B\"\u003C\u002Fstrong\u003E: \u003Ccode\u003EGET \u003Ca href=\"http:\u002F\u002Fb.domain.com\u002Ffruits\u002Ftomato\" class=\"bare\"\u003Ehttp:\u002F\u002Fb.domain.com\u002Ffruits\u002Ftomato\u003C\u002Fa\u003E\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fdocker-multidomain\u002Fdomain.png\" alt=\"domain\" width=\"320\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EAccessing applications by domain name.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EGet that extra semantic value is much simpler than I thought at the beginning and you will see below.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_how_to_configure_multi_domain_reverse_proxy\"\u003EHow to Configure Multi-Domain Reverse Proxy\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EI said it is easy, because we almost have to do nothing, another container will do it for us, especifically we are going to use \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fjwilder\u002Fnginx-proxy\" target=\"_blank\" rel=\"noopener\"\u003Enginx-proxy\u003C\u002Fa\u003E, it will automatically generate the required \u003Ca href=\"https:\u002F\u002Fwww.nginx.com\" target=\"_blank\" rel=\"noopener\"\u003ENGINX\u003C\u002Fa\u003E configurations.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ESo, we will have 2 applications + 1 proxy, that is 3 containers.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fdocker-multidomain\u002Fproxy.png\" alt=\"domain\" width=\"320\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003E3 containers, 2 applications and 1 proxy\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"admonitionblock note\"\u003E\n\u003Ctable\u003E\n\u003Ctr\u003E\n\u003Ctd class=\"icon\"\u003E\n\u003Cdiv class=\"title\"\u003ENote\u003C\u002Fdiv\u003E\n\u003C\u002Ftd\u003E\n\u003Ctd class=\"content\"\u003E\nYou can download the full example at \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fdocker-reverse-proxy-multi-domain\" class=\"bare\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fdocker-reverse-proxy-multi-domain\u003C\u002Fa\u003E.\n\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_example_project_structure\"\u003EExample Project Structure\u003C\u002Fh3\u003E\n\u003Cdiv class=\"dlist\"\u003E\n\u003Cdl\u003E\n\u003Cdt class=\"hdlist1\"\u003Edocker-compose.yaml\u003C\u002Fdt\u003E\n\u003Cdd\u003E\n\u003Cp\u003EMain configuration file describing architecture in previous picture.\u003C\u002Fp\u003E\n\u003C\u002Fdd\u003E\n\u003Cdt class=\"hdlist1\"\u003Ea\u003C\u002Fdt\u003E\n\u003Cdd\u003E\n\u003Cp\u003EApplication A directory.\u003C\u002Fp\u003E\n\u003Cdiv class=\"dlist\"\u003E\n\u003Cdl\u003E\n\u003Cdt class=\"hdlist1\"\u003EDockerfile\u003C\u002Fdt\u003E\n\u003Cdd\u003E\n\u003Cp\u003EContainer A configuration file.\u003C\u002Fp\u003E\n\u003C\u002Fdd\u003E\n\u003C\u002Fdl\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdd\u003E\n\u003Cdt class=\"hdlist1\"\u003Eb\u003C\u002Fdt\u003E\n\u003Cdd\u003E\n\u003Cp\u003EApplication B directory.\u003C\u002Fp\u003E\n\u003Cdiv class=\"dlist\"\u003E\n\u003Cdl\u003E\n\u003Cdt class=\"hdlist1\"\u003EDockerfile\u003C\u002Fdt\u003E\n\u003Cdd\u003E\n\u003Cp\u003EContainer B configuration file.\u003C\u002Fp\u003E\n\u003C\u002Fdd\u003E\n\u003C\u002Fdl\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdd\u003E\n\u003C\u002Fdl\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fdocker-reverse-proxy-multi-domain\" target=\"_blank\" rel=\"noopener\"\u003EView Project\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_architecture_configuration_docker_compose\"\u003EArchitecture Configuration (docker-compose)\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EThe relationships between containers is the most interesting part in this example.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003Edocker-reverse-proxy-multi-domain\u002Fdocker-compose.yaml\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-yaml\" data-lang=\"yaml\"\u003E\u003Cspan class=\"hljs-attr\"\u003Ea:\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Ebuild:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ea\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(4)\u003C\u002Fb\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Eenvironment:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003EVIRTUAL_HOST:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ea.domain.com\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Erestart:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ealways\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-attr\"\u003Eb:\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Ebuild:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Eb\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(5)\u003C\u002Fb\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Eenvironment:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003EVIRTUAL_HOST:\u003C\u002Fspan\u003E  \u003Cspan class=\"hljs-string\"\u003Eb.domain.com\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(2)\u003C\u002Fb\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Erestart:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ealways\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-attr\"\u003Enginx-proxy:\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(3)\u003C\u002Fb\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Eimage:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ejwilder\u002Fnginx-proxy\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Eports:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-bullet\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"80:80\"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-bullet\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"443:443\"\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Evolumes:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-bullet\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\u002Fvar\u002Frun\u002Fdocker.sock:\u002Ftmp\u002Fdocker.sock:ro\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"hljs-attr\"\u003Erestart:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ealways\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Eprivileged:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003EConfigure the domain name for app a.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EConfigure the domain name for app b.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EFrom this line there is proxy configuration (copy\u002Fpaste part).\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EWe tell docker-compose has to build Docker images within specified directory.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EFor example, we are saying that docker-compose has to build a Docker image using ..\u002Fb\u002FDockerfile file.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_application_image_configuration\"\u003EApplication Image Configuration\u003C\u002Fh3\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003Ea\u002FDockerfile\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-docker\" data-lang=\"docker\"\u003E\u003Cspan class=\"hljs-keyword\"\u003EFROM\u003C\u002Fspan\u003E httpd:\u003Cspan class=\"hljs-number\"\u003E2.4\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n\u003Cspan class=\"hljs-keyword\"\u003ERUN\u003C\u002Fspan\u003E\u003Cspan class=\"bash\"\u003E \u003Cspan class=\"hljs-built_in\"\u003Eecho\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"&lt;html&gt;&lt;body&gt;&lt;h1&gt;A&lt;\u002Fh1&gt;App A works!&lt;\u002Fbody&gt;&lt;\u002Fhtml&gt;\"\u003C\u002Fspan\u003E &gt; \u002Fusr\u002F\u003Cspan class=\"hljs-built_in\"\u003Elocal\u003C\u002Fspan\u003E\u002Fapache2\u002Fhtdocs\u002Findex.html \u003C\u002Fspan\u003E\u003Cb class=\"conum\"\u003E(2)\u003C\u002Fb\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003EWe import an image with an apache server.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EIt serves a file that prints \"Host A\" as default page.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EThe configuration for application B is pretty much the same:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003Eb\u002FDockerfile\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-docker\" data-lang=\"docker\"\u003E\u003Cspan class=\"hljs-keyword\"\u003EFROM\u003C\u002Fspan\u003E httpd:\u003Cspan class=\"hljs-number\"\u003E2.4\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003ERUN\u003C\u002Fspan\u003E\u003Cspan class=\"bash\"\u003E \u003Cspan class=\"hljs-built_in\"\u003Eecho\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"&lt;html&gt;&lt;body&gt;&lt;h1&gt;B&lt;\u002Fh1&gt;App B works!&lt;\u002Fbody&gt;&lt;\u002Fhtml&gt;\"\u003C\u002Fspan\u003E &gt; \u002Fusr\u002F\u003Cspan class=\"hljs-built_in\"\u003Elocal\u003C\u002Fspan\u003E\u002Fapache2\u002Fhtdocs\u002Findex.html\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_adding_domain_names_to_your_development_environment_configuration\"\u003EAdding domain names to your development environment configuration\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EIn Linux we just have to map the local address to domain names you have chosen, in the example \u003Ccode\u003Ea.domain.com\u003C\u002Fcode\u003E and \u003Ccode\u003Eb.domain.com\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u002Fetc\u002Fhosts\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003E127.0.0.1    localhost.localdomain localhost\n::1          localhost6.localdomain6 localhost6\n127.0.0.1    a.domain.com \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n127.0.0.1    b.domain.com\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003EWe just added last 2 lines.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_everything_ready\"\u003EEverything ready!\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ENow we just have to test the example:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003Edocker-compose build\ndocker-compose up\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EThe 3 containers are running now.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ESo we can open our favorite web browser and go to \u003Ccode\u003Ea.domain.com\u003C\u002Fcode\u003E. It will show \u003Cstrong\u003EApp A works!\u003C\u002Fstrong\u003E. If we go to \u003Ccode\u003Eb.domain.com\u003C\u002Fcode\u003E then we will see \u003Cstrong\u003EApp B works!\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fdocker-multidomain\u002Fa.screenshot.png\" alt=\"App A works!\" width=\"320\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"title\"\u003EFigure 1. a.domain.com\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fdocker-multidomain\u002Fb.screenshot.png\" alt=\"App B works!\" width=\"320\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"title\"\u003EFigure 2. b.domain.com\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"admonitionblock note\"\u003E\n\u003Ctable\u003E\n\u003Ctr\u003E\n\u003Ctd class=\"icon\"\u003E\n\u003Cdiv class=\"title\"\u003ENote\u003C\u002Fdiv\u003E\n\u003C\u002Ftd\u003E\n\u003Ctd class=\"content\"\u003E\nIn most of the Linux distros you will need privileges to run Docker commands (\u003Ccode\u003Esudo\u003C\u002Fcode\u003E).\n\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E",slug:U},{sectids:a,"toc-placement":g,notitle:a,stylesheet:a,webfonts:a,prewrap:a,"attribute-undefined":h,"attribute-missing":i,"iconfont-remote":a,"caution-caption":j,"important-caption":k,"note-caption":l,"tip-caption":m,"warning-caption":n,"example-caption":o,"figure-caption":p,"table-caption":q,"toc-title":r,"section-refsig":s,"part-refsig":t,"chapter-refsig":u,"appendix-refsig":c,"appendix-caption":c,"untitled-label":v,"version-label":w,"last-update-label":x,docfile:"reverse-proxy-multidomain-docker.es.adoc",docdir:a,docfilesuffix:y,docname:"reverse-proxy-multidomain-docker.es",embedded:a,asciidoctor:a,"asciidoctor-version":z,"safe-mode-name":A,"safe-mode-secure":a,"safe-mode-level":B,"max-include-depth":C,"user-home":d,backend:D,"max-attribute-value-size":E,linkcss:a,doctype:F,htmlsyntax:b,"backend-html5-doctype-article":a,"doctype-article":a,"backend-html5":a,outfilesuffix:G,filetype:b,"filetype-html":a,"basebackend-html-doctype-article":a,"basebackend-html":a,basebackend:b,stylesdir:d,iconsdir:H,localdate:I,localyear:e,localtime:J,localdatetime:K,docdate:L,docyear:e,doctime:M,docdatetime:N,doctitle:V,date:"2016\u002F11\u002F23 21:00",keywords:[P,f],lang:"es",toc:a,description:W,nginx:R,"nginx-proxy":S,authorcount:T,title:V,summary:W,html:"\u003Cdiv id=\"toc\" class=\"toc\"\u003E\n\u003Cdiv id=\"toctitle\"\u003ETable of Contents\u003C\u002Fdiv\u003E\n\u003Cul class=\"sectlevel1\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_caso_de_uso\"\u003ECaso de Uso\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_cómo_configurar_un_proxy_inverso_multi_dominio\"\u003ECómo configurar un Proxy Inverso Multi-Dominio\u003C\u002Fa\u003E\n\u003Cul class=\"sectlevel2\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_estructura_del_proyecto_de_ejemplo\"\u003EEstructura del proyecto de ejemplo\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_configuración_de_la_arquitectura_docker_compose\"\u003EConfiguración de la arquitectura (docker-compose)\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_configuración_de_la_imágen_de_la_aplicación\"\u003EConfiguración de la imágen de la aplicación\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_añadiendo_los_nombres_de_dominio_a_tu_configuración\"\u003EAñadiendo los nombres de dominio a tu configuración\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_todo_listo\"\u003E¡Todo listo!\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_caso_de_uso\"\u003ECaso de Uso\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ETenemos varias aplicaciones servidoras a la vez en un mismo entorno de desarrollo, cada una encapsulada en un contenedor, llamémosles de ahora en adelante \u003Cstrong\u003E\"Contenedor A\"\u003C\u002Fstrong\u003E y \u003Cstrong\u003E\"Contenedor B\"\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EUtilizando docker estas aplicaciones tienen la misma dirección IP en nuestra máquina, una forma de distinguirlas es cambiando el puerto que exponen.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fdocker-multidomain\u002Fip.png\" alt=\"ip\" width=\"320\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EAplicaciones exponiendo la misma dirección IP utilizando diferentes puertos para diferenciar las aplicaciones.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"ulist\"\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003ESi queremos llamar a la \u003Cstrong\u003E\"aplicación A\"\u003C\u002Fstrong\u003E haremos algo así: \u003Ccode\u003EGET \u003Ca href=\"http:\u002F\u002F10.20.30.40:8080\u002Fcolors\u002Fred\" class=\"bare\"\u003Ehttp:\u002F\u002F10.20.30.40:8080\u002Fcolors\u002Fred\u003C\u002Fa\u003E\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ESi queremos llamar a la \u003Cstrong\u003E\"aplicación B\"\u003C\u002Fstrong\u003E haremos algo así: \u003Ccode\u003EGET \u003Ca href=\"http:\u002F\u002F10.20.30.40:8081\u002Ffruits\u002Ftomato\" class=\"bare\"\u003Ehttp:\u002F\u002F10.20.30.40:8081\u002Ffruits\u002Ftomato\u003C\u002Fa\u003E\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EPero esto es un poco confuso, ¿8080 sigfica que accedemos a las \"aplicación A\" y 8081 significa \"aplicación B\"?\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ESería mucho más sencillo de recordar algo así:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"ulist\"\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003ESi queremos llamar a la \"aplicación A\" haremos algo así: \u003Ccode\u003EGET \u003Ca href=\"http:\u002F\u002Fa.domain.com\u002Fcolors\u002Fred\" class=\"bare\"\u003Ehttp:\u002F\u002Fa.domain.com\u002Fcolors\u002Fred\u003C\u002Fa\u003E\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ESi queremos llamar a la \"aplicación B\" haremos algo así: \u003Ccode\u003EGET \u003Ca href=\"http:\u002F\u002Fb.domain.com\u002Ffruits\u002Ftomato\" class=\"bare\"\u003Ehttp:\u002F\u002Fb.domain.com\u002Ffruits\u002Ftomato\u003C\u002Fa\u003E\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fdocker-multidomain\u002Fdomain.png\" alt=\"domain\" width=\"320\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EDiferenciando aplicaciones por nombre de dominio\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EObtener este valor semántico extra es más sencillo de lo que parece.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_cómo_configurar_un_proxy_inverso_multi_dominio\"\u003ECómo configurar un Proxy Inverso Multi-Dominio\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EDije que era fácil porque no vamos a tener que hacer casi nada, ya que otro contenedor hará casi todo el trabajo por nosotros. Vamos a utilizar \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fjwilder\u002Fnginx-proxy\" target=\"_blank\" rel=\"noopener\"\u003Enginx-proxy\u003C\u002Fa\u003E, que generará automáticamente las configuraciones necesarias para \u003Ca href=\"https:\u002F\u002Fwww.nginx.com\" target=\"_blank\" rel=\"noopener\"\u003ENGINX\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EAsí que al final no tendremos 2 contenedores, sino también tendremos un tercero que hará las veces de proxy.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fdocker-multidomain\u002Fproxy.png\" alt=\"domain\" width=\"320\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ELos 2 contenedores y el proxy.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"admonitionblock note\"\u003E\n\u003Ctable\u003E\n\u003Ctr\u003E\n\u003Ctd class=\"icon\"\u003E\n\u003Cdiv class=\"title\"\u003ENote\u003C\u002Fdiv\u003E\n\u003C\u002Ftd\u003E\n\u003Ctd class=\"content\"\u003E\nPuedes descargar el ejemplo completo desde: \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fdocker-reverse-proxy-multi-domain\" class=\"bare\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fdocker-reverse-proxy-multi-domain\u003C\u002Fa\u003E.\n\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_estructura_del_proyecto_de_ejemplo\"\u003EEstructura del proyecto de ejemplo\u003C\u002Fh3\u003E\n\u003Cdiv class=\"dlist\"\u003E\n\u003Cdl\u003E\n\u003Cdt class=\"hdlist1\"\u003Edocker-compose.yaml\u003C\u002Fdt\u003E\n\u003Cdd\u003E\n\u003Cp\u003EArchivo con la configuración descrita en la imágen previa.\u003C\u002Fp\u003E\n\u003C\u002Fdd\u003E\n\u003Cdt class=\"hdlist1\"\u003Ea\u003C\u002Fdt\u003E\n\u003Cdd\u003E\n\u003Cp\u003EDirectorio para la aplicación A.\u003C\u002Fp\u003E\n\u003Cdiv class=\"dlist\"\u003E\n\u003Cdl\u003E\n\u003Cdt class=\"hdlist1\"\u003EDockerfile\u003C\u002Fdt\u003E\n\u003Cdd\u003E\n\u003Cp\u003EArchivo con la configuración del contenedor A.\u003C\u002Fp\u003E\n\u003C\u002Fdd\u003E\n\u003C\u002Fdl\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdd\u003E\n\u003Cdt class=\"hdlist1\"\u003Eb\u003C\u002Fdt\u003E\n\u003Cdd\u003E\n\u003Cp\u003EDirectorio para la aplicación B.\u003C\u002Fp\u003E\n\u003Cdiv class=\"dlist\"\u003E\n\u003Cdl\u003E\n\u003Cdt class=\"hdlist1\"\u003EDockerfile\u003C\u002Fdt\u003E\n\u003Cdd\u003E\n\u003Cp\u003EArchivo con la configuración del contenedor B.\u003C\u002Fp\u003E\n\u003C\u002Fdd\u003E\n\u003C\u002Fdl\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdd\u003E\n\u003C\u002Fdl\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fdocker-reverse-proxy-multi-domain\" target=\"_blank\" rel=\"noopener\"\u003EVer proyecto\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_configuración_de_la_arquitectura_docker_compose\"\u003EConfiguración de la arquitectura (docker-compose)\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ELa parte más importante es la configuración de las relaciones entre los contenedores.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003Edocker-reverse-proxy-multi-domain\u002Fdocker-compose.yaml\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-yaml\" data-lang=\"yaml\"\u003E\u003Cspan class=\"hljs-attr\"\u003Ea:\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Ebuild:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ea\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(4)\u003C\u002Fb\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Eenvironment:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003EVIRTUAL_HOST:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ea.domain.com\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Erestart:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ealways\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-attr\"\u003Eb:\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Ebuild:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Eb\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(5)\u003C\u002Fb\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Eenvironment:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003EVIRTUAL_HOST:\u003C\u002Fspan\u003E  \u003Cspan class=\"hljs-string\"\u003Eb.domain.com\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(2)\u003C\u002Fb\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Erestart:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ealways\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-attr\"\u003Enginx-proxy:\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(3)\u003C\u002Fb\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Eimage:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ejwilder\u002Fnginx-proxy\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Eports:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-bullet\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"80:80\"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-bullet\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"443:443\"\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Evolumes:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-bullet\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\u002Fvar\u002Frun\u002Fdocker.sock:\u002Ftmp\u002Fdocker.sock:ro\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"hljs-attr\"\u003Erestart:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Ealways\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Eprivileged:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003EConfiguramos el nombre de dominio que queremos utilizar para la aplicación a.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELo mismo para la aplicación b.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EA partir de aquí configuramos el proxy (esta es la parte de copiar y pegar).\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EIndicamos a docker-compose que tiene que construir las imágenes dentro del directorio indicado.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EPor ejemplo, aquí, estamos indicando que docker-compose tiene que construir la imágen docker utilizando .\u002Fb\u002FDockerfile.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_configuración_de_la_imágen_de_la_aplicación\"\u003EConfiguración de la imágen de la aplicación\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EA continuación vamos a comentar la configuración de la imágen del contenedor para la aplicación A.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003Ea\u002FDockerfile\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-docker\" data-lang=\"docker\"\u003E\u003Cspan class=\"hljs-keyword\"\u003EFROM\u003C\u002Fspan\u003E httpd:\u003Cspan class=\"hljs-number\"\u003E2.4\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n\u003Cspan class=\"hljs-keyword\"\u003ERUN\u003C\u002Fspan\u003E\u003Cspan class=\"bash\"\u003E \u003Cspan class=\"hljs-built_in\"\u003Eecho\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"&lt;html&gt;&lt;body&gt;&lt;h1&gt;A&lt;\u002Fh1&gt;App A works!&lt;\u002Fbody&gt;&lt;\u002Fhtml&gt;\"\u003C\u002Fspan\u003E &gt; \u002Fusr\u002F\u003Cspan class=\"hljs-built_in\"\u003Elocal\u003C\u002Fspan\u003E\u002Fapache2\u002Fhtdocs\u002Findex.html \u003C\u002Fspan\u003E\u003Cb class=\"conum\"\u003E(2)\u003C\u002Fb\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003EImportamos una imágen con un servidor apache.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EServimos un archivo que muestra \"Host A\" como página por defecto.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ELa configuración para la aplicación B, es prácticamente la misma:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003Eb\u002FDockerfile\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-docker\" data-lang=\"docker\"\u003E\u003Cspan class=\"hljs-keyword\"\u003EFROM\u003C\u002Fspan\u003E httpd:\u003Cspan class=\"hljs-number\"\u003E2.4\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003ERUN\u003C\u002Fspan\u003E\u003Cspan class=\"bash\"\u003E \u003Cspan class=\"hljs-built_in\"\u003Eecho\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"&lt;html&gt;&lt;body&gt;&lt;h1&gt;B&lt;\u002Fh1&gt;App B works!&lt;\u002Fbody&gt;&lt;\u002Fhtml&gt;\"\u003C\u002Fspan\u003E &gt; \u002Fusr\u002F\u003Cspan class=\"hljs-built_in\"\u003Elocal\u003C\u002Fspan\u003E\u002Fapache2\u002Fhtdocs\u002Findex.html\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_añadiendo_los_nombres_de_dominio_a_tu_configuración\"\u003EAñadiendo los nombres de dominio a tu configuración\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EEn Linux simplemente tenemos mapear la dirección local a los nombres de dominio que hayas elegido, en nuestro ejemplo es \u003Ccode\u003Ea.domain.com\u003C\u002Fcode\u003E y \u003Ccode\u003Eb.domain.com\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u002Fetc\u002Fhosts\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003E127.0.0.1     localhost.localdomain localhost\n::1             localhost6.localdomain6 localhost6\n127.0.0.1   a.domain.com \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n127.0.0.1   b.domain.com\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003ESimplemente he añadido las líneas 4 y 5.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_todo_listo\"\u003E¡Todo listo!\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EYa solo nos queda probar el ejemplo.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003Edocker-compose build\ndocker-compose up\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EYa están las tres contenedores arrancados.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EAhora podemos abrir nuestro navegador y escribir a.domain.com y nos mostrará el texto \u003Cem\u003EApp A works!\u003C\u002Fem\u003E. Si escribimos b.domain.com entonces veremos \u003Cem\u003EApp B works!\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fdocker-multidomain\u002Fa.screenshot.png\" alt=\"App A works!\" width=\"320\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"title\"\u003EFigure 1. a.domain.com\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fdocker-multidomain\u002Fb.screenshot.png\" alt=\"App B works!\" width=\"320\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"title\"\u003EFigure 2. b.domain.com\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"admonitionblock note\"\u003E\n\u003Ctable\u003E\n\u003Ctr\u003E\n\u003Ctd class=\"icon\"\u003E\n\u003Cdiv class=\"title\"\u003ENote\u003C\u002Fdiv\u003E\n\u003C\u002Ftd\u003E\n\u003Ctd class=\"content\"\u003E\nEn la mayoría de distribuciones Linux necesitarás privilegios para ejecutar los comandos docker (\u003Ccode\u003Esudo\u003C\u002Fcode\u003E).\n\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E",slug:U}]}}("","html","Appendix",".","2020","Microservices","auto","drop-line","skip","Caution","Important","Note","Tip","Warning","Example","Figure","Table","Table of Contents","Section","Part","Chapter","Untitled","Version","Last updated",".adoc","2.0.10","secure",20,64,"html5",4096,"article",".html",".\u002Fimages\u002Ficons","2020-04-23","22:50:27 +0200","2020-04-23 22:50:27 +0200","2020-04-19","10:46:31 +0200","2020-04-19 10:46:31 +0200","Multi-Domain Docker Containers","Docker","How to create different Docker containers with different domain names in the same host","https:\u002F\u002Fwww.nginx.com[NGINX,window=_blank]","https:\u002F\u002Fgithub.com\u002Fjwilder\u002Fnginx-proxy[nginx-proxy,window=_blank]",0,"reverse-proxy-multidomain-docker","Contenedores Docker multi-dominio","Cómo crear varios contenedores Docker con diferentes dominios en la misma máquina."))]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.ab7128da.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.ab7128da.js")}document.head.appendChild(s)</script> <script async defer> (function (i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date(); a = s.createElement(o),
			m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
		})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

		ga('create', 'UA-1328360-10', 'auto');
		ga('send', 'pageview'); </script> 