<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <meta content=sapper name=generator> <meta content=a22af7614c96254d name=yandex-verification> <link href=/icons/icon-192x192.png rel=apple-touch-icon> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.2755126251.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Creando REST URLs</title><link href=/rss rel=alternate type=application/rss+xml title="Subscribe to Carlos says bla bla"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"Webpage","@id":"https://google.com/article"},"headline":"Creando REST URLs","alternativeHeadline":"Crear REST API: URLs","description":"Crear REST API: URLs","image":"icons/icon-192x192.png","datePublished":"2015-07-26 18:00:00","dateModified":"2015-07-26 18:00:00","keywords":["REST","API","Web Services"],"author":{"@type":"Person","name":"Carlos Martin Sanchez"},"publisher":"Carlos Martin Sanchez"}</script><meta content=2015-07-26 name=date scheme=YYYY-MM-DD><meta content="Crear REST API: URLs" name=description><link href=/posts/rest-urls/en rel=alternate hreflang=en><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/default.min.css rel=preload as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/default.min.css rel=stylesheet></noscript><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-1hjvhrx><li class=svelte-1y8uoef><a href=/ class=svelte-1y8uoef><img alt="Carlos says bla bla" class="svelte-1hjvhrx logo" src=/favicon.png></a></li> <ul class="svelte-1hjvhrx closed"><span class="svelte-1hjvhrx siteName"><li class=svelte-1y8uoef><a href=/ class=svelte-1y8uoef>Carlos says bla bla</a></span> <li class=svelte-1y8uoef><a href=/categories class=svelte-1y8uoef>Categories</a></li> <li class=svelte-1y8uoef><a href=/about class=svelte-1y8uoef>About</a></ul> <div class="h svelte-1w8skyw"><a href=/rss rel=noopener target=_blank class="icon svelte-1lu397 rss" title="Subscribe to Carlos says bla bla"></a> <a href=https://github.com/carlosvin rel=noopener target=_blank class="icon svelte-1lu397 github" title="Find me at github"></a> <a href=https://twitter.com/carlosvin rel=noopener target=_blank class="icon svelte-1lu397 twitter" title="Find me at twitter"></a> <a href=https://stackoverflow.com/story/carlosvin rel=noopener target=_blank class="icon svelte-1lu397 stackoverflow" title="Find me at stackoverflow"></a></div> <button class=svelte-1hjvhrx>≡</button></nav> <main class=svelte-bvcji9> <header class=svelte-1svctju><h1 class=svelte-1svctju>Creando REST URLs <span class="svelte-1svctju share"><a href="https://twitter.com/intent/tweet?url=https://carlosvin.github.io/posts/rest-urls/es&text=Creando REST URLs: Crear REST API: URLs&hashtags=REST,API,Web Services" rel=noopener target=_blank class="icon svelte-1lu397 twitter" title='Share "Creando REST URLs"'></a></span></h1> <p class="svelte-1svctju summary">Crear REST API: URLs</p> <div class="subtitle svelte-16mbbpz"><span class=date>26/07/2015</span> <span class="summary langs">Available in <span class="lang svelte-k3ijyt"><a href=/posts/rest-urls/en rel=prefetch>en</a> </span></span> <span class=svelte-16xp99e><a href=/categories/rest class=svelte-1gu8b1d title=REST><span class="hover svelte-1x4e0dt">REST</span></a><a href=/categories/api class=svelte-1gu8b1d title=API><span class="hover svelte-1x4e0dt">API</span></a><a href=/categories/web-services class=svelte-1gu8b1d title="Web Services"><span class="hover svelte-1x4e0dt">Web Services</span></a></span></div></header> <div class="content svelte-1jaj44x"><div class=toc id=toc> <div id=toctitle>Table of Contents</div> <ul class=sectlevel1> <li><a href=#_fundamentos_rest>Fundamentos REST</a> <ul class=sectlevel2> <li><a href=#_verbos_rest>Verbos REST</a></li> <li><a href=#_acceso_a_recursos>Acceso a Recursos</a></li> <li><a href=#_modificar_recursos>Modificar Recursos</a></li> <li><a href=#_borrar_recursos>Borrar Recursos</a></li> <li><a href=#_crear_recursos>Crear Recursos</a></li> <li><a href=#_colecciones>Colecciones</a></li> </ul> </li> <li><a href=#_típico_error>Típico error</a></li> </ul> </div> <div id=preamble> <div class=sectionbody> <div class=paragraph> <p>Las primeras veces que me puse a diseñar una <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a> <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a> cometí unos cuantos errores, por supuesto. A continuación os voy a contar algunos de los errores que cometí y lo que he entendido hasta hoy sobre la construcción de <a href=https://en.wikipedia.org/wiki/Uniform_resource_locator rel=noopener target=_blank>URL</a>s <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a> con ejemplos.</p> </div> </div> </div> <div class=sect1> <h2 id=_fundamentos_rest>Fundamentos <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a></h2> <div class=sectionbody> <div class=ulist> <ul> <li> <p>Utilizamos <a href=https://en.wikipedia.org/wiki/Uniform_resource_locator rel=noopener target=_blank>URL</a>s para acceder a recursos.</p> </li> <li> <p>Utilizamos <em>verbos</em> para modificar recursos.</p> </li> <li> <p>Nuestros <em>verbos</em> están proporcionados por el protocolo <a href=https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol rel=noopener target=_blank>HTTP</a>.</p> </li> <li> <p>Los <em>verbos</em> tienen un equivalente directo con las operaciones <a href=https://en.wikipedia.org/wiki/CRUD rel=noopener target=_blank>CRUD</a><sup class=footnote>[<a href=#_footnotedef_1 class=footnote title="View footnote." id=_footnoteref_1>1</a>]</sup>.</p> </li> <li> <p>Para acceder a un recurso existente necesitamos su identificador.</p> </li> </ul> </div> <div class=sect2> <h3 id=_verbos_rest>Verbos <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a></h3> <div class=hdlist> <table> <tr> <td class=hdlist1> POST </td> <td class=hdlist2> <p>(<strong>Create</strong>) Utilizado para <strong>crear</strong> nuevos recursos.</p> </td> </tr> <tr> <td class=hdlist1> GET </td> <td class=hdlist2> <p>(<strong>Read</strong>) Utilizado para <strong>leer</strong> un recursos existentes en el sistema.</p> </td> </tr> <tr> <td class=hdlist1> PUT </td> <td class=hdlist2> <p>(<strong>Update</strong>) Utilizado para <strong>actualizar</strong> recursos existentes.</p> </td> </tr> <tr> <td class=hdlist1> DELETE </td> <td class=hdlist2> <p>(<strong>Delete</strong>) Utilizado para <strong>borrar</strong> recursos existentes.</p> </td> </tr> </table> </div> <div class=paragraph> <p>En una tabla quedará más claro</p> </div> <table class="tableblock frame-all grid-all stretch"> <colgroup> <col style=width:33.3333%> <col style=width:33.3333%> <col style=width:33.3334%> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Verbo <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a></th> <th class="tableblock halign-left valign-top">Acción <a href=https://en.wikipedia.org/wiki/CRUD rel=noopener target=_blank>CRUD</a></th> <th class="tableblock halign-left valign-top">Debe exisitir el recurso</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class=tableblock>POST</td> <td class="tableblock halign-left valign-top"><p class=tableblock>Crear</td> <td class="tableblock halign-left valign-top"><p class=tableblock>No</td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class=tableblock>GET</td> <td class="tableblock halign-left valign-top"><p class=tableblock>Leer</td> <td class="tableblock halign-left valign-top"><p class=tableblock>Sí</td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class=tableblock>PUT</td> <td class="tableblock halign-left valign-top"><p class=tableblock>Actualizar</td> <td class="tableblock halign-left valign-top"><p class=tableblock>Sí</td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class=tableblock>DELETE</td> <td class="tableblock halign-left valign-top"><p class=tableblock>Borrar</td> <td class="tableblock halign-left valign-top"><p class=tableblock>Sí</td> </tr> </tbody> </table> </div> <div class=sect2> <h3 id=_acceso_a_recursos>Acceso a Recursos</h3> <div class=paragraph> <p>Un recurso es <em>a lo que quieres acceder</em>. Por ejemplo, un coche.</p> </div> <div class=paragraph> <p>Para poder acceder a un coche no es suficiente con esta información, no puedes ir a un concesionario y preguntar por un coche en general, tienes que decir qué coche quieres. Así que llegas al concesionario y dices:</p> </div> <div class=paragraph> <p><em>Hola, buenos días. Quiero información sobre el Fiat Bravo 1.9 Emotion 120CV</em>.</p> </div> <div class=paragraph> <p>De esta forma el dependiente sabe cuál es y te puede dar la información.</p> </div> <div class=paragraph> <p>"Fiat Bravo 1.9 Emotion 120CV" es nuestro <strong>identificador</strong>.</p> </div> <div class=paragraph> <p>Trasladando el ejemplo a las <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a>s <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a>:</p> </div> <div class=literalblock> <div class=content> <pre>GET   https://tiendadecoches.es/api/coches/fiat-bravo-19-emotion-120cv</pre> </div> </div> <div class=paragraph> <p>De esta forma nuestra <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a> nos puede proporcionar información del coche.</p> </div> <div class=paragraph> <p>Esto es un ejemplo muy simplificado, pero realmente cuando accedemos a un recurso concreto solemos utilizar algo que lo identifique de forma unívoca. Una práctica común y recomendable es utilizar <a href=https://en.wikipedia.org/wiki/Universally_unique_identifier rel=noopener target=_blank>UUID</a>.</p> </div> <div class=literalblock> <div class=content> <pre>GET  https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f</pre> </div> </div> <div class=paragraph> <p>Pero nuestra <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a>, al igual que una tienda, no tiene por qué ser tan estricta, podemos preguntar por los coches que tienen ciertas caracteríticas, podemos ir al concesionario y decir:</p> </div> <div class=paragraph> <p><em>Hola buenos días, quiero un Fiat Bravo</em>.</p> </div> <div class=paragraph> <p>Y el dependiente, amablemente, te mostrará todos los Fiat Bravo que tiene. Veamos cómo podemos decir esto a nuestra <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a>.</p> </div> <div class=literalblock> <div class=content> <pre>GET  https://tiendadecoches.es/api/coches/?marca=fiat&modelo=bravo</pre> </div> </div> <div class=paragraph> <p>Nuestra <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a> nos devolverá todos los coches que son marca Fiat y modelo Bravo.</p> </div> <div class=paragraph> <p>Marca y modelo en este caso son lo que llamamos <strong>parámetros de consulta</strong> (query parameters).</p> </div> <div class=paragraph> <p>Como os habréis dado cuenta durante el ejemplo, para obtener información de un recurso siempre hemos utilizado el <em>verbo</em> <strong>GET</strong>.</p> </div> </div> <div class=sect2> <h3 id=_modificar_recursos>Modificar Recursos</h3> <div class=paragraph> <p>Nuestra <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a> también nos puede permitir modificar un recurso, al igual que para pedir información, para modificar un recurso necesitamos especificar qué recurso queremos modificar, así que necesitamos otra vez un <em>identificador</em>.</p> </div> <div class=paragraph> <p>Antes queríamos información (leer) y utilizábamos nuestro verbo GET, ahora lo único que cambia es el verbo, queremos <strong>modificar</strong> así que utilizamos el verbo equivalente que nos proporciona el protocolo <a href=https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol rel=noopener target=_blank>HTTP</a>: <strong>PUT</strong>.</p> </div> <div class=literalblock> <div class=content> <pre>PUT   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f</pre> </div> </div> <div class=paragraph> <p>Pero nos falta algo, tenemos que decir qué queremos cambiar del coche, por ejemplo, imaginemos que queremos cambiar la cilintrada y poner 100CV.</p> </div> <div class=paragraph> <p>Tenemos que enviar la nueva cilindrada a esta <a href=https://en.wikipedia.org/wiki/Uniform_resource_locator rel=noopener target=_blank>URL</a> <a href=https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f class=bare>https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f</a> por <a href=https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol rel=noopener target=_blank>HTTP</a> utilizando el verbo <strong>PUT</strong>.</p> </div> <div class=paragraph> <p>El protocolo <a href=https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol rel=noopener target=_blank>HTTP</a> nos permite enviar información en un mensaje PUT, así que solo nos falta pensar en el formato en que lo vamos a enviar.</p> </div> <div class=paragraph> <p>Podemos enviarlo en <a href=https://en.wikipedia.org/wiki/JSON rel=noopener target=_blank>JSON</a> o <a href="">XML</a> o como queramos, solo tenemos que estar seguros de que el formato que enviamos es lo que espera recibir el servidor.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class=icon> <div class=title>Note</div> </td> <td class=content> Cuando definimos una <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a> <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a> tenemos que definir también el formato en que vamos a enviar los datos. </td> </tr> </table> </div> <div class=listingblock> <div class=title>Ejemplo en <a href=https://en.wikipedia.org/wiki/JSON rel=noopener target=_blank>JSON</a></div> <div class=content> <pre class=highlight><code class=language-json data-lang=json>{ cilindrada: <span class=hljs-number>100</span> }</code></pre> </div> </div> </div> <div class=sect2> <h3 id=_borrar_recursos>Borrar Recursos</h3> <div class=paragraph> <p>Continuando con el ejemplo de los coches, imaginemos que ahora somos el concesionario, y que ya no queremos vender más ese Fiat Bravo (concretamente el cce05bee-386b-11e5-a151-feff819cdc9f). Seguiremos manteniendo la <a href=https://en.wikipedia.org/wiki/Uniform_resource_locator rel=noopener target=_blank>URL</a> que identifica el recurso, pero cambiamos el verbo, no queremos leer (GET), ni modificar (PUT), queremos <strong>borrar (DELETE)</strong>.</p> </div> <div class=literalblock> <div class=content> <pre>DELETE   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f</pre> </div> </div> <div class=paragraph> <p>En el caso del borrado, no hay que proporcionar ninguna información adicional, con el verbo (DELETE) y el recurso es suficiente.</p> </div> </div> <div class=sect2> <h3 id=_crear_recursos>Crear Recursos</h3> <div class=paragraph> <p>Y nos queda último verbo, <strong>crear (POST)</strong>. En este caso no hay que identificar el recurso, porque no existe todavía.</p> </div> <div class=literalblock> <div class=content> <pre>POST   https://tiendadecoches.es/api/coches/</pre> </div> </div> <div class=paragraph> <p>Lo que sí que tenemos que enviar son los datos del recurso que vamos a crear.</p> </div> <div class=paragraph> <p>En nuestro ejemplo, queremos crear un coche, así que ponemos toda la información necesaria para crear un coche dentro de la llamada POST de <a href=https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol rel=noopener target=_blank>HTTP</a>, algo muy parecido como hemos hecho en el apartado <a href=#_modificar_recursos>Modificar Recursos</a>, pero en este caso mandamos <strong>toda la información necesaria</strong>, no solo la cilindrada.</p> </div> <div class=listingblock> <div class=title>Ejemplo en <a href=https://en.wikipedia.org/wiki/JSON rel=noopener target=_blank>JSON</a></div> <div class=content> <pre class=highlight><code class=language-json data-lang=json>{
  <span class=hljs-attr>"marca"</span>: <span class=hljs-string>"Fiat"</span>,
  <span class=hljs-attr>"modelo"</span>: <span class=hljs-string>"Bravo"</span>
  <span class=hljs-string>"anio"</span>: <span class=hljs-number>2010</span>
  <span class=hljs-string>"puertas"</span>: <span class=hljs-number>5</span>,
  <span class=hljs-attr>"cilindrada"</span>: <span class=hljs-number>120</span>,
  <span class=hljs-attr>"version"</span>: <span class=hljs-string>"Emotion"</span>,
  <span class=hljs-attr>"climatizador"</span>: <span class=hljs-literal>true</span>,
  <span class=hljs-attr>"ac"</span>: <span class=hljs-literal>false</span>,
  <span class=hljs-attr>"fuel"</span>: <span class=hljs-string>"Diesel"</span>
}</code></pre> </div> </div> <div class=paragraph> <p>Podemos delegar en el sistema, para que cuando pidamos la creación de un recurso nuevo, nos asigne un nuevo <strong>identificador</strong>, o simplemente enviarlo con el resto de información:</p> </div> <div class=listingblock> <div class=content> <pre class=highlight><code class=language-json data-lang=json>{
<span class=hljs-attr>"identificador"</span>: <span class=hljs-string>"cce05bee-386b-11e5-a151-feff819cdc9f"</span>
<span class=hljs-string>"marca"</span>: <span class=hljs-string>"Fiat"</span>,
<span class=hljs-attr>"modelo"</span>: <span class=hljs-string>"Bravo"</span>
<span class=hljs-string>"anio"</span>: <span class=hljs-number>2010</span>
<span class=hljs-string>"puertas"</span>: <span class=hljs-number>5</span>,
<span class=hljs-attr>"cilindrada"</span>: <span class=hljs-number>120</span>,
<span class=hljs-attr>"version"</span>: <span class=hljs-string>"Emotion"</span>,
<span class=hljs-attr>"climatizador"</span>: <span class=hljs-literal>true</span>,
<span class=hljs-attr>"ac"</span>: <span class=hljs-literal>false</span>,
<span class=hljs-attr>"fuel"</span>: <span class=hljs-string>"Diesel"</span>
}</code></pre> </div> </div> </div> <div class=sect2> <h3 id=_colecciones>Colecciones</h3> <div class=paragraph> <p>Algo que no quiero pasar por alto, porque al menos para mí no fue obvio, es el manejo de colecciones. Realmente ya está explicado, porque todas las acciones que hemos visto previamente sobre los coches, estaba aplicando realmente a una colección de coches.</p> </div> <div class=paragraph> <p>Pero, ¿qué pasa si un recurso tiene a su vez una colección? Siguiendo con los coches, un coche puede tener una lista de aceites con los que puede funcionar, así que nuestra <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a> debería permitir obtener, modificar, borrar o crear elementos en la lista.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class=icon> <div class=title>Note</div> </td> <td class=content> Para el ejemplo asumiremos que el identificador del aceite es el atributo tipo. </td> </tr> </table> </div> <div class=sect3> <h4 id=_añadir_un_elemento_a_la_colección>Añadir un elemento a la colección</h4> <div class=paragraph> <p>Si queremos añadir un elemento a la colección de coches lo que vamos a hacer es crear un nuevo coche, así que estamos en el caso de <a href=#_crear_recursos>Crear Recursos</a>.</p> </div> <div class=paragraph> <p>Para añadir un nuevo aceite al coche cce05bee-386b-11e5-a151-feff819cdc9f, que ya existe:</p> </div> <div class=listingblock> <div class=title>Petición</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>POST   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/</span></code></pre> </div> </div> <div class=listingblock> <div class=title>Respuesta</div> <div class=content> <pre class=highlight><code class=language-json data-lang=json>{
  <span class=hljs-attr>"tipo"</span>: <span class=hljs-string>"5W30"</span>,
  <span class=hljs-attr>"otros_datos"</span>: <span class=hljs-string>"este es el mejor del mundo para este coche"</span>
}</code></pre> </div> </div> <div class=paragraph> <p>Si queremos añadir otro aceite:</p> </div> <div class=listingblock> <div class=title>Petición</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>POST   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/</span></code></pre> </div> </div> <div class=listingblock> <div class=title>Respuesta</div> <div class=content> <pre class=highlight><code class=language-json data-lang=json>{
  <span class=hljs-attr>"tipo"</span>: <span class=hljs-string>"10W30"</span>,
  <span class=hljs-attr>"otros_datos"</span>: <span class=hljs-string>"otras cosas sobre aceites de coche"</span>,
}</code></pre> </div> </div> </div> <div class=sect3> <h4 id=_modificar_un_elemento_de_la_colección>Modificar un elemento de la colección</h4> <div class=paragraph> <p>Si queremos modificar los datos del aceite <em>5W30</em> del coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p> </div> <div class=listingblock> <div class=title>Petición</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>PUT   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/5W30/</span></code></pre> </div> </div> <div class=listingblock> <div class=title>Respuesta</div> <div class=content> <pre class=highlight><code class=language-json data-lang=json>{
  <span class=hljs-attr>"tipo"</span>: <span class=hljs-string>"5W30"</span>,
  <span class=hljs-attr>"otros_datos"</span>: <span class=hljs-string>"este ya no es el mejor del mundo para este coche"</span>
}</code></pre> </div> </div> </div> <div class=sect3> <h4 id=_borrar_un_elemento_de_la_colección>Borrar un elemento de la colección</h4> <div class=paragraph> <p>Para borrar un aceite <em>10W30</em> del coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p> </div> <div class=listingblock> <div class=title>Petición</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>DELETE   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/10W30</span></code></pre> </div> </div> </div> <div class=sect3> <h4 id=_leer_un_elemento_de_la_colección>Leer un elemento de la colección</h4> <div class=paragraph> <p>Para obtener la información del aceite <em>10W30</em> del coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p> </div> <div class=listingblock> <div class=title>Petición</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>GET   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/10W30</span></code></pre> </div> </div> </div> <div class=sect3> <h4 id=_listar_elementos_de_la_colección>Listar elementos de la colección</h4> <div class=paragraph> <p>Como hemos visto en <a href=#_leer_un_elemento_de_la_colección>Leer un elemento de la colección</a>, podemos obtener información de cualquier elemento de la colección, pero también podemos obtener varios elementos de la colección, ordenarlos, paginarlos y aplicar cualquier tipo de acciones típicas de una colección.</p> </div> <div class=paragraph> <p>Podemos obtener todos los aceites soportados por el coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>, es tan simple como:</p> </div> <div class=listingblock> <div class=title>Petición</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>GET   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/</span></code></pre> </div> </div> <div class=paragraph> <p>Pero también podemos proporcionar otras funcionalidades en nuestra <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a>, como obtener los resultados ordenados:</p> </div> <div class=listingblock> <div class=title>Petición</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>GET   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/?ordenar_por=tipo&orden=ascendente</span></code></pre> </div> </div> <div class=paragraph> <p>Podemos pedir al <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a> que nos devuelva los 10 primeros aceites del coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em>:</p> </div> <div class=listingblock> <div class=title>Petición</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>GET   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/?numero_de_elementos=10</span></code></pre> </div> </div> <div class=paragraph> <p>Cuando no queremos mostrar toda la lista completa, podemos proporcionar un sistema de paginación:</p> </div> <div class=listingblock> <div class=title>Petición</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>GET   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/?pagina=3&numero_de_elementos=3</span></code></pre> </div> </div> <div class=paragraph> <p>En la petición de arriba, estamos diciendo que nos devuelva la página 3 de los aceites del coche <em>cce05bee-386b-11e5-a151-feff819cdc9f</em> y que nos muestre 3 aceites por página. Si quisiéramos ir a la página siguiente:</p> </div> <div class=listingblock> <div class=title>Petición</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>GET   https://tiendadecoches.es/api/coches/cce05bee-386b-11e5-a151-feff819cdc9f/aceites/?pagina=4&numero_de_elementos=3</span></code></pre> </div> </div> <div class=paragraph> <p>Todas estas funcionalidades, son posibles gracias a los <strong>parámetros de consulta</strong>.</p> </div> </div> </div> </div> </div> <div class=sect1> <h2 id=_típico_error>Típico error</h2> <div class=sectionbody> <div class=paragraph> <p>La primera vez que intenté diseñar un <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a> <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a> lo que hice fué otra cosa, era una <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a>, pero no <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a>.</p> </div> <div class=paragraph> <p>Mi principal error fue en la construción de las <a href=https://en.wikipedia.org/wiki/Uniform_resource_locator rel=noopener target=_blank>URL</a>s, incluí <em>verbos</em> sin tener en cuenta que los verbos ya me los proporcionaba el protocolo <a href=https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol rel=noopener target=_blank>HTTP</a>.</p> </div> <div class=paragraph> <p>Por ejemplo, creaba <a href=https://en.wikipedia.org/wiki/Uniform_resource_locator rel=noopener target=_blank>URL</a>s del tipo:</p> </div> <div class=listingblock> <div class=title>Incorrecto</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>POST    https://example.com/api/coches/seat-ibiza/borrar-rueda/3</span></code></pre> </div> </div> <div class=paragraph> <p>Cuando lo correcto sería</p> </div> <div class=listingblock> <div class=title>Correcto</div> <div class=content> <pre class=highlight><code class=language-http data-lang=http><span class=hljs-attribute>DELETE  https://example.com/api/coches/seat-ibiza/ruedas/3</span></code></pre> </div> </div> </div> </div> <div id=footnotes> <hr> <div class=footnote id=_footnotedef_1> <a href=#_footnoteref_1>1</a>. Create, Read, Update, Delete </div> </div></div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.6f2a07f8.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.6f2a07f8.js")}document.head.appendChild(s)</script> <script async defer> (function (i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date(); a = s.createElement(o),
			m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
		})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

		ga('create', 'UA-1328360-10', 'auto');
		ga('send', 'pageview'); </script> 