<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <meta content=sapper name=generator> <meta content=a22af7614c96254d name=yandex-verification> <link href=/icons/icon-192x192.png rel=apple-touch-icon integrity=sha384-wrGPakCw2XdE/oEQRn84jTytG8qKzGn3Eu8nUKzAHeYJ9owQpEUNewZQOj4IoHI3> <base href=/ > <link href=global.css rel=preload as=style integrity=sha384-fiuqT5r+RVuofLff3X+ZyczUdcS2X+eYqZ9ZH11qUKkXpGM97J5Tqv94KeeeZqyo> <link href=global.css rel=stylesheet integrity=sha384-fiuqT5r+RVuofLff3X+ZyczUdcS2X+eYqZ9ZH11qUKkXpGM97J5Tqv94KeeeZqyo> <link href=manifest.json rel=manifest crossorigin=use-credentials integrity=sha384-uvbABvsfA2LgNgoldfTIad7QYRrMk+jJ53noiFxFxSEdOUxSJQBfr7R8Lud6Dyoo> <link href=favicon.png rel=icon integrity=sha384-k8dlcHultdr3I+D1KxjtRCLXRS3o9oW0PMaVQGBP7STX5RLtgO2XLPbDIojwN796 type=image/png> <script> window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) }; ga.l = +new Date;
		ga('create', 'UA-1328360-10', 'auto');
		ga('send', 'pageview'); </script> <script async src=https://www.google-analytics.com/analytics.js></script> <title>Golang over Java for REST services</title><link href=/feeds/en.xml rel=alternate type=application/atom+xml title="Subscribe to Carlos says bla bla"><meta content=2020-11-01 name=date.created><meta content=2020-11-01 name=date.updated><meta content="Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang" name=description><link href=/posts/rest-service-go-vs-java/en.jsonld rel=alternate type=application/ld+json> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,(function(a,b){return {html:"\u003Cdiv id=\"toc\" class=\"toc\"\u003E\n\u003Cdiv id=\"toctitle\"\u003ETable of Contents\u003C\u002Fdiv\u003E\n\u003Cul class=\"sectlevel1\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_actual_project_examples\"\u003EActual project examples\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_the_ecosystems\"\u003EThe Ecosystems\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_routing\"\u003ERouting\u003C\u002Fa\u003E\n\u003Cul class=\"sectlevel2\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_go_without_framework\"\u003EGo - Without framework\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_go_gin_framework\"\u003EGo - Gin Framework\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_java_spring_io\"\u003EJava + Spring.io\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_validations\"\u003EValidations\u003C\u002Fa\u003E\n\u003Cul class=\"sectlevel2\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_go_gin_framework_2\"\u003EGo - Gin Framework\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_java_spring_io_2\"\u003EJava + Spring.io\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_filtering_and_middleware\"\u003EFiltering and Middleware\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_dependency_injection_ioc\"\u003EDependency injection \u002F IoC\u003C\u002Fa\u003E\n\u003Cul class=\"sectlevel2\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_spring_ioc\"\u003ESpring IoC\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_go\"\u003EGo\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_testing\"\u003ETesting\u003C\u002Fa\u003E\n\u003Cul class=\"sectlevel2\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_unit_tests\"\u003EUnit tests\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_integration_tests\"\u003EIntegration tests\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_performance\"\u003EPerformance\u003C\u002Fa\u003E\n\u003Cul class=\"sectlevel2\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_memory\"\u003EMemory\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_speed\"\u003ESpeed\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_conclusions\"\u003EConclusions\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv id=\"preamble\"\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ELately I&#8217;ve been working with two different technology stacks almost in parallel, in both cases we were using them to develop \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FRepresentational_state_transfer\" target=\"_blank\" rel=\"noopener\"\u003EREST\u003C\u002Fa\u003E services.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EDuring this time I&#8217;ve come up with some conclusions and opinions I&#8217;d like to share.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EA disclaimer, few months ago, I had several years of experience with Java and 0 days of professional experience with Golang.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_actual_project_examples\"\u003EActual project examples\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EFew months ago I created \u003Ca href=\"https:\u002F\u002Fcovid-rest.appspot.com\u002Fdocs\" target=\"_blank\" rel=\"noopener\"\u003Ean API to extract and structure COVID-19 data\u003C\u002Fa\u003E from \u003Ca href=\"https:\u002F\u002Fwww.ecdc.europa.eu\u002Fen\u002Fpublications-data\u002Fdownload-todays-data-geographic-distribution-covid-19-cases-worldwide\" target=\"_blank\" rel=\"noopener\"\u003EECDC website\u003C\u002Fa\u003E. I developed it in \u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Frest-service\" target=\"_blank\" rel=\"noopener\"\u003ESpring Boot (REST)\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EFew months later I had the luck of work on my first professional project in \u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E and I decided to create a port of \u003Ca href=\"https:\u002F\u002Fcovid-rest.appspot.com\u002Fdocs\" target=\"_blank\" rel=\"noopener\"\u003Ethe API to extract COVID-19 data\u003C\u002Fa\u003E in \u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E, just for learning and for fun.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ENow we have two REST services, almost functionally identical, but developed in two different tech stacks, so we can easily compare some relevant aspects of both.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Ctable class=\"tableblock frame-all grid-all stretch\"\u003E\n\u003Ccaption class=\"title\"\u003ETable 1. Source code for the 2 REST services implementations\u003C\u002Fcaption\u003E\n\u003Ccolgroup\u003E\n\u003Ccol style=\"width: 50%;\"\u003E\n\u003Ccol style=\"width: 50%;\"\u003E\n\u003C\u002Fcolgroup\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth class=\"tableblock halign-left valign-top\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.java.com\" target=\"_blank\" rel=\"noopener\"\u003EJava\u003C\u002Fa\u003E + \u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Frest-service\" target=\"_blank\" rel=\"noopener\"\u003ESpring Boot (REST)\u003C\u002Fa\u003E\u003C\u002Fth\u003E\n\u003Cth class=\"tableblock halign-left valign-top\"\u003E\u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E + \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgin-gonic\u002Fgin\" target=\"_blank\" rel=\"noopener\"\u003EGin framework\u003C\u002Fa\u003E\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\n\u003Ctr\u003E\n\u003Ctd class=\"tableblock halign-left valign-top\"\u003E\u003Cp class=\"tableblock\"\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fcovid-rest\" class=\"bare\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fcovid-rest\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\n\u003Ctd class=\"tableblock halign-left valign-top\"\u003E\u003Cp class=\"tableblock\"\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fcovid-rest-go\" class=\"bare\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fcovid-rest-go\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\n\u003C\u002Ftable\u003E\n\u003Cdiv class=\"admonitionblock note\"\u003E\n\u003Ctable\u003E\n\u003Ctr\u003E\n\u003Ctd class=\"icon\"\u003E\n\u003Cdiv class=\"title\"\u003ENote\u003C\u002Fdiv\u003E\n\u003C\u002Ftd\u003E\n\u003Ctd class=\"content\"\u003E\nI actually created that \u003Ca href=\"https:\u002F\u002Fcovid-rest.appspot.com\u002Fdocs\"\u003ECOVID-19 data REST API\u003C\u002Fa\u003E to be the data source for the \u003Ca href=\"https:\u002F\u002Fcovid-stats-pwa.netlify.app\" target=\"_blank\" rel=\"noopener\"\u003ECOVID19-Stats App\u003C\u002Fa\u003E, a \u003Ca href=\"https:\u002F\u002Fweb.dev\u002Fprogressive-web-apps\" target=\"_blank\" rel=\"noopener\"\u003EPWA\u003C\u002Fa\u003E built with \u003Ca href=\"https:\u002F\u002Fsvelte.dev\" target=\"_blank\" rel=\"noopener\"\u003ESvelte\u003C\u002Fa\u003E, but that&#8217;s another topic.\n\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_the_ecosystems\"\u003EThe Ecosystems\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EIf you want to create a \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FRepresentational_state_transfer\" target=\"_blank\" rel=\"noopener\"\u003EREST\u003C\u002Fa\u003E service just in plain Java you will have extra work to do, in Golang a little bit less. That&#8217;s why we use framework, because they&#8217;ve already solved many common problems for us.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EFor this comparison I am going to use \u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Frest-service\" target=\"_blank\" rel=\"noopener\"\u003ESpring Boot (REST)\u003C\u002Fa\u003E for \u003Ca href=\"https:\u002F\u002Fwww.java.com\" target=\"_blank\" rel=\"noopener\"\u003EJava\u003C\u002Fa\u003E and \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgin-gonic\u002Fgin\" target=\"_blank\" rel=\"noopener\"\u003EGin framework\u003C\u002Fa\u003E for \u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E, but in both languages there are a lot of production ready nice options.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_routing\"\u003ERouting\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_go_without_framework\"\u003EGo - Without framework\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EGo uses the concept of \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FHypertext_Transfer_Protocol\" target=\"_blank\" rel=\"noopener\"\u003EHTTP\u003C\u002Fa\u003E multiplexer or router. You can specify routes using patterns and link those routes to handlers. The router will decide which handler has to execute the request based on the path received.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003Erouter.go file\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre tabindex=\"0\" class=\"highlight\"\u003E\u003Ccode class=\"language-go\" data-lang=\"go\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Epackage\u003C\u002Fspan\u003E main\n\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E (\n\t\u003Cspan class=\"hljs-string\"\u003E&quot;log&quot;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"hljs-string\"\u003E&quot;net\u002Fhttp&quot;\u003C\u002Fspan\u003E\n)\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E {\n\trouter := http.NewServeMux()\n\trouter.Handle(\u003Cspan class=\"hljs-string\"\u003E&quot;\u002Fredirect&quot;\u003C\u002Fspan\u003E, http.RedirectHandler(\u003Cspan class=\"hljs-string\"\u003E&quot;https:\u002F\u002Fcarlosvin.github.io\u002F&quot;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E307\u003C\u002Fspan\u003E))\n\trouter.HandleFunc(\u003Cspan class=\"hljs-string\"\u003E&quot;\u002Fhello&quot;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(w http.ResponseWriter, r *http.Request)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E {\n\t\tw.Write([]\u003Cspan class=\"hljs-keyword\"\u003Ebyte\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E&quot;Hello world!&quot;\u003C\u002Fspan\u003E))\n\t})\n\tlog.Println(\u003Cspan class=\"hljs-string\"\u003E&quot;Listening...&quot;\u003C\u002Fspan\u003E)\n\thttp.ListenAndServe(\u003Cspan class=\"hljs-string\"\u003E&quot;:3000&quot;\u003C\u002Fspan\u003E, router)\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ESource code is already quite simple, but there might more complex routing use cases.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_go_gin_framework\"\u003EGo - Gin Framework\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EHappily there are frameworks that help us to keep our base code simple, for example when we need to extract path parameters, which is quite common use case in \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FRepresentational_state_transfer\" target=\"_blank\" rel=\"noopener\"\u003EREST\u003C\u002Fa\u003E \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FApplication_programming_interface\" target=\"_blank\" rel=\"noopener\"\u003EAPI\u003C\u002Fa\u003Es, we can use a routing library, I&#8217;ve used \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgorilla\u002Fmux\" target=\"_blank\" rel=\"noopener\"\u003EGorilla Mux\u003C\u002Fa\u003E and \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgin-gonic\u002Fgin\" target=\"_blank\" rel=\"noopener\"\u003EGin framework\u003C\u002Fa\u003E and I liked more \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgin-gonic\u002Fgin\" target=\"_blank\" rel=\"noopener\"\u003EGin framework\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fcovid-rest-go\u002Fblob\u002Fmaster\u002Fmain.go\"\u003EFull example\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre tabindex=\"0\" class=\"highlight\"\u003E\u003Ccode class=\"language-go\" data-lang=\"go\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E (\n\t\u003Cspan class=\"hljs-string\"\u003E&quot;github.com\u002Fcarlosvin\u002Fcovid-rest-go\u002Fhandlers&quot;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"hljs-string\"\u003E&quot;github.com\u002Fcarlosvin\u002Fcovid-rest-go\u002Freaders&quot;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"hljs-string\"\u003E&quot;github.com\u002Fgin-gonic\u002Fgin&quot;\u003C\u002Fspan\u003E\n)\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E {\n\n\t\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n\n\tr := gin.Default()\n\tr.GET(\u003Cspan class=\"hljs-string\"\u003E&quot;\u002Fcountries&quot;\u003C\u002Fspan\u003E, router.Countries)\n\tr.GET(\u003Cspan class=\"hljs-string\"\u003E&quot;\u002Fcountries\u002F:code&quot;\u003C\u002Fspan\u003E, router.Country)\n\tr.GET(\u003Cspan class=\"hljs-string\"\u003E&quot;\u002Fcountries\u002F:code\u002Fdates&quot;\u003C\u002Fspan\u003E, router.CountryDates)\n\tr.GET(\u003Cspan class=\"hljs-string\"\u003E&quot;\u002Fcountries\u002F:code\u002Fdates\u002F:date&quot;\u003C\u002Fspan\u003E, router.CountryDate)\n\tr.Run()\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fcovid-rest-go\u002Fblob\u002Fmaster\u002Fhandlers\u002Fcountries.go\"\u003EAnd this is a handler example\u003C\u002Fa\u003E, the router.Countries one\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre tabindex=\"0\" class=\"highlight\"\u003E\u003Ccode class=\"language-go\" data-lang=\"go\"\u003E\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003E(r *routerImpl)\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003ECountries\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(c *gin.Context)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E {\n\tc.JSON(\u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E, r.countries())\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_java_spring_io\"\u003EJava + Spring.io\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EThe \u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Frest-service\" target=\"_blank\" rel=\"noopener\"\u003ESpring Boot (REST)\u003C\u002Fa\u003E is based on the concept of Controller, it is implemented using annotations on the class and methods.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fcovid-rest\u002Fblob\u002Fmaster\u002Fsrc\u002Fmain\u002Fjava\u002Fcom\u002Fcarlosvin\u002Fcovid\u002Fcontrollers\u002FCountriesController.java\" target=\"_blank\" rel=\"noopener\"\u003ECountriesController.java\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre tabindex=\"0\" class=\"highlight\"\u003E\u003Ccode class=\"language-java\" data-lang=\"java\"\u003E\u003Cspan class=\"hljs-meta\"\u003E@Validated\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E@RestController\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n\u003Cspan class=\"hljs-meta\"\u003E@RequestMapping(&quot;\u002Fcountries&quot;)\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(2)\u003C\u002Fb\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003ECountriesController\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\n\n\t\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F Some source code is not shown, you can find the complete example in the repository\u003C\u002Fspan\u003E\n\n\t\u003Cspan class=\"hljs-meta\"\u003E@GetMapping(&quot;\u002F{country}\u002Fdates\u002F{isoDateStr}&quot;)\u003C\u002Fspan\u003E  \u003Cb class=\"conum\"\u003E(3)\u003C\u002Fb\u003E\n\t\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Epublic\u003C\u002Fspan\u003E DateStatsDto \u003Cspan class=\"hljs-title\"\u003EgetDateByCountry\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(\u003Cspan class=\"hljs-meta\"\u003E@Size(min = 2, max = 2)\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta\"\u003E@PathVariable\u003C\u002Fspan\u003E String country, \u003Cspan class=\"hljs-meta\"\u003E@Size(min = 10, max = 20)\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta\"\u003E@PathVariable\u003C\u002Fspan\u003E String isoDateStr)\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Ethrows\u003C\u002Fspan\u003E NotFoundException \u003C\u002Fspan\u003E{\n\t\t\u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E DateStatsDto(service.getDate(country, DateUtils.convert(isoDateStr)));\n\t}\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003EDeclare the class as Controller so it is registered in \u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Frest-service\" target=\"_blank\" rel=\"noopener\"\u003ESpring Boot (REST)\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EController base path definition\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EHandler definition for a nested path under the main controller path. \u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Frest-service\" target=\"_blank\" rel=\"noopener\"\u003ESpring Boot (REST)\u003C\u002Fa\u003E makes easy to extract path variables defined in the route, you can directly use them as method arguments.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_validations\"\u003EValidations\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_go_gin_framework_2\"\u003EGo - Gin Framework\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgin-gonic\u002Fgin\" target=\"_blank\" rel=\"noopener\"\u003EGin framework\u003C\u002Fa\u003E uses an external validation package \u003Ca href=\"https:\u002F\u002Fgodoc.org\u002Fgithub.com\u002Fgo-playground\u002Fvalidator\"\u003Evalidator\u003C\u002Fa\u003E, besides that it is fully integrated with \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgin-gonic\u002Fgin\" target=\"_blank\" rel=\"noopener\"\u003EGin framework\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre tabindex=\"0\" class=\"highlight\"\u003E\u003Ccode class=\"language-go\" data-lang=\"go\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Etype\u003C\u002Fspan\u003E User \u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E {\n\tName  \u003Cspan class=\"hljs-keyword\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E`validate:&quot;required&quot;`\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n\tEmail \u003Cspan class=\"hljs-keyword\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E`validate:&quot;required,email&quot;`\u003C\u002Fspan\u003E\n}\n\nerr := validate.Struct(user) \u003Cb class=\"conum\"\u003E(2)\u003C\u002Fb\u003E\nvalidationErrors := err.(validator.ValidationErrors) \u003Cb class=\"conum\"\u003E(3)\u003C\u002Fb\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003EThe validation system uses \u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E tags, it is not the same as \u003Ca href=\"https:\u002F\u002Fwww.java.com\" target=\"_blank\" rel=\"noopener\"\u003EJava\u003C\u002Fa\u003E annotations, but in the validation case, it works in pretty same way as annotations.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EExecutes the validation explicitly\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EExtracts validation errors\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_java_spring_io_2\"\u003EJava + Spring.io\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EYou can enable the validation in the controller level, then in the handlers you can also specify the type of validation. Let&#8217;s explain it using the previous example:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fcovid-rest\u002Fblob\u002Fmaster\u002Fsrc\u002Fmain\u002Fjava\u002Fcom\u002Fcarlosvin\u002Fcovid\u002Fcontrollers\u002FCountriesController.java\" target=\"_blank\" rel=\"noopener\"\u003ECountriesController.java\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre tabindex=\"0\" class=\"highlight\"\u003E\u003Ccode class=\"language-java\" data-lang=\"java\"\u003E\u003Cspan class=\"hljs-meta\"\u003E@Validated\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n\u003Cspan class=\"hljs-meta\"\u003E@RestController\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E@RequestMapping(&quot;\u002Fcountries&quot;)\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003ECountriesController\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\n\n\t\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F Some source code is not shown, you can find the complete example in the repository\u003C\u002Fspan\u003E\n\n\t\u003Cspan class=\"hljs-meta\"\u003E@GetMapping(&quot;\u002F{country}\u002Fdates\u002F{isoDateStr}&quot;)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Epublic\u003C\u002Fspan\u003E DateStatsDto \u003Cspan class=\"hljs-title\"\u003EgetDateByCountry\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(\n\t\t\u003Cspan class=\"hljs-meta\"\u003E@Size(min = 2, max = 2)\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta\"\u003E@PathVariable\u003C\u002Fspan\u003E String country, \u003Cb class=\"conum\"\u003E(2)\u003C\u002Fb\u003E\n\t\t\u003Cspan class=\"hljs-meta\"\u003E@Size(min = 10, max = 20)\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta\"\u003E@PathVariable\u003C\u002Fspan\u003E String isoDateStr)\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Ethrows\u003C\u002Fspan\u003E NotFoundException \u003C\u002Fspan\u003E{\n\t\t\u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E DateStatsDto(service.getDate(country, DateUtils.convert(isoDateStr)));\n\t}\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003EDeclare the class as Controller so it is registered in \u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Frest-service\" target=\"_blank\" rel=\"noopener\"\u003ESpring Boot (REST)\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ccode\u003E@Size\u003C\u002Fcode\u003E validates that the input argument country has 2 characters\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EThe validation system is more powerful than you can see in this code snippet, for example adding \u003Ccode\u003E@Valid\u003C\u002Fcode\u003E annotation opens the door to complex types validation.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_filtering_and_middleware\"\u003EFiltering and Middleware\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EDifferent approaches, pretty much the same end result.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EI will elaborate this topic in following days.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_dependency_injection_ioc\"\u003EDependency injection \u002F IoC\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_spring_ioc\"\u003E\u003Ca href=\"https:\u002F\u002Fdocs.spring.io\u002Fspring-framework\u002Fdocs\u002Fcurrent\u002Freference\u002Fhtml\u002Fcore.html#beans-factory-collaborators\" target=\"_blank\" rel=\"noopener\"\u003ESpring IoC\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fdocs.spring.io\u002Fspring-framework\u002Fdocs\u002Fcurrent\u002Freference\u002Fhtml\u002Fcore.html#beans-factory-collaborators\" target=\"_blank\" rel=\"noopener\"\u003ESpring IoC\u003C\u002Fa\u003E is the most complete and powerful systems I&#8217;ve ever used for \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FInversion_of_control\" target=\"_blank\" rel=\"noopener\"\u003EIoC\u003C\u002Fa\u003E, actually, the first time I used Spring professionally was just to deal with \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FInversion_of_control\" target=\"_blank\" rel=\"noopener\"\u003EIoC\u003C\u002Fa\u003E. It supports XML configuration files or \u003Ca href=\"https:\u002F\u002Fwww.java.com\" target=\"_blank\" rel=\"noopener\"\u003EJava\u003C\u002Fa\u003E annotations, I like annotations more, here a simple example from \u003Ca href=\"https:\u002F\u002Fdocs.spring.io\u002Fspring-framework\u002Fdocs\u002Fcurrent\u002Freference\u002Fhtml\u002Fcore.html#beans-factory-collaborators\" target=\"_blank\" rel=\"noopener\"\u003ESpring IoC\u003C\u002Fa\u003E documentation:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003ESpring IoC example\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre tabindex=\"0\" class=\"highlight\"\u003E\u003Ccode class=\"language-java\" data-lang=\"java\"\u003E\u003Cspan class=\"hljs-meta\"\u003E@Repository\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EJpaMovieFinder\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Eimplements\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EMovieFinder\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{ \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n    \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F implementation elided for clarity\u003C\u002Fspan\u003E\n}\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003ESimpleMovieLister\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\n\n    \u003Cspan class=\"hljs-keyword\"\u003Eprivate\u003C\u002Fspan\u003E MovieFinder movieFinder;\n\n    \u003Cspan class=\"hljs-meta\"\u003E@Autowired\u003C\u002Fspan\u003E \u003Cb class=\"conum\"\u003E(2)\u003C\u002Fb\u003E\n    \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EsetMovieFinder\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(MovieFinder movieFinder)\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\n        \u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.movieFinder = movieFinder;\n    }\n\n    \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ccode\u003EJpaMovieFinder\u003C\u002Fcode\u003E is instantiated by \u003Ca href=\"https:\u002F\u002Fdocs.spring.io\u002Fspring-framework\u002Fdocs\u002Fcurrent\u002Freference\u002Fhtml\u002Fcore.html#beans-factory-collaborators\" target=\"_blank\" rel=\"noopener\"\u003ESpring IoC\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EWith \u003Ccode\u003E@Autowired\u003C\u002Fcode\u003E annotation \u003Ca href=\"https:\u002F\u002Fdocs.spring.io\u002Fspring-framework\u002Fdocs\u002Fcurrent\u002Freference\u002Fhtml\u002Fcore.html#beans-factory-collaborators\" target=\"_blank\" rel=\"noopener\"\u003ESpring IoC\u003C\u002Fa\u003E knows that has to inject \u003Ccode\u003EmovieFinder\u003C\u002Fcode\u003E argument. It should be a class implementing \u003Ccode\u003EMovieFinder\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_go\"\u003EGo\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ENeither \u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E nor \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgin-gonic\u002Fgin\" target=\"_blank\" rel=\"noopener\"\u003EGin framework\u003C\u002Fa\u003E has any \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FInversion_of_control\" target=\"_blank\" rel=\"noopener\"\u003EIoC\u003C\u002Fa\u003E solution, but you can still apply \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FDependency_injection\" target=\"_blank\" rel=\"noopener\"\u003EDependency Injection\u003C\u002Fa\u003E technique to decouple your components and improve the testability of your system.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003EDependency injection simple example in \u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre tabindex=\"0\" class=\"highlight\"\u003E\u003Ccode class=\"language-go\" data-lang=\"go\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Epackage\u003C\u002Fspan\u003E main\n\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&quot;fmt&quot;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F Greeter interface to greet the caller\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Etype\u003C\u002Fspan\u003E Greeter \u003Cspan class=\"hljs-keyword\"\u003Einterface\u003C\u002Fspan\u003E {\n\tgreet()\n}\n\n\u003Cspan class=\"hljs-keyword\"\u003Etype\u003C\u002Fspan\u003E greeterHello \u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E{}\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003E(g *greeterHello)\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Egreet\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E { \u003Cb class=\"conum\"\u003E(3)\u003C\u002Fb\u003E\n\tfmt.Println(\u003Cspan class=\"hljs-string\"\u003E&quot;Hello!&quot;\u003C\u002Fspan\u003E)\n}\n\n\u003Cspan class=\"hljs-keyword\"\u003Etype\u003C\u002Fspan\u003E greeterHi \u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E{}\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003E(g *greeterHi)\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Egreet\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E { \u003Cb class=\"conum\"\u003E(4)\u003C\u002Fb\u003E\n\tfmt.Println(\u003Cspan class=\"hljs-string\"\u003E&quot;Hi!&quot;\u003C\u002Fspan\u003E)\n}\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F App Application representation\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Etype\u003C\u002Fspan\u003E App \u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E {\n\tgreeters []Greeter \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n}\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003E(app *App)\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Estartup\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E {\n\t\u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E _, v := \u003Cspan class=\"hljs-keyword\"\u003Erange\u003C\u002Fspan\u003E app.greeters {\n\t\tv.greet()\n\t}\n}\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E {\n\tgreeters := []Greeter{ \u003Cb class=\"conum\"\u003E(2)\u003C\u002Fb\u003E\n\t\t&amp;greeterHello{},\n\t\t&amp;greeterHi{},\n\t\t&amp;greeterHello{}}\n\n\tapp := &amp;App{greeters}\n\n\tapp.startup()\n}\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F*\n&lt;1&gt; `App` accepts an array of `Greeter`\n&lt;2&gt; During `App` instantiation we pass different implementations of `Greeter`\n&lt;3&gt; Greeter implementation that prints *Hello!*\n&lt;4&gt; Greeter implementation that prints *Hi!*\n*\u002F\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EIt is more verbose, but there is an advantage, there is nothing hidden, everything is explicit and you have full control of instantiation order.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EAs soon as you use \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FDependency_injection\" target=\"_blank\" rel=\"noopener\"\u003EDependency Injection\u003C\u002Fa\u003E, I don&#8217;t have any strong opinion about using \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FInversion_of_control\" target=\"_blank\" rel=\"noopener\"\u003EIoC\u003C\u002Fa\u003E system or doing \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FDependency_injection\" target=\"_blank\" rel=\"noopener\"\u003EDependency Injection\u003C\u002Fa\u003E manually.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_testing\"\u003ETesting\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_unit_tests\"\u003EUnit tests\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EFor unit tests there are no big differences.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E comes with a standard \u003Ca href=\"https:\u002F\u002Fgolang.org\u002Fpkg\u002Ftesting\u002F\" target=\"_blank\" rel=\"noopener\"\u003Elibrary for testing and benchmarking\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EFor \u003Ca href=\"https:\u002F\u002Fwww.java.com\" target=\"_blank\" rel=\"noopener\"\u003EJava\u003C\u002Fa\u003E there are many well-known unit testing frameworks, but Spring already has quite big support for \u003Ca href=\"https:\u002F\u002Fdocs.spring.io\u002Fspring-batch\u002Fdocs\u002Fcurrent\u002Freference\u002Fhtml\u002Ftesting.html\" target=\"_blank\" rel=\"noopener\"\u003Eunit testing\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_integration_tests\"\u003EIntegration tests\u003C\u002Fh3\u003E\n\u003Cdiv class=\"sect3\"\u003E\n\u003Ch4 id=\"_go_2\"\u003EGo\u003C\u002Fh4\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EThere are no support for Integration Tests in \u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E, you will have to implement everything by yourself, although it is not difficult, \u003Ca href=\"https:\u002F\u002Fkpat.io\u002F2019\u002F06\u002Ftesting-with-gin\u002F\" target=\"_blank\" rel=\"noopener\"\u003Ehere you can find a simple example\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect3\"\u003E\n\u003Ch4 id=\"_spring\"\u003ESpring\u003C\u002Fh4\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EOn the other hand, \u003Ca href=\"https:\u002F\u002Fdocs.spring.io\u002Fspring-framework\u002Fdocs\u002Fcurrent\u002Freference\u002Fhtml\u002Ftesting.html\" target=\"_bank\"\u003ESpring has a great testing support\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ETo write integration tests for \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FRepresentational_state_transfer\" target=\"_blank\" rel=\"noopener\"\u003EREST\u003C\u002Fa\u003E services, \u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Ftesting-web\u002F\" target=\"_blank\" rel=\"noopener\"\u003EMockMvc\u003C\u002Fa\u003E is really convenient.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EI&#8217;ve used \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fcovid-rest\u002Fblob\u002Fmaster\u002Fsrc\u002Ftest\u002Fjava\u002Fcom\u002Fcarlosvin\u002Fcovid\u002FCountriesControllerTest.java\" target=\"_blank\" rel=\"noopener\"\u003EMockMvc in the covid-rest project\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003EMockMvc code snippet from \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcarlosvin\u002Fcovid-rest\u002Fblob\u002Fmaster\u002Fsrc\u002Ftest\u002Fjava\u002Fcom\u002Fcarlosvin\u002Fcovid\u002FCountriesControllerTest.java\" target=\"_blank\" rel=\"noopener\"\u003ECountriesControllerTest.java\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre tabindex=\"0\" class=\"highlight\"\u003E\u003Ccode class=\"language-java\" data-lang=\"java\"\u003E\t\u003Cspan class=\"hljs-meta\"\u003E@Autowired\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"hljs-keyword\"\u003Eprivate\u003C\u002Fspan\u003E MockMvc mockMvc; \u003Cb class=\"conum\"\u003E(1)\u003C\u002Fb\u003E\n\n\t\u003Cspan class=\"hljs-meta\"\u003E@Test\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EgetCountries\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Ethrows\u003C\u002Fspan\u003E Exception \u003C\u002Fspan\u003E{\n\t\t\u003Cspan class=\"hljs-keyword\"\u003Ethis\u003C\u002Fspan\u003E.mockMvc.perform(get(\u003Cspan class=\"hljs-string\"\u003E&quot;\u002Fcountries&quot;\u003C\u002Fspan\u003E)) \u003Cb class=\"conum\"\u003E(2)\u003C\u002Fb\u003E\n\t\t\t\t.andDo(print()).andExpect(status().isOk()) \u003Cb class=\"conum\"\u003E(3)\u003C\u002Fb\u003E\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\"\u003E&quot;$.*&quot;\u003C\u002Fspan\u003E, hasSize(\u003Cspan class=\"hljs-number\"\u003E144\u003C\u002Fspan\u003E)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\"\u003E&quot;$.ES.confirmedCases&quot;\u003C\u002Fspan\u003E,comparesEqualTo(\u003Cspan class=\"hljs-number\"\u003E9191\u003C\u002Fspan\u003E)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\"\u003E&quot;$.ES.deathsNumber&quot;\u003C\u002Fspan\u003E, comparesEqualTo(\u003Cspan class=\"hljs-number\"\u003E309\u003C\u002Fspan\u003E)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\"\u003E&quot;$.ES.countryCode&quot;\u003C\u002Fspan\u003E, comparesEqualTo(\u003Cspan class=\"hljs-string\"\u003E&quot;ES&quot;\u003C\u002Fspan\u003E)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\"\u003E&quot;$.ES.countryName&quot;\u003C\u002Fspan\u003E, comparesEqualTo(\u003Cspan class=\"hljs-string\"\u003E&quot;Spain&quot;\u003C\u002Fspan\u003E)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\"\u003E&quot;$.ES.path&quot;\u003C\u002Fspan\u003E, comparesEqualTo(\u003Cspan class=\"hljs-string\"\u003E&quot;\u002Fcountries\u002FES&quot;\u003C\u002Fspan\u003E)))\n\t\t\t\t.andExpect(jsonPath(\u003Cspan class=\"hljs-string\"\u003E&quot;$.VC.countryName&quot;\u003C\u002Fspan\u003E, comparesEqualTo(\u003Cspan class=\"hljs-string\"\u003E&quot;Saint Vincent and the Grenadines&quot;\u003C\u002Fspan\u003E)))\n\t\t\t\t.andDo(document(\u003Cspan class=\"hljs-string\"\u003E&quot;countries\u002Flist&quot;\u003C\u002Fspan\u003E, preprocessResponse(prettyPrint(), \u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E CropPreprocessor())));\n\t}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003EThe Spring test runner injects the MockMvc object.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EWe use MockMvc to call to the endpoint we have created.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EThen we validate the endpoint response: status code and body.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_performance\"\u003EPerformance\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EBesides the languages specific differences, the main difference is the performance. The CPU consumption in \u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E is smaller, but about the memory the difference is really significant, \u003Cstrong\u003Ethe order of 30 times smaller fingerprint\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_memory\"\u003EMemory\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EHere I&#8217;ve found a surprising difference, just by checking the memory consumption in my laptop.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"ulist\"\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgin-gonic\u002Fgin\" target=\"_blank\" rel=\"noopener\"\u003EGin framework\u003C\u002Fa\u003E \u003Ccode\u003E15.6MB\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Frest-service\" target=\"_blank\" rel=\"noopener\"\u003ESpring Boot (REST)\u003C\u002Fa\u003E \u003Ccode\u003E465.9MB\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"imageblock\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fposts\u002Frest-service-go-vs-java\u002Fmemory-consumption-go-java.png\" alt=\"Memory consumption\"\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_speed\"\u003ESpeed\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EFollowing the \u003Ca href=\"https:\u002F\u002Fwww.techempower.com\u002Fbenchmarks\u002F\" target=\"_blank\" rel=\"noopener\"\u003ETechEmpower benchmarks\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"ulist\"\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgin-gonic\u002Fgin\" target=\"_blank\" rel=\"noopener\"\u003EGin framework\u003C\u002Fa\u003E is in 193 position, 9.9%.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Frest-service\" target=\"_blank\" rel=\"noopener\"\u003ESpring Boot (REST)\u003C\u002Fa\u003E is in 284 position, 4%.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EFollowing the \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fthe-benchmarker\u002Fweb-frameworks\" target=\"_blank\" rel=\"noopener\"\u003EThe Benchmarker results\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"ulist\"\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgin-gonic\u002Fgin\" target=\"_blank\" rel=\"noopener\"\u003EGin framework\u003C\u002Fa\u003E: position 33.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Frest-service\" target=\"_blank\" rel=\"noopener\"\u003ESpring Boot (REST)\u003C\u002Fa\u003E: position 68.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_conclusions\"\u003EConclusions\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EIf I were you, I&#8217;d choose \u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E if:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"ulist\"\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003EIf you value the explicit over implicit, keep in mind that there is a cost, you will most likely have to write more lines of code.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EIf you value the simplicity, \u003Ca href=\"https:\u002F\u002Fgolang.org\" target=\"_blank\" rel=\"noopener\"\u003EGo\u003C\u002Fa\u003E has a quite reduced set of keywords, which reduces the learning curve and simplifies the code reviews.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EIf RAM memory usage is critical for your project, actually I&#8217;d just keep away from \u003Ca href=\"https:\u002F\u002Fspring.io\u002Fguides\u002Fgs\u002Frest-service\" target=\"_blank\" rel=\"noopener\"\u003ESpring Boot (REST)\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EIf the project you are going to work on is a distributed system, specially if it is based on \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FHypertext_Transfer_Protocol\" target=\"_blank\" rel=\"noopener\"\u003EHTTP\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E",post:{title:"Golang over Java for REST services",lang:"en",summary:"Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang",slug:"rest-service-go-vs-java",keywords:["REST","API","Web Services","Java","Golang","Gingonic","Spring"],filename:"rest-service-go-vs-java.adoc",modified:a,created:a,author:"Carlos Martin Sanchez",previewimage:"icons\u002Ficon-192x192.png",otherLangs:[],path:b,url:"https:\u002F\u002Fcarlosvin.github.io\u002Fposts\u002Frest-service-go-vs-java\u002Fen"},postPath:b}}(1604188800000,"\u002Fposts\u002Frest-service-go-vs-java\u002Fen"))]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.31b9d167.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main","/client/client.31b9d167.js")}document.head.appendChild(s)</script> <link href=client/client-518dbade.css rel=stylesheet><link href=client/Details-78b1caad.css rel=stylesheet><link href=client/[...slug]-b7ff5a61.css rel=stylesheet> <link href=/client/client.31b9d167.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-518dbade.css rel=preload as=style><link href=/client/[...slug].53f64eb8.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/url.d46e3b91.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/Details.0eb425bd.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/Details-78b1caad.css rel=preload as=style><link href=/client/[...slug]-b7ff5a61.css rel=preload as=style></head> <body> <div id=sapper> <nav class=svelte-1hjvhrx><ul class=svelte-1hjvhrx><li class=svelte-1y8uoef><a href=/ rel=prefetch class=svelte-1y8uoef><img alt="Carlos says bla bla logo" src=/favicon.png class="svelte-1hjvhrx logo"></a></ul> <ul class="svelte-1hjvhrx closed"><li class=svelte-1y8uoef><a href=/ rel=prefetch class=svelte-1y8uoef><span class="svelte-1hjvhrx siteName">Carlos says bla bla</span></a></li> <li class=svelte-1y8uoef><a href=/categories rel=prefetch class=svelte-1y8uoef>Categories</a></li> <li class=svelte-1y8uoef><a href=/about rel=prefetch class=svelte-1y8uoef>About</a></ul> <div class="h svelte-1w8skyw"><a href=/feeds rel=noopener target=_blank aria-label="Subscribe to Carlos says bla bla" class="icon svelte-1lu397 rss" title="Subscribe to Carlos says bla bla"></a> <a href=https://github.com/carlosvin rel=noopener target=_blank aria-label="Find me at github" class="icon svelte-1lu397 github" title="Find me at github"></a> <a href=https://twitter.com/carlosvin rel=noopener target=_blank aria-label="Find me at twitter" class="icon svelte-1lu397 twitter" title="Find me at twitter"></a> <a href=https://stackoverflow.com/story/carlosvin rel=noopener target=_blank aria-label="Find me at stackoverflow" class="icon svelte-1lu397 stackoverflow" title="Find me at stackoverflow"></a></div> <button class=svelte-1hjvhrx type=button></button></nav> <main class=svelte-bvcji9> <header class=svelte-5fppzy><h1 class=svelte-5fppzy>Golang over Java for REST services <span class="svelte-5fppzy share"><a href="https://twitter.com/intent/tweet?url=https://carlosvin.github.io/posts/rest-service-go-vs-java/en&text=Golang over Java for REST services:&amp;nbsp;Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang&hashtags=REST,API,Web Services,Java,Golang,Gingonic,Spring" rel=noopener target=_blank aria-label='Share "Golang over Java for REST services"' class="icon svelte-1lu397 twitter" title='Share "Golang over Java for REST services"'></a></span></h1> <p class="svelte-5fppzy summary">Why I'd pick Golang over Java to create any new distributed system. I am going to compare a REST service implementation in Java vs the implementation in Golang</p> <div class="subtitle svelte-16mbbpz"><span class=date>01/11/2020</span> <span class="svelte-9pgfi9 tags"><a href=/categories/rest class=svelte-1ci4az4 title=REST><span class="hover svelte-askwsu">REST</span></a><a href=/categories/api class=svelte-1ci4az4 title=API><span class="hover svelte-askwsu">API</span></a><a href=/categories/web-services class=svelte-1ci4az4 title="Web Services"><span class="hover svelte-askwsu">Web Services</span></a><a href=/categories/java class=svelte-1ci4az4 title=Java><span class="hover svelte-askwsu">Java</span></a><a href=/categories/golang class=svelte-1ci4az4 title=Golang><span class="hover svelte-askwsu">Golang</span></a><a href=/categories/gingonic class=svelte-1ci4az4 title=Gingonic><span class="hover svelte-askwsu">Gingonic</span></a><a href=/categories/spring class=svelte-1ci4az4 title=Spring><span class="hover svelte-askwsu">Spring</span></a></span></div></header> <div class="content svelte-101opq9"><div class=toc id=toc> <div id=toctitle>Table of Contents</div> <ul class=sectlevel1> <li><a href=#_actual_project_examples>Actual project examples</a></li> <li><a href=#_the_ecosystems>The Ecosystems</a></li> <li><a href=#_routing>Routing</a> <ul class=sectlevel2> <li><a href=#_go_without_framework>Go - Without framework</a></li> <li><a href=#_go_gin_framework>Go - Gin Framework</a></li> <li><a href=#_java_spring_io>Java + Spring.io</a></li> </ul> </li> <li><a href=#_validations>Validations</a> <ul class=sectlevel2> <li><a href=#_go_gin_framework_2>Go - Gin Framework</a></li> <li><a href=#_java_spring_io_2>Java + Spring.io</a></li> <li><a href=#_filtering_and_middleware>Filtering and Middleware</a></li> </ul> </li> <li><a href=#_dependency_injection_ioc>Dependency injection / IoC</a> <ul class=sectlevel2> <li><a href=#_spring_ioc>Spring IoC</a></li> <li><a href=#_go>Go</a></li> </ul> </li> <li><a href=#_testing>Testing</a> <ul class=sectlevel2> <li><a href=#_unit_tests>Unit tests</a></li> <li><a href=#_integration_tests>Integration tests</a></li> </ul> </li> <li><a href=#_performance>Performance</a> <ul class=sectlevel2> <li><a href=#_memory>Memory</a></li> <li><a href=#_speed>Speed</a></li> </ul> </li> <li><a href=#_conclusions>Conclusions</a></li> </ul> </div> <div id=preamble> <div class=sectionbody> <div class=paragraph> <p>Lately Ive been working with two different technology stacks almost in parallel, in both cases we were using them to develop <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a> services.</p> </div> <div class=paragraph> <p>During this time Ive come up with some conclusions and opinions Id like to share.</p> </div> <div class=paragraph> <p>A disclaimer, few months ago, I had several years of experience with Java and 0 days of professional experience with Golang.</p> </div> </div> </div> <div class=sect1> <h2 id=_actual_project_examples>Actual project examples</h2> <div class=sectionbody> <div class=paragraph> <p>Few months ago I created <a href=https://covid-rest.appspot.com/docs rel=noopener target=_blank>an API to extract and structure COVID-19 data</a> from <a href=https://www.ecdc.europa.eu/en/publications-data/download-todays-data-geographic-distribution-covid-19-cases-worldwide rel=noopener target=_blank>ECDC website</a>. I developed it in <a href=https://spring.io/guides/gs/rest-service rel=noopener target=_blank>Spring Boot (REST)</a>.</p> </div> <div class=paragraph> <p>Few months later I had the luck of work on my first professional project in <a href=https://golang.org rel=noopener target=_blank>Go</a> and I decided to create a port of <a href=https://covid-rest.appspot.com/docs rel=noopener target=_blank>the API to extract COVID-19 data</a> in <a href=https://golang.org rel=noopener target=_blank>Go</a>, just for learning and for fun.</p> </div> <div class=paragraph> <p>Now we have two REST services, almost functionally identical, but developed in two different tech stacks, so we can easily compare some relevant aspects of both.</p> </div> <table class="tableblock frame-all grid-all stretch"> <caption class=title>Table 1. Source code for the 2 REST services implementations</caption> <colgroup> <col style=width:50%> <col style=width:50%> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top"><a href=https://www.java.com rel=noopener target=_blank>Java</a> + <a href=https://spring.io/guides/gs/rest-service rel=noopener target=_blank>Spring Boot (REST)</a></th> <th class="tableblock halign-left valign-top"><a href=https://golang.org rel=noopener target=_blank>Go</a> + <a href=https://github.com/gin-gonic/gin rel=noopener target=_blank>Gin framework</a></th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class=tableblock><a href=https://github.com/carlosvin/covid-rest class=bare>https://github.com/carlosvin/covid-rest</a></td> <td class="tableblock halign-left valign-top"><p class=tableblock><a href=https://github.com/carlosvin/covid-rest-go class=bare>https://github.com/carlosvin/covid-rest-go</a></td> </tr> </tbody> </table> <div class="admonitionblock note"> <table> <tr> <td class=icon> <div class=title>Note</div> </td> <td class=content> I actually created that <a href=https://covid-rest.appspot.com/docs>COVID-19 data REST API</a> to be the data source for the <a href=https://covid-stats-pwa.netlify.app rel=noopener target=_blank>COVID19-Stats App</a>, a <a href=https://web.dev/progressive-web-apps rel=noopener target=_blank>PWA</a> built with <a href=https://svelte.dev rel=noopener target=_blank>Svelte</a>, but thats another topic. </td> </tr> </table> </div> </div> </div> <div class=sect1> <h2 id=_the_ecosystems>The Ecosystems</h2> <div class=sectionbody> <div class=paragraph> <p>If you want to create a <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a> service just in plain Java you will have extra work to do, in Golang a little bit less. Thats why we use framework, because theyve already solved many common problems for us.</p> </div> <div class=paragraph> <p>For this comparison I am going to use <a href=https://spring.io/guides/gs/rest-service rel=noopener target=_blank>Spring Boot (REST)</a> for <a href=https://www.java.com rel=noopener target=_blank>Java</a> and <a href=https://github.com/gin-gonic/gin rel=noopener target=_blank>Gin framework</a> for <a href=https://golang.org rel=noopener target=_blank>Go</a>, but in both languages there are a lot of production ready nice options.</p> </div> </div> </div> <div class=sect1> <h2 id=_routing>Routing</h2> <div class=sectionbody> <div class=sect2> <h3 id=_go_without_framework>Go - Without framework</h3> <div class=paragraph> <p>Go uses the concept of <a href=https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol rel=noopener target=_blank>HTTP</a> multiplexer or router. You can specify routes using patterns and link those routes to handlers. The router will decide which handler has to execute the request based on the path received.</p> </div> <div class=listingblock> <div class=title>router.go file</div> <div class=content> <pre class=highlight tabindex=0><code class=language-go data-lang=go><span class=hljs-keyword>package</span> main

<span class=hljs-keyword>import</span> (
	<span class=hljs-string>"log"</span>
	<span class=hljs-string>"net/http"</span>
)

<span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-title>main</span><span class=hljs-params>()</span></span> {
	router := http.NewServeMux()
	router.Handle(<span class=hljs-string>"/redirect"</span>, http.RedirectHandler(<span class=hljs-string>"https://carlosvin.github.io/"</span>, <span class=hljs-number>307</span>))
	router.HandleFunc(<span class=hljs-string>"/hello"</span>, <span class=hljs-function><span class=hljs-keyword>func</span><span class=hljs-params>(w http.ResponseWriter, r *http.Request)</span></span> {
		w.Write([]<span class=hljs-keyword>byte</span>(<span class=hljs-string>"Hello world!"</span>))
	})
	log.Println(<span class=hljs-string>"Listening..."</span>)
	http.ListenAndServe(<span class=hljs-string>":3000"</span>, router)
}</code></pre> </div> </div> <div class=paragraph> <p>Source code is already quite simple, but there might more complex routing use cases.</p> </div> </div> <div class=sect2> <h3 id=_go_gin_framework>Go - Gin Framework</h3> <div class=paragraph> <p>Happily there are frameworks that help us to keep our base code simple, for example when we need to extract path parameters, which is quite common use case in <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a> <a href=https://en.wikipedia.org/wiki/Application_programming_interface rel=noopener target=_blank>API</a>s, we can use a routing library, Ive used <a href=https://github.com/gorilla/mux rel=noopener target=_blank>Gorilla Mux</a> and <a href=https://github.com/gin-gonic/gin rel=noopener target=_blank>Gin framework</a> and I liked more <a href=https://github.com/gin-gonic/gin rel=noopener target=_blank>Gin framework</a>.</p> </div> <div class=listingblock> <div class=title><a href=https://github.com/carlosvin/covid-rest-go/blob/master/main.go>Full example</a></div> <div class=content> <pre class=highlight tabindex=0><code class=language-go data-lang=go><span class=hljs-keyword>import</span> (
	<span class=hljs-string>"github.com/carlosvin/covid-rest-go/handlers"</span>
	<span class=hljs-string>"github.com/carlosvin/covid-rest-go/readers"</span>
	<span class=hljs-string>"github.com/gin-gonic/gin"</span>
)

<span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-title>main</span><span class=hljs-params>()</span></span> {

	<span class=hljs-comment>// ...</span>

	r := gin.Default()
	r.GET(<span class=hljs-string>"/countries"</span>, router.Countries)
	r.GET(<span class=hljs-string>"/countries/:code"</span>, router.Country)
	r.GET(<span class=hljs-string>"/countries/:code/dates"</span>, router.CountryDates)
	r.GET(<span class=hljs-string>"/countries/:code/dates/:date"</span>, router.CountryDate)
	r.Run()
}</code></pre> </div> </div> <div class=listingblock> <div class=title><a href=https://github.com/carlosvin/covid-rest-go/blob/master/handlers/countries.go>And this is a handler example</a>, the router.Countries one</div> <div class=content> <pre class=highlight tabindex=0><code class=language-go data-lang=go><span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-params>(r *routerImpl)</span> <span class=hljs-title>Countries</span><span class=hljs-params>(c *gin.Context)</span></span> {
	c.JSON(<span class=hljs-number>200</span>, r.countries())
}</code></pre> </div> </div> </div> <div class=sect2> <h3 id=_java_spring_io>Java + Spring.io</h3> <div class=paragraph> <p>The <a href=https://spring.io/guides/gs/rest-service rel=noopener target=_blank>Spring Boot (REST)</a> is based on the concept of Controller, it is implemented using annotations on the class and methods.</p> </div> <div class=listingblock> <div class=title><a href=https://github.com/carlosvin/covid-rest/blob/master/src/main/java/com/carlosvin/covid/controllers/CountriesController.java rel=noopener target=_blank>CountriesController.java</a></div> <div class=content> <pre class=highlight tabindex=0><code class=language-java data-lang=java><span class=hljs-meta>@Validated</span>
<span class=hljs-meta>@RestController</span> <b class=conum>(1)</b>
<span class=hljs-meta>@RequestMapping("/countries")</span> <b class=conum>(2)</b>
<span class=hljs-keyword>public</span> <span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>CountriesController</span> </span>{

	<span class=hljs-comment>// Some source code is not shown, you can find the complete example in the repository</span>

	<span class=hljs-meta>@GetMapping("/{country}/dates/{isoDateStr}")</span>  <b class=conum>(3)</b>
	<span class=hljs-function><span class=hljs-keyword>public</span> DateStatsDto <span class=hljs-title>getDateByCountry</span><span class=hljs-params>(<span class=hljs-meta>@Size(min = 2, max = 2)</span> <span class=hljs-meta>@PathVariable</span> String country, <span class=hljs-meta>@Size(min = 10, max = 20)</span> <span class=hljs-meta>@PathVariable</span> String isoDateStr)</span> <span class=hljs-keyword>throws</span> NotFoundException </span>{
		<span class=hljs-keyword>return</span> <span class=hljs-keyword>new</span> DateStatsDto(service.getDate(country, DateUtils.convert(isoDateStr)));
	}
}</code></pre> </div> </div> <div class="arabic colist"> <ol> <li> <p>Declare the class as Controller so it is registered in <a href=https://spring.io/guides/gs/rest-service rel=noopener target=_blank>Spring Boot (REST)</a></p> </li> <li> <p>Controller base path definition</p> </li> <li> <p>Handler definition for a nested path under the main controller path. <a href=https://spring.io/guides/gs/rest-service rel=noopener target=_blank>Spring Boot (REST)</a> makes easy to extract path variables defined in the route, you can directly use them as method arguments.</p> </li> </ol> </div> </div> </div> </div> <div class=sect1> <h2 id=_validations>Validations</h2> <div class=sectionbody> <div class=sect2> <h3 id=_go_gin_framework_2>Go - Gin Framework</h3> <div class=paragraph> <p><a href=https://github.com/gin-gonic/gin rel=noopener target=_blank>Gin framework</a> uses an external validation package <a href=https://godoc.org/github.com/go-playground/validator>validator</a>, besides that it is fully integrated with <a href=https://github.com/gin-gonic/gin rel=noopener target=_blank>Gin framework</a>.</p> </div> <div class=listingblock> <div class=content> <pre class=highlight tabindex=0><code class=language-go data-lang=go><span class=hljs-keyword>type</span> User <span class=hljs-keyword>struct</span> {
	Name  <span class=hljs-keyword>string</span> <span class=hljs-string>`validate:"required"`</span> <b class=conum>(1)</b>
	Email <span class=hljs-keyword>string</span> <span class=hljs-string>`validate:"required,email"`</span>
}

err := validate.Struct(user) <b class=conum>(2)</b>
validationErrors := err.(validator.ValidationErrors) <b class=conum>(3)</b></code></pre> </div> </div> <div class="arabic colist"> <ol> <li> <p>The validation system uses <a href=https://golang.org rel=noopener target=_blank>Go</a> tags, it is not the same as <a href=https://www.java.com rel=noopener target=_blank>Java</a> annotations, but in the validation case, it works in pretty same way as annotations.</p> </li> <li> <p>Executes the validation explicitly</p> </li> <li> <p>Extracts validation errors</p> </li> </ol> </div> </div> <div class=sect2> <h3 id=_java_spring_io_2>Java + Spring.io</h3> <div class=paragraph> <p>You can enable the validation in the controller level, then in the handlers you can also specify the type of validation. Lets explain it using the previous example:</p> </div> <div class=listingblock> <div class=title><a href=https://github.com/carlosvin/covid-rest/blob/master/src/main/java/com/carlosvin/covid/controllers/CountriesController.java rel=noopener target=_blank>CountriesController.java</a></div> <div class=content> <pre class=highlight tabindex=0><code class=language-java data-lang=java><span class=hljs-meta>@Validated</span> <b class=conum>(1)</b>
<span class=hljs-meta>@RestController</span>
<span class=hljs-meta>@RequestMapping("/countries")</span>
<span class=hljs-keyword>public</span> <span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>CountriesController</span> </span>{

	<span class=hljs-comment>// Some source code is not shown, you can find the complete example in the repository</span>

	<span class=hljs-meta>@GetMapping("/{country}/dates/{isoDateStr}")</span>
	<span class=hljs-function><span class=hljs-keyword>public</span> DateStatsDto <span class=hljs-title>getDateByCountry</span><span class=hljs-params>(
		<span class=hljs-meta>@Size(min = 2, max = 2)</span> <span class=hljs-meta>@PathVariable</span> String country, <b class=conum>(2)</b>
		<span class=hljs-meta>@Size(min = 10, max = 20)</span> <span class=hljs-meta>@PathVariable</span> String isoDateStr)</span> <span class=hljs-keyword>throws</span> NotFoundException </span>{
		<span class=hljs-keyword>return</span> <span class=hljs-keyword>new</span> DateStatsDto(service.getDate(country, DateUtils.convert(isoDateStr)));
	}
}</code></pre> </div> </div> <div class="arabic colist"> <ol> <li> <p>Declare the class as Controller so it is registered in <a href=https://spring.io/guides/gs/rest-service rel=noopener target=_blank>Spring Boot (REST)</a></p> </li> <li> <p><code>@Size</code> validates that the input argument country has 2 characters</p> </li> </ol> </div> <div class=paragraph> <p>The validation system is more powerful than you can see in this code snippet, for example adding <code>@Valid</code> annotation opens the door to complex types validation.</p> </div> </div> <div class=sect2> <h3 id=_filtering_and_middleware>Filtering and Middleware</h3> <div class=paragraph> <p>Different approaches, pretty much the same end result.</p> </div> <div class=paragraph> <p>I will elaborate this topic in following days.</p> </div> </div> </div> </div> <div class=sect1> <h2 id=_dependency_injection_ioc>Dependency injection / IoC</h2> <div class=sectionbody> <div class=sect2> <h3 id=_spring_ioc><a href=https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators rel=noopener target=_blank>Spring IoC</a></h3> <div class=paragraph> <p><a href=https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators rel=noopener target=_blank>Spring IoC</a> is the most complete and powerful systems Ive ever used for <a href=https://en.wikipedia.org/wiki/Inversion_of_control rel=noopener target=_blank>IoC</a>, actually, the first time I used Spring professionally was just to deal with <a href=https://en.wikipedia.org/wiki/Inversion_of_control rel=noopener target=_blank>IoC</a>. It supports XML configuration files or <a href=https://www.java.com rel=noopener target=_blank>Java</a> annotations, I like annotations more, here a simple example from <a href=https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators rel=noopener target=_blank>Spring IoC</a> documentation:</p> </div> <div class=listingblock> <div class=title>Spring IoC example</div> <div class=content> <pre class=highlight tabindex=0><code class=language-java data-lang=java><span class=hljs-meta>@Repository</span>
<span class=hljs-keyword>public</span> <span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>JpaMovieFinder</span> <span class=hljs-keyword>implements</span> <span class=hljs-title>MovieFinder</span> </span>{ <b class=conum>(1)</b>
    <span class=hljs-comment>// implementation elided for clarity</span>
}

<span class=hljs-comment>//</span>

<span class=hljs-keyword>public</span> <span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>SimpleMovieLister</span> </span>{

    <span class=hljs-keyword>private</span> MovieFinder movieFinder;

    <span class=hljs-meta>@Autowired</span> <b class=conum>(2)</b>
    <span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-keyword>void</span> <span class=hljs-title>setMovieFinder</span><span class=hljs-params>(MovieFinder movieFinder)</span> </span>{
        <span class=hljs-keyword>this</span>.movieFinder = movieFinder;
    }

    <span class=hljs-comment>// ...</span>
}</code></pre> </div> </div> <div class="arabic colist"> <ol> <li> <p><code>JpaMovieFinder</code> is instantiated by <a href=https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators rel=noopener target=_blank>Spring IoC</a></p> </li> <li> <p>With <code>@Autowired</code> annotation <a href=https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators rel=noopener target=_blank>Spring IoC</a> knows that has to inject <code>movieFinder</code> argument. It should be a class implementing <code>MovieFinder</code></p> </li> </ol> </div> </div> <div class=sect2> <h3 id=_go>Go</h3> <div class=paragraph> <p>Neither <a href=https://golang.org rel=noopener target=_blank>Go</a> nor <a href=https://github.com/gin-gonic/gin rel=noopener target=_blank>Gin framework</a> has any <a href=https://en.wikipedia.org/wiki/Inversion_of_control rel=noopener target=_blank>IoC</a> solution, but you can still apply <a href=https://en.wikipedia.org/wiki/Dependency_injection rel=noopener target=_blank>Dependency Injection</a> technique to decouple your components and improve the testability of your system.</p> </div> <div class=listingblock> <div class=title>Dependency injection simple example in <a href=https://golang.org rel=noopener target=_blank>Go</a></div> <div class=content> <pre class=highlight tabindex=0><code class=language-go data-lang=go><span class=hljs-keyword>package</span> main

<span class=hljs-keyword>import</span> <span class=hljs-string>"fmt"</span>

<span class=hljs-comment>// Greeter interface to greet the caller</span>
<span class=hljs-keyword>type</span> Greeter <span class=hljs-keyword>interface</span> {
	greet()
}

<span class=hljs-keyword>type</span> greeterHello <span class=hljs-keyword>struct</span>{}

<span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-params>(g *greeterHello)</span> <span class=hljs-title>greet</span><span class=hljs-params>()</span></span> { <b class=conum>(3)</b>
	fmt.Println(<span class=hljs-string>"Hello!"</span>)
}

<span class=hljs-keyword>type</span> greeterHi <span class=hljs-keyword>struct</span>{}

<span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-params>(g *greeterHi)</span> <span class=hljs-title>greet</span><span class=hljs-params>()</span></span> { <b class=conum>(4)</b>
	fmt.Println(<span class=hljs-string>"Hi!"</span>)
}

<span class=hljs-comment>// App Application representation</span>
<span class=hljs-keyword>type</span> App <span class=hljs-keyword>struct</span> {
	greeters []Greeter <b class=conum>(1)</b>
}

<span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-params>(app *App)</span> <span class=hljs-title>startup</span><span class=hljs-params>()</span></span> {
	<span class=hljs-keyword>for</span> _, v := <span class=hljs-keyword>range</span> app.greeters {
		v.greet()
	}
}

<span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-title>main</span><span class=hljs-params>()</span></span> {
	greeters := []Greeter{ <b class=conum>(2)</b>
		&greeterHello{},
		&greeterHi{},
		&greeterHello{}}

	app := &App{greeters}

	app.startup()
}

<span class=hljs-comment>/*
&lt;1> `App` accepts an array of `Greeter`
&lt;2> During `App` instantiation we pass different implementations of `Greeter`
&lt;3> Greeter implementation that prints *Hello!*
&lt;4> Greeter implementation that prints *Hi!*
*/</span></code></pre> </div> </div> <div class=paragraph> <p>It is more verbose, but there is an advantage, there is nothing hidden, everything is explicit and you have full control of instantiation order.</p> </div> <div class=paragraph> <p>As soon as you use <a href=https://en.wikipedia.org/wiki/Dependency_injection rel=noopener target=_blank>Dependency Injection</a>, I dont have any strong opinion about using <a href=https://en.wikipedia.org/wiki/Inversion_of_control rel=noopener target=_blank>IoC</a> system or doing <a href=https://en.wikipedia.org/wiki/Dependency_injection rel=noopener target=_blank>Dependency Injection</a> manually.</p> </div> </div> </div> </div> <div class=sect1> <h2 id=_testing>Testing</h2> <div class=sectionbody> <div class=sect2> <h3 id=_unit_tests>Unit tests</h3> <div class=paragraph> <p>For unit tests there are no big differences.</p> </div> <div class=paragraph> <p><a href=https://golang.org rel=noopener target=_blank>Go</a> comes with a standard <a href=https://golang.org/pkg/testing/ rel=noopener target=_blank>library for testing and benchmarking</a>.</p> </div> <div class=paragraph> <p>For <a href=https://www.java.com rel=noopener target=_blank>Java</a> there are many well-known unit testing frameworks, but Spring already has quite big support for <a href=https://docs.spring.io/spring-batch/docs/current/reference/html/testing.html rel=noopener target=_blank>unit testing</a>.</p> </div> </div> <div class=sect2> <h3 id=_integration_tests>Integration tests</h3> <div class=sect3> <h4 id=_go_2>Go</h4> <div class=paragraph> <p>There are no support for Integration Tests in <a href=https://golang.org rel=noopener target=_blank>Go</a>, you will have to implement everything by yourself, although it is not difficult, <a href=https://kpat.io/2019/06/testing-with-gin/ rel=noopener target=_blank>here you can find a simple example</a>.</p> </div> </div> <div class=sect3> <h4 id=_spring>Spring</h4> <div class=paragraph> <p>On the other hand, <a href=https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html target=_bank>Spring has a great testing support</a>.</p> </div> <div class=paragraph> <p>To write integration tests for <a href=https://en.wikipedia.org/wiki/Representational_state_transfer rel=noopener target=_blank>REST</a> services, <a href=https://spring.io/guides/gs/testing-web/ rel=noopener target=_blank>MockMvc</a> is really convenient.</p> </div> <div class=paragraph> <p>Ive used <a href=https://github.com/carlosvin/covid-rest/blob/master/src/test/java/com/carlosvin/covid/CountriesControllerTest.java rel=noopener target=_blank>MockMvc in the covid-rest project</a>.</p> </div> <div class=listingblock> <div class=title>MockMvc code snippet from <a href=https://github.com/carlosvin/covid-rest/blob/master/src/test/java/com/carlosvin/covid/CountriesControllerTest.java rel=noopener target=_blank>CountriesControllerTest.java</a></div> <div class=content> <pre class=highlight tabindex=0><code class=language-java data-lang=java>	<span class=hljs-meta>@Autowired</span>
	<span class=hljs-keyword>private</span> MockMvc mockMvc; <b class=conum>(1)</b>

	<span class=hljs-meta>@Test</span>
	<span class=hljs-function><span class=hljs-keyword>void</span> <span class=hljs-title>getCountries</span><span class=hljs-params>()</span> <span class=hljs-keyword>throws</span> Exception </span>{
		<span class=hljs-keyword>this</span>.mockMvc.perform(get(<span class=hljs-string>"/countries"</span>)) <b class=conum>(2)</b>
				.andDo(print()).andExpect(status().isOk()) <b class=conum>(3)</b>
				.andExpect(jsonPath(<span class=hljs-string>"$.*"</span>, hasSize(<span class=hljs-number>144</span>)))
				.andExpect(jsonPath(<span class=hljs-string>"$.ES.confirmedCases"</span>,comparesEqualTo(<span class=hljs-number>9191</span>)))
				.andExpect(jsonPath(<span class=hljs-string>"$.ES.deathsNumber"</span>, comparesEqualTo(<span class=hljs-number>309</span>)))
				.andExpect(jsonPath(<span class=hljs-string>"$.ES.countryCode"</span>, comparesEqualTo(<span class=hljs-string>"ES"</span>)))
				.andExpect(jsonPath(<span class=hljs-string>"$.ES.countryName"</span>, comparesEqualTo(<span class=hljs-string>"Spain"</span>)))
				.andExpect(jsonPath(<span class=hljs-string>"$.ES.path"</span>, comparesEqualTo(<span class=hljs-string>"/countries/ES"</span>)))
				.andExpect(jsonPath(<span class=hljs-string>"$.VC.countryName"</span>, comparesEqualTo(<span class=hljs-string>"Saint Vincent and the Grenadines"</span>)))
				.andDo(document(<span class=hljs-string>"countries/list"</span>, preprocessResponse(prettyPrint(), <span class=hljs-keyword>new</span> CropPreprocessor())));
	}</code></pre> </div> </div> <div class="arabic colist"> <ol> <li> <p>The Spring test runner injects the MockMvc object.</p> </li> <li> <p>We use MockMvc to call to the endpoint we have created.</p> </li> <li> <p>Then we validate the endpoint response: status code and body.</p> </li> </ol> </div> </div> </div> </div> </div> <div class=sect1> <h2 id=_performance>Performance</h2> <div class=sectionbody> <div class=paragraph> <p>Besides the languages specific differences, the main difference is the performance. The CPU consumption in <a href=https://golang.org rel=noopener target=_blank>Go</a> is smaller, but about the memory the difference is really significant, <strong>the order of 30 times smaller fingerprint</strong>.</p> </div> <div class=sect2> <h3 id=_memory>Memory</h3> <div class=paragraph> <p>Here Ive found a surprising difference, just by checking the memory consumption in my laptop.</p> </div> <div class=ulist> <ul> <li> <p><a href=https://github.com/gin-gonic/gin rel=noopener target=_blank>Gin framework</a> <code>15.6MB</code></p> </li> <li> <p><a href=https://spring.io/guides/gs/rest-service rel=noopener target=_blank>Spring Boot (REST)</a> <code>465.9MB</code></p> </li> </ul> </div> <div class=imageblock> <div class=content> <img alt="Memory consumption" src=/posts/rest-service-go-vs-java/memory-consumption-go-java.png> </div> </div> </div> <div class=sect2> <h3 id=_speed>Speed</h3> <div class=paragraph> <p>Following the <a href=https://www.techempower.com/benchmarks/ rel=noopener target=_blank>TechEmpower benchmarks</a>:</p> </div> <div class=ulist> <ul> <li> <p><a href=https://github.com/gin-gonic/gin rel=noopener target=_blank>Gin framework</a> is in 193 position, 9.9%.</p> </li> <li> <p><a href=https://spring.io/guides/gs/rest-service rel=noopener target=_blank>Spring Boot (REST)</a> is in 284 position, 4%.</p> </li> </ul> </div> <div class=paragraph> <p>Following the <a href=https://github.com/the-benchmarker/web-frameworks rel=noopener target=_blank>The Benchmarker results</a>:</p> </div> <div class=ulist> <ul> <li> <p><a href=https://github.com/gin-gonic/gin rel=noopener target=_blank>Gin framework</a>: position 33.</p> </li> <li> <p><a href=https://spring.io/guides/gs/rest-service rel=noopener target=_blank>Spring Boot (REST)</a>: position 68.</p> </li> </ul> </div> </div> </div> </div> <div class=sect1> <h2 id=_conclusions>Conclusions</h2> <div class=sectionbody> <div class=paragraph> <p>If I were you, Id choose <a href=https://golang.org rel=noopener target=_blank>Go</a> if:</p> </div> <div class=ulist> <ul> <li> <p>If you value the explicit over implicit, keep in mind that there is a cost, you will most likely have to write more lines of code.</p> </li> <li> <p>If you value the simplicity, <a href=https://golang.org rel=noopener target=_blank>Go</a> has a quite reduced set of keywords, which reduces the learning curve and simplifies the code reviews.</p> </li> <li> <p>If RAM memory usage is critical for your project, actually Id just keep away from <a href=https://spring.io/guides/gs/rest-service rel=noopener target=_blank>Spring Boot (REST)</a>.</p> </li> <li> <p>If the project you are going to work on is a distributed system, specially if it is based on <a href=https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol rel=noopener target=_blank>HTTP</a>.</p> </li> </ul> </div> </div> </div></div></main> </div> 