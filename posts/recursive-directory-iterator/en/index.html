<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <meta content=sapper name=generator> <meta content=a22af7614c96254d name=yandex-verification> <link href=/icons/icon-192x192.png rel=apple-touch-icon> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.2949866476.css rel=stylesheet><link href=client/[...slug].5dd41de1.css rel=stylesheet><link href=client/client.67f08357.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Filesystem in C++17</title><link href=/rss rel=alternate type=application/rss+xml title='Subscribe to Carlos dice "bla bla"'><meta content=2017/05/28 name=date scheme=YYYY-MM-DD><meta content="We are going to analyze with examples new filesystem features coming with C++17" name=description><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/vs.min.css rel=preload as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/vs.min.css rel=stylesheet></noscript><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-1v6ow72><button class=svelte-1v6ow72>≡</button> <ul class="svelte-1v6ow72 closed"><li class=svelte-1y8uoef><a href=. class=svelte-1y8uoef>Carlos dice "bla bla"</a></li> <li class=svelte-1y8uoef><a href=categories class=svelte-1y8uoef>Categories</a></li> <li class=svelte-1y8uoef><a href=about class=svelte-1y8uoef>About</a></ul> <div class="h svelte-1w8skyw"><a href=/rss rel=noopener target=_blank class="icon svelte-hpmv97 rss" title='Subscribe to Carlos dice "bla bla"'></a> <a href=https://github.com/carlosvin rel=noopener target=_blank class="icon svelte-hpmv97 github" title="Me at github"></a> <a href=https://twitter.com/carlosvin rel=noopener target=_blank class="icon svelte-hpmv97 twitter" title="Me at twitter"></a> <a href=https://stackoverflow.com/story/carlosvin rel=noopener target=_blank class="icon svelte-hpmv97 stackoverflow" title="Me at stackoverflow"></a></div></nav> <main class=svelte-1uhnsl8> <h1 class=svelte-16bc3x4>Filesystem in C++17</h1> <div class="content svelte-16bc3x4"><div class=toc id=toc> <div id=toctitle>Table of Contents</div> <ul class=sectlevel1> <li><a href=#_introduction>Introduction</a></li> <li><a href=#_gettting_started_with_experimental_filesystem_features_c17_g>Gettting started with Experimental Filesystem Features C++17 (g++)</a></li> <li><a href=#_c17_filesystem_features>C++17 Filesystem Features</a> <ul class=sectlevel2> <li><a href=#_stdfilesystempath>std::filesystem::path</a></li> <li><a href=#_directory_separator>Directory separator</a></li> <li><a href=#_directory_separator_operator>Directory Separator Operator</a></li> <li><a href=#_createremove_directories>Create/Remove Directories</a></li> </ul> </li> <li><a href=#_full_example_recursive_directory_iterator>Full example: Recursive Directory Iterator</a> <ul class=sectlevel2> <li><a href=#_c11>C++11</a></li> <li><a href=#_c17>C++17</a></li> </ul> </li> </ul> </div> <div class=sect1> <h2 id=_introduction>Introduction</h2> <div class=sectionbody> <div class=paragraph> <p>Since C++17 new filesystem abstractions will be added to C++ environment. So far they are available as <a href=https://en.cppreference.com/w/cpp/experimental>Experimental C++ Features</a>. If you want to dig more about this new library, here it is the <a href=http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4100.pdf rel=noopener target=_blank>final draft of File System Technical Specification</a>.</p> </div> </div> </div> <div class=sect1> <h2 id=_gettting_started_with_experimental_filesystem_features_c17_g>Gettting started with Experimental Filesystem Features C++17 (g++)</h2> <div class=sectionbody> <div class=paragraph> <p>We just have to "tell" compiler that:</p> </div> <div class=ulist> <ul> <li> <p>we write C++17 (<code>-c++1z</code>) and</p> </li> <li> <p>it has to add <em>standard library with filesystem library</em> (<code>-lstdc++fs</code>).</p> </li> </ul> </div> <div class=listingblock> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash>g++ -std=c++1z main.cpp -lstdc++fs && ./a.out</code></pre> </div> </div> <div class=paragraph> <p>Let’s see a simple example with <code>std::filesystem::path</code> class.</p> </div> <div class=listingblock> <div class=content> <pre class=highlight><code class=language-cpp data-lang=cpp><span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;experimental/filesystem></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;iostream></span></span>

<span class=hljs-keyword>namespace</span> fs = <span class=hljs-built_in>std</span>::experimental::filesystem;
<span class=hljs-keyword>using</span> <span class=hljs-keyword>namespace</span> <span class=hljs-built_in>std</span>;

<span class=hljs-function><span class=hljs-keyword>int</span> <span class=hljs-title>main</span><span class=hljs-params>()</span>
</span>{
    fs::path aPath {<span class=hljs-string>"./path/to/file.txt"</span>};

    <span class=hljs-built_in>cout</span> &lt;&lt; <span class=hljs-string>"Parent path: "</span> &lt;&lt; aPath.parent_path() &lt;&lt; <span class=hljs-built_in>endl</span>;
    <span class=hljs-built_in>cout</span> &lt;&lt; <span class=hljs-string>"Filename: "</span> &lt;&lt; aPath.filename() &lt;&lt; <span class=hljs-built_in>endl</span>;
    <span class=hljs-built_in>cout</span> &lt;&lt; <span class=hljs-string>"Extension: "</span> &lt;&lt; aPath.extension() &lt;&lt; <span class=hljs-built_in>endl</span>;

    <span class=hljs-keyword>return</span> <span class=hljs-number>0</span>;
}</code></pre> </div> </div> <div class=listingblock> <div class=title><a href=https://coliru.stacked-crooked.com/a/9f8bebb8b7f0fbe7 rel=noopener target=_blank>Compile and run: Basic C++17 example</a></div> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash>$ g++ -std=c++1z main.cpp -lstdc++fs && ./a.out
$ ./a.out

Parent path: <span class=hljs-string>"./path/to"</span>
Filename: <span class=hljs-string>"file.txt"</span>
Extension: <span class=hljs-string>".txt"</span></code></pre> </div> </div> </div> </div> <div class=sect1> <h2 id=_c17_filesystem_features>C++17 Filesystem Features</h2> <div class=sectionbody> <div class=paragraph> <p>In this section, we are going to explain some <a href=https://en.cppreference.com/w/cpp/filesystem rel=noopener target=_blank>std::filesystem</a> features with examples, which will help us to highlight differences between C++11 and C++17 so we can get a better idea about what this new library will supply and how it might make developer’s work easier.</p> </div> <div class=sect2> <h3 id=_stdfilesystempath>std::filesystem::path</h3> <div class=paragraph> <p>Upper we have seen a tiny <a href=https://coliru.stacked-crooked.com/a/9f8bebb8b7f0fbe7 rel=noopener target=_blank>use case for std::filesystem::path</a>. That is a quite powerful and convenient feature that supplies an multi-platform abstraction for paths to files using the correct directory path separator depending on the platform we are building our application for (<code>\</code> for Windows based systems and <code>/</code> for Unix based systems).</p> </div> </div> <div class=sect2> <h3 id=_directory_separator>Directory separator</h3> <div class=paragraph> <p>When we want our application to use the correct directory separator in C++11, we could use conditional macro declaration:</p> </div> <div class=listingblock> <div class=title>Platform independent directory separator in C++11</div> <div class=content> <pre class=highlight><code class=language-cpp data-lang=cpp><span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;iostream></span></span>

<span class=hljs-keyword>using</span> <span class=hljs-keyword>namespace</span> <span class=hljs-built_in>std</span>;

<span class=hljs-meta>#<span class=hljs-meta-keyword>ifdef</span> _WIN32</span>
<span class=hljs-keyword>const</span> <span class=hljs-built_in>string</span> SEP = <span class=hljs-string>"\\"</span>;
<span class=hljs-meta>#<span class=hljs-meta-keyword>else</span></span>
<span class=hljs-keyword>const</span> <span class=hljs-built_in>string</span> SEP = <span class=hljs-string>"/"</span>;
<span class=hljs-meta>#<span class=hljs-meta-keyword>endif</span></span>

<span class=hljs-function><span class=hljs-keyword>int</span> <span class=hljs-title>main</span><span class=hljs-params>()</span>
</span>{
    <span class=hljs-built_in>cout</span> &lt;&lt; <span class=hljs-string>"Separator in my system "</span> &lt;&lt; SEP &lt;&lt; <span class=hljs-built_in>endl</span>;
    <span class=hljs-keyword>return</span> <span class=hljs-number>0</span>;
}</code></pre> </div> </div> <div class=paragraph> <p><a href=https://coliru.stacked-crooked.com/a/5023ee989105fc54 rel=noopener target=_blank>Compile and run: C++11 separator example</a>.</p> </div> <div class=listingblock> <div class=title>Platform independent directory separator in C++17. Cleaner and simpler.</div> <div class=content> <pre class=highlight><code class=language-cpp data-lang=cpp><span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;experimental/filesystem></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;iostream></span></span>

<span class=hljs-keyword>namespace</span> fs = <span class=hljs-built_in>std</span>::experimental::filesystem;
<span class=hljs-keyword>using</span> <span class=hljs-keyword>namespace</span> <span class=hljs-built_in>std</span>;

<span class=hljs-function><span class=hljs-keyword>int</span> <span class=hljs-title>main</span><span class=hljs-params>()</span>
</span>{
    <span class=hljs-built_in>cout</span> &lt;&lt; <span class=hljs-string>"Separator in my system "</span> &lt;&lt; fs::path::preferred_separator &lt;&lt; <span class=hljs-built_in>endl</span>;
    <span class=hljs-keyword>return</span> <span class=hljs-number>0</span>;
}</code></pre> </div> </div> <div class=paragraph> <p><a href=https://coliru.stacked-crooked.com/a/1f2f63b3f5597d05 rel=noopener target=_blank>Compile and run: C++17 separator example</a>.</p> </div> </div> <div class=sect2> <h3 id=_directory_separator_operator>Directory Separator Operator</h3> <div class=paragraph> <p><a href=https://en.cppreference.com/w/cpp/filesystem/path>std::filesystem::path</a> implements <code>/</code> operator, which allows to easily concatenate paths to files and directories.</p> </div> <div class=paragraph> <p>When we want to concatenate paths in C++11, we have to add extra logic to avoid adding duplicate separators and to select the correct separator for target platform:</p> </div> <div class=listingblock> <div class=title>Concatenate paths in C++11</div> <div class=content> <pre class=highlight><code class=language-cpp data-lang=cpp><span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;iostream></span></span>

<span class=hljs-keyword>using</span> <span class=hljs-keyword>namespace</span> <span class=hljs-built_in>std</span>;

<span class=hljs-meta>#<span class=hljs-meta-keyword>ifdef</span> _WIN32</span>
<span class=hljs-keyword>const</span> <span class=hljs-built_in>string</span> SEP = <span class=hljs-string>"\\"</span>;
<span class=hljs-meta>#<span class=hljs-meta-keyword>else</span></span>
<span class=hljs-keyword>const</span> <span class=hljs-built_in>string</span> SEP = <span class=hljs-string>"/"</span>;
<span class=hljs-meta>#<span class=hljs-meta-keyword>endif</span></span>

<span class=hljs-function><span class=hljs-keyword>int</span> <span class=hljs-title>main</span><span class=hljs-params>()</span>
</span>{
    <span class=hljs-built_in>string</span> root {<span class=hljs-string>"/"</span>};
    <span class=hljs-built_in>string</span> dir {<span class=hljs-string>"var/www/"</span>};
    <span class=hljs-built_in>string</span> index {<span class=hljs-string>"index.html"</span>};

    <span class=hljs-built_in>string</span> pathToIndex{};
    pathToIndex.append(root).append(SEP).append(dir).append(SEP).append(index);

    <span class=hljs-built_in>cout</span> &lt;&lt; pathToIndex &lt;&lt; <span class=hljs-built_in>endl</span>;
    <span class=hljs-keyword>return</span> <span class=hljs-number>0</span>;
}</code></pre> </div> </div> <div class=listingblock> <div class=title><a href=https://coliru.stacked-crooked.com/a/290b278ec1de9573 rel=noopener target=_blank>Compile and run: Concatenate paths in C++11</a></div> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash>//var/www//index.html</code></pre> </div> </div> <div class=paragraph> <p>Checking program output we notice it is not fully correct, we should have checked whether path parts already contains a separator so we don’t append another separator again. That logic is already implemented in <a href=https://en.cppreference.com/w/cpp/filesystem/path>std::filesystem::path</a>, so C++17 can be like:</p> </div> <div class=listingblock> <div class=title>Concatenate paths in C++17</div> <div class=content> <pre class=highlight><code class=language-cpp data-lang=cpp><span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;experimental/filesystem></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;iostream></span></span>

<span class=hljs-keyword>namespace</span> fs = <span class=hljs-built_in>std</span>::experimental::filesystem;
<span class=hljs-keyword>using</span> <span class=hljs-keyword>namespace</span> <span class=hljs-built_in>std</span>;

<span class=hljs-function><span class=hljs-keyword>int</span> <span class=hljs-title>main</span><span class=hljs-params>()</span>
</span>{
    fs::path root {<span class=hljs-string>"/"</span>};
    fs::path dir {<span class=hljs-string>"var/www/"</span>};
    fs::path index {<span class=hljs-string>"index.html"</span>};

    fs::path pathToIndex = root / dir / index;

    <span class=hljs-built_in>cout</span> &lt;&lt; pathToIndex &lt;&lt; <span class=hljs-built_in>endl</span>;
    <span class=hljs-keyword>return</span> <span class=hljs-number>0</span>;
}</code></pre> </div> </div> <div class=listingblock> <div class=title><a href=https://coliru.stacked-crooked.com/a/a24d50875b4daad1>Compile and run: Concatenate paths in C++17</a>.</div> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash><span class=hljs-string>"/var/www/index.html"</span></code></pre> </div> </div> <div class=paragraph> <p>Code is cleaner and just correct, there are no duplicated separators.</p> </div> </div> <div class=sect2> <h3 id=_createremove_directories>Create/Remove Directories</h3> <div class=paragraph> <p><a href=https://en.cppreference.com/w/cpp/filesystem rel=noopener target=_blank>std::filesystem</a> comes with some utilities to create and remove files and directories, but firstly let’s try to do so in C++11.</p> </div> <div class=listingblock> <div class=title>Create and remove nested directories in C++11</div> <div class=content> <pre class=highlight><code class=language-cpp data-lang=cpp><span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;iostream></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;cstdio></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;sys/stat.h></span></span>

<span class=hljs-keyword>using</span> <span class=hljs-keyword>namespace</span> <span class=hljs-built_in>std</span>;

<span class=hljs-function><span class=hljs-keyword>int</span> <span class=hljs-title>main</span><span class=hljs-params>()</span>
</span>{
    <span class=hljs-keyword>auto</span> opts = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;
    mkdir(<span class=hljs-string>"sandbox"</span>, opts);
    mkdir(<span class=hljs-string>"sandbox/a"</span>, opts);
    mkdir(<span class=hljs-string>"sandbox/a/b"</span>, opts);
    mkdir(<span class=hljs-string>"sandbox/c"</span>, opts);
    mkdir(<span class=hljs-string>"sandbox/c/d"</span>, opts);

    system(<span class=hljs-string>"ls -la sandbox/*"</span>);

    remove(<span class=hljs-string>"sandbox/c/d"</span>);
    remove(<span class=hljs-string>"sandbox/a/b"</span>);
    remove(<span class=hljs-string>"sandbox/c"</span>);
    remove(<span class=hljs-string>"sandbox/a"</span>);
    remove(<span class=hljs-string>"sandbox"</span>);

    system(<span class=hljs-string>"ls -la"</span>);

    <span class=hljs-keyword>return</span> <span class=hljs-number>0</span>;
}</code></pre> </div> </div> <div class=listingblock> <div class=title><a href=https://coliru.stacked-crooked.com/a/26f4763ec5b42adb>Compile and run: Create and remove directories C++11</a>.</div> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash>g++-4.9 -std=c++11 main.cpp -lm && ./a.out
sandbox/a:
total 12
drwxr-xr-x 3 2001 2000 4096 May 28 12:27 .
drwxr-xr-x 4 2001 2000 4096 May 28 12:27 ..
drwxr-xr-x 2 2001 2000 4096 May 28 12:27 b

sandbox/c:
total 12
drwxr-xr-x 3 2001 2000 4096 May 28 12:27 .
drwxr-xr-x 4 2001 2000 4096 May 28 12:27 ..
drwxr-xr-x 2 2001 2000 4096 May 28 12:27 d
total 8012
drwxrwxrwx 2 2001 2000    4096 May 28 12:27 .
drwxrwxrwx 3 2002 2000 8175616 May 28 12:27 ..
-rwxr-xr-x 1 2001 2000    8168 May 28 12:27 a.out
-rw-rw-rw- 1 2001 2000     517 May 28 12:27 main.cpp</code></pre> </div> </div> <div class=paragraph> <p>We have to create/remove one by one. We could rewrite this code snippet with less lines (using a loop), but we still have to pay attention to creation/deletion order, we cannot remove parent directory before we have removed all children.</p> </div> <div class=paragraph> <p>Since C++17, we can create and remove nested directories with just one call.</p> </div> <div class=listingblock> <div class=title>Create and remove nested directories C++17</div> <div class=content> <pre class=highlight><code class=language-cpp data-lang=cpp><span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;experimental/filesystem></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;iostream></span></span>

<span class=hljs-keyword>namespace</span> fs = <span class=hljs-built_in>std</span>::experimental::filesystem;
<span class=hljs-keyword>using</span> <span class=hljs-keyword>namespace</span> <span class=hljs-built_in>std</span>;

<span class=hljs-function><span class=hljs-keyword>int</span> <span class=hljs-title>main</span><span class=hljs-params>()</span>
</span>{
    fs::create_directories(<span class=hljs-string>"sandbox/a/b"</span>);
    fs::create_directories(<span class=hljs-string>"sandbox/c/d"</span>);
    system(<span class=hljs-string>"ls -la sandbox/*"</span>);

    <span class=hljs-built_in>cout</span> &lt;&lt; <span class=hljs-string>"Were directories removed? "</span> &lt;&lt; fs::remove_all(<span class=hljs-string>"sandbox"</span>) &lt;&lt; <span class=hljs-built_in>endl</span>;
    system(<span class=hljs-string>"ls -la"</span>);

    <span class=hljs-keyword>return</span> <span class=hljs-number>0</span>;
}</code></pre> </div> </div> <div class=listingblock> <div class=title><a href=https://coliru.stacked-crooked.com/a/62c2d22fa0e7144c>Compile and run: Create and remove nested directories C++17</a>.</div> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash>g++ -std=c++1z -fconcepts -fgnu-tm  -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs && ./a.out
sandbox/a:
total 12
drwxr-xr-x 3 2001 2000 4096 May 28 16:45 .
drwxr-xr-x 4 2001 2000 4096 May 28 16:45 ..
drwxr-xr-x 2 2001 2000 4096 May 28 16:45 b

sandbox/c:
total 12
drwxr-xr-x 3 2001 2000 4096 May 28 16:45 .
drwxr-xr-x 4 2001 2000 4096 May 28 16:45 ..
drwxr-xr-x 2 2001 2000 4096 May 28 16:45 d
Were directories removed? 1
total 10132
drwxrwxrwx 2 2001 2000    4096 May 28 16:45 .
drwxrwxrwx 3 2002 2000 8175616 May 28 16:45 ..
-rwxr-xr-x 1 2001 2000 2170976 May 28 16:45 a.out
-rw-rw-rw- 1 2001 2000     393 May 28 16:45 main.cpp</code></pre> </div> </div> </div> </div> </div> <div class=sect1> <h2 id=_full_example_recursive_directory_iterator>Full example: Recursive Directory Iterator</h2> <div class=sectionbody> <div class=paragraph> <p>This example consists of iterate recursively through dicrectories fintering files by extension.</p> </div> <div class=sect2> <h3 id=_c11>C++11</h3> <div class=paragraph> <p>To keep C++11 example simple, I haven’t added filtering logic, but filtering logic is present in C++17 example:</p> </div> <div class=listingblock> <div class=title>filesystem.11.cpp</div> <div class=content> <pre class=highlight><code class=language-cpp data-lang=cpp><span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;dirent.h></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;cstring></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;iostream></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;fstream> // std::ofstream</span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;vector></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;memory></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;system_error></span></span>
<span class=hljs-meta>#<span class=hljs-meta-keyword>include</span> <span class=hljs-meta-string>&lt;sys/stat.h></span></span>

<span class=hljs-keyword>using</span> <span class=hljs-keyword>namespace</span> <span class=hljs-built_in>std</span>;

<span class=hljs-keyword>const</span> <span class=hljs-built_in>string</span> UP_DIR = <span class=hljs-string>".."</span>;
<span class=hljs-keyword>const</span> <span class=hljs-built_in>string</span> CURRENT_DIR = <span class=hljs-string>"."</span>;
<span class=hljs-keyword>const</span> <span class=hljs-built_in>string</span> SEP = <span class=hljs-string>"/"</span>;


<span class=hljs-function><span class=hljs-built_in>string</span> <span class=hljs-title>path</span><span class=hljs-params>(<span class=hljs-built_in>initializer_list</span>&lt;<span class=hljs-built_in>string</span>> parts)</span>
</span>{
    <span class=hljs-built_in>string</span> pathTmp {};
    <span class=hljs-built_in>string</span> separator = <span class=hljs-string>""</span>;
    <span class=hljs-keyword>for</span> (<span class=hljs-keyword>auto</span> & part: parts)
    {
        pathTmp.append(separator).append(part);
        separator = SEP;
    }
    <span class=hljs-keyword>return</span> pathTmp;
}

<span class=hljs-function><span class=hljs-built_in>vector</span>&lt;<span class=hljs-built_in>string</span>> <span class=hljs-title>getDirectoryFiles</span><span class=hljs-params>(<span class=hljs-keyword>const</span> <span class=hljs-built_in>string</span>& dir, <span class=hljs-keyword>const</span> <span class=hljs-built_in>vector</span>&lt;<span class=hljs-built_in>string</span>> & extensions)</span>
</span>{
    <span class=hljs-built_in>vector</span>&lt;<span class=hljs-built_in>string</span>> files;
    <span class=hljs-function><span class=hljs-built_in>shared_ptr</span>&lt;DIR> <span class=hljs-title>directory_ptr</span><span class=hljs-params>(opendir(dir.c_str()), [](DIR* dir){ dir && closedir(dir); })</span></span>;
    <span class=hljs-keyword>if</span> (!directory_ptr)
    {
        <span class=hljs-keyword>throw</span> system_error(error_code(errno, system_category()), <span class=hljs-string>"Error opening : "</span> + dir);
    }

    <span class=hljs-class><span class=hljs-keyword>struct</span> <span class=hljs-title>dirent</span> *<span class=hljs-title>dirent_ptr</span>;</span>
    <span class=hljs-keyword>while</span> ((dirent_ptr = readdir(directory_ptr.get())) != <span class=hljs-literal>nullptr</span>)
    {
        <span class=hljs-keyword>const</span> <span class=hljs-built_in>string</span> fileName {dirent_ptr->d_name};
        <span class=hljs-keyword>if</span> (dirent_ptr->d_type == DT_DIR)
        {
            <span class=hljs-keyword>if</span> (CURRENT_DIR != fileName && UP_DIR != fileName)
            {
                <span class=hljs-keyword>auto</span> subFiles = getDirectoryFiles(path({dir, fileName}), extensions);
                files.insert(end(files), begin(subFiles), end(subFiles));
            }
        }
        <span class=hljs-keyword>else</span> <span class=hljs-keyword>if</span> (dirent_ptr->d_type == DT_REG)
        {
            <span class=hljs-comment>// here we should check also if filename has an extension in extensions vector</span>
            files.push_back(path({dir, fileName}));
        }
    }
    <span class=hljs-keyword>return</span> files;
}

<span class=hljs-function><span class=hljs-keyword>int</span> <span class=hljs-title>main</span> <span class=hljs-params>()</span>
</span>{
    <span class=hljs-keyword>auto</span> opt = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;
    mkdir(<span class=hljs-string>"sandbox"</span>, opt);
    mkdir(<span class=hljs-string>"sandbox/a"</span>, opt);
    mkdir(<span class=hljs-string>"sandbox/a/b"</span>, opt);

	<span class=hljs-built_in>vector</span>&lt;<span class=hljs-built_in>string</span>> e_files = {
	    <span class=hljs-string>"./sandbox/a/b/file1.rst"</span>,
	    <span class=hljs-string>"./sandbox/a/b/file1.txt"</span>,
	    <span class=hljs-string>"./sandbox/a/file2.RST"</span>,
	    <span class=hljs-string>"./sandbox/file3.md"</span>,
	    <span class=hljs-string>"./sandbox/will_be.ignored"</span>
	};

	<span class=hljs-comment>// create files</span>
	<span class=hljs-keyword>for</span> (<span class=hljs-keyword>auto</span> &f: e_files)
	{
		<span class=hljs-function>ofstream <span class=hljs-title>of</span><span class=hljs-params>(f, ofstream::out)</span></span>;
		of &lt;&lt; <span class=hljs-string>"test"</span>;
	}

    <span class=hljs-built_in>cout</span> &lt;&lt; <span class=hljs-string>"filtered files: "</span> &lt;&lt; <span class=hljs-built_in>endl</span>;
	<span class=hljs-keyword>for</span> (<span class=hljs-keyword>auto</span> &f: getDirectoryFiles(<span class=hljs-string>"."</span>, {<span class=hljs-string>".rst"</span>, <span class=hljs-string>".RST"</span>, <span class=hljs-string>".md"</span>})){
	    <span class=hljs-built_in>cout</span> &lt;&lt; <span class=hljs-string>"\t"</span> &lt;&lt; f &lt;&lt; <span class=hljs-built_in>endl</span>;
	}

    <span class=hljs-keyword>return</span> <span class=hljs-number>0</span>;
}</code></pre> </div> </div> <div class=listingblock> <div class=title><a href=https://coliru.stacked-crooked.com/a/af4228e039a281b3 rel=noopener target=_blank>Compile and run C++11 example</a>.</div> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash>g++ -std=c++11 -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs && ./a.out
filtered files:
	./main.cpp
	./sandbox/file3.md
	./sandbox/will_be.ignored
	./sandbox/a/b/file1.rst
	./sandbox/a/b/file1.txt
	./sandbox/a/file2.RST
	./a.out</code></pre> </div> </div> </div> <div class=sect2> <h3 id=_c17>C++17</h3> <div class=paragraph> <p>Following example also filters files by extension.</p> </div> <div class=listingblock> <div class=title>filesystem.17.cpp</div> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash><span class=hljs-comment>#include &lt;dirent.h></span>
<span class=hljs-comment>#include &lt;cstring></span>
<span class=hljs-comment>#include &lt;iostream></span>
<span class=hljs-comment>#include &lt;fstream> // std::ofstream</span>
<span class=hljs-comment>#include &lt;vector></span>
<span class=hljs-comment>#include &lt;memory></span>
<span class=hljs-comment>#include &lt;system_error></span>
<span class=hljs-comment>#include &lt;sys/stat.h></span>

using namespace std;

const string UP_DIR = <span class=hljs-string>".."</span>;
const string CURRENT_DIR = <span class=hljs-string>"."</span>;
const string SEP = <span class=hljs-string>"/"</span>;


string path(initializer_list&lt;string> parts)
{
    string pathTmp {};
    string separator = <span class=hljs-string>""</span>;
    <span class=hljs-keyword>for</span> (auto & part: parts)
    {
        pathTmp.append(separator).append(part);
        separator = SEP;
    }
    <span class=hljs-built_in>return</span> pathTmp;
}

vector&lt;string> getDirectoryFiles(const string& dir, const vector&lt;string> & extensions)
{
    vector&lt;string> files;
    shared_ptr&lt;DIR> directory_ptr(opendir(dir.c_str()), [](DIR* dir){ dir && closedir(dir); });
    <span class=hljs-keyword>if</span> (!directory_ptr)
    {
        throw system_error(error_code(errno, system_category()), <span class=hljs-string>"Error opening : "</span> + dir);
    }

    struct dirent *dirent_ptr;
    <span class=hljs-keyword>while</span> ((dirent_ptr = readdir(directory_ptr.get())) != nullptr)
    {
        const string fileName {dirent_ptr->d_name};
        <span class=hljs-keyword>if</span> (dirent_ptr->d_type == DT_DIR)
        {
            <span class=hljs-keyword>if</span> (CURRENT_DIR != fileName && UP_DIR != fileName)
            {
                auto subFiles = getDirectoryFiles(path({dir, fileName}), extensions);
                files.insert(end(files), begin(subFiles), end(subFiles));
            }
        }
        <span class=hljs-keyword>else</span> <span class=hljs-keyword>if</span> (dirent_ptr->d_type == DT_REG)
        {
            // here we should check also <span class=hljs-keyword>if</span> filename has an extension <span class=hljs-keyword>in</span> extensions vector
            files.push_back(path({dir, fileName}));
        }
    }
    <span class=hljs-built_in>return</span> files;
}

int <span class=hljs-function><span class=hljs-title>main</span></span> ()
{
    auto opt = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;
    mkdir(<span class=hljs-string>"sandbox"</span>, opt);
    mkdir(<span class=hljs-string>"sandbox/a"</span>, opt);
    mkdir(<span class=hljs-string>"sandbox/a/b"</span>, opt);

	vector&lt;string> e_files = {
	    <span class=hljs-string>"./sandbox/a/b/file1.rst"</span>,
	    <span class=hljs-string>"./sandbox/a/b/file1.txt"</span>,
	    <span class=hljs-string>"./sandbox/a/file2.RST"</span>,
	    <span class=hljs-string>"./sandbox/file3.md"</span>,
	    <span class=hljs-string>"./sandbox/will_be.ignored"</span>
	};

	// create files
	<span class=hljs-keyword>for</span> (auto &f: e_files)
	{
		ofstream of(f, ofstream::out);
		of &lt;&lt; <span class=hljs-string>"test"</span>;
	}

    cout &lt;&lt; <span class=hljs-string>"filtered files: "</span> &lt;&lt; endl;
	<span class=hljs-keyword>for</span> (auto &f: getDirectoryFiles(<span class=hljs-string>"."</span>, {<span class=hljs-string>".rst"</span>, <span class=hljs-string>".RST"</span>, <span class=hljs-string>".md"</span>})){
	    cout &lt;&lt; <span class=hljs-string>"\t"</span> &lt;&lt; f &lt;&lt; endl;
	}

    <span class=hljs-built_in>return</span> 0;
}</code></pre> </div> </div> <div class=listingblock> <div class=title><a href=https://coliru.stacked-crooked.com/a/af4228e039a281b3 rel=noopener target=_blank>Compile and run C++17 example</a>.</div> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash>g++ -std=c++11 -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs && ./a.out
filtered files:
	./main.cpp
	./sandbox/file3.md
	./sandbox/will_be.ignored
	./sandbox/a/b/file1.rst
	./sandbox/a/b/file1.txt
	./sandbox/a/file2.RST
	./a.out</code></pre> </div> </div> </div> </div> </div></div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,(function(a,b,c,d,e,f,g,h){return {post:{sectids:a,"toc-placement":"auto",notitle:a,stylesheet:a,webfonts:a,prewrap:a,"attribute-undefined":"drop-line","attribute-missing":"skip","iconfont-remote":a,"caution-caption":"Caution","important-caption":"Important","note-caption":"Note","tip-caption":"Tip","warning-caption":"Warning","example-caption":"Example","figure-caption":"Figure","table-caption":"Table","toc-title":"Table of Contents","section-refsig":"Section","part-refsig":"Part","chapter-refsig":"Chapter","appendix-refsig":c,"appendix-caption":c,"untitled-label":"Untitled","version-label":"Version","last-update-label":"Last updated",docfile:"recursive-directory-iterator.en.adoc",docdir:a,docfilesuffix:".adoc",docname:"recursive-directory-iterator.en",embedded:a,asciidoctor:a,"asciidoctor-version":"2.0.10","safe-mode-name":"secure","safe-mode-secure":a,"safe-mode-level":20,"max-include-depth":64,"user-home":d,backend:"html5","max-attribute-value-size":4096,linkcss:a,doctype:"article",htmlsyntax:b,"backend-html5-doctype-article":a,"doctype-article":a,"backend-html5":a,outfilesuffix:".html",filetype:b,"filetype-html":a,"basebackend-html-doctype-article":a,"basebackend-html":a,basebackend:b,stylesdir:d,iconsdir:".\u002Fimages\u002Ficons",localdate:"2020-04-23",localyear:e,localtime:"21:17:07 +0200",localdatetime:"2020-04-23 21:17:07 +0200",docdate:f,docyear:e,doctime:"22:29:29 +0200",docdatetime:"2020-04-19 22:29:29 +0200",doctitle:g,date:f,keywords:["C++","C++11","C++17","IO","Filesystem"],toc:a,description:h,lang:"en",draft:"http:\u002F\u002Fwww.open-std.org\u002Fjtc1\u002Fsc22\u002Fwg21\u002Fdocs\u002Fpapers\u002F2014\u002Fn4100.pdf[final draft of File System Technical Specification,window=_blank]",pp:"++",fslink:"https:\u002F\u002Fen.cppreference.com\u002Fw\u002Fcpp\u002Ffilesystem[std::filesystem,window=_blank]",authorcount:0,title:g,summary:h,html:"\u003Cdiv id=\"toc\" class=\"toc\"\u003E\n\u003Cdiv id=\"toctitle\"\u003ETable of Contents\u003C\u002Fdiv\u003E\n\u003Cul class=\"sectlevel1\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_introduction\"\u003EIntroduction\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_gettting_started_with_experimental_filesystem_features_c17_g\"\u003EGettting started with Experimental Filesystem Features C&#43;&#43;17 (g++)\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_c17_filesystem_features\"\u003EC&#43;&#43;17 Filesystem Features\u003C\u002Fa\u003E\n\u003Cul class=\"sectlevel2\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_stdfilesystempath\"\u003Estd::filesystem::path\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_directory_separator\"\u003EDirectory separator\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_directory_separator_operator\"\u003EDirectory Separator Operator\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_createremove_directories\"\u003ECreate\u002FRemove Directories\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_full_example_recursive_directory_iterator\"\u003EFull example: Recursive Directory Iterator\u003C\u002Fa\u003E\n\u003Cul class=\"sectlevel2\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_c11\"\u003EC&#43;&#43;11\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_c17\"\u003EC&#43;&#43;17\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_introduction\"\u003EIntroduction\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ESince C&#43;&#43;17 new filesystem abstractions will be added to C&#43;&#43; environment. So far they are available as \u003Ca href=\"https:\u002F\u002Fen.cppreference.com\u002Fw\u002Fcpp\u002Fexperimental\"\u003EExperimental C&#43;&#43; Features\u003C\u002Fa\u003E. If you want to dig more about this new library, here it is the \u003Ca href=\"http:\u002F\u002Fwww.open-std.org\u002Fjtc1\u002Fsc22\u002Fwg21\u002Fdocs\u002Fpapers\u002F2014\u002Fn4100.pdf\" target=\"_blank\" rel=\"noopener\"\u003Efinal draft of File System Technical Specification\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_gettting_started_with_experimental_filesystem_features_c17_g\"\u003EGettting started with Experimental Filesystem Features C&#43;&#43;17 (g++)\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EWe just have to \"tell\" compiler that:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"ulist\"\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003Ewe write C&#43;&#43;17 (\u003Ccode\u003E-c++1z\u003C\u002Fcode\u003E) and\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003Eit has to add \u003Cem\u003Estandard library with filesystem library\u003C\u002Fem\u003E (\u003Ccode\u003E-lstdc++fs\u003C\u002Fcode\u003E).\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003Eg++ -std=c++1z main.cpp -lstdc++fs &amp;&amp; .\u002Fa.out\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ELet&#8217;s see a simple example with \u003Ccode\u003Estd::filesystem::path\u003C\u002Fcode\u003E class.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-cpp\" data-lang=\"cpp\"\u003E\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;experimental\u002Ffilesystem&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E fs = \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E::experimental::filesystem;\n\u003Cspan class=\"hljs-keyword\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E{\n    fs::path aPath {\u003Cspan class=\"hljs-string\"\u003E\".\u002Fpath\u002Fto\u002Ffile.txt\"\u003C\u002Fspan\u003E};\n\n    \u003Cspan class=\"hljs-built_in\"\u003Ecout\u003C\u002Fspan\u003E &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"Parent path: \"\u003C\u002Fspan\u003E &lt;&lt; aPath.parent_path() &lt;&lt; \u003Cspan class=\"hljs-built_in\"\u003Eendl\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-built_in\"\u003Ecout\u003C\u002Fspan\u003E &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"Filename: \"\u003C\u002Fspan\u003E &lt;&lt; aPath.filename() &lt;&lt; \u003Cspan class=\"hljs-built_in\"\u003Eendl\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-built_in\"\u003Ecout\u003C\u002Fspan\u003E &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"Extension: \"\u003C\u002Fspan\u003E &lt;&lt; aPath.extension() &lt;&lt; \u003Cspan class=\"hljs-built_in\"\u003Eendl\u003C\u002Fspan\u003E;\n\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F9f8bebb8b7f0fbe7\" target=\"_blank\" rel=\"noopener\"\u003ECompile and run: Basic C&#43;&#43;17 example\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003E$ g++ -std=c++1z main.cpp -lstdc++fs &amp;&amp; .\u002Fa.out\n$ .\u002Fa.out\n\nParent path: \u003Cspan class=\"hljs-string\"\u003E\".\u002Fpath\u002Fto\"\u003C\u002Fspan\u003E\nFilename: \u003Cspan class=\"hljs-string\"\u003E\"file.txt\"\u003C\u002Fspan\u003E\nExtension: \u003Cspan class=\"hljs-string\"\u003E\".txt\"\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_c17_filesystem_features\"\u003EC&#43;&#43;17 Filesystem Features\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EIn this section, we are going to explain some \u003Ca href=\"https:\u002F\u002Fen.cppreference.com\u002Fw\u002Fcpp\u002Ffilesystem\" target=\"_blank\" rel=\"noopener\"\u003Estd::filesystem\u003C\u002Fa\u003E features with examples, which will help us to highlight differences between C&#43;&#43;11 and C&#43;&#43;17 so we can get a better idea about what this new library will supply and how it might make developer&#8217;s work easier.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_stdfilesystempath\"\u003Estd::filesystem::path\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EUpper we have seen a tiny \u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F9f8bebb8b7f0fbe7\" target=\"_blank\" rel=\"noopener\"\u003Euse case for std::filesystem::path\u003C\u002Fa\u003E. That is a quite powerful and convenient feature that supplies an multi-platform abstraction for paths to files using the correct directory path separator depending on the platform we are building our application for (\u003Ccode\u003E\\\u003C\u002Fcode\u003E for Windows based systems and \u003Ccode\u003E\u002F\u003C\u002Fcode\u003E for Unix based systems).\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_directory_separator\"\u003EDirectory separator\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EWhen we want our application to use the correct directory separator in C&#43;&#43;11, we could use conditional macro declaration:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003EPlatform independent directory separator in C&#43;&#43;11\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-cpp\" data-lang=\"cpp\"\u003E\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Eifdef\u003C\u002Fspan\u003E _WIN32\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E SEP = \u003Cspan class=\"hljs-string\"\u003E\"\\\\\"\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Eelse\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E SEP = \u003Cspan class=\"hljs-string\"\u003E\"\u002F\"\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Eendif\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E{\n    \u003Cspan class=\"hljs-built_in\"\u003Ecout\u003C\u002Fspan\u003E &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"Separator in my system \"\u003C\u002Fspan\u003E &lt;&lt; SEP &lt;&lt; \u003Cspan class=\"hljs-built_in\"\u003Eendl\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F5023ee989105fc54\" target=\"_blank\" rel=\"noopener\"\u003ECompile and run: C&#43;&#43;11 separator example\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003EPlatform independent directory separator in C&#43;&#43;17. Cleaner and simpler.\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-cpp\" data-lang=\"cpp\"\u003E\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;experimental\u002Ffilesystem&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E fs = \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E::experimental::filesystem;\n\u003Cspan class=\"hljs-keyword\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E{\n    \u003Cspan class=\"hljs-built_in\"\u003Ecout\u003C\u002Fspan\u003E &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"Separator in my system \"\u003C\u002Fspan\u003E &lt;&lt; fs::path::preferred_separator &lt;&lt; \u003Cspan class=\"hljs-built_in\"\u003Eendl\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F1f2f63b3f5597d05\" target=\"_blank\" rel=\"noopener\"\u003ECompile and run: C&#43;&#43;17 separator example\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_directory_separator_operator\"\u003EDirectory Separator Operator\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fen.cppreference.com\u002Fw\u002Fcpp\u002Ffilesystem\u002Fpath\"\u003Estd::filesystem::path\u003C\u002Fa\u003E implements \u003Ccode\u003E\u002F\u003C\u002Fcode\u003E operator, which allows to easily concatenate paths to files and directories.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EWhen we want to concatenate paths in C&#43;&#43;11, we have to add extra logic to avoid adding duplicate separators and to select the correct separator for target platform:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003EConcatenate paths in C&#43;&#43;11\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-cpp\" data-lang=\"cpp\"\u003E\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Eifdef\u003C\u002Fspan\u003E _WIN32\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E SEP = \u003Cspan class=\"hljs-string\"\u003E\"\\\\\"\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Eelse\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E SEP = \u003Cspan class=\"hljs-string\"\u003E\"\u002F\"\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Eendif\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E{\n    \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E root {\u003Cspan class=\"hljs-string\"\u003E\"\u002F\"\u003C\u002Fspan\u003E};\n    \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E dir {\u003Cspan class=\"hljs-string\"\u003E\"var\u002Fwww\u002F\"\u003C\u002Fspan\u003E};\n    \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E index {\u003Cspan class=\"hljs-string\"\u003E\"index.html\"\u003C\u002Fspan\u003E};\n\n    \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E pathToIndex{};\n    pathToIndex.append(root).append(SEP).append(dir).append(SEP).append(index);\n\n    \u003Cspan class=\"hljs-built_in\"\u003Ecout\u003C\u002Fspan\u003E &lt;&lt; pathToIndex &lt;&lt; \u003Cspan class=\"hljs-built_in\"\u003Eendl\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F290b278ec1de9573\" target=\"_blank\" rel=\"noopener\"\u003ECompile and run: Concatenate paths in C&#43;&#43;11\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003E\u002F\u002Fvar\u002Fwww\u002F\u002Findex.html\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EChecking program output we notice it is not fully correct, we should have checked whether path parts already contains a separator so we don&#8217;t append another separator again. That logic is already implemented in \u003Ca href=\"https:\u002F\u002Fen.cppreference.com\u002Fw\u002Fcpp\u002Ffilesystem\u002Fpath\"\u003Estd::filesystem::path\u003C\u002Fa\u003E, so C&#43;&#43;17 can be like:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003EConcatenate paths in C&#43;&#43;17\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-cpp\" data-lang=\"cpp\"\u003E\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;experimental\u002Ffilesystem&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E fs = \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E::experimental::filesystem;\n\u003Cspan class=\"hljs-keyword\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E{\n    fs::path root {\u003Cspan class=\"hljs-string\"\u003E\"\u002F\"\u003C\u002Fspan\u003E};\n    fs::path dir {\u003Cspan class=\"hljs-string\"\u003E\"var\u002Fwww\u002F\"\u003C\u002Fspan\u003E};\n    fs::path index {\u003Cspan class=\"hljs-string\"\u003E\"index.html\"\u003C\u002Fspan\u003E};\n\n    fs::path pathToIndex = root \u002F dir \u002F index;\n\n    \u003Cspan class=\"hljs-built_in\"\u003Ecout\u003C\u002Fspan\u003E &lt;&lt; pathToIndex &lt;&lt; \u003Cspan class=\"hljs-built_in\"\u003Eendl\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002Fa24d50875b4daad1\"\u003ECompile and run: Concatenate paths in C&#43;&#43;17\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003E\u003Cspan class=\"hljs-string\"\u003E\"\u002Fvar\u002Fwww\u002Findex.html\"\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ECode is cleaner and just correct, there are no duplicated separators.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_createremove_directories\"\u003ECreate\u002FRemove Directories\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fen.cppreference.com\u002Fw\u002Fcpp\u002Ffilesystem\" target=\"_blank\" rel=\"noopener\"\u003Estd::filesystem\u003C\u002Fa\u003E comes with some utilities to create and remove files and directories, but firstly let&#8217;s try to do so in C&#43;&#43;11.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003ECreate and remove nested directories in C&#43;&#43;11\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-cpp\" data-lang=\"cpp\"\u003E\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;cstdio&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;sys\u002Fstat.h&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E{\n    \u003Cspan class=\"hljs-keyword\"\u003Eauto\u003C\u002Fspan\u003E opts = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;\n    mkdir(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\"\u003C\u002Fspan\u003E, opts);\n    mkdir(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fa\"\u003C\u002Fspan\u003E, opts);\n    mkdir(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fa\u002Fb\"\u003C\u002Fspan\u003E, opts);\n    mkdir(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fc\"\u003C\u002Fspan\u003E, opts);\n    mkdir(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fc\u002Fd\"\u003C\u002Fspan\u003E, opts);\n\n    system(\u003Cspan class=\"hljs-string\"\u003E\"ls -la sandbox\u002F*\"\u003C\u002Fspan\u003E);\n\n    remove(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fc\u002Fd\"\u003C\u002Fspan\u003E);\n    remove(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fa\u002Fb\"\u003C\u002Fspan\u003E);\n    remove(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fc\"\u003C\u002Fspan\u003E);\n    remove(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fa\"\u003C\u002Fspan\u003E);\n    remove(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\"\u003C\u002Fspan\u003E);\n\n    system(\u003Cspan class=\"hljs-string\"\u003E\"ls -la\"\u003C\u002Fspan\u003E);\n\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F26f4763ec5b42adb\"\u003ECompile and run: Create and remove directories C&#43;&#43;11\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003Eg++-4.9 -std=c++11 main.cpp -lm &amp;&amp; .\u002Fa.out\nsandbox\u002Fa:\ntotal 12\ndrwxr-xr-x 3 2001 2000 4096 May 28 12:27 .\ndrwxr-xr-x 4 2001 2000 4096 May 28 12:27 ..\ndrwxr-xr-x 2 2001 2000 4096 May 28 12:27 b\n\nsandbox\u002Fc:\ntotal 12\ndrwxr-xr-x 3 2001 2000 4096 May 28 12:27 .\ndrwxr-xr-x 4 2001 2000 4096 May 28 12:27 ..\ndrwxr-xr-x 2 2001 2000 4096 May 28 12:27 d\ntotal 8012\ndrwxrwxrwx 2 2001 2000    4096 May 28 12:27 .\ndrwxrwxrwx 3 2002 2000 8175616 May 28 12:27 ..\n-rwxr-xr-x 1 2001 2000    8168 May 28 12:27 a.out\n-rw-rw-rw- 1 2001 2000     517 May 28 12:27 main.cpp\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EWe have to create\u002Fremove one by one. We could rewrite this code snippet with less lines (using a loop), but we still have to pay attention to creation\u002Fdeletion order, we cannot remove parent directory before we have removed all children.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ESince C&#43;&#43;17, we can create and remove nested directories with just one call.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003ECreate and remove nested directories C&#43;&#43;17\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-cpp\" data-lang=\"cpp\"\u003E\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;experimental\u002Ffilesystem&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E fs = \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E::experimental::filesystem;\n\u003Cspan class=\"hljs-keyword\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E{\n    fs::create_directories(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fa\u002Fb\"\u003C\u002Fspan\u003E);\n    fs::create_directories(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fc\u002Fd\"\u003C\u002Fspan\u003E);\n    system(\u003Cspan class=\"hljs-string\"\u003E\"ls -la sandbox\u002F*\"\u003C\u002Fspan\u003E);\n\n    \u003Cspan class=\"hljs-built_in\"\u003Ecout\u003C\u002Fspan\u003E &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"Were directories removed? \"\u003C\u002Fspan\u003E &lt;&lt; fs::remove_all(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\"\u003C\u002Fspan\u003E) &lt;&lt; \u003Cspan class=\"hljs-built_in\"\u003Eendl\u003C\u002Fspan\u003E;\n    system(\u003Cspan class=\"hljs-string\"\u003E\"ls -la\"\u003C\u002Fspan\u003E);\n\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F62c2d22fa0e7144c\"\u003ECompile and run: Create and remove nested directories C&#43;&#43;17\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003Eg++ -std=c++1z -fconcepts -fgnu-tm  -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs &amp;&amp; .\u002Fa.out\nsandbox\u002Fa:\ntotal 12\ndrwxr-xr-x 3 2001 2000 4096 May 28 16:45 .\ndrwxr-xr-x 4 2001 2000 4096 May 28 16:45 ..\ndrwxr-xr-x 2 2001 2000 4096 May 28 16:45 b\n\nsandbox\u002Fc:\ntotal 12\ndrwxr-xr-x 3 2001 2000 4096 May 28 16:45 .\ndrwxr-xr-x 4 2001 2000 4096 May 28 16:45 ..\ndrwxr-xr-x 2 2001 2000 4096 May 28 16:45 d\nWere directories removed? 1\ntotal 10132\ndrwxrwxrwx 2 2001 2000    4096 May 28 16:45 .\ndrwxrwxrwx 3 2002 2000 8175616 May 28 16:45 ..\n-rwxr-xr-x 1 2001 2000 2170976 May 28 16:45 a.out\n-rw-rw-rw- 1 2001 2000     393 May 28 16:45 main.cpp\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_full_example_recursive_directory_iterator\"\u003EFull example: Recursive Directory Iterator\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EThis example consists of iterate recursively through dicrectories fintering files by extension.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_c11\"\u003EC&#43;&#43;11\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003ETo keep C&#43;&#43;11 example simple, I haven&#8217;t added filtering  logic, but filtering logic is present in C&#43;&#43;17 example:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003Efilesystem.11.cpp\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-cpp\" data-lang=\"cpp\"\u003E\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;dirent.h&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;cstring&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;iostream&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;fstream&gt; \u002F\u002F std::ofstream\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;vector&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;memory&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;system_error&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E#\u003Cspan class=\"hljs-meta-keyword\"\u003Einclude\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-meta-string\"\u003E&lt;sys\u002Fstat.h&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Eusing\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Enamespace\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estd\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E UP_DIR = \u003Cspan class=\"hljs-string\"\u003E\"..\"\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E CURRENT_DIR = \u003Cspan class=\"hljs-string\"\u003E\".\"\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E SEP = \u003Cspan class=\"hljs-string\"\u003E\"\u002F\"\u003C\u002Fspan\u003E;\n\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Epath\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(\u003Cspan class=\"hljs-built_in\"\u003Einitializer_list\u003C\u002Fspan\u003E&lt;\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E&gt; parts)\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E{\n    \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E pathTmp {};\n    \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E separator = \u003Cspan class=\"hljs-string\"\u003E\"\"\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-keyword\"\u003Eauto\u003C\u002Fspan\u003E &amp; part: parts)\n    {\n        pathTmp.append(separator).append(part);\n        separator = SEP;\n    }\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E pathTmp;\n}\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-built_in\"\u003Evector\u003C\u002Fspan\u003E&lt;\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E&gt; \u003Cspan class=\"hljs-title\"\u003EgetDirectoryFiles\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E&amp; dir, \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Evector\u003C\u002Fspan\u003E&lt;\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E&gt; &amp; extensions)\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E{\n    \u003Cspan class=\"hljs-built_in\"\u003Evector\u003C\u002Fspan\u003E&lt;\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E&gt; files;\n    \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-built_in\"\u003Eshared_ptr\u003C\u002Fspan\u003E&lt;DIR&gt; \u003Cspan class=\"hljs-title\"\u003Edirectory_ptr\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(opendir(dir.c_str()), [](DIR* dir){ dir &amp;&amp; closedir(dir); })\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (!directory_ptr)\n    {\n        \u003Cspan class=\"hljs-keyword\"\u003Ethrow\u003C\u002Fspan\u003E system_error(error_code(errno, system_category()), \u003Cspan class=\"hljs-string\"\u003E\"Error opening : \"\u003C\u002Fspan\u003E + dir);\n    }\n\n    \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Edirent\u003C\u002Fspan\u003E *\u003Cspan class=\"hljs-title\"\u003Edirent_ptr\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Ewhile\u003C\u002Fspan\u003E ((dirent_ptr = readdir(directory_ptr.get())) != \u003Cspan class=\"hljs-literal\"\u003Enullptr\u003C\u002Fspan\u003E)\n    {\n        \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E fileName {dirent_ptr-&gt;d_name};\n        \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (dirent_ptr-&gt;d_type == DT_DIR)\n        {\n            \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (CURRENT_DIR != fileName &amp;&amp; UP_DIR != fileName)\n            {\n                \u003Cspan class=\"hljs-keyword\"\u003Eauto\u003C\u002Fspan\u003E subFiles = getDirectoryFiles(path({dir, fileName}), extensions);\n                files.insert(end(files), begin(subFiles), end(subFiles));\n            }\n        }\n        \u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (dirent_ptr-&gt;d_type == DT_REG)\n        {\n            \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F here we should check also if filename has an extension in extensions vector\u003C\u002Fspan\u003E\n            files.push_back(path({dir, fileName}));\n        }\n    }\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E files;\n}\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E{\n    \u003Cspan class=\"hljs-keyword\"\u003Eauto\u003C\u002Fspan\u003E opt = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;\n    mkdir(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\"\u003C\u002Fspan\u003E, opt);\n    mkdir(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fa\"\u003C\u002Fspan\u003E, opt);\n    mkdir(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fa\u002Fb\"\u003C\u002Fspan\u003E, opt);\n\n\t\u003Cspan class=\"hljs-built_in\"\u003Evector\u003C\u002Fspan\u003E&lt;\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E&gt; e_files = {\n\t    \u003Cspan class=\"hljs-string\"\u003E\".\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.rst\"\u003C\u002Fspan\u003E,\n\t    \u003Cspan class=\"hljs-string\"\u003E\".\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.txt\"\u003C\u002Fspan\u003E,\n\t    \u003Cspan class=\"hljs-string\"\u003E\".\u002Fsandbox\u002Fa\u002Ffile2.RST\"\u003C\u002Fspan\u003E,\n\t    \u003Cspan class=\"hljs-string\"\u003E\".\u002Fsandbox\u002Ffile3.md\"\u003C\u002Fspan\u003E,\n\t    \u003Cspan class=\"hljs-string\"\u003E\".\u002Fsandbox\u002Fwill_be.ignored\"\u003C\u002Fspan\u003E\n\t};\n\n\t\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F create files\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-keyword\"\u003Eauto\u003C\u002Fspan\u003E &amp;f: e_files)\n\t{\n\t\t\u003Cspan class=\"hljs-function\"\u003Eofstream \u003Cspan class=\"hljs-title\"\u003Eof\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(f, ofstream::out)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E;\n\t\tof &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"test\"\u003C\u002Fspan\u003E;\n\t}\n\n    \u003Cspan class=\"hljs-built_in\"\u003Ecout\u003C\u002Fspan\u003E &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"filtered files: \"\u003C\u002Fspan\u003E &lt;&lt; \u003Cspan class=\"hljs-built_in\"\u003Eendl\u003C\u002Fspan\u003E;\n\t\u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-keyword\"\u003Eauto\u003C\u002Fspan\u003E &amp;f: getDirectoryFiles(\u003Cspan class=\"hljs-string\"\u003E\".\"\u003C\u002Fspan\u003E, {\u003Cspan class=\"hljs-string\"\u003E\".rst\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E\".RST\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E\".md\"\u003C\u002Fspan\u003E})){\n\t    \u003Cspan class=\"hljs-built_in\"\u003Ecout\u003C\u002Fspan\u003E &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"\\t\"\u003C\u002Fspan\u003E &lt;&lt; f &lt;&lt; \u003Cspan class=\"hljs-built_in\"\u003Eendl\u003C\u002Fspan\u003E;\n\t}\n\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002Faf4228e039a281b3\" target=\"_blank\" rel=\"noopener\"\u003ECompile and run C&#43;&#43;11 example\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003Eg++ -std=c++11 -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs &amp;&amp; .\u002Fa.out\nfiltered files:\n\t.\u002Fmain.cpp\n\t.\u002Fsandbox\u002Ffile3.md\n\t.\u002Fsandbox\u002Fwill_be.ignored\n\t.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.rst\n\t.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.txt\n\t.\u002Fsandbox\u002Fa\u002Ffile2.RST\n\t.\u002Fa.out\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect2\"\u003E\n\u003Ch3 id=\"_c17\"\u003EC&#43;&#43;17\u003C\u002Fh3\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EFollowing example also filters files by extension.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003Efilesystem.17.cpp\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003E\u003Cspan class=\"hljs-comment\"\u003E#include &lt;dirent.h&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-comment\"\u003E#include &lt;cstring&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-comment\"\u003E#include &lt;iostream&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-comment\"\u003E#include &lt;fstream&gt; \u002F\u002F std::ofstream\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-comment\"\u003E#include &lt;vector&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-comment\"\u003E#include &lt;memory&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-comment\"\u003E#include &lt;system_error&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-comment\"\u003E#include &lt;sys\u002Fstat.h&gt;\u003C\u002Fspan\u003E\n\nusing namespace std;\n\nconst string UP_DIR = \u003Cspan class=\"hljs-string\"\u003E\"..\"\u003C\u002Fspan\u003E;\nconst string CURRENT_DIR = \u003Cspan class=\"hljs-string\"\u003E\".\"\u003C\u002Fspan\u003E;\nconst string SEP = \u003Cspan class=\"hljs-string\"\u003E\"\u002F\"\u003C\u002Fspan\u003E;\n\n\nstring path(initializer_list&lt;string&gt; parts)\n{\n    string pathTmp {};\n    string separator = \u003Cspan class=\"hljs-string\"\u003E\"\"\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E (auto &amp; part: parts)\n    {\n        pathTmp.append(separator).append(part);\n        separator = SEP;\n    }\n    \u003Cspan class=\"hljs-built_in\"\u003Ereturn\u003C\u002Fspan\u003E pathTmp;\n}\n\nvector&lt;string&gt; getDirectoryFiles(const string&amp; dir, const vector&lt;string&gt; &amp; extensions)\n{\n    vector&lt;string&gt; files;\n    shared_ptr&lt;DIR&gt; directory_ptr(opendir(dir.c_str()), [](DIR* dir){ dir &amp;&amp; closedir(dir); });\n    \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (!directory_ptr)\n    {\n        throw system_error(error_code(errno, system_category()), \u003Cspan class=\"hljs-string\"\u003E\"Error opening : \"\u003C\u002Fspan\u003E + dir);\n    }\n\n    struct dirent *dirent_ptr;\n    \u003Cspan class=\"hljs-keyword\"\u003Ewhile\u003C\u002Fspan\u003E ((dirent_ptr = readdir(directory_ptr.get())) != nullptr)\n    {\n        const string fileName {dirent_ptr-&gt;d_name};\n        \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (dirent_ptr-&gt;d_type == DT_DIR)\n        {\n            \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (CURRENT_DIR != fileName &amp;&amp; UP_DIR != fileName)\n            {\n                auto subFiles = getDirectoryFiles(path({dir, fileName}), extensions);\n                files.insert(end(files), begin(subFiles), end(subFiles));\n            }\n        }\n        \u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (dirent_ptr-&gt;d_type == DT_REG)\n        {\n            \u002F\u002F here we should check also \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E filename has an extension \u003Cspan class=\"hljs-keyword\"\u003Ein\u003C\u002Fspan\u003E extensions vector\n            files.push_back(path({dir, fileName}));\n        }\n    }\n    \u003Cspan class=\"hljs-built_in\"\u003Ereturn\u003C\u002Fspan\u003E files;\n}\n\nint \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-title\"\u003Emain\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E ()\n{\n    auto opt = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH;\n    mkdir(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\"\u003C\u002Fspan\u003E, opt);\n    mkdir(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fa\"\u003C\u002Fspan\u003E, opt);\n    mkdir(\u003Cspan class=\"hljs-string\"\u003E\"sandbox\u002Fa\u002Fb\"\u003C\u002Fspan\u003E, opt);\n\n\tvector&lt;string&gt; e_files = {\n\t    \u003Cspan class=\"hljs-string\"\u003E\".\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.rst\"\u003C\u002Fspan\u003E,\n\t    \u003Cspan class=\"hljs-string\"\u003E\".\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.txt\"\u003C\u002Fspan\u003E,\n\t    \u003Cspan class=\"hljs-string\"\u003E\".\u002Fsandbox\u002Fa\u002Ffile2.RST\"\u003C\u002Fspan\u003E,\n\t    \u003Cspan class=\"hljs-string\"\u003E\".\u002Fsandbox\u002Ffile3.md\"\u003C\u002Fspan\u003E,\n\t    \u003Cspan class=\"hljs-string\"\u003E\".\u002Fsandbox\u002Fwill_be.ignored\"\u003C\u002Fspan\u003E\n\t};\n\n\t\u002F\u002F create files\n\t\u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E (auto &amp;f: e_files)\n\t{\n\t\tofstream of(f, ofstream::out);\n\t\tof &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"test\"\u003C\u002Fspan\u003E;\n\t}\n\n    cout &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"filtered files: \"\u003C\u002Fspan\u003E &lt;&lt; endl;\n\t\u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E (auto &amp;f: getDirectoryFiles(\u003Cspan class=\"hljs-string\"\u003E\".\"\u003C\u002Fspan\u003E, {\u003Cspan class=\"hljs-string\"\u003E\".rst\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E\".RST\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E\".md\"\u003C\u002Fspan\u003E})){\n\t    cout &lt;&lt; \u003Cspan class=\"hljs-string\"\u003E\"\\t\"\u003C\u002Fspan\u003E &lt;&lt; f &lt;&lt; endl;\n\t}\n\n    \u003Cspan class=\"hljs-built_in\"\u003Ereturn\u003C\u002Fspan\u003E 0;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002Faf4228e039a281b3\" target=\"_blank\" rel=\"noopener\"\u003ECompile and run C&#43;&#43;17 example\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003Eg++ -std=c++11 -O2 -Wall -Wextra -pedantic -pthread -pedantic-errors main.cpp -lm  -latomic -lstdc++fs &amp;&amp; .\u002Fa.out\nfiltered files:\n\t.\u002Fmain.cpp\n\t.\u002Fsandbox\u002Ffile3.md\n\t.\u002Fsandbox\u002Fwill_be.ignored\n\t.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.rst\n\t.\u002Fsandbox\u002Fa\u002Fb\u002Ffile1.txt\n\t.\u002Fsandbox\u002Fa\u002Ffile2.RST\n\t.\u002Fa.out\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E",slug:"recursive-directory-iterator"}}}("","html","Appendix",".","2020","2017\u002F05\u002F28 09:00","Filesystem in C++17","We are going to analyze with examples new filesystem features coming with C++17"))]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.67f08357.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.67f08357.js")}document.head.appendChild(s)</script> <script async defer> (function (i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date(); a = s.createElement(o),
			m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
		})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

		ga('create', 'UA-1328360-10', 'auto');
		ga('send', 'pageview'); </script> 