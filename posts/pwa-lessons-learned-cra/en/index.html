<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <meta content=sapper name=generator> <meta content=a22af7614c96254d name=yandex-verification> <link href=/icons/icon-192x192.png rel=apple-touch-icon> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.3870597605.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Create a PWA with Create React App: Lessons Learned</title><link href=/rss rel=alternate type=application/rss+xml title="Subscribe to Carlos says bla bla"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"Webpage","@id":"https://google.com/article"},"headline":"Create a PWA with Create React App: Lessons Learned","alternativeHeadline":"Lessons learned while developing a PWA with CRA: Budget Tracker","description":"Lessons learned while developing a PWA with CRA: Budget Tracker","image":"icons/icon-192x192.png","datePublished":"2019-11-04","dateModified":"2020-06-10","keywords":["React","Typescript","CRA","PWA","Create React App","Firebase","Firestore","Svelte","Sapper"],"author":{"@type":"Person","name":"Carlos Martin Sanchez"},"publisher":"Carlos Martin Sanchez"}</script><meta content=2019-11-04 name=date scheme=YYYY-MM-DD><meta content="Lessons learned while developing a PWA with CRA: Budget Tracker" name=description><link href=/posts/pwa-lessons-learned-cra/es rel=alternate hreflang=es><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css rel=preload as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css rel=stylesheet></noscript><script defer src="https://www.googletagmanager.com/gtag/js?id=UA-1328360-10"></script><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-1hjvhrx><ul class=svelte-1hjvhrx><li class=svelte-1y8uoef><a href=/ class=svelte-1y8uoef><img alt="Carlos says bla bla logo" class="svelte-1hjvhrx logo" src=/favicon.png></a></ul> <ul class="svelte-1hjvhrx closed"><li class=svelte-1y8uoef><a href=/ class=svelte-1y8uoef><span class="svelte-1hjvhrx siteName">Carlos says bla bla</span></a></li> <li class=svelte-1y8uoef><a href=/categories class=svelte-1y8uoef>Categories</a></li> <li class=svelte-1y8uoef><a href=/about class=svelte-1y8uoef>About</a></ul> <div class="h svelte-1w8skyw"><a href=/rss rel=noopener target=_blank class="icon svelte-1lu397 rss" title="Subscribe to Carlos says bla bla"></a> <a href=https://github.com/carlosvin rel=noopener target=_blank class="icon svelte-1lu397 github" title="Find me at github"></a> <a href=https://twitter.com/carlosvin rel=noopener target=_blank class="icon svelte-1lu397 twitter" title="Find me at twitter"></a> <a href=https://stackoverflow.com/story/carlosvin rel=noopener target=_blank class="icon svelte-1lu397 stackoverflow" title="Find me at stackoverflow"></a></div> <button class=svelte-1hjvhrx>â‰¡</button></nav> <main class=svelte-bvcji9> <header class=svelte-5fppzy><h1 class=svelte-5fppzy>Create a PWA with Create React App: Lessons Learned <span class="svelte-5fppzy share"><a href="https://twitter.com/intent/tweet?url=https://carlosvin.github.io/posts/pwa-lessons-learned-cra/en&text=Create a PWA with Create React App: Lessons Learned: Lessons learned while developing a PWA with CRA: Budget Tracker&hashtags=React,Typescript,CRA,PWA,Create React App,Firebase,Firestore,Svelte,Sapper" rel=noopener target=_blank class="icon svelte-1lu397 twitter" title='Share "Create a PWA with Create React App: Lessons Learned"'></a></span></h1> <p class="svelte-5fppzy summary">Lessons learned while developing a PWA with CRA: Budget Tracker</p> <div class="subtitle svelte-16mbbpz"><span class=date>04/11/2019</span> <span class="summary langs">Available in <span class="lang svelte-k3ijyt"><a href=/posts/pwa-lessons-learned-cra/es rel=alternate hreflang=es>es</a> </span></span> <span class="svelte-9pgfi9 tags"><a href=/categories/react class=svelte-1ci4az4 title=React><span class="hover svelte-4jhu6r">React</span></a><a href=/categories/typescript class=svelte-1ci4az4 title=Typescript><span class="hover svelte-4jhu6r">Typescript</span></a><a href=/categories/cra class=svelte-1ci4az4 title=CRA><span class="hover svelte-4jhu6r">CRA</span></a><a href=/categories/pwa class=svelte-1ci4az4 title=PWA><span class="hover svelte-4jhu6r">PWA</span></a><a href=/categories/create-react-app class=svelte-1ci4az4 title="Create React App"><span class="hover svelte-4jhu6r">Create React App</span></a><a href=/categories/firebase class=svelte-1ci4az4 title=Firebase><span class="hover svelte-4jhu6r">Firebase</span></a><a href=/categories/firestore class=svelte-1ci4az4 title=Firestore><span class="hover svelte-4jhu6r">Firestore</span></a><a href=/categories/svelte class=svelte-1ci4az4 title=Svelte><span class="hover svelte-4jhu6r">Svelte</span></a><a href=/categories/sapper class=svelte-1ci4az4 title=Sapper><span class="hover svelte-4jhu6r">Sapper</span></a></span></div></header> <div class="content svelte-16nh35n"><div class=toc id=toc> <div id=toctitle>Table of Contents</div> <ul class=sectlevel1> <li><a href=#_chosen_technology_stack_for_budget_tracker>Chosen Technology Stack for Budget Tracker</a></li> <li><a href=#_create_react_application_cra>Create React Application: CRA</a> <ul class=sectlevel2> <li><a href=#_service_worker>Service worker</a></li> <li><a href=#_web_worker>Web worker</a></li> <li><a href=#_webpack>Webpack</a></li> </ul> </li> <li><a href=#_firebase>Firebase</a> <ul class=sectlevel2> <li><a href=#_drawbacks>Drawbacks</a></li> <li><a href=#_firebase_alternatives>Firebase alternatives</a></li> </ul> </li> <li><a href=#_ui_components_library_material_ui>UI Components Library: Material UI</a></li> <li><a href=#_charts_library>Charts library</a></li> <li><a href=#_conclusion>Conclusion</a> <ul class=sectlevel2> <li><a href=#_do_not_go_for_cra_if>Do not go for CRA if</a></li> <li><a href=#_do_not_go_for_firestore_if>Do not go for Firestore if</a></li> <li><a href=#_do_not_go_blindly_for_the_best_charting_library>Do not go blindly for the best charting library</a></li> </ul> </li> <li><a href=#_what_next>What next?</a></li> </ul> </div> <div id=preamble> <div class=sectionbody> <div class=paragraph> <p>I started working with <a href=https://reactjs.org rel=noopener target=_blank>React</a> few year ago, always the project creation was from scratch, not using any template/scaffolding. Regarding bundlers normally I used either <a href=https://webpack.js.org rel=noopener target=_blank>Webpack</a> at work or <a href=https://parceljs.org rel=noopener target=_blank>Parcel</a> for personal projects.</p> </div> <div class=paragraph> <p>Few months ago, I wanted to start a personal project to keep track of my travel expenses. I was in a kind of rush because at that time, I was almost in the middle of my gap year, I wanted to focus on implementing main functionality and get an <a href=https://en.wikipedia.org/wiki/Minimum_viable_product>MVP</a> (minimum viable product) the sooner the better, so I thought it was the right time to try out <a href=https://create-react-app.dev rel=noopener target=_blank>Create React App</a> or <a href=https://create-react-app.dev rel=noopener target=_blank>CRA</a>.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class=icon> <div class=title>Note</div> </td> <td class=content> <a href=https://create-react-app.dev rel=noopener target=_blank>CRA</a> allows you to have a production ready <a href=https://developers.google.com/web/progressive-web-apps/ rel=noopener target=_blank>PWA</a> in <a href=https://reactjs.org rel=noopener target=_blank>React</a> quickly, which is awesome. They take care of configuration and package dependencies, you only have to take care of dependencies you need for your project and of course, implement your project, <a href=https://create-react-app.dev rel=noopener target=_blank>CRA</a> is good, but is not magic. </td> </tr> </table> </div> <div class=paragraph> <p>As I said, I wanted to be implementing business logic ASAP, so together with using <a href=https://create-react-app.dev rel=noopener target=_blank>CRA</a>, I also took other decisions/shortcuts driven by the need of speeding up the development pace, I will talk about those choices in following sections describing some drawbacks and benefits.</p> </div> </div> </div> <div class=sect1> <h2 id=_chosen_technology_stack_for_budget_tracker>Chosen Technology Stack for <a href=https://btapp.netlify.com rel=noopener target=_blank>Budget Tracker</a></h2> <div class=sectionbody> <div class=ulist> <ul> <li> <p><a href=https://create-react-app.dev rel=noopener target=_blank>CRA</a></p> </li> <li> <p><a href=https://reactjs.org rel=noopener target=_blank>React</a></p> </li> <li> <p><a href=https://www.typescriptlang.org rel=noopener target=_blank>Typescript</a></p> </li> <li> <p><a href=https://material-ui.com rel=noopener target=_blank>Material UI</a></p> </li> <li> <p><span class=line-through><a href=https://formidable.com/open-source/victory>Victory</a></span> <a href=https://frappe.io/charts rel=noopener target=_blank>Frappe charts</a></p> </li> <li> <p><a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a></p> </li> <li> <p><a href=https://firebase.google.com/docs/auth rel=noopener target=_blank>Firebase Authentication</a></p> </li> </ul> </div> <div class=paragraph> <p>So far I am quite happy with the outcome, but with the lessons learned while developing this app, <strong>in the future, with enough time, most likely I will not choose same technology stack again</strong>. You can try the application <a href=https://btapp.netlify.com rel=noopener target=_blank>Budget Tracker</a> and judge for yourself.</p> </div> <div class=paragraph> <p>Along this post I will describe what are, in my experience, the benefits and drawbacks of taking these shortcuts and technical decisions.</p> </div> </div> </div> <div class=sect1> <h2 id=_create_react_application_cra>Create React Application: <a href=https://create-react-app.dev rel=noopener target=_blank>CRA</a></h2> <div class=sectionbody> <div class=paragraph> <p><a href=https://create-react-app.dev rel=noopener target=_blank>Create React App</a> doesnâ€™t support <a href=https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers rel=noopener target=_blank>Web Workers</a> neither allows to customize <a href=https://developers.google.com/web/fundamentals/primers/service-workers rel=noopener target=_blank>Service Worker</a> implementation without <a href=https://stackoverflow.com/questions/49737652/what-does-eject-do-in-create-react-app>ejecting</a>.</p> </div> <div class=sect2> <h3 id=_service_worker>Service worker</h3> <div class=paragraph> <p>You might want to customize your <a href=https://developers.google.com/web/fundamentals/primers/service-workers rel=noopener target=_blank>Service Worker</a> to send/receive <a href=https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage>post messages</a>, to perform <a href=https://wicg.github.io/BackgroundSync/spec/ >background sync</a> or <a href=https://developer.mozilla.org/en/docs/Web/API/notification>show web notifications</a>. In that case, you will have to <a href=https://stackoverflow.com/questions/49737652/what-does-eject-do-in-create-react-app>eject your project</a> and maintain the configuration by yourself, which might imply a little bit of headache.</p> </div> <div class=paragraph> <p>There are <a href=https://www.freecodecamp.org/news/how-to-customize-service-workers-with-create-react-app-4424dda6210c/ >other options to customize service worker and avoid ejecting CRA</a>, but they are not straightforward enough for my taste.</p> </div> </div> <div class=sect2> <h3 id=_web_worker>Web worker</h3> <div class=paragraph> <p>If you need to perform any heavy processing without blocking the main thread, you can just use a <a href=https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers rel=noopener target=_blank>Web Workers</a>, but this feature is not supported by <a href=https://create-react-app.dev rel=noopener target=_blank>CRA</a>. The <a href=https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers rel=noopener target=_blank>Web Workers</a> can communicate with main thread using <a href=https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage>post messages</a> and it can also show <a href=https://medium.com/young-coder/a-simple-introduction-to-web-workers-in-javascript-b3504f9d9d1c>web push notifications</a>.</p> </div> <div class=paragraph> <p>There are also <a href=https://medium.com/@danilog1905/how-to-use-web-workers-with-react-create-app-and-not-ejecting-in-the-attempt-3718d2a1166b>other options to use Web Workers in CRA and not eject</a>, but they imply quite some extra work.</p> </div> </div> <div class=sect2> <h3 id=_webpack>Webpack</h3> <div class=paragraph> <p><a href=https://webpack.js.org rel=noopener target=_blank>Webpack</a> is the bundler used by <a href=https://create-react-app.dev rel=noopener target=_blank>CRA</a>. You donâ€™t need to know much about it, unless you <a href=https://stackoverflow.com/questions/49737652/what-does-eject-do-in-create-react-app>eject your project</a>, then you will have to deal with <a href=https://webpack.js.org/configuration/ >Webpack configuration file</a>, this is just a warning, just in case you are not comfortable with it.</p> </div> </div> </div> </div> <div class=sect1> <h2 id=_firebase>Firebase</h2> <div class=sectionbody> <div class=paragraph> <p><a href=https://btapp.netlify.com rel=noopener target=_blank>Budget Tracker</a> supports data synchronization between different devices, so it requires a <a href=https://en.wikipedia.org/wiki/Front_and_back_ends>backend</a> side to deal with authentication and to save/read data remotely. I considered two options: <a href=https://firebase.google.com/ rel=noopener target=_blank>Firebase</a> or implement <a href=https://en.wikipedia.org/wiki/Representational_state_transfer>REST</a> API.</p> </div> <div class=paragraph> <p>For this <a href=https://en.wikipedia.org/wiki/Front_and_back_ends>backend</a>, I chose <a href=https://firebase.google.com/ rel=noopener target=_blank>Firebase</a> because it is super easy to implement, because there is nothing to implement. You only have to configure <a href="https://support.google.com/firebase/answer/6400716?hl=en">authentication methods</a> and <a href=https://firebase.google.com/docs/firestore/security/get-started>security rules</a> for <a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a>.</p> </div> <div class=paragraph> <p>But <a href=https://firebase.google.com/ rel=noopener target=_blank>Firebase</a> brings some drawbacks you must know before choosing it.</p> </div> <div class=sect2> <h3 id=_drawbacks>Drawbacks</h3> <div class=sect3> <h4 id=_bundle_size>Bundle size</h4> <div class=paragraph> <p>I got really shocked first time I analyzed <a href=https://btapp.netlify.com rel=noopener target=_blank>Budget Tracker</a> bundle size after integrating it with <a href=https://firebase.google.com/ rel=noopener target=_blank>Firebase</a>, <strong>it grew around a 39%!</strong></p> </div> <div class=ulist> <ul> <li> <p>27% from <a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a> library.</p> </li> <li> <p>12% from <a href=https://firebase.google.com/docs/auth rel=noopener target=_blank>Firebase Authentication</a> library.</p> </li> </ul> </div> <div class=paragraph> <p>Happily <a href=https://btapp.netlify.com rel=noopener target=_blank>Budget Tracker</a> implementation is following <a href=https://reactjs.org/docs/code-splitting.html>code-splitting</a> principle, so user experience was not really affected with this integration. But userâ€™s device will eventually have to download this extra 39% (<strong>539KB</strong>).</p> </div> </div> <div class=sect3> <h4 id=_offline_first_not_really>Offline first, not really</h4> <div class="admonitionblock important"> <table> <tr> <td class=icon> <div class=title>Important</div> </td> <td class=content> This section is not relevant if your use case doesnâ€™t imply saving data linked to the user. </td> </tr> </table> </div> <div class=paragraph> <p><a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a> requires user to be authenticated, but <a href=https://firebase.google.com/docs/auth/web/anonymous-auth>user can be anonymous</a>, this is really cool feature if you donâ€™t want to force the user to identify to use the app.</p> </div> <div class=paragraph> <p>Another very useful and cool <a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a> feature is that <a href=https://firebase.google.com/docs/firestore/manage-data/enable-offline>it supports offline mode</a>, so data can be saved and read even there is no Internet connection.</p> </div> <div class=paragraph> <p>Anonymous user + offline mode features will allow an application to work as offline first.</p> </div> <div class=paragraph> <p>Soâ€¦ what is this <a href="#Offline first">not really</a> issue about? Let me explain a tricky scenario. First time the application is opened, <a href=https://firebase.google.com/ rel=noopener target=_blank>Firebase</a> needs to authenticate the user, to do so, userâ€™s device has to be connected to Internet, so <strong>you have to consider following scenario</strong> and either be OK with it or deal with it:</p> </div> <div class="arabic olist"> <ol class=arabic> <li> <p><a href=https://developers.google.com/web/progressive-web-apps/ rel=noopener target=_blank>PWA</a> is installed in your device.</p> </li> <li> <p>User is not authenticated.</p> </li> <li> <p>Userâ€™s device is offline.</p> </li> <li> <p>User opens the <a href=https://developers.google.com/web/progressive-web-apps/ rel=noopener target=_blank>PWA</a> and tries to save some data.</p> </li> <li> <p><strong>That data wonâ€™t be saved correctly</strong>, because there is no user to link the data with, not even an anonymous user, because application needs to call <a href=https://firebase.google.com/ rel=noopener target=_blank>Firebase</a> API to create an anonymous user.</p> </li> </ol> </div> <div class=paragraph> <p>This is not big deal, because it will seldom occur. If you want to deal with it anyway, check next section explaining how and why I did deal with this scenario.</p> </div> <div class=sect4> <h5 id=_how_did_i_deal_with_this_issue_with_budget_tracker>How did I deal with this issue with Budget Tracker?</h5> <div class=paragraph> <p>First of all, this <strong>might not be an issue for your use case</strong>, because it will happen only first time application is loaded. I just wanted <a href=https://btapp.netlify.com rel=noopener target=_blank>Budget Tracker</a> to be fully offline first, because it brings other benefits.</p> </div> <div class=sect5> <h6 id=_implementation_details>Implementation details</h6> <div class=ulist> <ul> <li> <p>Implement 2 persistence layers: Local (<a href=https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API rel=noopener target=_blank>IndexedDB</a>) and Remote (<a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a>).</p> </li> <li> <p>Save always data locally, regardless user authentication status.</p> </li> <li> <p>If there is any authenticated user, after saving to local layer, propagate same action to remote layer (<a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a>) asynchronously.</p> </li> </ul> </div> </div> <div class=sect5> <h6 id=_benefits>Benefits</h6> <div class=ulist> <ul> <li> <p>If user is not authenticated, <a href=https://btapp.netlify.com rel=noopener target=_blank>Budget Tracker</a> wonâ€™t load <a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a> client bundle. As I explained before, it is 27% of application size.</p> </li> <li> <p>Application reads and writes are faster, because latest valid data is always saved locally.</p> <div class=ulist> <ul> <li> <p><strong>Clarification</strong>: Save data in <a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a> is also fast, because data is also cached locally, but it does a little bit more than just saving to <a href=https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API rel=noopener target=_blank>IndexedDB</a> and you need an authenticated user.</p> </li> </ul> </div> </li> </ul> </div> <div class=paragraph> <p>You can find a <a href=https://github.com/carlosvin/budget-tracker/blob/master/doc/preformance.md#desktop-slow-clear-storage-0-budgets-1>more detailed performance report</a>, where I analyze 3 different implementations:</p> </div> <div class="arabic olist"> <ol class=arabic> <li> <p>Only <a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a> client.</p> </li> <li> <p>Local (<a href=https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API rel=noopener target=_blank>IndexedDB</a>) and remote (<a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a>) persistence layers.</p> </li> <li> <p>Same as previous one, but remote layer implemented in service worker.</p> </li> </ol> </div> <div class=paragraph> <p>The performance results were in general better for option 2.</p> </div> </div> </div> </div> <div class=sect3> <h4 id=_data_model>Data model</h4> <div class=paragraph> <p>Firestore API is easy and intuitive, I really like it, but donâ€™t assume it will have same features as other document DBs or SQL DBs.</p> </div> <div class=paragraph> <p>Check if <a href=https://googleapis.github.io/google-cloud-dotnet/docs/Google.Cloud.Firestore/datamodel.html>Firestore limitations</a> fit into your data model, or if it is not too late, define your data model following <a href=https://cloud.google.com/firestore/docs/best-practices>Firestore best practices</a> and having those limitations in mind.</p> </div> </div> </div> <div class=sect2> <h3 id=_firebase_alternatives>Firebase alternatives</h3> <div class=paragraph> <p>Besides implementing a <a href=https://en.wikipedia.org/wiki/Representational_state_transfer>REST</a> API, there are other services similar to <a href=https://firebase.google.com/ rel=noopener target=_blank>Firebase</a> with smaller client bundle size and other features which might fit better to your requirements.</p> </div> <div class=paragraph> <p>Consider other alternatives:</p> </div> <div class=ulist> <ul> <li> <p>Based on <a href=http://couchdb.apache.org/ >Apache CouchDB</a>: <a href=https://pouchdb.com>PouchDB</a>, <a href=https://en.wikipedia.org/wiki/Cloudant>Cloudant</a>.</p> </li> <li> <p>Based on <a href=https://parseplatform.org/ >Parse server</a>: <a href=https://www.back4app.com>back4apps</a>.</p> </li> </ul> </div> </div> </div> </div> <div class=sect1> <h2 id=_ui_components_library_material_ui>UI Components Library: <a href=https://material-ui.com rel=noopener target=_blank>Material UI</a></h2> <div class=sectionbody> <div class=paragraph> <p>I chose <a href=https://material-ui.com rel=noopener target=_blank>Material UI</a>.</p> </div> <div class=quoteblock> <blockquote> React components for faster and easier web development. Build your own design system, or start with Material Design. </blockquote> <div class=attribution> â€” https://material-ui.com[Material UI </div> </div> <div class=paragraph> <p>There were two reasons which drove me to use <a href=https://material-ui.com rel=noopener target=_blank>Material UI</a>:</p> </div> <div class=ulist> <ul> <li> <p>To create simple UI components which are accessible, <a href=https://material-ui.com/guides/responsive-ui/#responsive-ui>responsive</a> and with a consistent design is tricky and time consuming.</p> </li> <li> <p>It has SVG set of <a href=https://material-ui.com/components/material-icons/ >Material Icons</a>. <a href=https://btapp.netlify.com rel=noopener target=_blank>Budget Tracker</a> allows to create categories defined by a name and a selectable icon, so this icon set was really convenient.</p> </li> </ul> </div> <div class=paragraph> <p>There are some <strong>drawbacks</strong>, not very important in my opinion, maybe the most annoying for me is the first one:</p> </div> <div class=ulist> <ul> <li> <p><a href=https://jestjs.io/docs/en/snapshot-testing>Jest Snapshots</a> + <a href=https://material-ui.com rel=noopener target=_blank>Material UI</a>: The snapshots are generated with <a href=https://material-ui.com rel=noopener target=_blank>Material UI</a> CSS class names, but CSS classes order might not be deterministic, so a test might pass in your local host but not in <a href=https://en.wikipedia.org/wiki/Continuous_integration>CI</a> host. They are working on solve <a href=https://github.com/mui-org/material-ui/issues/14357>this issue, more info at github</a>.</p> </li> <li> <p>Performance: There are some performance <a href="https://github.com/mui-org/material-ui/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+performance">issues in Github</a>. During last months, whilst Iâ€™ve been using this library, I can say they are working hard on fix them and bring new features.</p> </li> <li> <p>UI components libraries are complex and do quite a lot work, so most of them are quite heavy. <a href="https://bundlephobia.com/result?p=@material-ui/core@4.5.2">Material UI bundle size weights: 304.2kB minified</a>. You can find some <a href=https://material-ui.com/guides/minimizing-bundle-size>recommendations to reduce bundle size at Material UI website</a>.</p> </li> </ul> </div> </div> </div> <div class=sect1> <h2 id=_charts_library>Charts library</h2> <div class=sectionbody> <div class=paragraph> <p>Many of the chart libraries Iâ€™ve found are really powerful and complete, but they are also heavy because they depend on other third party libraries like <a href=https://d3js.org/ >D3</a>.</p> </div> <div class=paragraph> <p>Initially I chose <a href=https://formidable.com/open-source/victory>Victory</a>, but I realized that I only needed charts to show percentages and time series and <a href=https://formidable.com/open-source/victory>Victory</a>â€™s <a href="https://bundlephobia.com/result?p=victory@33.1.2">bundle size is 468KB minified</a>.</p> </div> <div class=paragraph> <p>After quick search in the Internet I discovered other lighter alternatives:</p> </div> <div class=ulist> <ul> <li> <p><a href=https://frappe.io/charts rel=noopener target=_blank>Frappe charts</a> <a href="https://bundlephobia.com/result?p=frappe-charts@1.3.0">63KB minified</a>.</p> </li> <li> <p><a href=https://gionkunz.github.io/chartist-js>Chartist</a> <a href="https://bundlephobia.com/result?p=chartist@0.11.4">39KB minified</a>.</p> </li> </ul> </div> <div class=paragraph> <p>I tried them and I liked both. I chose <a href=https://frappe.io/charts rel=noopener target=_blank>Frappe charts</a> because I thought its default color scheme fits better with <a href=https://btapp.netlify.com rel=noopener target=_blank>Budget Tracker</a> theme.</p> </div> <div class=paragraph> <p>Both libraries come with more chart types than just bars and XY axis, take a quick look at their websites if you are interested about their supported chart set and to check how they look like.</p> </div> </div> </div> <div class=sect1> <h2 id=_conclusion>Conclusion</h2> <div class=sectionbody> <div class=paragraph> <p>I will try to come up with a conclusion better than: <em>"It depends"</em>, <em>"Your use case will tell you"</em> and so on.</p> </div> <div class=paragraph> <p>That said. It depends on your needs :p.</p> </div> <div class=paragraph> <p>Seriously, letâ€™s play <em>"do not go for â€¦ if â€¦"</em>:</p> </div> <div class=sect2> <h3 id=_do_not_go_for_cra_if>Do not go for CRA if</h3> <div class=ulist> <ul> <li> <p>You want to customize <a href=https://developers.google.com/web/fundamentals/primers/service-workers rel=noopener target=_blank>Service Worker</a> for <a href=https://developers.google.com/web/updates/2015/12/background-sync>Background sync</a> or <a href=https://developer.mozilla.org/en/docs/Web/API/notification>showing push notifications</a>.</p> </li> <li> <p>You want to use <a href=https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers rel=noopener target=_blank>Web Workers</a>.</p> </li> </ul> </div> </div> <div class=sect2> <h3 id=_do_not_go_for_firestore_if>Do not go for Firestore if</h3> <div class=ulist> <ul> <li> <p>You are aiming for your app to be hit by many users and you donâ€™t know the estimated amount of reads/writes, otherwise you might get surprised with the bill. <a href=https://firebase.google.com/docs/firestore rel=noopener target=_blank>Firestore</a> scales like charm, maybe your budget doesnâ€™t.</p> </li> <li> <p>Bundle size is critical for your web application. Remember that bundle size is not that critical if you are implementing a <a href=https://developers.google.com/web/progressive-web-apps/ rel=noopener target=_blank>PWA</a>, because your app files are cached.</p> </li> </ul> </div> </div> <div class=sect2> <h3 id=_do_not_go_blindly_for_the_best_charting_library>Do not go blindly for the best charting library</h3> <div class=paragraph> <p>First of all, check what kind of charts you need. In many applications you are OK with XY axis chart, time series, bars or pie charts. You can easily get an smaller bundle size by just using a simple charting library like <a href=https://frappe.io/charts rel=noopener target=_blank>Frappe charts</a> or <a href=https://gionkunz.github.io/chartist-js>Chartist</a></p> </div> <div class="admonitionblock tip"> <table> <tr> <td class=icon> <div class=title>Tip</div> </td> <td class=content> Just check what are your requirements, if you are not sure about them, <a href=#_chosen_technology_stack_for_budget_tracker>Chosen Technology Stack for <a href=https://btapp.netlify.com rel=noopener target=_blank>Budget Tracker</a></a> consists of awesome products which most likely will fit your use case. </td> </tr> </table> </div> </div> </div> </div> <div class=sect1> <h2 id=_what_next>What next?</h2> <div class=sectionbody> <div class=paragraph> <p>My next technology stack bet goes for <a href=https://svelte.dev rel=noopener target=_blank>Svelte</a>/https://sapper.svelte.dev[Sapper,window=_blank], it is promising project, the results for small projects are really impressive, mainly in regards to bundle size, it is ridiculously small and development experience is quick and intuitive.</p> </div> <div class=paragraph> <p>Iâ€™ve created a tiny <a href=https://developers.google.com/web/progressive-web-apps/ rel=noopener target=_blank>PWA</a> to estimate <a href=https://currency-loss.netlify.com>currency exchange loss</a> when you go to a money changer shop: <a href=https://currency-loss.netlify.com>currency-loss.netlify.com</a>. Note, I got that app up and running in few hours, thanks to <a href=https://svelte.dev rel=noopener target=_blank>Svelte</a>.</p> </div> </div> </div></div></main> </div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.069bba74.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.069bba74.js")}document.head.appendChild(s)</script> 