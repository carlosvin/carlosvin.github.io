<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <meta content=sapper name=generator> <meta content=a22af7614c96254d name=yandex-verification> <base href=/ > <link href=/rss rel=alternate type=application/rss+xml title="RSS Feed for Carlos says Bla Bla blog"> <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.269904012.css rel=stylesheet><link href=client/[...slug].9ddc4ada.css rel=stylesheet><link href=client/client.d2aaf6fd.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>C++ Struct memory alignment</title><link href=https://carlosvin.github.io/rss rel=alternate type=application/rss+xml title='Subscribe to Carlos dice "bla bla"'><meta content=2012/11/26 name=date scheme=YYYY-MM-DD><meta content="Understanding pragma pack preprocessor directive and how it affects to memory alignment" name=description scheme=YYYY-MM-DD><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/vs.min.css rel=preload as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/vs.min.css rel=stylesheet></noscript><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-1tgc59z><ul class=svelte-1tgc59z><li class=svelte-1tgc59z><a href=. class=svelte-1tgc59z>Carlos dice "bla bla"</a></li> <li class=svelte-1tgc59z><a href=about class=svelte-1tgc59z>About</a></ul> <div class="h svelte-1w8skyw"><a href=https://carlosvin.github.io/rss class="icon svelte-hpmv97 rss" target=_blank title='Subscribe to Carlos dice "bla bla"'></a> <a href=https://github.com/carlosvin class="icon svelte-hpmv97 github" target=_blank title="Me at github"></a> <a href=https://twitter.com/carlosvin class="icon svelte-hpmv97 twitter" target=_blank title="Me at twitter"></a> <a href=https://stackoverflow.com/story/carlosvin class="icon svelte-hpmv97 stackoverflow" target=_blank title="Me at stackoverflow"></a></div></nav> <main class=svelte-1uhnsl8> <h1 class=svelte-tonfn2>C++ Struct memory alignment</h1> <div class="content svelte-tonfn2"><div class=toc id=toc> <div id=toctitle>Table of Contents</div> <ul class=sectlevel1> <li><a href=#_struct_example>Struct example</a></li> <li><a href=#_pragma_pack_directive_in_c_struct>#pragma pack directive in C++ struct</a></li> <li><a href=#_performance_test>Performance test</a></li> </ul> </div> <div id=preamble> <div class=sectionbody> <div class=paragraph> <p>A C++ struct is an element that groups attributes with different types so we can manipulate them all together using same reference. It is like a class with public visibility by default for functions and attributes.</p> </div> <div class=paragraph> <p>If we want to work in a lower level, closer to machine, it might be useful understand how that data structure is stored in memory and how to control that mapping.</p> </div> </div> </div> <div class=sect1> <h2 id=_struct_example>Struct example</h2> <div class=sectionbody> <div class=paragraph> <p>It has two attributes: an integer (4 bytes) and a boolean (1 byte).</p> </div> <div class=listingblock> <div class=content> <pre class=highlight><code class=language-c++ data-lang=c++>&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>class</span>">&lt;span class="hljs-keyword"><span class=hljs-title>struct</span>&lt;/span> &lt;span class="hljs-title"><span class=hljs-title>SampleStruct</span>&lt;/span>
{</span>&lt;/span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>bool</span>&lt;/span> <span class=hljs-title>flag</span>;</span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>unsigned</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>int</span>&lt;/span> <span class=hljs-title>timeout</span>;</span>
};</code></pre> </div> </div> <div class=paragraph> <p>If we get the instance size using <code>sizeof</code> we should get 5 bytes size and memory would be like:</p> </div> <div class="center imageblock" id=5-bytes> <div class=content> <img alt=5Bytes height=auto src=/images/c-mem-struct/5b.png width=200> </div> <div class=title>Figure 1. 5 bytes struct which uses 5 bytes in memory</div> </div> <div class=paragraph> <p><strong>But</strong> is not that simple, memory alignment depends on compiler and system. We will learn how to control compiler alignment policy, so we can avoid getting unexpected allocation memory sizes.</p> </div> <div class=paragraph> <p>For example, in my local host, if I get the <code>sizeof</code> the previous structure without <code>pragma</code> declarations, <strong>I get a 8 bytes size</strong>. We are getting 8 Bytes instead of expected 5 Bytes because the compiler allocates more memory at the end of structure so it fits in 2n bytes blocks. Memory actually looks like:</p> </div> <div class="center imageblock" id=8-bytes> <div class=content> <img alt=5Bytes height=auto src=/images/c-mem-struct/8b.png width=200> </div> <div class=title>Without pragma: 5 bytes structure that actually spends 8 bytes in memory</div> </div> <div class=listingblock> <div class=title>It prints structure and attributes size, in this case <strong>4 + 1 is not 5</strong></div> <div class=content> <pre class=highlight><code class=language-c++ data-lang=c++>&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>meta</span>">#&lt;span class="hljs-meta-keyword"><span class=hljs-title>include</span>&lt;/span>  &lt;span class="hljs-meta-string">&<span class=hljs-title>lt</span>;</span>iostream&ampgt;&lt;/span>&lt;/span>

&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>using</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>namespace</span>&lt;/span> &lt;span class="hljs-built_in"><span class=hljs-title>std</span>&lt;/span>;</span>

&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>class</span>">&lt;span class="hljs-keyword"><span class=hljs-title>struct</span>&lt;/span> &lt;span class="hljs-title"><span class=hljs-title>SampleStruct</span>&lt;/span>
{</span>&lt;/span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>bool</span>&lt;/span> <span class=hljs-title>flag</span>;</span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>unsigned</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>int</span>&lt;/span> <span class=hljs-title>timeout</span>;</span>
};

&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>function</span>">&lt;span class="hljs-keyword"><span class=hljs-title>static</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>void</span>&lt;/span> &lt;span class="hljs-title"><span class=hljs-title>print</span>&lt;/span> &lt;span class="hljs-params">(&lt;span class="hljs-keyword"><span class=hljs-title>size_t</span>&lt;/span> <span class=hljs-title>sz</span>, &lt;span class="hljs-keyword"><span class=hljs-title>size_t</span>&lt;/span> <span class=hljs-title>sz_flag</span>, &lt;span class="hljs-keyword"><span class=hljs-title>size_t</span>&lt;/span> <span class=hljs-title>sz_timeout</span>)&lt;/span>
&lt;/span>{</span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>built_in</span>"><span class=hljs-title>cout</span>&lt;/span> &<span class=hljs-title>lt</span>;</span>&amplt; &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>string</span>">"\<span class=hljs-title>tflag</span>:</span> <span class=hljs-string>"&lt;/span> &amplt;&amplt; sz_flag &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> Bytes<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>\t+<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>\ttimeout: <span class=hljs-string>"&lt;/span> &amplt;&amplt; sz_timeout &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> Bytes<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>\t=<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>\t<span class=hljs-string>"&lt;/span> &amplt;&amplt; sz_timeout + sz_flag &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> Bytes<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt;&lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span><span class=hljs-keyword>sizeof</span> struct:  <span class=hljs-string>"&lt;/span> &amplt;&amplt; sz &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> Bytes<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
}

&lt;span class="</span>hljs-function<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">int&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">main&lt;/span>&lt;span class="</span>hljs-params<span class=hljs-string>">(&lt;span class="</span>hljs-keyword<span class=hljs-string>">int&lt;/span> argc, &lt;span class="</span>hljs-keyword<span class=hljs-string>">char&lt;/span> *argv[])&lt;/span>
&lt;/span>{
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>SampleStruct<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">print&lt;/span> (&lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStruct), &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStruct::flag), &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStruct::timeout));
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> -- <span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;

    &lt;span class="</span>hljs-keyword<span class=hljs-string>">return&lt;/span> &lt;span class="</span>hljs-number<span class=hljs-string>">0&lt;/span>;
}</span></code></pre> </div> </div> <div class=listingblock> <div class=title><a href=https://coliru.stacked-crooked.com/a/7c18ee6585e57366>Executing code with pragma pack directive</a>: We get 8 bytes instead of 5 bytes</div> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash>SampleStruct
flag: 1 Bytes
+
timeout: 4 Bytes
=
5 Bytes
sizeof struct:  8 Bytes
--</code></pre> </div> </div> <div class="admonitionblock tip"> <table> <tr> <td class=icon> <div class=title>Tip</div> </td> <td class=content> If we want to know the exact structure size we have to specify compiler how to align the memory, to do so we have <code>#pragma pack(n)</code> directive. </td> </tr> </table> </div> </div> </div> <div class=sect1> <h2 id=_pragma_pack_directive_in_c_struct>#pragma pack directive in C++ struct</h2> <div class=sectionbody> <div class=paragraph> <p>It is a preprocessor directive to indicate to compiler how to align data in memory.</p> </div> <div class=listingblock> <div class=title>Example with different memory alignment configurations</div> <div class=content> <pre class=highlight><code class=language-c++ data-lang=c++>&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>meta</span>">#&lt;span class="hljs-meta-keyword"><span class=hljs-title>include</span>&lt;/span> &lt;span class="hljs-meta-string">&<span class=hljs-title>lt</span>;</span>iostream&ampgt;&lt;/span>&lt;/span>

&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>using</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>namespace</span>&lt;/span> &lt;span class="hljs-built_in"><span class=hljs-title>std</span>&lt;/span>;</span>

&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>function</span>">&lt;span class="hljs-keyword"><span class=hljs-title>static</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>void</span>&lt;/span> &lt;span class="hljs-title"><span class=hljs-title>print</span>&lt;/span> &lt;span class="hljs-params">(&lt;span class="hljs-keyword"><span class=hljs-title>size_t</span>&lt;/span> <span class=hljs-title>sz</span>, &lt;span class="hljs-keyword"><span class=hljs-title>size_t</span>&lt;/span> <span class=hljs-title>sz_flag</span>, &lt;span class="hljs-keyword"><span class=hljs-title>size_t</span>&lt;/span> <span class=hljs-title>sz_timeout</span>)&lt;/span>
&lt;/span>{</span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>built_in</span>"><span class=hljs-title>cout</span>&lt;/span> &<span class=hljs-title>lt</span>;</span>&amplt; &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>string</span>">" <span class=hljs-title>flag</span>:</span> <span class=hljs-string>"&lt;/span> &amplt;&amplt; sz_flag &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> Bytes<span class=hljs-string>"&lt;/span>&amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> +<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> timeout: <span class=hljs-string>"&lt;/span> &amplt;&amplt; sz_timeout &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>Bytes<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> =<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> <span class=hljs-string>"&lt;/span> &amplt;&amplt; sz_timeout + sz_flag &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>Bytes<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> <span class=hljs-keyword>sizeof</span> struct:  <span class=hljs-string>"&lt;/span> &amplt;&amplt; sz &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> Bytes<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
}

&lt;span class="</span>hljs-meta<span class=hljs-string>">#&lt;span class="</span>hljs-meta-keyword<span class=hljs-string>">pragma&lt;/span> pack (1)&lt;/span>
&lt;span class="</span>hljs-class<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">struct&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">SampleStructPack1&lt;/span>
{&lt;/span>
    &lt;span class="</span>hljs-keyword<span class=hljs-string>">bool&lt;/span> flag;
    &lt;span class="</span>hljs-keyword<span class=hljs-string>">unsigned&lt;/span> &lt;span class="</span>hljs-keyword<span class=hljs-string>">int&lt;/span> timeout;
};
&lt;span class="</span>hljs-meta<span class=hljs-string>">#&lt;span class="</span>hljs-meta-keyword<span class=hljs-string>">pragma&lt;/span> pack(0)&lt;/span>

&lt;span class="</span>hljs-meta<span class=hljs-string>">#&lt;span class="</span>hljs-meta-keyword<span class=hljs-string>">pragma&lt;/span> pack (2)&lt;/span>
&lt;span class="</span>hljs-class<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">struct&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">SampleStructPack2&lt;/span>
{&lt;/span>
    &lt;span class="</span>hljs-keyword<span class=hljs-string>">bool&lt;/span> flag;
    &lt;span class="</span>hljs-keyword<span class=hljs-string>">unsigned&lt;/span> &lt;span class="</span>hljs-keyword<span class=hljs-string>">int&lt;/span> timeout;
};
&lt;span class="</span>hljs-meta<span class=hljs-string>">#&lt;span class="</span>hljs-meta-keyword<span class=hljs-string>">pragma&lt;/span> pack(0)&lt;/span>

&lt;span class="</span>hljs-meta<span class=hljs-string>">#&lt;span class="</span>hljs-meta-keyword<span class=hljs-string>">pragma&lt;/span> pack (4)&lt;/span>
&lt;span class="</span>hljs-class<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">struct&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">SampleStructPack4&lt;/span>
{&lt;/span>
    &lt;span class="</span>hljs-keyword<span class=hljs-string>">bool&lt;/span> flag;
    &lt;span class="</span>hljs-keyword<span class=hljs-string>">unsigned&lt;/span> &lt;span class="</span>hljs-keyword<span class=hljs-string>">int&lt;/span> timeout;
};
&lt;span class="</span>hljs-meta<span class=hljs-string>">#&lt;span class="</span>hljs-meta-keyword<span class=hljs-string>">pragma&lt;/span> pack(0)&lt;/span>


&lt;span class="</span>hljs-class<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">struct&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">SampleStruct&lt;/span>
{&lt;/span>
    &lt;span class="</span>hljs-keyword<span class=hljs-string>">bool&lt;/span> flag;
    &lt;span class="</span>hljs-keyword<span class=hljs-string>">unsigned&lt;/span> &lt;span class="</span>hljs-keyword<span class=hljs-string>">int&lt;/span> timeout;
};


&lt;span class="</span>hljs-function<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">int&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">main&lt;/span>&lt;span class="</span>hljs-params<span class=hljs-string>">(&lt;span class="</span>hljs-keyword<span class=hljs-string>">int&lt;/span> argc, &lt;span class="</span>hljs-keyword<span class=hljs-string>">char&lt;/span> *argv[])&lt;/span>
&lt;/span>{

    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>SampleStructPack1<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">print&lt;/span> (&lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStructPack1), &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStructPack1::flag), &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStructPack1::timeout));
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> -- <span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;

    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>SampleStructPack2<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">print&lt;/span> (&lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStructPack2), &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStructPack2::flag), &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStructPack2::timeout));

    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>SampleStructPack4<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">print&lt;/span> (&lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStructPack4), &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStructPack4::flag), &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStructPack4::timeout));

    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>SampleStruct<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">print&lt;/span> (&lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStruct), &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStruct::flag), &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(SampleStruct::timeout));
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> -- <span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;

    &lt;span class="</span>hljs-keyword<span class=hljs-string>">return&lt;/span> &lt;span class="</span>hljs-number<span class=hljs-string>">0&lt;/span>;
}</span></code></pre> </div> </div> <div class=listingblock> <div class=title><a href=https://coliru.stacked-crooked.com/a/7c18ee6585e57366>Executing code with pragma pack directive</a>, we have different results depending of pragma value.</div> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash>SampleStructPack1 &lt;b class=<span class=hljs-string>"conum"</span>>(1)&lt;/b>
 flag: 1 Bytes
 +
 timeout: 4Bytes
 =
 5Bytes
 sizeof struct:  5 Bytes
 --

SampleStructPack2 &lt;b class=<span class=hljs-string>"conum"</span>>(2)&lt;/b>
 flag: 1 Bytes
 +
 timeout: 4Bytes
 =
 5Bytes
 sizeof struct:  6 Bytes

SampleStructPack4 &lt;b class=<span class=hljs-string>"conum"</span>>(3)&lt;/b>
 flag: 1 Bytes
 +
 timeout: 4Bytes
 =
 5Bytes
 sizeof struct:  8 Bytes

SampleStruct &lt;b class=<span class=hljs-string>"conum"</span>>(4)&lt;/b>
 flag: 1 Bytes
 +
 timeout: 4Bytes
 =
 5Bytes
 sizeof struct:  8 Bytes</code></pre> </div> </div> <div class="arabic colist"> <ol> <li> <p>SampleStructPack1 <code>#pragma pack (1)</code>: It allocates 1 byte memory block, so our sample struct fits perfectly, in this case it is true that <code>4 + 1 = 5</code>.</p> </li> <li> <p>SampleStructPack2 <code>#pragma pack (2)</code>: Minimum block size is 2 bytes. Integer attribute fits because it just needs 2 blocks of 2 Bytes. Boolean attribute needs just 1 Byte, but minimum block size is 2 Bytes, that’s why total allocated memory is 6 bytes, <code>4 + 2 = 6</code>.</p> </li> <li> <p>SampleStructPack4 <code>#pragma pack (4)</code>: It is like previous one, but in this case we are wasting more memory for boolean attribute, it needs 1 Byte, but we are allocating 4 Bytes.</p> </li> <li> <p>SampleStruct (default compiler alignment): As you can see it behaves exactly like <code>#pragma pack (4)</code>, so we can deduct it is the default compiler alignment.</p> </li> </ol> </div> <div class="admonitionblock important"> <table> <tr> <td class=icon> <div class=title>Important</div> </td> <td class=content> Why don’t we always use smallest memory alignment (<code>#pragma pack (1)</code>) so we can save more memory? </td> </tr> </table> </div> <div class="admonitionblock warning"> <table> <tr> <td class=icon> <div class=title>Warning</div> </td> <td class=content> Because of performance loss. </td> </tr> </table> </div> </div> </div> <div class=sect1> <h2 id=_performance_test>Performance test</h2> <div class=sectionbody> <div class=paragraph> <p>The test will allocate same number of elements in arrays for each structure type (1, 2, 4).</p> </div> <div class=listingblock> <div class=title>Test results: <a href=https://coliru.stacked-crooked.com/a/954ad542659c7591>execute performance test</a></div> <div class=content> <pre class=highlight><code class=language-bash data-lang=bash>SampleStructPack1: 500000000000000000 bytes allocated &lt;span class=<span class=hljs-string>"hljs-keyword"</span>><span class=hljs-keyword>in</span>&lt;/span> 94311 nanoseconds
SampleStructPack2: 600000000000000000 bytes allocated &lt;span class=<span class=hljs-string>"hljs-keyword"</span>><span class=hljs-keyword>in</span>&lt;/span> 1777 nanoseconds
SampleStructPack4: 800000000000000000 bytes allocated &lt;span class=<span class=hljs-string>"hljs-keyword"</span>><span class=hljs-keyword>in</span>&lt;/span> 1519 nanoseconds</code></pre> </div> </div> <div class=paragraph> <p>As you can see, the smallest memory alignment spends more time allocating and releasing memory.</p> </div> <div class=listingblock> <div class=title>Performance test source code:</div> <div class=content> <pre class=highlight><code class=language-c++ data-lang=c++>&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>meta</span>">#&lt;span class="hljs-meta-keyword"><span class=hljs-title>include</span>&lt;/span> &lt;span class="hljs-meta-string">&<span class=hljs-title>lt</span>;</span>iostream&ampgt;&lt;/span>&lt;/span>
&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>meta</span>">#&lt;span class="hljs-meta-keyword"><span class=hljs-title>include</span>&lt;/span> &lt;span class="hljs-meta-string">&<span class=hljs-title>lt</span>;</span>chrono&ampgt;&lt;/span>&lt;/span>

&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>meta</span>">#&lt;span class="hljs-meta-keyword"><span class=hljs-title>pragma</span>&lt;/span> <span class=hljs-title>pack</span> (1)&lt;/span>
&lt;span class="hljs-class">&lt;span class="hljs-keyword"><span class=hljs-title>struct</span>&lt;/span> &lt;span class="hljs-title"><span class=hljs-title>SampleStructPack1</span>&lt;/span>
{</span>&lt;/span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>bool</span>&lt;/span> <span class=hljs-title>flag</span>;</span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>unsigned</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>int</span>&lt;/span> <span class=hljs-title>timeout</span>;</span>
};
&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>meta</span>">#&lt;span class="hljs-meta-keyword"><span class=hljs-title>pragma</span>&lt;/span> <span class=hljs-title>pack</span>(0)&lt;/span>

&lt;span class="hljs-meta">#&lt;span class="hljs-meta-keyword"><span class=hljs-title>pragma</span>&lt;/span> <span class=hljs-title>pack</span> (2)&lt;/span>
&lt;span class="hljs-class">&lt;span class="hljs-keyword"><span class=hljs-title>struct</span>&lt;/span> &lt;span class="hljs-title"><span class=hljs-title>SampleStructPack2</span>&lt;/span>
{</span>&lt;/span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>bool</span>&lt;/span> <span class=hljs-title>flag</span>;</span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>unsigned</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>int</span>&lt;/span> <span class=hljs-title>timeout</span>;</span>
};
&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>meta</span>">#&lt;span class="hljs-meta-keyword"><span class=hljs-title>pragma</span>&lt;/span> <span class=hljs-title>pack</span>(0)&lt;/span>

&lt;span class="hljs-meta">#&lt;span class="hljs-meta-keyword"><span class=hljs-title>pragma</span>&lt;/span> <span class=hljs-title>pack</span> (4)&lt;/span>
&lt;span class="hljs-class">&lt;span class="hljs-keyword"><span class=hljs-title>struct</span>&lt;/span> &lt;span class="hljs-title"><span class=hljs-title>SampleStructPack4</span>&lt;/span>
{</span>&lt;/span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>bool</span>&lt;/span> <span class=hljs-title>flag</span>;</span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>unsigned</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>int</span>&lt;/span> <span class=hljs-title>timeout</span>;</span>
};
&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>meta</span>">#&lt;span class="hljs-meta-keyword"><span class=hljs-title>pragma</span>&lt;/span> <span class=hljs-title>pack</span>(0)&lt;/span>


&lt;span class="hljs-class">&lt;span class="hljs-keyword"><span class=hljs-title>struct</span>&lt;/span> &lt;span class="hljs-title"><span class=hljs-title>SampleStruct</span>&lt;/span>
{</span>&lt;/span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>bool</span>&lt;/span> <span class=hljs-title>flag</span>;</span>
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>unsigned</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>int</span>&lt;/span> <span class=hljs-title>timeout</span>;</span>
};

&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>static</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>const</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>long</span>&lt;/span> <span class=hljs-title>MAX_ELEMENTS</span> = &lt;span class="hljs-number">100000000000000000&lt;/span>;</span>
&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>using</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>namespace</span>&lt;/span> &lt;span class="hljs-built_in"><span class=hljs-title>std</span>&lt;/span>;</span>
&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>keyword</span>"><span class=hljs-title>using</span>&lt;/span> &lt;span class="hljs-keyword"><span class=hljs-title>namespace</span>&lt;/span> &lt;span class="hljs-built_in"><span class=hljs-title>std</span>&lt;/span>:</span>:chrono;

&lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>function</span>">&lt;span class="hljs-keyword"><span class=hljs-title>void</span>&lt;/span> &lt;span class="hljs-title"><span class=hljs-title>allocate1</span>&lt;/span>&lt;span class="hljs-params">()&lt;/span>
&lt;/span>{</span>
    SampleStructPack1 elements [MAX_ELEMENTS];
    &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>built_in</span>"><span class=hljs-title>cout</span>&lt;/span> &<span class=hljs-title>lt</span>;</span>&amplt; &lt;span <span class=hljs-class><span class=hljs-keyword>class</span>="<span class=hljs-title>hljs</span>-<span class=hljs-title>string</span>">"<span class=hljs-title>SampleStructPack1</span>:</span> <span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(elements) &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> bytes allocated<span class=hljs-string>"&lt;/span>;
}

&lt;span class="</span>hljs-function<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">void&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">allocate2&lt;/span>&lt;span class="</span>hljs-params<span class=hljs-string>">()&lt;/span>
&lt;/span>{
    SampleStructPack2 elements [MAX_ELEMENTS];
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>SampleStructPack2: <span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(elements) &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> bytes allocated<span class=hljs-string>"&lt;/span>;
}

&lt;span class="</span>hljs-function<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">void&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">allocate4&lt;/span>&lt;span class="</span>hljs-params<span class=hljs-string>">()&lt;/span>
&lt;/span>{
    SampleStructPack4 elements [MAX_ELEMENTS];
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span>SampleStructPack4: <span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-keyword<span class=hljs-string>">sizeof&lt;/span>(elements) &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> bytes allocated<span class=hljs-string>"&lt;/span>;
}

&lt;span class="</span>hljs-function<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">void&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">chrono1&lt;/span>&lt;span class="</span>hljs-params<span class=hljs-string>">()&lt;/span>
&lt;/span>{
    &lt;span class="</span>hljs-keyword<span class=hljs-string>">auto&lt;/span> &lt;span class="</span>hljs-built_in<span class=hljs-string>">begin&lt;/span> = high_resolution_clock::now() ;
    allocate1();
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> in <span class=hljs-string>"&lt;/span> &amplt;&amplt; duration_cast&amplt;nanoseconds&ampgt;(high_resolution_clock::now() - &lt;span class="</span>hljs-built_in<span class=hljs-string>">begin&lt;/span>).count() &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> nanoseconds<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
}

&lt;span class="</span>hljs-function<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">void&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">chrono2&lt;/span>&lt;span class="</span>hljs-params<span class=hljs-string>">()&lt;/span>
&lt;/span>{
    &lt;span class="</span>hljs-keyword<span class=hljs-string>">auto&lt;/span> &lt;span class="</span>hljs-built_in<span class=hljs-string>">begin&lt;/span> = high_resolution_clock::now() ;
    allocate2();
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> in <span class=hljs-string>"&lt;/span> &amplt;&amplt; duration_cast&amplt;nanoseconds&ampgt;(high_resolution_clock::now() - &lt;span class="</span>hljs-built_in<span class=hljs-string>">begin&lt;/span>).count() &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> nanoseconds<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
}

&lt;span class="</span>hljs-function<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">void&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">chrono4&lt;/span>&lt;span class="</span>hljs-params<span class=hljs-string>">()&lt;/span>
&lt;/span>{
    &lt;span class="</span>hljs-keyword<span class=hljs-string>">auto&lt;/span> &lt;span class="</span>hljs-built_in<span class=hljs-string>">begin&lt;/span> = high_resolution_clock::now() ;
    allocate4();
    &lt;span class="</span>hljs-built_in<span class=hljs-string>">cout&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> in <span class=hljs-string>"&lt;/span> &amplt;&amplt; duration_cast&amplt;nanoseconds&ampgt;(high_resolution_clock::now() - &lt;span class="</span>hljs-built_in<span class=hljs-string>">begin&lt;/span>).count() &amplt;&amplt; &lt;span class="</span>hljs-<span class=hljs-built_in>string</span><span class=hljs-string>">"</span> nanoseconds<span class=hljs-string>"&lt;/span> &amplt;&amplt; &lt;span class="</span>hljs-built_in<span class=hljs-string>">endl&lt;/span>;
}


&lt;span class="</span>hljs-function<span class=hljs-string>">&lt;span class="</span>hljs-keyword<span class=hljs-string>">int&lt;/span> &lt;span class="</span>hljs-title<span class=hljs-string>">main&lt;/span>&lt;span class="</span>hljs-params<span class=hljs-string>">(&lt;span class="</span>hljs-keyword<span class=hljs-string>">int&lt;/span> argc, &lt;span class="</span>hljs-keyword<span class=hljs-string>">char&lt;/span> *argv[])&lt;/span>
&lt;/span>{
    chrono1();
    chrono2();
    chrono4();

    &lt;span class="</span>hljs-keyword<span class=hljs-string>">return&lt;/span> &lt;span class="</span>hljs-number<span class=hljs-string>">0&lt;/span>;
}</span></code></pre> </div> </div> </div> </div></div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,(function(a,b,c,d,e,f,g,h){return {post:{sectids:a,"toc-placement":"auto",notitle:a,stylesheet:a,webfonts:a,prewrap:a,"attribute-undefined":"drop-line","attribute-missing":"skip","iconfont-remote":a,"caution-caption":"Caution","important-caption":"Important","note-caption":"Note","tip-caption":"Tip","warning-caption":"Warning","example-caption":"Example","figure-caption":"Figure","table-caption":"Table","toc-title":"Table of Contents","section-refsig":"Section","part-refsig":"Part","chapter-refsig":"Chapter","appendix-refsig":c,"appendix-caption":c,"untitled-label":"Untitled","version-label":"Version","last-update-label":"Last updated",docfile:"cpp-pragma-pack.en.adoc",docdir:a,docfilesuffix:".adoc",docname:"cpp-pragma-pack.en",embedded:a,asciidoctor:a,"asciidoctor-version":"2.0.10","safe-mode-name":"secure","safe-mode-secure":a,"safe-mode-level":20,"max-include-depth":64,"user-home":d,backend:"html5","max-attribute-value-size":4096,linkcss:a,doctype:"article",htmlsyntax:b,"backend-html5-doctype-article":a,"doctype-article":a,"backend-html5":a,outfilesuffix:".html",filetype:b,"filetype-html":a,"basebackend-html-doctype-article":a,"basebackend-html":a,basebackend:b,stylesdir:d,iconsdir:".\u002Fimages\u002Ficons",localdate:e,localyear:f,localtime:"01:37:27 +0200",localdatetime:"2020-04-19 01:37:27 +0200",docdate:e,docyear:f,doctime:"00:56:12 +0200",docdatetime:"2020-04-19 00:56:12 +0200",doctitle:g,date:"2012\u002F11\u002F26 12:00:00",keywords:["C++","Performance","Compilers","Memory"],lang:"en",toc:a,description:h,authorcount:0,title:g,summary:h,html:"\u003Cdiv id=\"toc\" class=\"toc\"\u003E\n\u003Cdiv id=\"toctitle\"\u003ETable of Contents\u003C\u002Fdiv\u003E\n\u003Cul class=\"sectlevel1\"\u003E\n\u003Cli\u003E\u003Ca href=\"#_struct_example\"\u003EStruct example\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_pragma_pack_directive_in_c_struct\"\u003E#pragma pack directive in C++ struct\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#_performance_test\"\u003EPerformance test\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv id=\"preamble\"\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EA C++ struct is an element that groups attributes with different types so we can manipulate them all together using same reference. It is like a class with public visibility by default for functions and attributes.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EIf we want to work in a lower level, closer to machine, it might be useful understand how that data structure is stored in memory and how to control that mapping.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_struct_example\"\u003EStruct example\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EIt has two attributes: an integer (4 bytes) and a boolean (1 byte).\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-c++\" data-lang=\"c++\"\u003E&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Eclass\u003C\u002Fspan\u003E\"&gt;&lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Estruct\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-title\"&gt;\u003Cspan class=\"hljs-title\"\u003ESampleStruct\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n{\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Ebool\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Eflag\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Eunsigned\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Eint\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Etimeout\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n};\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EIf we get the instance size using \u003Ccode\u003Esizeof\u003C\u002Fcode\u003E we should get 5 bytes size and memory would be like:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv id=\"5-bytes\" class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fc-mem-struct\u002F5b.png\" alt=\"5Bytes\" width=\"200\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"title\"\u003EFigure 1. 5 bytes struct which uses 5 bytes in memory\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003E\u003Cstrong\u003EBut\u003C\u002Fstrong\u003E is not that simple, memory alignment depends on compiler and system. We will learn how to control compiler alignment policy, so we can avoid getting unexpected allocation memory sizes.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EFor example, in my local host, if I get the \u003Ccode\u003Esizeof\u003C\u002Fcode\u003E the previous structure without \u003Ccode\u003Epragma\u003C\u002Fcode\u003E declarations, \u003Cstrong\u003EI get a 8 bytes size\u003C\u002Fstrong\u003E. We are getting 8 Bytes instead of expected 5 Bytes because the compiler allocates more memory at the end of structure so it fits in 2n bytes blocks. Memory actually looks like:\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv id=\"8-bytes\" class=\"imageblock center\"\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cimg src=\"\u002Fimages\u002Fc-mem-struct\u002F8b.png\" alt=\"5Bytes\" width=\"200\" height=\"auto\"\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"title\"\u003EWithout pragma: 5 bytes structure that actually spends 8 bytes in memory\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003EIt prints structure and attributes size, in this case \u003Cstrong\u003E4 + 1 is not 5\u003C\u002Fstrong\u003E\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-c++\" data-lang=\"c++\"\u003E&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Emeta\u003C\u002Fspan\u003E\"&gt;#&lt;span class=\"hljs-meta-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Einclude\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;  &lt;span class=\"hljs-meta-string\"&gt;&amp;\u003Cspan class=\"hljs-title\"\u003Elt\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003Eiostream&amp;gt;&lt;\u002Fspan&gt;&lt;\u002Fspan&gt;\n\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Eusing\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Enamespace\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-built_in\"&gt;\u003Cspan class=\"hljs-title\"\u003Estd\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;;\u003C\u002Fspan\u003E\n\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Eclass\u003C\u002Fspan\u003E\"&gt;&lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Estruct\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-title\"&gt;\u003Cspan class=\"hljs-title\"\u003ESampleStruct\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n{\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Ebool\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Eflag\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Eunsigned\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Eint\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Etimeout\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n};\n\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Efunction\u003C\u002Fspan\u003E\"&gt;&lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Estatic\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Evoid\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-title\"&gt;\u003Cspan class=\"hljs-title\"\u003Eprint\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-params\"&gt;(&lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Esize_t\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Esz\u003C\u002Fspan\u003E, &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Esize_t\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Esz_flag\u003C\u002Fspan\u003E, &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Esize_t\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Esz_timeout\u003C\u002Fspan\u003E)&lt;\u002Fspan&gt;\n&lt;\u002Fspan&gt;{\u003C\u002Fspan\u003E\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ebuilt_in\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Ecout\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &amp;\u003Cspan class=\"hljs-title\"\u003Elt\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E&amp;lt; &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Estring\u003C\u002Fspan\u003E\"&gt;\"\\\u003Cspan class=\"hljs-title\"\u003Etflag\u003C\u002Fspan\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; sz_flag &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E Bytes\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E\\t+\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E\\ttimeout: \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; sz_timeout &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E Bytes\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E\\t=\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E\\t\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; sz_timeout + sz_flag &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E Bytes\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-keyword\"\u003Esizeof\u003C\u002Fspan\u003E struct:  \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; sz &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E Bytes\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n}\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-function\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;int&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;main&lt;\u002Fspan&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-params\u003Cspan class=\"hljs-string\"\u003E\"&gt;(&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;int&lt;\u002Fspan&gt; argc, &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;char&lt;\u002Fspan&gt; *argv[])&lt;\u002Fspan&gt;\n&lt;\u002Fspan&gt;{\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003ESampleStruct\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;print&lt;\u002Fspan&gt; (&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStruct), &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStruct::flag), &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStruct::timeout));\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E -- \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;return&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-number\u003Cspan class=\"hljs-string\"\u003E\"&gt;0&lt;\u002Fspan&gt;;\n}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F7c18ee6585e57366\"\u003EExecuting code with pragma pack directive\u003C\u002Fa\u003E: We get 8 bytes instead of 5 bytes\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003ESampleStruct\nflag: 1 Bytes\n+\ntimeout: 4 Bytes\n=\n5 Bytes\nsizeof struct:  8 Bytes\n--\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"admonitionblock tip\"\u003E\n\u003Ctable\u003E\n\u003Ctr\u003E\n\u003Ctd class=\"icon\"\u003E\n\u003Cdiv class=\"title\"\u003ETip\u003C\u002Fdiv\u003E\n\u003C\u002Ftd\u003E\n\u003Ctd class=\"content\"\u003E\nIf we want to know the exact structure size we have to specify compiler how to align the memory, to do so we have \u003Ccode\u003E#pragma pack(n)\u003C\u002Fcode\u003E directive.\n\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_pragma_pack_directive_in_c_struct\"\u003E#pragma pack directive in C++ struct\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EIt is a preprocessor directive to indicate to compiler how to align data in memory.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003EExample with different memory alignment configurations\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-c++\" data-lang=\"c++\"\u003E&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Emeta\u003C\u002Fspan\u003E\"&gt;#&lt;span class=\"hljs-meta-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Einclude\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-meta-string\"&gt;&amp;\u003Cspan class=\"hljs-title\"\u003Elt\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003Eiostream&amp;gt;&lt;\u002Fspan&gt;&lt;\u002Fspan&gt;\n\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Eusing\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Enamespace\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-built_in\"&gt;\u003Cspan class=\"hljs-title\"\u003Estd\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;;\u003C\u002Fspan\u003E\n\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Efunction\u003C\u002Fspan\u003E\"&gt;&lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Estatic\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Evoid\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-title\"&gt;\u003Cspan class=\"hljs-title\"\u003Eprint\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-params\"&gt;(&lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Esize_t\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Esz\u003C\u002Fspan\u003E, &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Esize_t\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Esz_flag\u003C\u002Fspan\u003E, &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Esize_t\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Esz_timeout\u003C\u002Fspan\u003E)&lt;\u002Fspan&gt;\n&lt;\u002Fspan&gt;{\u003C\u002Fspan\u003E\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ebuilt_in\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Ecout\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &amp;\u003Cspan class=\"hljs-title\"\u003Elt\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E&amp;lt; &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Estring\u003C\u002Fspan\u003E\"&gt;\" \u003Cspan class=\"hljs-title\"\u003Eflag\u003C\u002Fspan\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; sz_flag &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E Bytes\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt;&amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E +\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E timeout: \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; sz_timeout &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003EBytes\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E =\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; sz_timeout + sz_flag &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003EBytes\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Esizeof\u003C\u002Fspan\u003E struct:  \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; sz &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E Bytes\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n}\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta\u003Cspan class=\"hljs-string\"\u003E\"&gt;#&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;pragma&lt;\u002Fspan&gt; pack (1)&lt;\u002Fspan&gt;\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-class\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;struct&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;SampleStructPack1&lt;\u002Fspan&gt;\n{&lt;\u002Fspan&gt;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;bool&lt;\u002Fspan&gt; flag;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;unsigned&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;int&lt;\u002Fspan&gt; timeout;\n};\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta\u003Cspan class=\"hljs-string\"\u003E\"&gt;#&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;pragma&lt;\u002Fspan&gt; pack(0)&lt;\u002Fspan&gt;\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta\u003Cspan class=\"hljs-string\"\u003E\"&gt;#&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;pragma&lt;\u002Fspan&gt; pack (2)&lt;\u002Fspan&gt;\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-class\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;struct&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;SampleStructPack2&lt;\u002Fspan&gt;\n{&lt;\u002Fspan&gt;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;bool&lt;\u002Fspan&gt; flag;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;unsigned&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;int&lt;\u002Fspan&gt; timeout;\n};\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta\u003Cspan class=\"hljs-string\"\u003E\"&gt;#&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;pragma&lt;\u002Fspan&gt; pack(0)&lt;\u002Fspan&gt;\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta\u003Cspan class=\"hljs-string\"\u003E\"&gt;#&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;pragma&lt;\u002Fspan&gt; pack (4)&lt;\u002Fspan&gt;\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-class\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;struct&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;SampleStructPack4&lt;\u002Fspan&gt;\n{&lt;\u002Fspan&gt;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;bool&lt;\u002Fspan&gt; flag;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;unsigned&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;int&lt;\u002Fspan&gt; timeout;\n};\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta\u003Cspan class=\"hljs-string\"\u003E\"&gt;#&lt;span class=\"\u003C\u002Fspan\u003Ehljs-meta-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;pragma&lt;\u002Fspan&gt; pack(0)&lt;\u002Fspan&gt;\n\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-class\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;struct&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;SampleStruct&lt;\u002Fspan&gt;\n{&lt;\u002Fspan&gt;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;bool&lt;\u002Fspan&gt; flag;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;unsigned&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;int&lt;\u002Fspan&gt; timeout;\n};\n\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-function\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;int&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;main&lt;\u002Fspan&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-params\u003Cspan class=\"hljs-string\"\u003E\"&gt;(&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;int&lt;\u002Fspan&gt; argc, &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;char&lt;\u002Fspan&gt; *argv[])&lt;\u002Fspan&gt;\n&lt;\u002Fspan&gt;{\n\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003ESampleStructPack1\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;print&lt;\u002Fspan&gt; (&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStructPack1), &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStructPack1::flag), &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStructPack1::timeout));\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E -- \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003ESampleStructPack2\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;print&lt;\u002Fspan&gt; (&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStructPack2), &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStructPack2::flag), &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStructPack2::timeout));\n\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003ESampleStructPack4\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;print&lt;\u002Fspan&gt; (&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStructPack4), &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStructPack4::flag), &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStructPack4::timeout));\n\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003ESampleStruct\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;print&lt;\u002Fspan&gt; (&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStruct), &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStruct::flag), &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(SampleStruct::timeout));\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E -- \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;return&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-number\u003Cspan class=\"hljs-string\"\u003E\"&gt;0&lt;\u002Fspan&gt;;\n}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003E\u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F7c18ee6585e57366\"\u003EExecuting code with pragma pack directive\u003C\u002Fa\u003E, we have different results depending of pragma value.\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003ESampleStructPack1 &lt;b class=\u003Cspan class=\"hljs-string\"\u003E\"conum\"\u003C\u002Fspan\u003E&gt;(1)&lt;\u002Fb&gt;\n flag: 1 Bytes\n +\n timeout: 4Bytes\n =\n 5Bytes\n sizeof struct:  5 Bytes\n --\n\nSampleStructPack2 &lt;b class=\u003Cspan class=\"hljs-string\"\u003E\"conum\"\u003C\u002Fspan\u003E&gt;(2)&lt;\u002Fb&gt;\n flag: 1 Bytes\n +\n timeout: 4Bytes\n =\n 5Bytes\n sizeof struct:  6 Bytes\n\nSampleStructPack4 &lt;b class=\u003Cspan class=\"hljs-string\"\u003E\"conum\"\u003C\u002Fspan\u003E&gt;(3)&lt;\u002Fb&gt;\n flag: 1 Bytes\n +\n timeout: 4Bytes\n =\n 5Bytes\n sizeof struct:  8 Bytes\n\nSampleStruct &lt;b class=\u003Cspan class=\"hljs-string\"\u003E\"conum\"\u003C\u002Fspan\u003E&gt;(4)&lt;\u002Fb&gt;\n flag: 1 Bytes\n +\n timeout: 4Bytes\n =\n 5Bytes\n sizeof struct:  8 Bytes\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"colist arabic\"\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003ESampleStructPack1 \u003Ccode\u003E#pragma pack (1)\u003C\u002Fcode\u003E: It allocates 1 byte memory block, so our sample struct fits perfectly, in this case it is true that \u003Ccode\u003E4 + 1 = 5\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ESampleStructPack2 \u003Ccode\u003E#pragma pack (2)\u003C\u002Fcode\u003E: Minimum block size is 2 bytes. Integer attribute fits because it just needs 2 blocks of 2 Bytes. Boolean attribute needs just 1 Byte, but minimum block size is 2 Bytes, that&#8217;s why total allocated memory is 6 bytes, \u003Ccode\u003E4 + 2 = 6\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ESampleStructPack4 \u003Ccode\u003E#pragma pack (4)\u003C\u002Fcode\u003E: It is like previous one, but in this case we are wasting more memory for boolean attribute, it needs 1 Byte, but we are allocating 4 Bytes.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ESampleStruct (default compiler alignment): As you can see it behaves exactly like \u003Ccode\u003E#pragma pack (4)\u003C\u002Fcode\u003E, so we can deduct it is the default compiler alignment.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"admonitionblock important\"\u003E\n\u003Ctable\u003E\n\u003Ctr\u003E\n\u003Ctd class=\"icon\"\u003E\n\u003Cdiv class=\"title\"\u003EImportant\u003C\u002Fdiv\u003E\n\u003C\u002Ftd\u003E\n\u003Ctd class=\"content\"\u003E\nWhy don&#8217;t we always use smallest memory alignment (\u003Ccode\u003E#pragma pack (1)\u003C\u002Fcode\u003E) so we can save more memory?\n\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"admonitionblock warning\"\u003E\n\u003Ctable\u003E\n\u003Ctr\u003E\n\u003Ctd class=\"icon\"\u003E\n\u003Cdiv class=\"title\"\u003EWarning\u003C\u002Fdiv\u003E\n\u003C\u002Ftd\u003E\n\u003Ctd class=\"content\"\u003E\nBecause of performance loss.\n\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"sect1\"\u003E\n\u003Ch2 id=\"_performance_test\"\u003EPerformance test\u003C\u002Fh2\u003E\n\u003Cdiv class=\"sectionbody\"\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EThe test will allocate same number of elements in arrays for each structure type (1, 2, 4).\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003ETest results: \u003Ca href=\"https:\u002F\u002Fcoliru.stacked-crooked.com\u002Fa\u002F954ad542659c7591\"\u003Eexecute performance test\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-bash\" data-lang=\"bash\"\u003ESampleStructPack1: 500000000000000000 bytes allocated &lt;span class=\u003Cspan class=\"hljs-string\"\u003E\"hljs-keyword\"\u003C\u002Fspan\u003E&gt;\u003Cspan class=\"hljs-keyword\"\u003Ein\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; 94311 nanoseconds\nSampleStructPack2: 600000000000000000 bytes allocated &lt;span class=\u003Cspan class=\"hljs-string\"\u003E\"hljs-keyword\"\u003C\u002Fspan\u003E&gt;\u003Cspan class=\"hljs-keyword\"\u003Ein\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; 1777 nanoseconds\nSampleStructPack4: 800000000000000000 bytes allocated &lt;span class=\u003Cspan class=\"hljs-string\"\u003E\"hljs-keyword\"\u003C\u002Fspan\u003E&gt;\u003Cspan class=\"hljs-keyword\"\u003Ein\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; 1519 nanoseconds\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"paragraph\"\u003E\n\u003Cp\u003EAs you can see, the smallest memory alignment spends more time allocating and releasing memory.\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"listingblock\"\u003E\n\u003Cdiv class=\"title\"\u003EPerformance test source code:\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"content\"\u003E\n\u003Cpre class=\"highlight\"\u003E\u003Ccode class=\"language-c++\" data-lang=\"c++\"\u003E&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Emeta\u003C\u002Fspan\u003E\"&gt;#&lt;span class=\"hljs-meta-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Einclude\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-meta-string\"&gt;&amp;\u003Cspan class=\"hljs-title\"\u003Elt\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003Eiostream&amp;gt;&lt;\u002Fspan&gt;&lt;\u002Fspan&gt;\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Emeta\u003C\u002Fspan\u003E\"&gt;#&lt;span class=\"hljs-meta-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Einclude\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-meta-string\"&gt;&amp;\u003Cspan class=\"hljs-title\"\u003Elt\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003Echrono&amp;gt;&lt;\u002Fspan&gt;&lt;\u002Fspan&gt;\n\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Emeta\u003C\u002Fspan\u003E\"&gt;#&lt;span class=\"hljs-meta-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Epragma\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Epack\u003C\u002Fspan\u003E (1)&lt;\u002Fspan&gt;\n&lt;span class=\"hljs-class\"&gt;&lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Estruct\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-title\"&gt;\u003Cspan class=\"hljs-title\"\u003ESampleStructPack1\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n{\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Ebool\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Eflag\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Eunsigned\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Eint\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Etimeout\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n};\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Emeta\u003C\u002Fspan\u003E\"&gt;#&lt;span class=\"hljs-meta-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Epragma\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Epack\u003C\u002Fspan\u003E(0)&lt;\u002Fspan&gt;\n\n&lt;span class=\"hljs-meta\"&gt;#&lt;span class=\"hljs-meta-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Epragma\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Epack\u003C\u002Fspan\u003E (2)&lt;\u002Fspan&gt;\n&lt;span class=\"hljs-class\"&gt;&lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Estruct\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-title\"&gt;\u003Cspan class=\"hljs-title\"\u003ESampleStructPack2\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n{\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Ebool\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Eflag\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Eunsigned\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Eint\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Etimeout\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n};\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Emeta\u003C\u002Fspan\u003E\"&gt;#&lt;span class=\"hljs-meta-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Epragma\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Epack\u003C\u002Fspan\u003E(0)&lt;\u002Fspan&gt;\n\n&lt;span class=\"hljs-meta\"&gt;#&lt;span class=\"hljs-meta-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Epragma\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Epack\u003C\u002Fspan\u003E (4)&lt;\u002Fspan&gt;\n&lt;span class=\"hljs-class\"&gt;&lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Estruct\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-title\"&gt;\u003Cspan class=\"hljs-title\"\u003ESampleStructPack4\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n{\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Ebool\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Eflag\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Eunsigned\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Eint\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Etimeout\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n};\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Emeta\u003C\u002Fspan\u003E\"&gt;#&lt;span class=\"hljs-meta-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Epragma\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Epack\u003C\u002Fspan\u003E(0)&lt;\u002Fspan&gt;\n\n\n&lt;span class=\"hljs-class\"&gt;&lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Estruct\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-title\"&gt;\u003Cspan class=\"hljs-title\"\u003ESampleStruct\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n{\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Ebool\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Eflag\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Eunsigned\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Eint\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003Etimeout\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E\n};\n\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Estatic\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Econst\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Elong\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; \u003Cspan class=\"hljs-title\"\u003EMAX_ELEMENTS\u003C\u002Fspan\u003E = &lt;span class=\"hljs-number\"&gt;100000000000000000&lt;\u002Fspan&gt;;\u003C\u002Fspan\u003E\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Eusing\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Enamespace\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-built_in\"&gt;\u003Cspan class=\"hljs-title\"\u003Estd\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;;\u003C\u002Fspan\u003E\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ekeyword\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Eusing\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Enamespace\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-built_in\"&gt;\u003Cspan class=\"hljs-title\"\u003Estd\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;:\u003C\u002Fspan\u003E:chrono;\n\n&lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Efunction\u003C\u002Fspan\u003E\"&gt;&lt;span class=\"hljs-keyword\"&gt;\u003Cspan class=\"hljs-title\"\u003Evoid\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &lt;span class=\"hljs-title\"&gt;\u003Cspan class=\"hljs-title\"\u003Eallocate1\u003C\u002Fspan\u003E&lt;\u002Fspan&gt;&lt;span class=\"hljs-params\"&gt;()&lt;\u002Fspan&gt;\n&lt;\u002Fspan&gt;{\u003C\u002Fspan\u003E\n    SampleStructPack1 elements [MAX_ELEMENTS];\n    &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Ebuilt_in\u003C\u002Fspan\u003E\"&gt;\u003Cspan class=\"hljs-title\"\u003Ecout\u003C\u002Fspan\u003E&lt;\u002Fspan&gt; &amp;\u003Cspan class=\"hljs-title\"\u003Elt\u003C\u002Fspan\u003E;\u003C\u002Fspan\u003E&amp;lt; &lt;span \u003Cspan class=\"hljs-class\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E=\"\u003Cspan class=\"hljs-title\"\u003Ehljs\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-title\"\u003Estring\u003C\u002Fspan\u003E\"&gt;\"\u003Cspan class=\"hljs-title\"\u003ESampleStructPack1\u003C\u002Fspan\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(elements) &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E bytes allocated\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt;;\n}\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-function\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;void&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;allocate2&lt;\u002Fspan&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-params\u003Cspan class=\"hljs-string\"\u003E\"&gt;()&lt;\u002Fspan&gt;\n&lt;\u002Fspan&gt;{\n    SampleStructPack2 elements [MAX_ELEMENTS];\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003ESampleStructPack2: \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(elements) &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E bytes allocated\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt;;\n}\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-function\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;void&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;allocate4&lt;\u002Fspan&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-params\u003Cspan class=\"hljs-string\"\u003E\"&gt;()&lt;\u002Fspan&gt;\n&lt;\u002Fspan&gt;{\n    SampleStructPack4 elements [MAX_ELEMENTS];\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003ESampleStructPack4: \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;sizeof&lt;\u002Fspan&gt;(elements) &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E bytes allocated\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt;;\n}\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-function\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;void&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;chrono1&lt;\u002Fspan&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-params\u003Cspan class=\"hljs-string\"\u003E\"&gt;()&lt;\u002Fspan&gt;\n&lt;\u002Fspan&gt;{\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;auto&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;begin&lt;\u002Fspan&gt; = high_resolution_clock::now() ;\n    allocate1();\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E in \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; duration_cast&amp;lt;nanoseconds&amp;gt;(high_resolution_clock::now() - &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;begin&lt;\u002Fspan&gt;).count() &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E nanoseconds\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n}\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-function\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;void&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;chrono2&lt;\u002Fspan&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-params\u003Cspan class=\"hljs-string\"\u003E\"&gt;()&lt;\u002Fspan&gt;\n&lt;\u002Fspan&gt;{\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;auto&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;begin&lt;\u002Fspan&gt; = high_resolution_clock::now() ;\n    allocate2();\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E in \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; duration_cast&amp;lt;nanoseconds&amp;gt;(high_resolution_clock::now() - &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;begin&lt;\u002Fspan&gt;).count() &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E nanoseconds\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n}\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-function\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;void&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;chrono4&lt;\u002Fspan&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-params\u003Cspan class=\"hljs-string\"\u003E\"&gt;()&lt;\u002Fspan&gt;\n&lt;\u002Fspan&gt;{\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;auto&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;begin&lt;\u002Fspan&gt; = high_resolution_clock::now() ;\n    allocate4();\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;cout&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E in \u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; duration_cast&amp;lt;nanoseconds&amp;gt;(high_resolution_clock::now() - &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;begin&lt;\u002Fspan&gt;).count() &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-\u003Cspan class=\"hljs-built_in\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-string\"\u003E\"&gt;\"\u003C\u002Fspan\u003E nanoseconds\u003Cspan class=\"hljs-string\"\u003E\"&lt;\u002Fspan&gt; &amp;lt;&amp;lt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-built_in\u003Cspan class=\"hljs-string\"\u003E\"&gt;endl&lt;\u002Fspan&gt;;\n}\n\n\n&lt;span class=\"\u003C\u002Fspan\u003Ehljs-function\u003Cspan class=\"hljs-string\"\u003E\"&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;int&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-title\u003Cspan class=\"hljs-string\"\u003E\"&gt;main&lt;\u002Fspan&gt;&lt;span class=\"\u003C\u002Fspan\u003Ehljs-params\u003Cspan class=\"hljs-string\"\u003E\"&gt;(&lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;int&lt;\u002Fspan&gt; argc, &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;char&lt;\u002Fspan&gt; *argv[])&lt;\u002Fspan&gt;\n&lt;\u002Fspan&gt;{\n    chrono1();\n    chrono2();\n    chrono4();\n\n    &lt;span class=\"\u003C\u002Fspan\u003Ehljs-keyword\u003Cspan class=\"hljs-string\"\u003E\"&gt;return&lt;\u002Fspan&gt; &lt;span class=\"\u003C\u002Fspan\u003Ehljs-number\u003Cspan class=\"hljs-string\"\u003E\"&gt;0&lt;\u002Fspan&gt;;\n}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E",slug:"cpp-pragma-pack"}}}("","html","Appendix",".","2020-04-19","2020","C++ Struct memory alignment","Understanding pragma pack preprocessor directive and how it affects to memory alignment"))]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.d2aaf6fd.js"}catch(e){main="/client/legacy/client.75e06f39.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <script async defer> (function (i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date(); a = s.createElement(o),
			m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
		})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

		ga('create', 'UA-1328360-10', 'auto');
		ga('send', 'pageview'); </script> 